/*! Bundled license information:

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.6.1
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2022-08-26T17:52Z
   *)

headroom.js/dist/headroom.js:
  (*!
   * headroom.js v0.12.0 - Give your page some headroom. Hide your header until you need it
   * Copyright (c) 2020 Nick Williams - http://wicky.nillia.ms/headroom.js
   * License: MIT
   *)

get-size/get-size.js:
  (*!
   * getSize v2.0.3
   * measure size of elements
   * MIT license
   *)

outlayer/outlayer.js:
  (*!
   * Outlayer v2.1.1
   * the brains and guts of a layout library
   * MIT license
   *)

masonry-layout/masonry.js:
  (*!
   * Masonry v4.2.2
   * Cascading grid layout library
   * https://masonry.desandro.com
   * MIT License
   * by David DeSandro
   *)

isotope-layout/js/layout-modes/masonry.js:
  (*!
   * Masonry layout mode
   * sub-classes Masonry
   * https://masonry.desandro.com
   *)

isotope-layout/js/isotope.js:
  (*!
   * Isotope v3.0.6
   *
   * Licensed GPLv3 for open source use
   * or Isotope Commercial License for commercial use
   *
   * https://isotope.metafizzy.co
   * Copyright 2010-2018 Metafizzy
   *)

bootstrap/dist/js/bootstrap.bundle.js:
  (*!
    * Bootstrap v5.3.8 (https://getbootstrap.com/)
    * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*//*! Bundled license information:

tify/dist/tify.js:
  (*!
  TIFY v0.34.5
  (c) 2017-2025 Göttingen State and University Library (https://www.sub.uni-goettingen.de/)
  AGPL-3.0
  https://tify.rocks/
  *)
  (**
  * @vue/shared v3.5.18
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
  (*! #__NO_SIDE_EFFECTS__ *)
  (**
  * @vue/reactivity v3.5.18
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
  (**
  * @vue/runtime-core v3.5.18
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)

tify/dist/tify.js:
  (**
  * @vue/runtime-dom v3.5.18
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
  (*! openseadragon 5.0.1 *)
  (*! Built on 2024-12-09 *)
  (*! Git commit: v5.0.1-0-480de92d *)
  (*! http://openseadragon.github.io *)
  (*! License: http://openseadragon.github.io/license/ *)
*/(()=>{var r,d,b=Object.create,h=Object.defineProperty,A=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,k=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports},f=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of i(t))!E.call(e,o)&&o!==n&&h(e,o,{get:()=>t[o],enumerable:!(s=A(t,o))||s.enumerable});return e},o=(e,t,n)=>(n=e!=null?b(k(e)):{},f(t||!e||!e.__esModule?h(n,"default",{value:e,enumerable:!0}):n,e)),l=e({"node_modules/jquery/dist/jquery.js"(e,t){(function(e,n){"use strict";typeof t=="object"&&typeof t.exports=="object"?t.exports=e.document?n(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(e)})(typeof window!="undefined"?window:e,function(e,t){/*!
           * Sizzle CSS Selector Engine v2.3.6
           * https://sizzlejs.com/
           *
           * Copyright JS Foundation and other contributors
           * Released under the MIT license
           * https://js.foundation/
           *
           * Date: 2021-02-16
           */"use strict";v=[],Fe=Object.getPrototypeOf,b=v.slice,ae=v.flat?function(e){return v.flat.call(e)}:function(e){return v.concat.apply([],e)},Q=v.push,I=v.indexOf,H={},le=H.toString,V=H.hasOwnProperty,de=V.toString,gt=de.call(Object),a={},o=function(t){return typeof t=="function"&&typeof t.nodeType!="number"&&typeof t.item!="function"},_=function(t){return t!=null&&t===t.window},i=e.document,it={type:!0,src:!0,nonce:!0,noModule:!0};function st(e,t,n){n||=i;var s,a,o=n.createElement("script");if(o.text=e,t)for(s in it)a=t[s]||t.getAttribute&&t.getAttribute(s),a&&o.setAttribute(s,a);n.head.appendChild(o).parentNode.removeChild(o)}function L(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?H[le.call(e)]||"object":typeof e}Ce="3.6.1",n=function(e,t){return new n.fn.init(e,t)},n.fn=n.prototype={jquery:Ce,constructor:n,length:0,toArray:function(){return b.call(this)},get:function(e){return e==null?b.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return n.each(this,e)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(b.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(n.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(n.grep(this,function(e,t){return t%2}))},eq:function(e){var n=this.length,t=+e+(e<0?n:0);return this.pushStack(t>=0&&t<n?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:v.sort,splice:v.splice},n.extend=n.fn.extend=function(){var t,i,a,r,c,l,e=arguments[0]||{},s=1,u=arguments.length,d=!1;for(typeof e=="boolean"&&(d=e,e=arguments[s]||{},s++),typeof e!="object"&&!o(e)&&(e={}),s===u&&(e=this,s--);s<u;s++)if((l=arguments[s])!=null)for(i in l){if(t=l[i],i==="__proto__"||e===t)continue;d&&t&&(n.isPlainObject(t)||(r=Array.isArray(t)))?(a=e[i],r&&!Array.isArray(a)?c=[]:!r&&!n.isPlainObject(a)?c={}:c=a,r=!1,e[i]=n.extend(d,c,t)):t!==0[0]&&(e[i]=t)}return e},n.extend({expando:"jQuery"+(Ce+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!!e&&le.call(e)==="[object Object]"&&(t=Fe(e),!t||(n=V.call(t,"constructor")&&t.constructor,typeof n=="function"&&de.call(n)===gt))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){st(e,{nonce:t&&t.nonce},n)},each:function(e,t){var s,n=0;if(Ae(e)){for(s=e.length;n<s;n++)if(t.call(e[n],n,e[n])===!1)break}else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},makeArray:function(e,t){var s=t||[];return e!=null&&(Ae(Object(e))?n.merge(s,typeof e=="string"?[e]:e):Q.call(s,e)),s},inArray:function(e,t,n){return t==null?-1:I.call(t,e,n)},merge:function(e,t){for(var o=+t.length,n=0,s=e.length;n<o;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,n){for(var o,i=[],s=0,a=e.length,r=!n;s<a;s++)o=!t(e[s],s),o!==r&&i.push(e[s]);return i},map:function(e,t,n){var o,a,s=0,i=[];if(Ae(e))for(a=e.length;s<a;s++)o=t(e[s],s,n),o!=null&&i.push(o);else for(s in e)o=t(e[s],s,n),o!=null&&i.push(o);return ae(i)},guid:1,support:a}),typeof Symbol=="function"&&(n.fn[Symbol.iterator]=v[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()});function Ae(e){var t=!!e&&"length"in e&&e.length,n=L(e);return!o(e)&&!_(e)&&(n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e)}y=function(e){var t,i,x,z,ae,E,U,ce,n,r,c,l,v,b,j,C,k,F,T,a="sizzle"+1*new Date,u=e.document,m=0,ue=0,Z=S(),re=S(),ee=S(),N=S(),q=function(e,t){return e===t&&(C=!0),0},Oe={}.hasOwnProperty,y=[],Ce=y.pop,xe=y.push,g=y.push,ne=y.slice,O=function(e,t){for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s=`[\\x20\\t\\r\\n\\f]`,_="(?:\\\\[\\da-fA-F]{1,6}"+s+`?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+`,X="\\["+s+"*("+_+")(?:"+s+"*([*^$|!~]?=)"+s+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+_+"))|)"+s+"*\\]",W=":("+_+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+X+")*)|.*)\\)|)",le=new RegExp(s+"+","g"),P=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),_e=new RegExp("^"+s+"*,"+s+"*"),G=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),ye=new RegExp(s+"|>"),je=new RegExp(W),be=new RegExp("^"+_+"$"),D={ID:new RegExp("^#("+_+")"),CLASS:new RegExp("^\\.("+_+")"),TAG:new RegExp("^("+_+"|[*])"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},ve=/HTML$/i,ge=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,A=/^[^{]+\{\s*\[native \w/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,f=new RegExp("\\\\[\\da-fA-F]{1,6}"+s+`?|\\\\([^\\r\\n\\f])`,"g"),p=function(e,t){var n="0x"+e.slice(1)-65536;return t?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?e==="\0"?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){b()},de=R(function(e){return e.disabled===!0&&e.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{g.apply(y=ne.call(u.childNodes),u.childNodes),y[u.childNodes.length].nodeType}catch{g={apply:y.length?function(e,t){xe.apply(e,ne.call(t))}:function(e,t){for(var n=e.length,s=0;e[n++]=t[s++];);e.length=n-1}}}function o(e,t,s,o){var c,d,u,f,p,v,j,m=t&&t.ownerDocument,h=t?t.nodeType:9;if(s||=[],typeof e!="string"||!e||h!==1&&h!==9&&h!==11)return s;if(!o&&(b(t),t||=n,l)){if(h!==11&&(v=he.exec(e)))if(c=v[1]){if(h===9)if(d=t.getElementById(c)){if(d.id===c)return s.push(d),s}else return s;else if(m&&(d=m.getElementById(c))&&k(t,d)&&d.id===c)return s.push(d),s}else if(v[2])return g.apply(s,t.getElementsByTagName(e)),s;else if((c=v[3])&&i.getElementsByClassName&&t.getElementsByClassName)return g.apply(s,t.getElementsByClassName(c)),s;if(i.qsa&&!N[e+" "]&&(!r||!r.test(e))&&(h!==1||t.nodeName.toLowerCase()!=="object")){if(j=e,m=t,h===1&&(ye.test(e)||G.test(e))){for(m=H.test(e)&&Y(t.parentNode)||t,(m!==t||!i.scope)&&((u=t.getAttribute("id"))?u=u.replace(te,oe):t.setAttribute("id",u=a)),f=E(e),p=f.length;p--;)f[p]=(u?"#"+u:":scope")+" "+L(f[p]);j=f.join(",")}try{return g.apply(s,m.querySelectorAll(j)),s}catch{N(e,!0)}finally{u===a&&t.removeAttribute("id")}}}return ce(e.replace(P,"$1"),t,s,o)}function S(){var n=[];function e(s,o){return n.push(s+" ")>t.cacheLength&&delete e[n.shift()],e[s+" "]=o}return e}function h(e){return e[a]=!0,e}function d(e){var t=n.createElement("fieldset");try{return!!e(t)}catch{return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function I(e,n){for(var s=e.split("|"),o=s.length;o--;)t.attrHandle[s[o]]=n}function J(e,t){var n=t&&e,s=n&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(s)return s;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function me(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function Q(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&de(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function w(e){return h(function(t){return t=+t,h(function(n,s){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(s[o]=n[o]))})})}function Y(e){return e&&typeof e.getElementsByTagName!="undefined"&&e}i=o.support={},ae=o.isXML=function(e){var n=e&&e.namespaceURI,t=e&&(e.ownerDocument||e).documentElement;return!ve.test(n||t&&t.nodeName||"HTML")},b=o.setDocument=function(e){var o,m,h=e?e.ownerDocument||e:u;return h==n||h.nodeType!==9||!h.documentElement?n:(n=h,c=n.documentElement,l=!ae(n),u!=n&&(o=n.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),i.scope=d(function(e){return c.appendChild(e).appendChild(n.createElement("div")),typeof e.querySelectorAll!="undefined"&&!e.querySelectorAll(":scope fieldset div").length}),i.attributes=d(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=d(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=A.test(n.getElementsByClassName),i.getById=d(function(e){return c.appendChild(e).id=a,!n.getElementsByName||!n.getElementsByName(a).length}),i.getById?(t.filter.ID=function(e){var t=e.replace(f,p);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&l){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(f,p);return function(e){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&l){var n,o,i,s=t.getElementById(e);if(s){if(n=s.getAttributeNode("id"),n&&n.value===e)return[s];for(i=t.getElementsByName(e),o=0;s=i[o++];)if(n=s.getAttributeNode("id"),n&&n.value===e)return[s]}return[]}}),t.find.TAG=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e);if(i.qsa)return t.querySelectorAll(e)}:function(e,t){var n,s=[],i=0,o=t.getElementsByTagName(e);if(e==="*"){for(;n=o[i++];)n.nodeType===1&&s.push(n);return s}return o},t.find.CLASS=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!="undefined"&&l)return t.getElementsByClassName(e)},j=[],r=[],(i.qsa=A.test(n.querySelectorAll))&&(d(function(e){var t;c.appendChild(e).innerHTML="<a id='"+a+"'></a><select id='"+a+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&r.push("[*^$]="+s+`*(?:''|"")`),e.querySelectorAll("[selected]").length||r.push("\\["+s+"*(?:value|"+K+")"),e.querySelectorAll("[id~="+a+"-]").length||r.push("~="),t=n.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||r.push("\\["+s+"*name"+s+"*="+s+`*(?:''|"")`),e.querySelectorAll(":checked").length||r.push(":checked"),e.querySelectorAll("a#"+a+"+*").length||r.push(".#.+[+~]"),e.querySelectorAll("\\"),r.push(`[\\r\\n\\f]`)}),d(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&r.push("name"+s+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length!==2&&r.push(":enabled",":disabled"),c.appendChild(e).disabled=!0,e.querySelectorAll(":disabled").length!==2&&r.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),r.push(",.*:")})),(i.matchesSelector=A.test(T=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.oMatchesSelector||c.msMatchesSelector))&&d(function(e){i.disconnectedMatch=T.call(e,"*"),T.call(e,"[s!='']:x"),j.push("!=",W)}),r=r.length&&new RegExp(r.join("|")),j=j.length&&new RegExp(j.join("|")),m=A.test(c.compareDocumentPosition),k=m||A.test(c.contains)?function(e,t){var s=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(s.contains?s.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=m?function(e,t){if(e===t)return C=!0,0;var s=!e.compareDocumentPosition-!t.compareDocumentPosition;return s||(s=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,s&1||!i.sortDetached&&t.compareDocumentPosition(e)===s?e==n||e.ownerDocument==u&&k(u,e)?-1:t==n||t.ownerDocument==u&&k(u,t)?1:v?O(v,e)-O(v,t):0:s&4?-1:1)}:function(e,t){if(e===t)return C=!0,0;var s,o=0,r=e.parentNode,c=t.parentNode,i=[e],a=[t];if(!r||!c)return e==n?-1:t==n?1:r?-1:c?1:v?O(v,e)-O(v,t):0;if(r===c)return J(e,t);for(s=e;s=s.parentNode;)i.unshift(s);for(s=t;s=s.parentNode;)a.unshift(s);for(;i[o]===a[o];)o++;return o?J(i[o],a[o]):i[o]==u?-1:a[o]==u?1:0},n)},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if(b(e),i.matchesSelector&&l&&!N[t+" "]&&(!j||!j.test(t))&&(!r||!r.test(t)))try{var s=T.call(e,t);if(s||i.disconnectedMatch||e.document&&e.document.nodeType!==11)return s}catch{N(t,!0)}return o(t,n,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!=n&&b(e),k(e,t)},o.attr=function(e,s){(e.ownerDocument||e)!=n&&b(e);var a=t.attrHandle[s.toLowerCase()],o=a&&Oe.call(t.attrHandle,s.toLowerCase())?a(e,s,!l):0[0];return o!==0[0]?o:i.attributes||!l?e.getAttribute(s):(o=e.getAttributeNode(s))&&o.specified?o.value:null},o.escape=function(e){return(e+"").replace(te,oe)},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var s,o=[],t=0,n=0;if(C=!i.detectDuplicates,v=!i.sortStable&&e.slice(0),e.sort(q),C){for(;s=e[n++];)s===e[n]&&(t=o.push(n));for(;t--;)e.splice(o[t],1)}return v=null,e},z=o.getText=function(e){var s,n="",o=0,t=e.nodeType;if(t){if(t===1||t===9||t===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=z(e)}else if(t===3||t===4)return e.nodeValue}else for(;s=e[o++];)n+=z(s);return n},t=o.selectors={cacheLength:50,createPseudo:h,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(f,p),e[3]=(e[3]||e[4]||e[5]||"").replace(f,p),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var n,t=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":t&&je.test(t)&&(n=E(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(e[0]=e[0].slice(0,n),e[2]=t.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(f,p).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Z[e+" "];return t||(t=new RegExp("(^|"+s+")"+e+"("+s+"|$)"))&&Z(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(s){var i=o.attr(s,e);return i==null?t==="!=":!t||(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(le," ")+" ").indexOf(n)>-1:t==="|="&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,s,o){var c=e.slice(0,3)!=="nth",r=e.slice(-4)!=="last",i=t==="of-type";return s===1&&o===0?function(e){return!!e.parentNode}:function(t,n,l){var d,h,f,p,g,v,b=c!==r?"nextSibling":"previousSibling",j=t.parentNode,_=i&&t.nodeName.toLowerCase(),y=!l&&!i,u=!1;if(j){if(c){for(;b;){for(d=t;d=d[b];)if(i?d.nodeName.toLowerCase()===_:d.nodeType===1)return!1;v=b=e==="only"&&!v&&"nextSibling"}return!0}if(v=[r?j.firstChild:j.lastChild],r&&y){for(d=j,f=d[a]||(d[a]={}),g=f[d.uniqueID]||(f[d.uniqueID]={}),p=g[e]||[],h=p[0]===m&&p[1],u=h&&p[2],d=h&&j.childNodes[h];d=++h&&d&&d[b]||(u=h=0)||v.pop();)if(d.nodeType===1&&++u&&d===t){g[e]=[m,h,u];break}}else if(y&&(d=t,f=d[a]||(d[a]={}),g=f[d.uniqueID]||(f[d.uniqueID]={}),p=g[e]||[],h=p[0]===m&&p[1],u=h),u===!1)for(;d=++h&&d&&d[b]||(u=h=0)||v.pop();)if((i?d.nodeName.toLowerCase()===_:d.nodeType===1)&&++u&&(y&&(f=d[a]||(d[a]={}),g=f[d.uniqueID]||(f[d.uniqueID]={}),g[e]=[m,u]),d===t))break;return u-=o,u===s||u%s===0&&u/s>=0}}},PSEUDO:function(e,n){var i,s=t.pseudos[e]||t.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return s[a]?s(n):s.length>1?(i=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?h(function(e,t){for(var o,i=s(e,n),a=i.length;a--;)o=O(e,i[a]),e[o]=!(t[o]=i[a])}):function(e){return s(e,0,i)}):s}},pseudos:{not:h(function(e){var t=[],s=[],n=U(e.replace(P,"$1"));return n[a]?h(function(e,t,s,o){for(var a,r=n(e,null,o,[]),i=e.length;i--;)(a=r[i])&&(e[i]=!(t[i]=a))}):function(e,o,i){return t[0]=e,n(t,null,i,s),t[0]=null,!s.pop()}}),has:h(function(e){return function(t){return o(e,t).length>0}}),contains:h(function(e){return e=e.replace(f,p),function(t){return(t.textContent||z(t)).indexOf(e)>-1}}),lang:h(function(e){return be.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(f,p).toLowerCase(),function(t){var n;do if(n=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1)return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===c},focus:function(e){return e===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:Q(!1),disabled:Q(!0),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:w(function(){return[0]}),last:w(function(e,t){return[t-1]}),eq:w(function(e,t,n){return[n<0?n+t:n]}),even:w(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:w(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:w(function(e,t,n){for(var s=n<0?n+t:n>t?t:n;--s>=0;)e.push(s);return e}),gt:w(function(e,t,n){for(var s=n<0?n+t:n;++s<t;)e.push(s);return e})}},t.pseudos.nth=t.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[x]=me(x);for(x in{submit:!0,reset:!0})t.pseudos[x]=fe(x);function se(){}se.prototype=t.filters=t.pseudos,t.setFilters=new se,E=o.tokenize=function(e,n){var s,i,a,r,c,l,d,u=re[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],d=t.preFilter;s;){(!a||(i=_e.exec(s)))&&(i&&(s||=s.slice(i[0].length)),l.push(c=[])),a=!1,(i=G.exec(s))&&(a=i.shift(),c.push({value:a,type:i[0].replace(P," ")}),s=s.slice(a.length));for(r in t.filter)(i=D[r].exec(s))&&(!d[r]||(i=d[r](i)))&&(a=i.shift(),c.push({value:a,type:r,matches:i}),s=s.slice(a.length));if(!a)break}return n?s.length:s?o.error(e):re(e,l).slice(0)};function L(e){for(var t=0,s=e.length,n="";t<s;t++)n+=e[t].value;return n}function R(e,t,n){var s=t.dir,o=t.next,i=o||s,r=n&&i==="parentNode",c=ue++;return t.first?function(t,n,o){for(;t=t[s];)if(t.nodeType===1||r)return e(t,n,o);return!1}:function(t,n,l){var d,u,h,f=[m,c];if(l){for(;t=t[s];)if((t.nodeType===1||r)&&e(t,n,l))return!0}else for(;t=t[s];)if(t.nodeType===1||r)if(h=t[a]||(t[a]={}),u=h[t.uniqueID]||(h[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t||=t[s];else if((d=u[i])&&d[0]===m&&d[1]===c)return f[2]=d[2];else if(u[i]=f,f[2]=e(t,n,l))return!0;return!1}}function $(e){return e.length>1?function(t,n,s){for(var o=e.length;o--;)if(!e[o](t,n,s))return!1;return!0}:e[0]}function we(e,t,n){for(var s=0,i=t.length;s<i;s++)o(e,t[s],n);return n}function M(e,t,n,s,o){for(var a,r=[],i=0,c=e.length,l=t!=null;i<c;i++)(a=e[i])&&(!n||n(a,s,o))&&(r.push(a),l&&t.push(i));return r}function V(e,t,n,s,o,i){return s&&!s[a]&&(s=V(s)),o&&!o[a]&&(o=V(o,i)),h(function(i,a,r,c){var d,u,h,p=[],f=[],v=a.length,b=i||we(t||"*",r.nodeType?[r]:r,[]),m=e&&(i||!t)?M(b,p,e,r,c):b,l=n?o||(i?e:v||s)?[]:a:m;if(n&&n(m,l,r,c),s)for(u=M(l,f),s(u,[],r,c),d=u.length;d--;)(h=u[d])&&(l[f[d]]=!(m[f[d]]=h));if(i){if(o||e){if(o){for(u=[],d=l.length;d--;)(h=l[d])&&u.push(m[d]=h);o(null,l=[],u,c)}for(d=l.length;d--;)(h=l[d])&&(u=o?O(i,h):p[d])>-1&&(i[u]=!(a[u]=h))}}else l=M(l===a?l.splice(v,l.length):l),o?o(null,a,l,c):g.apply(a,l)})}function B(e){for(var s,o,r,c=e.length,l=t.relative[e[0].type],d=l||t.relative[" "],n=l?1:0,u=R(function(e){return e===r},d,!0),h=R(function(e){return O(r,e)>-1},d,!0),i=[function(e,t,n){var s=!l&&(n||t!==F)||((r=t).nodeType?u(e,t,n):h(e,t,n));return r=null,s}];n<c;n++)if(o=t.relative[e[n].type])i=[R($(i),o)];else{if(o=t.filter[e[n].type].apply(null,e[n].matches),o[a]){for(s=++n;s<c;s++)if(t.relative[e[s].type])break;return V(n>1&&$(i),n>1&&L(e.slice(0,n-1).concat({value:e[n-2].type===" "?"*":""})).replace(P,"$1"),o,n<s&&B(e.slice(n,s)),s<c&&B(e=e.slice(s)),s<c&&L(e))}i.push(o)}return $(i)}function Ee(e,s){var i=s.length>0,a=e.length>0,r=function(r,c,d,u,h){var f,j,_,y=0,p="0",w=r&&[],v=[],O=F,x=r||a&&t.find.TAG("*",h),C=m+=O==null?1:Math.random()||.1,E=x.length;for(h&&(F=c==n||c||h);p!==E&&(f=x[p])!=null;p++){if(a&&f){for(_=0,!c&&f.ownerDocument!=n&&(b(f),d=!l);j=e[_++];)if(j(f,c||n,d)){u.push(f);break}h&&(m=C)}i&&((f&&=!j)&&y--,r&&w.push(f))}if(y+=p,i&&p!==y){for(_=0;j=s[_++];)j(w,v,c,d);if(r){if(y>0)for(;p--;)w[p]||v[p]||(v[p]=Ce.call(u));v=M(v)}g.apply(u,v),h&&!r&&v.length>0&&y+s.length>1&&o.uniqueSort(u)}return h&&(m=C,F=O),w};return i?h(r):r}return U=o.compile=function(e,t){var s,o=[],i=[],n=ee[e+" "];if(!n){for(t||(t=E(e)),s=t.length;s--;)n=B(t[s]),n[a]?o.push(n):i.push(n);n=ee(e,Ee(i,o)),n.selector=e}return n},ce=o.select=function(e,n,s,o){var i,a,r,u,h,d=typeof e=="function"&&e,c=!o&&E(e||=d.selector);if(s||=[],c.length===1){if(i=c[0]=c[0].slice(0),i.length>2&&(a=i[0]).type==="ID"&&n.nodeType===9&&l&&t.relative[i[1].type]){if(n=(t.find.ID(a.matches[0].replace(f,p),n)||[])[0],!n)return s;d&&(n=n.parentNode),e=e.slice(i.shift().value.length)}for(r=D.needsContext.test(e)?0:i.length;r--;){if(a=i[r],t.relative[u=a.type])break;if((h=t.find[u])&&(o=h(a.matches[0].replace(f,p),H.test(i[0].type)&&Y(n.parentNode)||n))){if(i.splice(r,1),e=o.length&&L(i),!e)return g.apply(s,o),s;break}}}return(d||U(e,c))(o,n,!l,s,!n||H.test(e)&&Y(n.parentNode)||n),s},i.sortStable=a.split("").sort(q).join("")===a,i.detectDuplicates=!!C,b(),i.sortDetached=d(function(e){return e.compareDocumentPosition(n.createElement("fieldset"))&1}),d(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||I("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!i.attributes||!d(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&I("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),d(function(e){return e.getAttribute("disabled")==null})||I(K,function(e,t,n){var s;if(!n)return e[t]===!0?t.toLowerCase():(s=e.getAttributeNode(t))&&s.specified?s.value:null}),o}(e),n.find=y,n.expr=y.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=y.uniqueSort,n.text=y.getText,n.isXMLDoc=y.isXML,n.contains=y.contains,n.escapeSelector=y.escape,x=function(e,t,s){for(var o=[],i=s!==0[0];(e=e[t])&&e.nodeType!==9;)if(e.nodeType===1){if(i&&n(e).is(s))break;o.push(e)}return o},Te=function(e,t){for(var n=[];e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n},xe=n.expr.match.needsContext;function u(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}Oe=/^<([a-z][^/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function be(e,t,s){return o(t)?n.grep(e,function(e,n){return!!t.call(e,n,e)!==s}):t.nodeType?n.grep(e,function(e){return e===t!==s}):typeof t!="string"?n.grep(e,function(e){return I.call(t,e)>-1!==s}):n.filter(t,e,s)}n.filter=function(e,t,s){var o=t[0];return s&&(e=":not("+e+")"),t.length===1&&o.nodeType===1?n.find.matchesSelector(o,e)?[o]:[]:n.find.matches(e,n.grep(t,function(e){return e.nodeType===1}))},n.fn.extend({find:function(e){var t,s,o=this.length,i=this;if(typeof e!="string")return this.pushStack(n(e).filter(function(){for(t=0;t<o;t++)if(n.contains(i[t],this))return!0}));s=this.pushStack([]);for(t=0;t<o;t++)n.find(e,i[t],s);return o>1?n.uniqueSort(s):s},filter:function(e){return this.pushStack(be(this,e||[],!1))},not:function(e){return this.pushStack(be(this,e||[],!0))},is:function(e){return!!be(this,typeof e=="string"&&xe.test(e)?n(e):e||[],!1).length}}),_t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,dt=n.fn.init=function(e,t,s){var a,r;if(!e)return this;if(s||=et,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?a=[null,e,null]:a=_t.exec(e),a&&(a[1]||!t)){if(a[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:i,!0)),Oe.test(a[1])&&n.isPlainObject(t))for(a in t)o(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return r=i.getElementById(a[2]),r&&(this[0]=r,this.length=1),this}else return!t||t.jquery?(t||s).find(e):this.constructor(t).find(e);else if(e.nodeType)return this[0]=e,this.length=1,this;else if(o(e))return s.ready!==0[0]?s.ready(e):e(n);return n.makeArray(e,this)},dt.prototype=n.fn,et=n(i),Ne=/^(?:parents|prev(?:Until|All))/,Ct={children:!0,contents:!0,next:!0,prev:!0},n.fn.extend({has:function(e){var t=n(e,this),s=t.length;return this.filter(function(){for(var e=0;e<s;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){var s,i=0,r=this.length,o=[],a=typeof e!="string"&&n(e);if(!xe.test(e))for(;i<r;i++)for(s=this[i];s&&s!==t;s=s.parentNode)if(s.nodeType<11&&(a?a.index(s)>-1:s.nodeType===1&&n.find.matchesSelector(s,e))){o.push(s);break}return this.pushStack(o.length>1?n.uniqueSort(o):o)},index:function(e){return e?typeof e=="string"?I.call(n(e),this[0]):I.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function kt(e,t){for(;(e=e[t])&&e.nodeType!==1;);return e}n.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return kt(e,"nextSibling")},prev:function(e){return kt(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return e.contentDocument!=null&&Fe(e.contentDocument)?e.contentDocument:(u(e,"template")&&(e||=e.content),n.merge([],e.childNodes))}},function(e,t){n.fn[e]=function(s,o){var i=n.map(this,t,s);return e.slice(-5)!=="Until"&&(o=s),o&&typeof o=="string"&&(i=n.filter(o,i)),this.length>1&&(Ct[e]||n.uniqueSort(i),Ne.test(e)&&i.reverse()),this.pushStack(i)}}),h=/[^\x20\t\r\n\f]+/g;function sn(e){var t={};return n.each(e.match(h)||[],function(e,n){t[n]=!0}),t}n.Callbacks=function(e){e=typeof e=="string"?sn(e):n.extend({},e);var s,i,r,d,t=[],c=[],a=-1,u=function(){for(i||=e.once,d=r=!0;c.length;a=-1)for(s=c.shift();++a<t.length;)t[a].apply(s[0],s[1])===!1&&e.stopOnFalse&&(a=t.length,s=!1);e.memory||(s=!1),r=!1,i&&(s?t=[]:t="")},l={add:function(){return t&&(s&&!r&&(a=t.length-1,c.push(s)),function s(i){n.each(i,function(n,i){o(i)?(!e.unique||!l.has(i))&&t.push(i):i&&i.length&&L(i)!=="string"&&s(i)})}(arguments),s&&!r&&u()),this},remove:function(){return n.each(arguments,function(e,s){for(var o;(o=n.inArray(s,t,o))>-1;)t.splice(o,1),o<=a&&a--}),this},has:function(e){return e?n.inArray(e,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return i=c=[],t=s="",this},disabled:function(){return!t},lock:function(){return i=c=[],!s&&!r&&(t=s=""),this},locked:function(){return!!i},fireWith:function(e,t){return i||(t||=[],t=[e,t.slice?t.slice():t],c.push(t),r||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l};function P(e){return e}function q(e){throw e}function ht(e,t,n,s){var i;try{e&&o(i=e.promise)?i.call(e).done(t).fail(n):e&&o(i=e.then)?i.call(e,t,n):t.apply(0[0],[e].slice(s))}catch(e){n.apply(0[0],[e])}}n.extend({Deferred:function(t){var i=[["notify","progress",n.Callbacks("memory"),n.Callbacks("memory"),2],["resolve","done",n.Callbacks("once memory"),n.Callbacks("once memory"),0,"resolved"],["reject","fail",n.Callbacks("once memory"),n.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return n.Deferred(function(t){n.each(i,function(n,i){var a=o(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=a&&a.apply(this,arguments);e&&o(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,s,a){var r=0;function c(t,s,i,a){return function(){var l=this,d=arguments,h=function(){var e,n;if(t<r)return;if(e=i.apply(l,d),e===s.promise())throw new TypeError("Thenable self-resolution");n=e&&(typeof e=="object"||typeof e=="function")&&e.then,o(n)?a?n.call(e,c(r,s,P,a),c(r,s,q,a)):(r++,n.call(e,c(r,s,P,a),c(r,s,q,a),c(r,s,P,s.notifyWith))):(i!==P&&(l=0[0],d=[e]),(a||s.resolveWith)(l,d))},u=a?h:function(){try{h()}catch(e){n.Deferred.exceptionHook&&n.Deferred.exceptionHook(e,u.stackTrace),t+1>=r&&(i!==q&&(l=0[0],d=[e]),s.rejectWith(l,d))}};t?u():(n.Deferred.getStackHook&&(u.stackTrace=n.Deferred.getStackHook()),e.setTimeout(u))}}return n.Deferred(function(e){i[0][3].add(c(0,e,o(a)?a:P,e.notifyWith)),i[1][3].add(c(0,e,o(t)?t:P)),i[2][3].add(c(0,e,o(s)?s:q))}).promise()},promise:function(e){return e!=null?n.extend(e,a):a}},s={};return n.each(i,function(e,t){var n=t[2],o=t[5];a[t[1]]=n.add,o&&n.add(function(){r=o},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?0[0]:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(e){var a=arguments.length,t=a,r=Array(t),i=b.call(arguments),s=n.Deferred(),c=function(e){return function(t){r[e]=this,i[e]=arguments.length>1?b.call(arguments):t,--a||s.resolveWith(r,i)}};if(a<=1&&(ht(e,s.done(c(t)).resolve,s.reject,!a),s.state()==="pending"||o(i[t]&&i[t].then)))return s.then();for(;t--;)ht(i[t],c(t),s.reject);return s.promise()}}),wt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,n.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&wt.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},n.readyException=function(t){e.setTimeout(function(){throw t})},K=n.Deferred(),n.fn.ready=function(e){return K.then(e).catch(function(e){n.readyException(e)}),this},n.extend({isReady:!1,readyWait:1,ready:function(e){if(e===!0?--n.readyWait:n.isReady)return;if(n.isReady=!0,e!==!0&&--n.readyWait>0)return;K.resolveWith(i,[n])}}),n.ready.then=K.then;function X(){i.removeEventListener("DOMContentLoaded",X),e.removeEventListener("load",X),n.ready()}i.readyState==="complete"||i.readyState!=="loading"&&!i.documentElement.doScroll?e.setTimeout(n.ready):(i.addEventListener("DOMContentLoaded",X),e.addEventListener("load",X)),p=function(e,t,s,i,a,r,c){var l=0,u=e.length,d=s==null;if(L(s)==="object"){a=!0;for(l in s)p(e,t,l,s[l],!0,r,c)}else if(i!==0[0]&&(a=!0,o(i)||(c=!0),d&&(c?(t.call(e,i),t=null):(d=t,t=function(e,t,s){return d.call(n(e),s)})),t))for(;l<u;l++)t(e[l],s,c?i:i.call(e[l],l,t(e[l],s)));return a?e:d?t.call(e):u?t(e[0],s):r},Ve=/^-ms-/,We=/-([a-z])/g;function Ft(e,t){return t.toUpperCase()}function g(e){return e.replace(Ve,"ms-").replace(We,Ft)}T=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function $(){this.expando=n.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},T(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var s,o=this.cache(e);if(typeof t=="string")o[g(t)]=n;else for(s in t)o[g(s)]=t[s];return o},get:function(e,t){return t===0[0]?this.cache(e):e[this.expando]&&e[this.expando][g(t)]},access:function(e,t,n){return t===0[0]||t&&typeof t=="string"&&n===0[0]?this.get(e,t):(this.set(e,t,n),n!==0[0]?n:t)},remove:function(e,t){var o,s=e[this.expando];if(s===0[0])return;if(t!==0[0])for(Array.isArray(t)?t=t.map(g):(t=g(t),t=t in s?[t]:t.match(h)||[]),o=t.length;o--;)delete s[t[o]];(t===0[0]||n.isEmptyObject(s))&&(e.nodeType?e[this.expando]=0[0]:delete e[this.expando])},hasData:function(e){var t=e[this.expando];return t!==0[0]&&!n.isEmptyObject(t)}},s=new $,r=new $,rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ie=/[A-Z]/g;function Kt(e){return e==="true"||e!=="false"&&(e==="null"?null:e===+e+""?+e:rt.test(e)?JSON.parse(e):e)}function Be(e,t,n){var s;if(n===0[0]&&e.nodeType===1)if(s="data-"+t.replace(Ie,"-$&").toLowerCase(),n=e.getAttribute(s),typeof n=="string"){try{n=Kt(n)}catch{}r.set(e,t,n)}else n=0[0];return n}n.extend({hasData:function(e){return r.hasData(e)||s.hasData(e)},data:function(e,t,n){return r.access(e,t,n)},removeData:function(e,t){r.remove(e,t)},_data:function(e,t,n){return s.access(e,t,n)},_removeData:function(e,t){s.remove(e,t)}}),n.fn.extend({data:function(e,t){var o,i,a,n=this[0],c=n&&n.attributes;if(e===0[0]){if(this.length&&(a=r.get(n),n.nodeType===1&&!s.get(n,"hasDataAttrs"))){for(i=c.length;i--;)c[i]&&(o=c[i].name,o.indexOf("data-")===0&&(o=g(o.slice(5)),Be(n,o,a[o])));s.set(n,"hasDataAttrs",!0)}return a}return typeof e=="object"?this.each(function(){r.set(this,e)}):p(this,function(t){var s;if(n&&t===0[0]){if(s=r.get(n,e),s!==0[0])return s;if(s=Be(n,e),s!==0[0])return s;return}this.each(function(){r.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){r.remove(this,e)})}}),n.extend({queue:function(e,t,o){var i;if(e)return t=(t||"fx")+"queue",i=s.get(e,t),o&&(!i||Array.isArray(o)?i=s.access(e,t,n.makeArray(o)):i.push(o)),i||[]},dequeue:function(e,t){t||="fx";var s=n.queue(e,t),a=s.length,o=s.shift(),i=n._queueHooks(e,t),r=function(){n.dequeue(e,t)};o==="inprogress"&&(o=s.shift(),a--),o&&(t==="fx"&&s.unshift("inprogress"),delete i.stop,o.call(e,r,i)),!a&&i&&i.empty.fire()},_queueHooks:function(e,t){var o=t+"queueHooks";return s.get(e,o)||s.access(e,o,{empty:n.Callbacks("once memory").add(function(){s.remove(e,[t+"queue",o])})})}}),n.fn.extend({queue:function(e,t){var s=2;return typeof e!="string"&&(t=e,e="fx",s--),arguments.length<s?n.queue(this[0],e):t===0[0]?this:this.each(function(){var s=n.queue(this,e,t);n._queueHooks(this,e),e==="fx"&&s[0]!=="inprogress"&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var o,a=1,r=n.Deferred(),i=this,c=this.length,l=function(){--a||r.resolveWith(i,[i])};for(typeof e!="string"&&(t=e,e=0[0]),e||="fx";c--;)o=s.get(i[c],e+"queueHooks"),o&&o.empty&&(a++,o.empty.add(l));return l(),r.promise(t)}}),ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,k=new RegExp("^(?:([+-])=|)("+ge+")([a-z%]*)$","i"),f=["Top","Right","Bottom","Left"],j=i.documentElement,C=function(e){return n.contains(e.ownerDocument,e)},Ot={composed:!0},j.getRootNode&&(C=function(e){return n.contains(e.ownerDocument,e)||e.getRootNode(Ot)===e.ownerDocument}),W=function(e,t){return e||=t,e.style.display==="none"||e.style.display===""&&C(e)&&n.css(e,"display")==="none"};function bt(e,t,s,o){var c,l,d=20,u=o?function(){return o.cur()}:function(){return n.css(e,t,"")},r=u(),a=s&&s[3]||(n.cssNumber[t]?"":"px"),i=e.nodeType&&(n.cssNumber[t]||a!=="px"&&+r)&&k.exec(n.css(e,t));if(i&&i[3]!==a){for(r/=2,a||=i[3],i=+r||1;d--;)n.style(e,t,i+a),(1-l)*(1-(l=u()/r||.5))<=0&&(d=0),i/=l;i*=2,n.style(e,t,i+a),s||=[]}return s&&(i=+i||+r||0,c=s[1]?i+(s[1]+1)*s[2]:+s[2],o&&(o.unit=a,o.start=i,o.end=c)),c}ue={};function nn(e){var s,i=e.ownerDocument,o=e.nodeName,t=ue[o];return t||(s=i.body.appendChild(i.createElement(o)),t=n.css(s,"display"),s.parentNode.removeChild(s),t==="none"&&(t="block"),ue[o]=t,t)}function E(e,t){for(var o,a,i=[],n=0,r=e.length;n<r;n++){if(o=e[n],!o.style)continue;a=o.style.display,t?(a==="none"&&(i[n]=s.get(o,"display")||null,i[n]||(o.style.display="")),o.style.display===""&&W(o)&&(i[n]=nn(o))):a!=="none"&&(i[n]="none",s.set(o,"display",a))}for(n=0;n<r;n++)i[n]!=null&&(e[n].style.display=i[n]);return e}n.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}}),F=/^(?:checkbox|radio)$/i,pe=/<([a-z][^/\0>\x20\t\r\n\f]*)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,function(){var n=i.createDocumentFragment(),e=n.appendChild(i.createElement("div")),t=i.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),a.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",a.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",a.option=!!e.lastChild}(),d={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]},d.tbody=d.tfoot=d.colgroup=d.caption=d.thead,d.th=d.td,a.option||(d.optgroup=d.option=[1,"<select multiple='multiple'>","</select>"]);function c(e,t){var s;return typeof e.getElementsByTagName!="undefined"?s=e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!="undefined"?s=e.querySelectorAll(t||"*"):s=[],t===0[0]||t&&u(e,t)?n.merge([e],s):s}function je(e,t){for(var n=0,o=e.length;n<o;n++)s.set(e[n],"globalEval",!t||s.get(t[n],"globalEval"))}Ze=/<|&#?\w+;/;function Qe(e,t,s,o,i){for(var a,r,h,m,p,g,l=t.createDocumentFragment(),f=[],u=0,v=e.length;u<v;u++)if(a=e[u],a||a===0)if(L(a)==="object")n.merge(f,a.nodeType?[a]:a);else if(Ze.test(a)){for(r||=l.appendChild(t.createElement("div")),p=(pe.exec(a)||["",""])[1].toLowerCase(),h=d[p]||d._default,r.innerHTML=h[1]+n.htmlPrefilter(a)+h[2],m=h[0];m--;)r=r.lastChild;n.merge(f,r.childNodes),r=l.firstChild,r.textContent=""}else f.push(t.createTextNode(a));for(l.textContent="",u=0;a=f[u++];){if(o&&n.inArray(a,o)>-1){i&&i.push(a);continue}if(g=C(a),r=c(l.appendChild(a),"script"),g&&je(r),s)for(m=0;a=r[m++];)fe.test(a.type||"")&&s.push(a)}return l}we=/^([^.]*)(?:\.(.+)|)/;function A(){return!0}function S(){return!1}function tn(e,t){return e===en()===(t==="focus")}function en(){try{return i.activeElement}catch{}}function ke(e,t,s,o,i,a){var r,c;if(typeof t=="object"){typeof s!="string"&&(o||=s,s=0[0]);for(c in t)ke(e,c,s,o,t[c],a);return e}if(o==null&&i==null?(i=s,o=s=0[0]):i==null&&(typeof s=="string"?(i=o,o=0[0]):(i=o,o=s,s=0[0])),i===!1)i=S;else if(!i)return e;return a===1&&(r=i,i=function(e){return n().off(e),r.apply(this,arguments)},i.guid=r.guid||(r.guid=n.guid++)),e.each(function(){n.event.add(this,t,i,o,s)})}n.event={global:{},add:function(e,t,o,i,a){var r,c,l,d,u,m,f,g,v,b,y,p=s.get(e);if(!T(e))return;for(o.handler&&(u=o,o=u.handler,a=u.selector),a&&n.find.matchesSelector(j,a),o.guid||(o.guid=n.guid++),(f=p.events)||(f=p.events=Object.create(null)),(m=p.handle)||(m=p.handle=function(t){return typeof n!="undefined"&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):0[0]}),t=(t||"").match(h)||[""],v=t.length;v--;){if(g=we.exec(t[v])||[],r=y=g[1],b=(g[2]||"").split(".").sort(),!r)continue;c=n.event.special[r]||{},r||=a?c.delegateType:c.bindType,c=n.event.special[r]||{},l=n.extend({type:r,origType:y,data:i,handler:o,guid:o.guid,selector:a,needsContext:a&&n.expr.match.needsContext.test(a),namespace:b.join(".")},u),(d=f[r])||(d=f[r]=[],d.delegateCount=0,(!c.setup||c.setup.call(e,i,b,m)===!1)&&e.addEventListener&&e.addEventListener(r,m)),c.add&&(c.add.call(e,l),l.handler.guid||(l.handler.guid=o.guid)),a?d.splice(d.delegateCount++,0,l):d.push(l),n.event.global[r]=!0}},remove:function(e,t,o,i,a){var r,c,l,d,u,m,f,p,v,b,j,g=s.hasData(e)&&s.get(e);if(!g||!(m=g.events))return;for(t=(t||"").match(h)||[""],p=t.length;p--;){if(l=we.exec(t[p])||[],r=j=l[1],v=(l[2]||"").split(".").sort(),!r){for(r in m)n.event.remove(e,r+t[p],o,i,!0);continue}for(d=n.event.special[r]||{},r||=i?d.delegateType:d.bindType,u=m[r]||[],l=l[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=f=u.length;f--;)c=u[f],(a||j===c.origType)&&(!o||o.guid===c.guid)&&(!l||l.test(c.namespace))&&(!i||i===c.selector||i==="**"&&c.selector)&&(u.splice(f,1),c.selector&&u.delegateCount--,d.remove&&d.remove.call(e,c));b&&!u.length&&((!d.teardown||d.teardown.call(e,v,g.handle)===!1)&&n.removeEvent(e,r,g.handle),delete m[r])}n.isEmptyObject(m)&&s.remove(e,"handle events")},dispatch:function(e){var o,i,a,c,d,u,l=new Array(arguments.length),t=n.event.fix(e),h=(s.get(this,"events")||Object.create(null))[t.type]||[],r=n.event.special[t.type]||{};l[0]=t;for(o=1;o<arguments.length;o++)l[o]=arguments[o];if(t.delegateTarget=this,r.preDispatch&&r.preDispatch.call(this,t)===!1)return;for(u=n.event.handlers.call(this,t,h),o=0;(a=u[o++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,d=0;(i=a.handlers[d++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||i.namespace===!1||t.rnamespace.test(i.namespace))&&(t.handleObj=i,t.data=i.data,c=((n.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,l),c!==0[0]&&(t.result=c)===!1&&(t.preventDefault(),t.stopPropagation()));return r.postDispatch&&r.postDispatch.call(this,t),t.result},handlers:function(e,t){var o,i,a,r,c,d=[],l=t.delegateCount,s=e.target;if(l&&s.nodeType&&!(e.type==="click"&&e.button>=1))for(;s!==this;s=s.parentNode||this)if(s.nodeType===1&&(e.type!=="click"||s.disabled!==!0)){r=[],c={};for(i=0;i<l;i++)a=t[i],o=a.selector+" ",c[o]===0[0]&&(c[o]=a.needsContext?n(o,this).index(s)>-1:n.find(o,this,null,[s]).length),c[o]&&r.push(a);r.length&&d.push({elem:s,handlers:r})}return s=this,l<t.length&&d.push({elem:s,handlers:t.slice(l)}),d},addProp:function(e,t){Object.defineProperty(n.Event.prototype,e,{enumerable:!0,configurable:!0,get:o(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[n.expando]?e:new n.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return F.test(t.type)&&t.click&&u(t,"input")&&ne(t,"click",A),!1},trigger:function(e){var t=this||e;return F.test(t.type)&&t.click&&u(t,"input")&&ne(t,"click"),!0},_default:function(e){var t=e.target;return F.test(t.type)&&t.click&&u(t,"input")&&s.get(t,"click")||u(t,"a")}},beforeunload:{postDispatch:function(e){e.result!==0[0]&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function ne(e,t,o){if(!o){s.get(e,t)===0[0]&&n.event.add(e,t,A);return}s.set(e,t,!1),n.event.add(e,t,{namespace:!1,handler:function(e){var a,r,i=s.get(this,t);if(e.isTrigger&1&&this[t]){if(i.length)(n.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=b.call(arguments),s.set(this,t,i),r=o(this,t),this[t](),a=s.get(this,t),i!==a||r?s.set(this,t,!1):a={},i!==a)return e.stopImmediatePropagation(),e.preventDefault(),a&&a.value}else i.length&&(s.set(this,t,{value:n.event.trigger(n.extend(i[0],n.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})}n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},n.Event=function(e,t){if(!(this instanceof n.Event))return new n.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===0[0]&&e.returnValue===!1?A:S,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[n.expando]=!0},n.Event.prototype={constructor:n.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=A,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=A,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=A,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},n.event.addProp),n.each({focus:"focusin",blur:"focusout"},function(e,t){n.event.special[e]={setup:function(){return ne(this,e,tn),!1},trigger:function(){return ne(this,e),!0},_default:function(t){return s.get(t.target,e)},delegateType:t}}),n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var o,i=this,s=e.relatedTarget,a=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=a.origType,o=a.handler.apply(this,arguments),e.type=t),o}}}),n.fn.extend({on:function(e,t,n,s){return ke(this,e,t,n,s)},one:function(e,t,n,s){return ke(this,e,t,n,s,1)},off:function(e,t,s){var o,i;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,n(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||typeof t=="function")&&(s=t,t=0[0]),s===!1&&(s=S),this.each(function(){n.event.remove(this,e,s,t)})}});var Jt=/<script|<style|<link/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,Zt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return u(e,"table")&&u(t.nodeType!==11?t:t.firstChild,"tr")?n(e).children("tbody")[0]||e:e}function Qt(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Yt(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ot(e,t){var o,i,a,c,l,d,u;if(t.nodeType!==1)return;if(s.hasData(e)&&(l=s.get(e),o=l.events,o)){s.remove(t,"handle events");for(a in o)for(i=0,c=o[a].length;i<c;i++)n.event.add(t,a,o[a][i])}r.hasData(e)&&(d=r.access(e),u=n.extend({},d),r.set(t,u))}function qt(e,t){var n=t.nodeName.toLowerCase();n==="input"&&F.test(e.type)?t.checked=e.checked:(n==="input"||n==="textarea")&&(t.defaultValue=e.defaultValue)}function D(e,t,i,r){t=ae(t);var l,u,h,m,f,v,d=0,p=e.length,j=p-1,g=t[0],b=o(g);if(b||p>1&&typeof g=="string"&&!a.checkClone&&St.test(g))return e.each(function(n){var s=e.eq(n);b&&(t[0]=g.call(this,n,s.html())),D(s,t,i,r)});if(p&&(h=Qe(t,e[0].ownerDocument,!1,e,r),v=h.firstChild,h.childNodes.length===1&&(h=v),v||r)){for(u=n.map(c(h,"script"),Qt),m=u.length;d<p;d++)l=h,d!==j&&(l=n.clone(l,!0,!0),m&&n.merge(u,c(l,"script"))),i.call(e[d],l,d);if(m){f=u[u.length-1].ownerDocument,n.map(u,Yt);for(d=0;d<m;d++)l=u[d],fe.test(l.type||"")&&!s.access(l,"globalEval")&&n.contains(f,l)&&(l.src&&(l.type||"").toLowerCase()!=="module"?n._evalUrl&&!l.noModule&&n._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},f):st(l.textContent.replace(Zt,""),l,f))}}return e}function Pe(e,t,s){for(var o,a=t?n.filter(t,e):e,i=0;(o=a[i])!=null;i++)!s&&o.nodeType===1&&n.cleanData(c(o)),o.parentNode&&(s&&C(o)&&je(c(o,"script")),o.parentNode.removeChild(o));return e}n.extend({htmlPrefilter:function(e){return e},clone:function(e,t,s){var o,i,r,d,l=e.cloneNode(!0),u=C(e);if(!a.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!n.isXMLDoc(e)){i=c(l),r=c(e);for(o=0,d=r.length;o<d;o++)qt(r[o],i[o])}if(t)if(s){r||=c(e),i||=c(l);for(o=0,d=r.length;o<d;o++)ot(r[o],i[o])}else ot(e,l);return i=c(l,"script"),i.length>0&&je(i,!u&&c(e,"script")),l},cleanData:function(e){for(var t,o,i,c=n.event.special,a=0;(t=e[a])!==0[0];a++)if(T(t)){if(o=t[s.expando]){if(o.events)for(i in o.events)c[i]?n.event.remove(t,i):n.removeEvent(t,i,o.handle);t[s.expando]=0[0]}t[r.expando]&&(t[r.expando]=0[0])}}}),n.fn.extend({detach:function(e){return Pe(this,e,!0)},remove:function(e){return Pe(this,e)},text:function(e){return p(this,function(e){return e===0[0]?n.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return D(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Re(this,e);t.appendChild(e)}})},prepend:function(){return D(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;(e=this[t])!=null;t++)e.nodeType===1&&(n.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e??!1,t=t??e,this.map(function(){return n.clone(this,e,t)})},html:function(e){return p(this,function(e){var t=this[0]||{},s=0,o=this.length;if(e===0[0]&&t.nodeType===1)return t.innerHTML;if(typeof e=="string"&&!Jt.test(e)&&!d[(pe.exec(e)||["",""])[1].toLowerCase()]){e=n.htmlPrefilter(e);try{for(;s<o;s++)t=this[s]||{},t.nodeType===1&&(n.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch{}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return D(this,arguments,function(t){var s=this.parentNode;n.inArray(this,e)<0&&(n.cleanData(c(this)),s&&s.replaceChild(t,this))},e)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var o,i=[],a=n(e),r=a.length-1,s=0;s<=r;s++)o=s===r?this:this.clone(!0),n(a[s])[t](o),Q.apply(i,o.get());return this.pushStack(i)}}),te=new RegExp("^("+ge+")(?!px)[a-z%]+$","i"),ee=/^--/,B=function(t){var n=t.ownerDocument.defaultView;return(!n||!n.opener)&&(n=e),n.getComputedStyle(t)},oe=function(e,t,n){var s,o,i={};for(s in t)i[s]=e.style[s],e.style[s]=t[s];o=n.call(e);for(s in t)e.style[s]=i[s];return o},$e=new RegExp(f.join("|"),"i"),Ee=`[\\x20\\t\\r\\n\\f]`,Ue=new RegExp("^"+Ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ee+"+$","g"),function(){function s(){if(!t)return;c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",t.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",j.appendChild(c).appendChild(t);var n=e.getComputedStyle(t),l=n.top!=="1%",m=o(n.marginLeft)===12;t.style.right="60%",h=o(n.right)===36,d=o(n.width)===36,t.style.position="absolute",u=o(t.offsetWidth/3)===12,j.removeChild(c),t=null}function o(e){return Math.round(parseFloat(e))}var r,l,d,u,h,m,c=i.createElement("div"),t=i.createElement("div");if(!t.style)return;t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",a.clearCloneStyle=t.style.backgroundClip==="content-box",n.extend(a,{boxSizingReliable:function(){return s(),d},pixelBoxStyles:function(){return s(),h},pixelPosition:function(){return s(),l},reliableMarginLeft:function(){return s(),m},scrollboxSize:function(){return s(),u},reliableTrDimensions:function(){var t,n,s,o;return r==null&&(n=i.createElement("table"),t=i.createElement("tr"),s=i.createElement("div"),n.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",s.style.height="9px",s.style.display="block",j.appendChild(n).appendChild(t).appendChild(s),o=e.getComputedStyle(t),r=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,j.removeChild(n)),r}})}();function U(e,t,s){var o,r,c,l,d=ee.test(t),i=e.style;return s||=B(e),s&&(o=s.getPropertyValue(t)||s[t],d&&(o=o.replace(Ue,"$1")),o===""&&!C(e)&&(o=n.style(e,t)),!a.pixelBoxStyles()&&te.test(o)&&$e.test(t)&&(r=i.width,c=i.minWidth,l=i.maxWidth,i.minWidth=i.maxWidth=i.width=o,o=s.width,i.width=r,i.minWidth=c,i.maxWidth=l)),o!==0[0]?o+"":o}function qe(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ye=["Webkit","Moz","ms"],Ge=i.createElement("div").style,Xe={};function Ut(e){for(var n=e[0].toUpperCase()+e.slice(1),t=Ye.length;t--;)if(e=Ye[t]+n,e in Ge)return e}function ye(e){var t=n.cssProps[e]||Xe[e];return t?t:e in Ge?e:Xe[e]=Ut(e)||e}var Wt=/^(none|table(?!-c[ea]).+)/,$t={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,n){var s=k.exec(t);return s?Math.max(0,s[2]-(n||0))+(s[3]||"px"):t}function Me(e,t,s,o,i,a){var r=t==="width"?1:0,l=0,c=0;if(s===(o?"border":"content"))return 0;for(;r<4;r+=2)s==="margin"&&(c+=n.css(e,s+f[r],!0,i)),o?(s==="content"&&(c-=n.css(e,"padding"+f[r],!0,i)),s!=="margin"&&(c-=n.css(e,"border"+f[r]+"Width",!0,i))):(c+=n.css(e,"padding"+f[r],!0,i),s!=="padding"?c+=n.css(e,"border"+f[r]+"Width",!0,i):l+=n.css(e,"border"+f[r]+"Width",!0,i));return!o&&a>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-c-l-.5))||0),c}function ft(e,t,s){var i=B(e),d=!a.boxSizingReliable()||s,r=d&&n.css(e,"boxSizing",!1,i)==="border-box",c=r,o=U(e,t,i),l="offset"+t[0].toUpperCase()+t.slice(1);if(te.test(o)){if(!s)return o;o="auto"}return(!a.boxSizingReliable()&&r||!a.reliableTrDimensions()&&u(e,"tr")||o==="auto"||!parseFloat(o)&&n.css(e,"display",!1,i)==="inline")&&e.getClientRects().length&&(r=n.css(e,"boxSizing",!1,i)==="border-box",c=l in e,c&&(o=e[l])),o=parseFloat(o)||0,o+Me(e,t,s||(r?"border":"content"),c,i,o)+"px"}n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=U(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,s,o){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,r,c,d=g(t),u=ee.test(t),l=e.style;if(u||(t=ye(d)),r=n.cssHooks[t]||n.cssHooks[d],s!==0[0]){if(c=typeof s,c==="string"&&(i=k.exec(s))&&i[1]&&(s=bt(e,t,i),c="number"),s==null||s!==s)return;c==="number"&&!u&&(s+=i&&i[3]||(n.cssNumber[d]?"":"px")),!a.clearCloneStyle&&s===""&&t.indexOf("background")===0&&(l[t]="inherit"),(!r||!("set"in r)||(s=r.set(e,s,o))!==0[0])&&(u?l.setProperty(t,s):l[t]=s)}else return r&&"get"in r&&(i=r.get(e,!1,o))!==0[0]?i:l[t]},css:function(e,t,s,o){var i,a,r,c=g(t),l=ee.test(t);return l||(t=ye(c)),a=n.cssHooks[t]||n.cssHooks[c],a&&"get"in a&&(i=a.get(e,!0,s)),i===0[0]&&(i=U(e,t,o)),i==="normal"&&t in tt&&(i=tt[t]),s===""||s?(r=parseFloat(i),s===!0||isFinite(r)?r||0:i):i}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,s,o){if(s)return Wt.test(n.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?oe(e,$t,function(){return ft(e,t,o)}):ft(e,t,o)},set:function(e,s,o){var c,i=B(e),l=!a.scrollboxSize()&&i.position==="absolute",u=l||o,d=u&&n.css(e,"boxSizing",!1,i)==="border-box",r=o?Me(e,t,o,d,i):0;return d&&l&&(r-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Me(e,t,"border",!1,i)-.5)),r&&(c=k.exec(s))&&(c[3]||"px")!=="px"&&(e.style[t]=s,s=n.css(e,t)),nt(e,s,r)}}}),n.cssHooks.marginLeft=qe(a.reliableMarginLeft,function(e,t){if(t)return(parseFloat(U(e,"marginLeft"))||e.getBoundingClientRect().left-oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var s=0,i={},o=typeof n=="string"?n.split(" "):[n];s<4;s++)i[e+f[s]+t]=o[s]||o[s-2]||o[0];return i}},e!=="margin"&&(n.cssHooks[e+t].set=nt)}),n.fn.extend({css:function(e,t){return p(this,function(e,t,s){var i,a,r={},o=0;if(Array.isArray(t)){for(i=B(e),a=t.length;o<a;o++)r[t[o]]=n.css(e,t[o],!1,i);return r}return s!==0[0]?n.style(e,t,s):n.css(e,t)},e,t,arguments.length>1)}});function l(e,t,n,s,o){return new l.prototype.init(e,t,n,s,o)}n.Tween=l,l.prototype={constructor:l,init:function(e,t,s,o,i,a){this.elem=e,this.prop=s,this.easing=i||n.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=a||(n.cssNumber[s]?"":"px")},cur:function(){var e=l.propHooks[this.prop];return e&&e.get?e.get(this):l.propHooks._default.get(this)},run:function(e){var t,s=l.propHooks[this.prop];return this.options.duration?this.pos=t=n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),s&&s.set?s.set(this):l.propHooks._default.set(this),this}},l.prototype.init.prototype=l.prototype,l.propHooks={_default:{get:function(e){var t;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(t=n.css(e.elem,e.prop,""),!t||t==="auto"?0:t)},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.nodeType===1&&(n.cssHooks[e.prop]||e.elem.style[ye(e.prop)]!=null)?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},l.propHooks.scrollTop=l.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},n.fx=l.prototype.init,n.fx.step={},ct=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function me(){J&&(i.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(me):e.setTimeout(me,n.fx.interval),n.fx.tick())}function ut(){return e.setTimeout(function(){R=0[0]}),R=Date.now()}function Z(e,t){var s,o=0,n={height:e};for(t=t?1:0;o<4;o+=2-t)s=f[o],n["margin"+s]=n["padding"+s]=e;return t&&(n.opacity=n.width=e),n}function mt(e,t,n){for(var o,i=(m.tweeners[t]||[]).concat(m.tweeners["*"]),s=0,a=i.length;s<a;s++)if(o=i[s].call(n,t,e))return o}function It(e,t,o){var i,r,c,d,u,p,g,v,b="width"in t||"height"in t,m=this,f={},l=e.style,h=e.nodeType&&W(e),a=s.get(e,"fxshow");o.queue||(d=n._queueHooks(e,"fx"),d.unqueued==null&&(d.unqueued=0,v=d.empty.fire,d.empty.fire=function(){d.unqueued||v()}),d.unqueued++,m.always(function(){m.always(function(){d.unqueued--,n.queue(e,"fx").length||d.empty.fire()})}));for(i in t)if(p=t[i],ct.test(p)){if(delete t[i],g||=p==="toggle",p===(h?"hide":"show"))if(p==="show"&&a&&a[i]!==0[0])h=!0;else continue;f[i]=a&&a[i]||n.style(e,i)}if(c=!n.isEmptyObject(t),!c&&n.isEmptyObject(f))return;b&&e.nodeType===1&&(o.overflow=[l.overflow,l.overflowX,l.overflowY],r=a&&a.display,r==null&&(r=s.get(e,"display")),u=n.css(e,"display"),u==="none"&&(r?u=r:(E([e],!0),r||=e.style.display,u=n.css(e,"display"),E([e]))),(u==="inline"||u==="inline-block"&&r!=null)&&n.css(e,"float")==="none"&&(c||(m.done(function(){l.display=r}),r==null&&(u=l.display,r=u==="none"?"":u)),l.display="inline-block")),o.overflow&&(l.overflow="hidden",m.always(function(){l.overflow=o.overflow[0],l.overflowX=o.overflow[1],l.overflowY=o.overflow[2]})),c=!1;for(i in f)c||(a?"hidden"in a&&(h=a.hidden):a=s.access(e,"fxshow",{display:r}),g&&(a.hidden=!h),h&&E([e],!0),m.done(function(){h||E([e]),s.remove(e,"fxshow");for(i in f)n.style(e,i,f[i])})),c=mt(h?a[i]:0,i,m),i in a||(a[i]=c.start,h&&(c.end=c.start,c.start=0))}function Dt(e,t){var s,o,i,a,r;for(s in e)if(i=g(s),a=t[i],o=e[s],Array.isArray(o)&&(a=o[1],o=e[s]=o[0]),s!==i&&(e[i]=o,delete e[s]),r=n.cssHooks[i],r&&"expand"in r){o=r.expand(o),delete e[i];for(s in o)s in e||(e[s]=o[s],t[s]=a)}else t[i]=a}function m(e,t,s){var r,c,l=0,h=m.prefilters.length,a=n.Deferred().always(function(){delete u.elem}),u=function(){if(c)return!1;for(var r=R||ut(),t=Math.max(0,i.startTime+i.duration-r),l=t/i.duration||0,n=1-l,s=0,o=i.tweens.length;s<o;s++)i.tweens[s].run(n);return a.notifyWith(e,[i,n,t]),n<1&&o?t:(o||a.notifyWith(e,[i,1,0]),a.resolveWith(e,[i]),!1)},i=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},s),originalProperties:t,originalOptions:s,startTime:R||ut(),duration:s.duration,tweens:[],createTween:function(t,s){var o=n.Tween(e,i.opts,t,s,i.opts.specialEasing[t]||i.opts.easing);return i.tweens.push(o),o},stop:function(t){var n=0,s=t?i.tweens.length:0;if(c)return this;for(c=!0;n<s;n++)i.tweens[n].run(1);return t?(a.notifyWith(e,[i,1,0]),a.resolveWith(e,[i,t])):a.rejectWith(e,[i,t]),this}}),d=i.props;for(Dt(d,i.opts.specialEasing);l<h;l++)if(r=m.prefilters[l].call(i,e,d,i.opts),r)return o(r.stop)&&(n._queueHooks(i.elem,i.opts.queue).stop=r.stop.bind(r)),r;return n.map(d,mt,i),o(i.opts.start)&&i.opts.start.call(e,i),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always),n.fx.timer(n.extend(u,{elem:e,anim:i,queue:i.opts.queue})),i}n.Animation=n.extend(m,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return bt(n.elem,e,k.exec(t),n),n}]},tweener:function(e,t){o(e)?(t=e,e=["*"]):e=e.match(h);for(var n,s=0,i=e.length;s<i;s++)n=e[s],m.tweeners[n]=m.tweeners[n]||[],m.tweeners[n].unshift(t)},prefilters:[It],prefilter:function(e,t){t?m.prefilters.unshift(e):m.prefilters.push(e)}}),n.speed=function(e,t,s){var i=e&&typeof e=="object"?n.extend({},e):{complete:s||!s&&t||o(e)&&e,duration:e,easing:s&&t||t&&!o(t)&&t};return n.fx.off?i.duration=0:typeof i.duration!="number"&&(i.duration in n.fx.speeds?i.duration=n.fx.speeds[i.duration]:i.duration=n.fx.speeds._default),(i.queue==null||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){o(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,s){return this.filter(W).css("opacity",0).show().end().animate({opacity:t},e,n,s)},animate:function(e,t,o,i){var c=n.isEmptyObject(e),r=n.speed(t,o,i),a=function(){var t=m(this,n.extend({},e),r);(c||s.get(this,"finish"))&&t.stop(!0)};return a.finish=a,c||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,t,o){var i=function(e){var t=e.stop;delete e.stop,t(o)};return typeof e!="string"&&(o=t,t=e,e=0[0]),t&&this.queue(e||"fx",[]),this.each(function(){var c=!0,t=e!=null&&e+"queueHooks",r=n.timers,a=s.get(this);if(t)a[t]&&a[t].stop&&i(a[t]);else for(t in a)a[t]&&a[t].stop&&lt.test(t)&&i(a[t]);for(t=r.length;t--;)r[t].elem===this&&(e==null||r[t].queue===e)&&(r[t].anim.stop(o),c=!1,r.splice(t,1));(c||!o)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e||="fx"),this.each(function(){var t,a=s.get(this),o=a[e+"queue"],r=a[e+"queueHooks"],i=n.timers,c=o?o.length:0;a.finish=!0,n.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0);for(t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<c;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete a.finish})}}),n.each(["toggle","show","hide"],function(e,t){var s=n.fn[t];n.fn[t]=function(e,n,o){return e==null||typeof e=="boolean"?s.apply(this,arguments):this.animate(Z(t,!0),e,n,o)}}),n.each({slideDown:Z("show"),slideUp:Z("hide"),slideToggle:Z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,s){return this.animate(t,e,n,s)}}),n.timers=[],n.fx.tick=function(){var s,e=0,t=n.timers;for(R=Date.now();e<t.length;e++)s=t[e],!s()&&t[e]===s&&t.splice(e--,1);t.length||n.fx.stop(),R=0[0]},n.fx.timer=function(e){n.timers.push(e),n.fx.start()},n.fx.interval=13,n.fx.start=function(){if(J)return;J=!0,me()},n.fx.stop=function(){J=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(t,s){return t=n.fx?n.fx.speeds[t]||t:t,s||="fx",this.queue(s,function(n,s){var o=e.setTimeout(n,t);s.stop=function(){e.clearTimeout(o)}})},function(){var e=i.createElement("input"),t=i.createElement("select"),n=t.appendChild(i.createElement("option"));e.type="checkbox",a.checkOn=e.value!=="",a.optSelected=n.selected,e=i.createElement("input"),e.value="t",e.type="radio",a.radioValue=e.value==="t"}(),M=n.expr.attrHandle,n.fn.extend({attr:function(e,t){return p(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,s){var o,i,a=e.nodeType;if(a===3||a===8||a===2)return;if(typeof e.getAttribute=="undefined")return n.prop(e,t,s);if((a!==1||!n.isXMLDoc(e))&&(i=n.attrHooks[t.toLowerCase()]||(n.expr.match.bool.test(t)?vt:0[0])),s!==0[0]){if(s===null){n.removeAttr(e,t);return}return i&&"set"in i&&(o=i.set(e,s,t))!==0[0]?o:(e.setAttribute(t,s+""),s)}return i&&"get"in i&&(o=i.get(e,t))!==null?o:(o=n.find.attr(e,t),o??0[0])},attrHooks:{type:{set:function(e,t){if(!a.radioValue&&t==="radio"&&u(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,o=0,s=t&&t.match(h);if(s&&e.nodeType===1)for(;n=s[o++];)e.removeAttribute(n)}}),vt={set:function(e,t,s){return t===!1?n.removeAttr(e,s):e.setAttribute(s,s),s}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var s=M[t]||n.find.attr;M[t]=function(e,t,n){var i,a,o=t.toLowerCase();return n||(a=M[o],M[o]=i,i=s(e,t,n)!=null?o:null,M[o]=a),i}}),jt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i,n.fn.extend({prop:function(e,t){return p(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({prop:function(e,t,s){var o,i,a=e.nodeType;if(a===3||a===8||a===2)return;return(a!==1||!n.isXMLDoc(e))&&(t||=n.propFix[t],o=n.propHooks[t]),s!==0[0]?o&&"set"in o&&(i=o.set(e,s,t))!==0[0]?i:e[t]=s:o&&"get"in o&&(i=o.get(e,t))!==null?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=n.find.attr(e,"tabindex");return t?parseInt(t,10):jt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),a.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});function O(e){var t=e.match(h)||[];return t.join(" ")}function w(e){return e.getAttribute&&e.getAttribute("class")||""}function ce(e){return Array.isArray(e)?e:typeof e=="string"?e.match(h)||[]:[]}n.fn.extend({addClass:function(e){var t,s,i,a,r,c;return o(e)?this.each(function(t){n(this).addClass(e.call(this,t,w(this)))}):(s=ce(e),s.length?this.each(function(){if(a=w(this),t=this.nodeType===1&&" "+O(a)+" ",t){for(i=0;i<s.length;i++)r=s[i],t.indexOf(" "+r+" ")<0&&(t+=r+" ");c=O(t),a!==c&&this.setAttribute("class",c)}}):this)},removeClass:function(e){var t,s,i,a,r,c;return o(e)?this.each(function(t){n(this).removeClass(e.call(this,t,w(this)))}):arguments.length?(s=ce(e),s.length?this.each(function(){if(a=w(this),t=this.nodeType===1&&" "+O(a)+" ",t){for(i=0;i<s.length;i++)for(r=s[i];t.indexOf(" "+r+" ")>-1;)t=t.replace(" "+r+" "," ");c=O(t),a!==c&&this.setAttribute("class",c)}}):this):this.attr("class","")},toggleClass:function(e,t){var i,a,r,c,l=typeof e,d=l==="string"||Array.isArray(e);return o(e)?this.each(function(s){n(this).toggleClass(e.call(this,s,w(this),t),t)}):typeof t=="boolean"&&d?t?this.addClass(e):this.removeClass(e):(c=ce(e),this.each(function(){if(d){r=n(this);for(a=0;a<c.length;a++)i=c[a],r.hasClass(i)?r.removeClass(i):r.addClass(i)}else(e===0[0]||l==="boolean")&&(i=w(this),i&&s.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||e===!1?"":s.get(this,"__className__")||""))}))},hasClass:function(e){for(var t,s=0,n=" "+e+" ";t=this[s++];)if(t.nodeType===1&&(" "+O(w(t))+" ").indexOf(n)>-1)return!0;return!1}}),xt=/\r/g,n.fn.extend({val:function(e){var t,s,a,i=this[0];if(!arguments.length){if(i)return t=n.valHooks[i.type]||n.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(s=t.get(i,"value"))!==0[0]?s:(s=i.value,typeof s=="string"?s.replace(xt,""):s??"");return}return a=o(e),this.each(function(s){var o;if(this.nodeType!==1)return;a?o=e.call(this,s,n(this).val()):o=e,o==null?o="":typeof o=="number"?o+="":Array.isArray(o)&&(o=n.map(o,function(e){return e==null?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],(!t||!("set"in t)||t.set(this,o,"value")===0[0])&&(this.value=o)})}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return t??O(n.text(e))}},select:{get:function(e){var t,s,a,r=e.options,o=e.selectedIndex,i=e.type==="select-one",c=i?null:[],l=i?o+1:r.length;for(o<0?s=l:s=i?o:0;s<l;s++)if(t=r[s],(t.selected||s===o)&&!t.disabled&&(!t.parentNode.disabled||!u(t.parentNode,"optgroup"))){if(a=n(t).val(),i)return a;c.push(a)}return c},set:function(e,t){for(var s,o,i=e.options,a=n.makeArray(t),r=i.length;r--;)s=i[r],(s.selected=n.inArray(n.valHooks.option.get(s),a)>-1)&&(o=!0);return o||(e.selectedIndex=-1),a}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=n.inArray(n(e).val(),t)>-1}},a.checkOn||(n.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})}),a.focusin="onfocusin"in e,re=/^(?:focusinfocus|focusoutblur)$/,se=function(e){e.stopPropagation()},n.extend(n.event,{trigger:function(t,a,r,c){var u,h,m,f,g,b,j,v=[r||i],l=V.call(t,"type")?t.type:t,p=V.call(t,"namespace")?t.namespace.split("."):[],d=g=u=r||=i;if(r.nodeType===3||r.nodeType===8)return;if(re.test(l+n.event.triggered))return;if(l.indexOf(".")>-1&&(p=l.split("."),l=p.shift(),p.sort()),m=l.indexOf(":")<0&&"on"+l,t=t[n.expando]?t:new n.Event(l,typeof t=="object"&&t),t.isTrigger=c?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=0[0],t.target||(t.target=r),a=a==null?[t]:n.makeArray(a,[t]),h=n.event.special[l]||{},!c&&h.trigger&&h.trigger.apply(r,a)===!1)return;if(!c&&!h.noBubble&&!_(r)){for(j=h.delegateType||l,re.test(j+l)||(d=d.parentNode);d;d=d.parentNode)v.push(d),u=d;u===(r.ownerDocument||i)&&v.push(u.defaultView||u.parentWindow||e)}for(b=0;(d=v[b++])&&!t.isPropagationStopped();)g=d,t.type=b>1?j:h.bindType||l,f=(s.get(d,"events")||Object.create(null))[t.type]&&s.get(d,"handle"),f&&f.apply(d,a),f=m&&d[m],f&&f.apply&&T(d)&&(t.result=f.apply(d,a),t.result===!1&&t.preventDefault());return t.type=l,!c&&!t.isDefaultPrevented()&&(!h._default||h._default.apply(v.pop(),a)===!1)&&T(r)&&m&&o(r[l])&&!_(r)&&(u=r[m],u&&(r[m]=null),n.event.triggered=l,t.isPropagationStopped()&&g.addEventListener(l,se),r[l](),t.isPropagationStopped()&&g.removeEventListener(l,se),n.event.triggered=0[0],u&&(r[m]=u)),t.result},simulate:function(e,t,s){var o=n.extend(new n.Event,s,{type:e,isSimulated:!0});n.event.trigger(o,null,t)}}),n.fn.extend({trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var s=this[0];if(s)return n.event.trigger(e,t,s,!0)}}),a.focusin||n.each({focus:"focusin",blur:"focusout"},function(e,t){var o=function(e){n.event.simulate(t,e.target,n.event.fix(e))};n.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,i=s.access(n,t);i||n.addEventListener(e,o,!0),s.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,i=s.access(n,t)-1;i?s.access(n,t,i):(n.removeEventListener(e,o,!0),s.remove(n,t))}}}),N=e.location,ie={guid:Date.now()},G=/\?/,n.parseXML=function(t){var s,o;if(!t||typeof t!="string")return null;try{s=(new e.DOMParser).parseFromString(t,"text/xml")}catch{}return o=s&&s.getElementsByTagName("parsererror")[0],(!s||o)&&n.error("Invalid XML: "+(o?n.map(o.childNodes,function(e){return e.textContent}).join(`
`):t)),s};var Mt=/\[\]$/,Et=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;function he(e,t,s,o){var i;if(Array.isArray(t))n.each(t,function(t,n){s||Mt.test(e)?o(e,n):he(e+"["+(typeof n=="object"&&n!=null?t:"")+"]",n,s,o)});else if(!s&&L(t)==="object")for(i in t)he(e+"["+i+"]",t[i],s,o);else o(e,t)}n.param=function(e,t){var s,i=[],a=function(e,t){var n=o(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(n??"")};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){a(this.name,this.value)});else for(s in e)he(s,e[s],t,a);return i.join("&")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!F.test(e))}).map(function(e,t){var s=n(this).val();return s==null?null:Array.isArray(s)?n.map(s,function(e){return{name:t.name,value:e.replace(Et,`\r
`)}}):{name:t.name,value:s.replace(Et,`\r
`)}}).get()}});var v,Fe,b,ae,H,I,Q,le,V,de,gt,o,i,a,_,it,Ce,n,y,x,Te,xe,Oe,et,_t,dt,Ne,Ct,h,wt,p,K,Ve,We,s,r,T,rt,Ie,ge,f,j,C,k,Ot,W,ue,F,pe,fe,d,Ze,we,te,ee,B,oe,$e,Ee,Ue,R,J,ct,lt,vt,M,jt,yt,xt,re,se,N,ie,G,at,z,Se,Y,Ke,pt,At,Nt=/%20/g,Lt=/#.*$/,Rt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vt=/^(?:GET|HEAD)$/,Bt=/^\/\//,De={},ve={},Je="*/".concat("*"),_e=i.createElement("a");_e.href=N.href;function He(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var s,i=0,a=t.toLowerCase().match(h)||[];if(o(n))for(;s=a[i++];)s[0]==="+"?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(n)):(e[s]=e[s]||[]).push(n)}}function Le(e,t,s,o){var i={},r=e===ve;function a(c){var l;return i[c]=!0,n.each(e[c]||[],function(e,n){var c=n(t,s,o);if(typeof c=="string"&&!r&&!i[c])return t.dataTypes.unshift(c),a(c),!1;if(r)return!(l=c)}),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function ze(e,t){var s,o,i=n.ajaxSettings.flatOptions||{};for(s in t)t[s]!==0[0]&&((i[s]?e:o||(o={}))[s]=t[s]);return o&&n.extend(!0,e,o),e}function Gt(e,t,n){for(var o,i,a,r,c=e.contents,s=e.dataTypes;s[0]==="*";)s.shift(),a===0[0]&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(o in c)if(c[o]&&c[o].test(a)){s.unshift(o);break}if(s[0]in n)i=s[0];else{for(o in n){if(!s[0]||e.converters[o+" "+s[0]]){i=o;break}r||(r=o)}i||=r}if(i)return i!==s[0]&&s.unshift(i),n[i]}function Xt(e,t,n,s){var o,i,a,c,l,r={},d=e.dataTypes.slice();if(d[1])for(i in e.converters)r[i.toLowerCase()]=e.converters[i];for(o=d.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!a&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=o,o=d.shift(),o)if(o==="*")o=a;else if(a!=="*"&&a!==o){if(i=r[a+" "+o]||r["* "+o],!i)for(l in r)if(c=l.split(" "),c[1]===o&&(i=r[a+" "+c[0]]||r["* "+c[0]],i)){i===!0?i=r[l]:r[l]!==!0&&(o=c[0],d.unshift(c[1]));break}if(i!==!0)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+a+" to "+o}}}return{state:"success",data:t}}return n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:N.href,type:"GET",isLocal:Ht.test(N.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ze(ze(e,n.ajaxSettings),t):ze(n.ajaxSettings,e)},ajaxPrefilter:He(De),ajaxTransport:He(ve),ajax:function(t,s){typeof t=="object"&&(s=t,t=0[0]),s||={};var r,c,d,u,m,f,g,b,_,w,o=n.ajaxSetup({},s),l=o.context||o,j=o.context&&(l.nodeType||l.jquery)?n(l):n.event,y=n.Deferred(),O=n.Callbacks("once memory"),p=o.statusCode||{},x={},C={},E="canceled",a={readyState:0,getResponseHeader:function(e){if(c){if(!m){m={};for(var t;t=Pt.exec(w);)m[t[1].toLowerCase()+" "]=(m[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=m[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return c?w:null},setRequestHeader:function(e,t){return c==null&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return c==null&&(o.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)a.always(e[a.status]);else for(t in e)p[t]=[p[t],e[t]];return this},abort:function(e){var t=e||E;return u&&u.abort(t),v(0,t),this}};if(y.promise(a),o.url=((t||o.url||N.href)+"").replace(Bt,N.protocol+"//"),o.type=s.method||s.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(h)||[""],o.crossDomain==null){d=i.createElement("a");try{d.href=o.url,d.href=d.href,o.crossDomain=_e.protocol+"//"+_e.host!==d.protocol+"//"+d.host}catch{o.crossDomain=!0}}if(o.data&&o.processData&&typeof o.data!="string"&&(o.data=n.param(o.data,o.traditional)),Le(De,o,s,a),c)return a;f=n.event&&o.global,f&&n.active++===0&&n.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Vt.test(o.type),r=o.url.replace(Lt,""),o.hasContent?o.data&&o.processData&&(o.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(o.data=o.data.replace(Nt,"+")):(g=o.url.slice(r.length),o.data&&(o.processData||typeof o.data=="string")&&(r+=(G.test(r)?"&":"?")+o.data,delete o.data),o.cache===!1&&(r=r.replace(Rt,"$1"),g+=(G.test(r)?"&":"?")+"_="+ie.guid++),o.url=r+g),o.ifModified&&(n.lastModified[r]&&a.setRequestHeader("If-Modified-Since",n.lastModified[r]),n.etag[r]&&a.setRequestHeader("If-None-Match",n.etag[r])),(o.data&&o.hasContent&&o.contentType!==!1||s.contentType)&&a.setRequestHeader("Content-Type",o.contentType),a.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+(o.dataTypes[0]!=="*"?", "+Je+"; q=0.01":""):o.accepts["*"]);for(_ in o.headers)a.setRequestHeader(_,o.headers[_]);if(o.beforeSend&&(o.beforeSend.call(l,a,o)===!1||c))return a.abort();if(E="abort",O.add(o.complete),a.done(o.success),a.fail(o.error),u=Le(ve,o,s,a),u){if(a.readyState=1,f&&j.trigger("ajaxSend",[a,o]),c)return a;o.async&&o.timeout>0&&(b=e.setTimeout(function(){a.abort("timeout")},o.timeout));try{c=!1,u.send(x,v)}catch(e){if(c)throw e;v(-1,e)}}else v(-1,"No Transport");function v(t,s,i,d){var m,g,v,_,x,h=s;if(c)return;c=!0,b&&e.clearTimeout(b),u=0[0],w=d||"",a.readyState=t>0?4:0,m=t>=200&&t<300||t===304,i&&(g=Gt(o,a,i)),!m&&n.inArray("script",o.dataTypes)>-1&&n.inArray("json",o.dataTypes)<0&&(o.converters["text script"]=function(){}),g=Xt(o,g,a,m),m?(o.ifModified&&(v=a.getResponseHeader("Last-Modified"),v&&(n.lastModified[r]=v),v=a.getResponseHeader("etag"),v&&(n.etag[r]=v)),t===204||o.type==="HEAD"?h="nocontent":t===304?h="notmodified":(h=g.state,x=g.data,_=g.error,m=!_)):(_=h,(t||!h)&&(h="error",t<0&&(t=0))),a.status=t,a.statusText=(s||h)+"",m?y.resolveWith(l,[x,h,a]):y.rejectWith(l,[a,h,_]),a.statusCode(p),p=0[0],f&&j.trigger(m?"ajaxSuccess":"ajaxError",[a,o,m?x:_]),O.fireWith(l,[a,h]),f&&(j.trigger("ajaxComplete",[a,o]),--n.active||n.event.trigger("ajaxStop"))}return a},getJSON:function(e,t,s){return n.get(e,t,s,"json")},getScript:function(e,t){return n.get(e,0[0],t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,s,i,a){return o(s)&&(a||=i,i=s,s=0[0]),n.ajax(n.extend({url:e,type:t,dataType:a,data:s,success:i},n.isPlainObject(e)&&e))}}),n.ajaxPrefilter(function(e){var t;for(t in e.headers)t.toLowerCase()==="content-type"&&(e.contentType=e.headers[t]||"")}),n._evalUrl=function(e,t,s){return n.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){n.globalEval(e,t,s)}})},n.fn.extend({wrapAll:function(e){var t;return this[0]&&(o(e)&&(e=e.call(this[0])),t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return o(e)?this.each(function(t){n(this).wrapInner(e.call(this,t))}):this.each(function(){var t=n(this),s=t.contents();s.length?s.wrapAll(e):t.append(e)})},wrap:function(e){var t=o(e);return this.each(function(s){n(this).wrapAll(t?e.call(this,s):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){n(this).replaceWith(this.childNodes)}),this}}),n.expr.pseudos.hidden=function(e){return!n.expr.pseudos.visible(e)},n.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},n.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}},at={0:200,1223:204},z=n.ajaxSettings.xhr(),a.cors=!!z&&"withCredentials"in z,a.ajax=z=!!z,n.ajaxTransport(function(t){var n,s;if(a.cors||z&&!t.crossDomain)return{send:function(o,i){var r,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),!t.crossDomain&&!o["X-Requested-With"]&&(o["X-Requested-With"]="XMLHttpRequest");for(r in o)a.setRequestHeader(r,o[r]);n=function(e){return function(){n&&(n=s=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,e==="abort"?a.abort():e==="error"?typeof a.status!="number"?i(0,"error"):i(a.status,a.statusText):i(at[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),s=a.onerror=a.ontimeout=n("error"),a.onabort!==0[0]?a.onabort=s:a.onreadystatechange=function(){a.readyState===4&&e.setTimeout(function(){n&&s()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),n.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){e.cache===0[0]&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,s;return{send:function(o,a){s=n("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",t=function(e){s.remove(),t=null,e&&a(e.type==="error"?404:200,e.type)}),i.head.appendChild(s[0])},abort:function(){t&&t()}}}}),Se=[],Y=/(=)\?(?=&|$)|\?\?/,n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Se.pop()||n.expando+"_"+ie.guid++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(t,s,i){var a,r,c,l=t.jsonp!==!1&&(Y.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Y.test(t.data)&&"data");if(l||t.dataTypes[0]==="jsonp")return a=t.jsonpCallback=o(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(Y,"$1"+a):t.jsonp!==!1&&(t.url+=(G.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return c||n.error(a+" was not called"),c[0]},t.dataTypes[0]="json",r=e[a],e[a]=function(){c=arguments},i.always(function(){r===0[0]?n(e).removeProp(a):e[a]=r,t[a]&&(t.jsonpCallback=s.jsonpCallback,Se.push(a)),c&&o(r)&&r(c[0]),c=r=0[0]}),"script"}),a.createHTMLDocument=function(){var e=i.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),n.parseHTML=function(e,t,s){if(typeof e!="string")return[];typeof t=="boolean"&&(s=t,t=!1);var o,r,c;return t||(a.createHTMLDocument?(t=i.implementation.createHTMLDocument(""),c=t.createElement("base"),c.href=i.location.href,t.head.appendChild(c)):t=i),o=Oe.exec(e),r=!s&&[],o?[t.createElement(o[1])]:(o=Qe([e],t,r),r&&r.length&&n(r).remove(),n.merge([],o.childNodes))},n.fn.load=function(e,t,s){var i,c,l,a=this,r=e.indexOf(" ");return r>-1&&(i=O(e.slice(r)),e=e.slice(0,r)),o(t)?(s=t,t=0[0]):t&&typeof t=="object"&&(c="POST"),a.length>0&&n.ajax({url:e,type:c||"GET",dataType:"html",data:t}).done(function(e){l=arguments,a.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).always(s&&function(e,t){a.each(function(){s.apply(this,l||[e.responseText,t,e])})}),this},n.expr.pseudos.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length},n.offset={setOffset:function(e,t,s){var i,r,c,l,d,u,f,h=n.css(e,"position"),m=n(e),a={};h==="static"&&(e.style.position="relative"),i=m.offset(),l=n.css(e,"top"),u=n.css(e,"left"),f=(h==="absolute"||h==="fixed")&&(l+u).indexOf("auto")>-1,f?(r=m.position(),d=r.top,c=r.left):(d=parseFloat(l)||0,c=parseFloat(u)||0),o(t)&&(t=t.call(e,s,n.extend({},i))),t.top!=null&&(a.top=t.top-i.top+d),t.left!=null&&(a.left=t.left-i.left+c),"using"in t?t.using.call(e,a):m.css(a)}},n.fn.extend({offset:function(e){if(arguments.length)return e===0[0]?this:this.each(function(t){n.offset.setOffset(this,e,t)});var s,o,t=this[0];if(!t)return;return t.getClientRects().length?(s=t.getBoundingClientRect(),o=t.ownerDocument.defaultView,{top:s.top+o.pageYOffset,left:s.left+o.pageXOffset}):{top:0,left:0}},position:function(){if(!this[0])return;var e,o,i,t=this[0],s={top:0,left:0};if(n.css(t,"position")==="fixed")o=t.getBoundingClientRect();else{for(o=this.offset(),i=t.ownerDocument,e=t.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&n.css(e,"position")==="static";)e=e.parentNode;e&&e!==t&&e.nodeType===1&&(s=n(e).offset(),s.top+=n.css(e,"borderTopWidth",!0),s.left+=n.css(e,"borderLeftWidth",!0))}return{top:o.top-s.top-n.css(t,"marginTop",!0),left:o.left-s.left-n.css(t,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&n.css(e,"position")==="static";)e=e.offsetParent;return e||j})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var s="pageYOffset"===t;n.fn[e]=function(n){return p(this,function(e,n,o){var i;if(_(e)?i=e:e.nodeType===9&&(i=e.defaultView),o===0[0])return i?i[t]:e[n];i?i.scrollTo(s?i.pageXOffset:o,s?o:i.pageYOffset):e[n]=o},e,n,arguments.length)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=qe(a.pixelPosition,function(e,s){if(s)return s=U(e,t),te.test(s)?n(e).position()[t]+"px":s})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(s,o){n.fn[o]=function(i,a){var r=arguments.length&&(s||typeof i!="boolean"),c=s||(i===!0||a===!0?"margin":"border");return p(this,function(t,s,i){var a;return _(t)?o.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]:t.nodeType===9?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):i===0[0]?n.css(t,s,c):n.style(t,s,i,c)},t,r?i:0[0],r)}})}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,s){return this.on(t,e,n,s)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Ke=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g,n.proxy=function(e,t){var s,i,a;return typeof t=="string"&&(i=e[t],t=e,e=i),o(e)?(a=b.call(arguments,2),s=function(){return e.apply(t||this,a.concat(b.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):0[0]},n.holdReady=function(e){e?n.readyWait++:n.ready(!0)},n.isArray=Array.isArray,n.parseJSON=JSON.parse,n.nodeName=u,n.isFunction=o,n.isWindow=_,n.camelCase=g,n.type=L,n.now=Date.now,n.isNumeric=function(e){var t=n.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))},n.trim=function(e){return e==null?"":(e+"").replace(Ke,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return n}),pt=e.jQuery,At=e.$,n.noConflict=function(t){return e.$===n&&(e.$=At),t&&e.jQuery===n&&(e.jQuery=pt),n},typeof t=="undefined"&&(e.jQuery=e.$=n),n})}}),g=e({"node_modules/headroom.js/dist/headroom.js"(e,t){(function(n,s){typeof e=="object"&&typeof t!="undefined"?t.exports=s():typeof define=="function"&&define.amd?define(s):(n||=self,n.Headroom=s())})(e,function(){"use strict";function t(){return typeof window!="undefined"}function s(){var e,t=!1;try{e={get passive(){t=!0}},window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{t=!1}return t}function o(){return!!(t()&&function(){}.bind&&"classList"in document.documentElement&&Object.assign&&Object.keys&&requestAnimationFrame)}function i(e){return e.nodeType===9}function a(e){return e&&e.document&&i(e.document)}function r(e){var s=e.document,t=s.body,n=s.documentElement;return{scrollHeight:function(){return Math.max(t.scrollHeight,n.scrollHeight,t.offsetHeight,n.offsetHeight,t.clientHeight,n.clientHeight)},height:function(){return e.innerHeight||n.clientHeight||t.clientHeight},scrollY:function(){return e.pageYOffset!==0[0]?e.pageYOffset:(n||t.parentNode||t).scrollTop}}}function c(e){return{scrollHeight:function(){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},height:function(){return Math.max(e.offsetHeight,e.clientHeight)},scrollY:function(){return e.scrollTop}}}function l(e){return a(e)?r(e):c(e)}function d(e,t,n){var c,d,m=s(),r=!1,i=l(e),a=i.scrollY(),o={};function u(){var e=Math.round(i.scrollY()),s=i.height(),c=i.scrollHeight();o.scrollY=e,o.lastScrollY=a,o.direction=e>a?"down":"up",o.distance=Math.abs(e-a),o.isOutOfBounds=e<0||e+s>c,o.top=e<=t.offset[o.direction],o.bottom=e+s>=c,o.toleranceExceeded=o.distance>t.tolerance[o.direction],n(o),a=e,r=!1}function h(){r||(r=!0,d=requestAnimationFrame(u))}return c=!!m&&{passive:!0,capture:!1},e.addEventListener("scroll",h,c),u(),{destroy:function(){cancelAnimationFrame(d),e.removeEventListener("scroll",h,c)}}}function n(e){return e===Object(e)?e:{down:e,up:e}}function e(t,s){s||={},Object.assign(this,e.options,s),this.classes=Object.assign({},e.options.classes,s.classes),this.elem=t,this.tolerance=n(this.tolerance),this.offset=n(this.offset),this.initialised=!1,this.frozen=!1}return e.prototype={constructor:e,init:function(){return e.cutsTheMustard&&!this.initialised&&(this.addClass("initial"),this.initialised=!0,setTimeout(function(e){e.scrollTracker=d(e.scroller,{offset:e.offset,tolerance:e.tolerance},e.update.bind(e))},100,this)),this},destroy:function(){this.initialised=!1,Object.keys(this.classes).forEach(this.removeClass,this),this.scrollTracker.destroy()},unpin:function(){(this.hasClass("pinned")||!this.hasClass("unpinned"))&&(this.addClass("unpinned"),this.removeClass("pinned"),this.onUnpin&&this.onUnpin.call(this))},pin:function(){this.hasClass("unpinned")&&(this.addClass("pinned"),this.removeClass("unpinned"),this.onPin&&this.onPin.call(this))},freeze:function(){this.frozen=!0,this.addClass("frozen")},unfreeze:function(){this.frozen=!1,this.removeClass("frozen")},top:function(){this.hasClass("top")||(this.addClass("top"),this.removeClass("notTop"),this.onTop&&this.onTop.call(this))},notTop:function(){this.hasClass("notTop")||(this.addClass("notTop"),this.removeClass("top"),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){this.hasClass("bottom")||(this.addClass("bottom"),this.removeClass("notBottom"),this.onBottom&&this.onBottom.call(this))},notBottom:function(){this.hasClass("notBottom")||(this.addClass("notBottom"),this.removeClass("bottom"),this.onNotBottom&&this.onNotBottom.call(this))},shouldUnpin:function(e){var t=e.direction==="down";return t&&!e.top&&e.toleranceExceeded},shouldPin:function(e){var t=e.direction==="up";return t&&e.toleranceExceeded||e.top},addClass:function(e){this.elem.classList.add.apply(this.elem.classList,this.classes[e].split(" "))},removeClass:function(e){this.elem.classList.remove.apply(this.elem.classList,this.classes[e].split(" "))},hasClass:function(e){return this.classes[e].split(" ").every(function(e){return this.classList.contains(e)},this.elem)},update:function(e){if(e.isOutOfBounds)return;if(this.frozen===!0)return;e.top?this.top():this.notTop(),e.bottom?this.bottom():this.notBottom(),this.shouldUnpin(e)?this.unpin():this.shouldPin(e)&&this.pin()}},e.options={tolerance:{up:0,down:0},offset:0,scroller:t()?window:null,classes:{frozen:"headroom--frozen",pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},e.cutsTheMustard=o(),e})}}),u=e({"node_modules/ev-emitter/ev-emitter.js"(e,t){(function(e,n){typeof define=="function"&&define.amd?define(n):typeof t=="object"&&t.exports?t.exports=n():e.EvEmitter=n()})(typeof window!="undefined"?window:e,function(){"use strict";function t(){}var e=t.prototype;return e.on=function(e,t){if(!e||!t)return;var n=this._events=this._events||{},s=n[e]=n[e]||[];return s.indexOf(t)==-1&&s.push(t),this},e.once=function(e,t){if(!e||!t)return;this.on(e,t);var n=this._onceEvents=this._onceEvents||{},s=n[e]=n[e]||{};return s[t]=!0,this},e.off=function(e,t){var s,n=this._events&&this._events[e];if(!n||!n.length)return;return s=n.indexOf(t),s!=-1&&n.splice(s,1),this},e.emitEvent=function(e,t){var s,o,i,a,n=this._events&&this._events[e];if(!n||!n.length)return;n=n.slice(0),t||=[];for(o=this._onceEvents&&this._onceEvents[e],i=0;i<n.length;i++)s=n[i],a=o&&o[s],a&&(this.off(e,s),delete o[s]),s.apply(this,t);return this},e.allOff=function(){delete this._events,delete this._onceEvents},t})}}),t=e({"node_modules/get-size/get-size.js"(e,t){(function(e,n){typeof define=="function"&&define.amd?define(n):typeof t=="object"&&t.exports?t.exports=n():e.getSize=n()})(window,function(){"use strict";function t(e){var t=parseFloat(e),n=e.indexOf("%")==-1&&!isNaN(t);return n&&t}function c(){}var s,o,l=typeof console=="undefined"?c:function(e){console.error(e)},n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i=n.length;function d(){for(var s,t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<i;e++)s=n[e],t[s]=0;return t}function a(e){var t=getComputedStyle(e);return t||l("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}s=!1;function u(){if(s)return;s=!0;var n,i,e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box",n=document.body||document.documentElement,n.appendChild(e),i=a(e),o=Math.round(t(i.width))==200,r.isBoxSizeOuter=o,n.removeChild(e)}function r(e){if(u(),typeof e=="string"&&(e=document.querySelector(e)),!e||typeof e!="object"||!e.nodeType)return;var s,c,l,h,m,f,p,g,v,b,j,y,_,w,O,r=a(e);if(r.display=="none")return d();s={},s.width=e.offsetWidth,s.height=e.offsetHeight;for(_=s.isBorderBox=r.boxSizing=="border-box",c=0;c<i;c++)h=n[c],y=r[h],m=parseFloat(y),s[h]=isNaN(m)?0:m;return f=s.paddingLeft+s.paddingRight,l=s.paddingTop+s.paddingBottom,w=s.marginLeft+s.marginRight,O=s.marginTop+s.marginBottom,p=s.borderLeftWidth+s.borderRightWidth,g=s.borderTopWidth+s.borderBottomWidth,v=_&&o,b=t(r.width),b!==!1&&(s.width=b+(v?0:f+p)),j=t(r.height),j!==!1&&(s.height=j+(v?0:l+g)),s.innerWidth=s.width-(f+p),s.innerHeight=s.height-(l+g),s.outerWidth=s.width+w,s.outerHeight=s.height+O,s}return r})}}),m=e({"node_modules/desandro-matches-selector/matches-selector.js"(e,t){(function(e,n){"use strict";typeof define=="function"&&define.amd?define(n):typeof t=="object"&&t.exports?t.exports=n():e.matchesSelector=n()})(window,function(){"use strict";var t=function(){var e,n,s,o,t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(n=["webkit","moz","ms","o"],e=0;e<n.length;e++)if(o=n[e],s=o+"MatchesSelector",t[s])return s}();return function(n,s){return n[t](s)}})}}),c=e({"node_modules/fizzy-ui-utils/utils.js"(e,t){(function(e,n){typeof define=="function"&&define.amd?define(["desandro-matches-selector/matches-selector"],function(t){return n(e,t)}):typeof t=="object"&&t.exports?t.exports=n(e,m()):e.fizzyUIUtils=n(e,e.matchesSelector)})(window,function(t,n){"use strict";var o,i,s={};return s.extend=function(e,t){for(var n in t)e[n]=t[n];return e},s.modulo=function(e,t){return(e%t+t)%t},i=Array.prototype.slice,s.makeArray=function(e){if(Array.isArray(e))return e;if(e==null)return[];var t=typeof e=="object"&&typeof e.length=="number";return t?i.call(e):[e]},s.removeFrom=function(e,t){var n=e.indexOf(t);n!=-1&&e.splice(n,1)},s.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,n(e,t))return e},s.getQueryElement=function(e){return typeof e=="string"?document.querySelector(e):e},s.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.filterFindElements=function(e,t){e=s.makeArray(e);var o=[];return e.forEach(function(e){if(!(e instanceof HTMLElement))return;if(!t){o.push(e);return}n(e,t)&&o.push(e);for(var i=e.querySelectorAll(t),s=0;s<i.length;s++)o.push(i[s])}),o},s.debounceMethod=function(e,t,n){n||=100;var o=e.prototype[t],s=t+"Timeout";e.prototype[t]=function(){var e,t,i=this[s];clearTimeout(i),t=arguments,e=this,this[s]=setTimeout(function(){o.apply(e,t),delete e[s]},n)}},s.docReady=function(e){var t=document.readyState;t=="complete"||t=="interactive"?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},s.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()},o=t.console,s.htmlInit=function(e,n){s.docReady(function(){var a=s.toDashed(n),i="data-"+a,c=document.querySelectorAll("["+i+"]"),l=document.querySelectorAll(".js-"+a),d=s.makeArray(c).concat(s.makeArray(l)),u=i+"-options",r=t.jQuery;d.forEach(function(t){var a,c,s=t.getAttribute(i)||t.getAttribute(u);try{a=s&&JSON.parse(s)}catch(e){o&&o.error("Error parsing "+i+" on "+t.className+": "+e);return}c=new e(t,a),r&&r.data(t,n,c)})})},s})}}),_=e({"node_modules/outlayer/item.js"(e,n){(function(e,s){typeof define=="function"&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size"],s):typeof n=="object"&&n.exports?n.exports=s(u(),t()):(e.Outlayer={},e.Outlayer.Item=s(e.EvEmitter,e.getSize))})(window,function(t,n){"use strict";function h(e){for(var t in e)return!1;return t=null,!0}var s,l,d,u,a=document.documentElement.style,o=typeof a.transition=="string"?"transition":"WebkitTransition",r=typeof a.transform=="string"?"transform":"WebkitTransform",c={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],m={transform:r,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"};function i(e,t){if(!e)return;this.element=e,this.layout=t,this.position={x:0,y:0},this._create()}s=i.prototype=Object.create(t.prototype),s.constructor=i,s._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},s.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.getSize=function(){this.size=n(this.element)},s.css=function(e){var t,n,s=this.element.style;for(t in e)n=m[t]||t,s[n]=e[t]},s.getPosition=function(){var s=getComputedStyle(this.element),o=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),a=s[o?"left":"right"],r=s[i?"top":"bottom"],e=parseFloat(a),t=parseFloat(r),n=this.layout.size;a.indexOf("%")!=-1&&(e=e/100*n.width),r.indexOf("%")!=-1&&(t=t/100*n.height),e=isNaN(e)?0:e,t=isNaN(t)?0:t,e-=o?n.paddingLeft:n.paddingRight,t-=i?n.paddingTop:n.paddingBottom,this.position.x=e,this.position.y=t},s.layoutPosition=function(){var o,i,a,r,s=this.layout.size,e={},t=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),c=t?"paddingLeft":"paddingRight",l=t?"left":"right",d=t?"right":"left",u=this.position.x+s[c];e[l]=this.getXValue(u),e[d]="",o=n?"paddingTop":"paddingBottom",i=n?"top":"bottom",a=n?"bottom":"top",r=this.position.y+s[o],e[i]=this.getYValue(r),e[a]="",this.css(e),this.emitEvent("layout",[this])},s.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},s.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},s._transitionTo=function(e,t){this.getPosition();var n,s,o,i=this.position.x,a=this.position.y,r=e==this.position.x&&t==this.position.y;if(this.setPosition(e,t),r&&!this.isTransitioning){this.layoutPosition();return}s=e-i,o=t-a,n={},n.transform=this.getTranslate(s,o),this.transition({to:n,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},s.getTranslate=function(e,t){var n=this.layout._getOption("originLeft"),s=this.layout._getOption("originTop");return e=n?e:-e,t=s?t:-t,"translate3d("+e+"px, "+t+"px, 0)"},s.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},s.moveTo=s._transitionTo,s.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},s._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},s.transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t,s,n=this._transn;for(t in e.onTransitionEnd)n.onEnd[t]=e.onTransitionEnd[t];for(t in e.to)n.ingProperties[t]=!0,e.isCleaning&&(n.clean[t]=!0);e.from&&(this.css(e.from),s=this.element.offsetHeight,s=null),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};function f(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}return l="opacity,"+f(r),s.enableTransition=function(){if(this.isTransitioning)return;var e=this.layout.options.transitionDuration,e=typeof e=="number"?e+"ms":e;this.css({transitionProperty:l,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(c,this,!1)},s.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},s.onotransitionend=function(e){this.ontransitionend(e)},d={"-webkit-transform":"transform"},s.ontransitionend=function(e){if(e.target!==this.element)return;var s,t=this._transn,n=d[e.propertyName]||e.propertyName;delete t.ingProperties[n],h(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd&&(s=t.onEnd[n],s.call(this),delete t.onEnd[n]),this.emitEvent("transitionEnd",[this])},s.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(c,this,!1),this.isTransitioning=!1},s._removeStyles=function(e){var n,t={};for(n in e)t[n]="";this.css(t)},u={transitionProperty:"",transitionDuration:"",transitionDelay:""},s.removeTransitionStyles=function(){this.css(u)},s.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},s.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},s.remove=function(){if(!o||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},s.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},s.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},s.getHideRevealTransitionEndProperty=function(e){var n,t=this.layout.options[e];if(t.opacity)return"opacity";for(n in t)return n},s.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},s.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},s.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i})}}),n=e({"node_modules/outlayer/outlayer.js"(e,n){(function(e,s){"use strict";typeof define=="function"&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,n,o,i){return s(e,t,n,o,i)}):typeof n=="object"&&n.exports?n.exports=s(e,u(),t(),c(),_()):e.Outlayer=s(e,e.EvEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)})(window,function(t,n,s,o,i){"use strict";var a,m,d=t.console,c=t.jQuery,u=function(){},f=0,l={};function r(e,t){var s,i,n=o.getQueryElement(e);if(!n){d&&d.error("Bad element for "+this.constructor.namespace+": "+(n||e));return}this.element=n,c&&(this.$element=c(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(t),s=++f,this.element.outlayerGUID=s,l[s]=this,this._create(),i=this._getOption("initLayout"),i&&this.layout()}r.namespace="outlayer",r.Item=i,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},a=r.prototype,o.extend(a,n.prototype),a.option=function(e){o.extend(this.options,e)},a._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&this.options[t]!==0[0]?this.options[t]:this.options[e]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},a._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle);var e=this._getOption("resize");e&&this.bindResize()},a.reloadItems=function(){this.items=this._itemize(this.element.children)},a._itemize=function(e){for(var o,i,n=this._filterFindItemElements(e),a=this.constructor.Item,s=[],t=0;t<n.length;t++)o=n[t],i=new a(o,this),s.push(i);return s},a._filterFindItemElements=function(e){return o.filterFindElements(e,this.options.itemSelector)},a.getItemElements=function(){return this.items.map(function(e){return e.element})},a.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=e!==0[0]?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},a._init=a.layout,a._resetLayout=function(){this.getSize()},a.getSize=function(){this.size=s(this.element)},a._getMeasurement=function(e,t){var o,n=this.options[e];n?(typeof n=="string"?o=this.element.querySelector(n):n instanceof HTMLElement&&(o=n),this[e]=o?s(o)[t]:n):this[e]=0},a.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},a._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},a._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),!e||!e.length)return;var n=[];e.forEach(function(e){var s=this._getItemLayoutPosition(e);s.item=e,s.isInstant=t||e.isLayoutInstant,n.push(s)},this),this._processLayoutQueue(n)},a._getItemLayoutPosition=function(){return{x:0,y:0}},a._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)},a.updateStagger=function(){var e=this.options.stagger;if(e==null){this.stagger=0;return}return this.stagger=p(e),this.stagger},a._positionItem=function(e,t,n,s,o){s?e.goTo(t,n):(e.stagger(o*this.stagger),e.moveTo(t,n))},a._postLayout=function(){this.resizeContainer()},a.resizeContainer=function(){var e,t=this._getOption("resizeContainer");if(!t)return;e=this._getContainerSize(),e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},a._getContainerSize=u,a._setContainerMeasure=function(e,t){if(e===0[0])return;var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"},a._emitCompleteOnItems=function(e,t){var n,s,i=this;function o(){i.dispatchEvent(e+"Complete",null,[t])}if(n=t.length,!t||!n){o();return}s=0;function a(){s++,s==n&&o()}t.forEach(function(t){t.once(e,a)})},a.dispatchEvent=function(e,t,n){var s,o=t?[t].concat(n):n;this.emitEvent(e,o),c&&(this.$element=this.$element||c(this.element),t?(s=c.Event(t),s.type=e,this.$element.trigger(s,n)):this.$element.trigger(e,n))},a.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},a.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},a.stamp=function(e){if(e=this._find(e),!e)return;this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this)},a.unstamp=function(e){if(e=this._find(e),!e)return;e.forEach(function(e){o.removeFrom(this.stamps,e),this.unignore(e)},this)},a._find=function(e){if(!e)return;return typeof e=="string"&&(e=this.element.querySelectorAll(e)),e=o.makeArray(e),e},a._manageStamps=function(){if(!this.stamps||!this.stamps.length)return;this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this)},a._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},a._manageStamp=u,a._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,o=s(e),i={left:t.left-n.left-o.marginLeft,top:t.top-n.top-o.marginTop,right:n.right-t.right-o.marginRight,bottom:n.bottom-t.bottom-o.marginBottom};return i},a.handleEvent=o.handleEvent,a.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},a.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},a.onresize=function(){this.resize()},o.debounceMethod(r,"onresize",100),a.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout())return;this.layout()},a.needsResizeLayout=function(){var e=s(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},a.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},a.appended=function(e){var t=this.addItems(e);if(!t.length)return;this.layoutItems(t,!0),this.reveal(t)},a.prepended=function(e){var n,t=this._itemize(e);if(!t.length)return;n=this.items.slice(0),this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)},a.reveal=function(e){if(this._emitCompleteOnItems("reveal",e),!e||!e.length)return;var t=this.updateStagger();e.forEach(function(e,n){e.stagger(n*t),e.reveal()})},a.hide=function(e){if(this._emitCompleteOnItems("hide",e),!e||!e.length)return;var t=this.updateStagger();e.forEach(function(e,n){e.stagger(n*t),e.hide()})},a.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},a.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},a.getItem=function(e){for(var n,t=0;t<this.items.length;t++)if(n=this.items[t],n.element==e)return n},a.getItems=function(e){e=o.makeArray(e);var t=[];return e.forEach(function(e){var n=this.getItem(e);n&&t.push(n)},this),t},a.remove=function(e){var t=this.getItems(e);if(this._emitCompleteOnItems("remove",t),!t||!t.length)return;t.forEach(function(e){e.remove(),o.removeFrom(this.items,e)},this)},a.destroy=function(){var t,e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize(),t=this.element.outlayerGUID,delete l[t],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},r.data=function(e){e=o.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&l[t]},r.create=function(e,t){var n=h(r);return n.defaults=o.extend({},r.defaults),o.extend(n.defaults,t),n.compatOptions=o.extend({},r.compatOptions),n.namespace=e,n.data=r.data,n.Item=h(i),o.htmlInit(n,e),c&&c.bridget&&c.bridget(e,n),n};function h(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}m={ms:1,s:1e3};function p(e){if(typeof e=="number")return e;var s,t=e.match(/(^\d*\.?\d*)(\w*)/),n=t&&t[1],o=t&&t[2];return n.length?(n=parseFloat(n),s=m[o]||1,n*s):0}return r.Item=i,r})}}),v=e({"node_modules/isotope-layout/js/item.js"(e,t){(function(e,s){typeof define=="function"&&define.amd?define(["outlayer/outlayer"],s):typeof t=="object"&&t.exports?t.exports=s(n()):(e.Isotope=e.Isotope||{},e.Isotope.Item=s(e.Outlayer))})(window,function(t){"use strict";function s(){t.Item.apply(this,arguments)}var o,n=s.prototype=Object.create(t.Item.prototype),i=n._create;return n._create=function(){this.id=this.layout.itemGUID++,i.call(this),this.sortData={}},n.updateSortData=function(){if(this.isIgnored)return;this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var e,t,n=this.layout.options.getSortData,s=this.layout._sorters;for(e in n)t=s[e],this.sortData[e]=t(this.element,this)},o=n.destroy,n.destroy=function(){o.apply(this,arguments),this.css({display:""})},s})}}),s=e({"node_modules/isotope-layout/js/layout-mode.js"(e,s){(function(e,o){typeof define=="function"&&define.amd?define(["get-size/get-size","outlayer/outlayer"],o):typeof s=="object"&&s.exports?s.exports=o(t(),n()):(e.Isotope=e.Isotope||{},e.Isotope.LayoutMode=o(e.getSize,e.Outlayer))})(window,function(t,n){"use strict";function o(e){this.isotope=e,e&&(this.options=e.options[this.namespace],this.element=e.element,this.items=e.filteredItems,this.size=e.size)}var s=o.prototype,i=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];return i.forEach(function(e){s[e]=function(){return n.prototype[e].apply(this.isotope,arguments)}}),s.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),n=this.isotope.size&&e;return n&&e.innerHeight!=this.isotope.size.innerHeight},s._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},s.getColumnWidth=function(){this.getSegmentSize("column","Width")},s.getRowHeight=function(){this.getSegmentSize("row","Height")},s.getSegmentSize=function(e,t){var s,n=e+t,o="outer"+t;if(this._getMeasurement(n,o),this[n])return;s=this.getFirstItemSize(),this[n]=s&&s[o]||this.isotope.size["inner"+t]},s.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},s.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},s.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},o.modes={},o.create=function(e,t){function n(){o.apply(this,arguments)}return n.prototype=Object.create(s),n.prototype.constructor=n,t&&(n.options=t),n.prototype.namespace=e,o.modes[e]=n,n},o})}}),j=e({"node_modules/masonry-layout/masonry.js"(e,s){(function(e,o){typeof define=="function"&&define.amd?define(["outlayer/outlayer","get-size/get-size"],o):typeof s=="object"&&s.exports?s.exports=o(n(),t()):e.Masonry=o(e.Outlayer,e.getSize)})(window,function(t,n){"use strict";var s,o=t.create("masonry");return o.compatOptions.fitWidth="isFitWidth",s=o.prototype,s._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},s.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e,t,s,o,r,i=this.items[0],a=i&&i.element;this.columnWidth=a&&n(a).outerWidth||this.containerWidth}e=this.columnWidth+=this.gutter,s=this.containerWidth+this.gutter,t=s/e,o=e-s%e,r=o&&o<1?"round":"floor",t=Math[r](t),this.cols=Math.max(t,1)},s.getContainerWidth=function(){var t=this._getOption("fitWidth"),s=t?this.element.parentNode:this.element,e=n(s);this.containerWidth=e&&e.innerWidth},s._getItemLayoutPosition=function(e){e.getSize();for(var o=e.size.outerWidth%this.columnWidth,i=o&&o<1?"round":"ceil",n=Math[i](e.size.outerWidth/this.columnWidth),n=Math.min(n,this.cols),a=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",t=this[a](n,e),r={x:this.columnWidth*t.col,y:t.y},c=t.y+e.size.outerHeight,l=n+t.col,s=t.col;s<l;s++)this.colYs[s]=c;return r},s._getTopColPosition=function(e){var t=this._getTopColGroup(e),n=Math.min.apply(Math,t);return{col:t.indexOf(n),y:n}},s._getTopColGroup=function(e){if(e<2)return this.colYs;for(var n=[],s=this.cols+1-e,t=0;t<s;t++)n[t]=this._getColGroupY(t,e);return n},s._getColGroupY=function(e,t){if(t<2)return this.colYs[e];var n=this.colYs.slice(e,e+t);return Math.max.apply(Math,n)},s._getHorizontalColPosition=function(e,t){var n=this.horizontalColIndex%this.cols,s=e>1&&n+e>this.cols,n=s?0:n,o=t.size.outerWidth&&t.size.outerHeight;return this.horizontalColIndex=o?n+e:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,e)}},s._manageStamp=function(e){var t,l,d,a=n(e),s=this._getElementOffset(e),u=this._getOption("originLeft"),r=u?s.left:s.right,c=r+a.outerWidth,i=Math.floor(r/this.columnWidth),i=Math.max(0,i),o=Math.floor(c/this.columnWidth);o-=c%this.columnWidth?0:1;for(o=Math.min(this.cols-1,o),l=this._getOption("originTop"),d=(l?s.top:s.bottom)+a.outerHeight,t=i;t<=o;t++)this.colYs[t]=Math.max(d,this.colYs[t])},s._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},s._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t;){if(this.colYs[t]!==0)break;e++}return(this.cols-e)*this.columnWidth-this.gutter},s.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},o})}}),y=e({"node_modules/isotope-layout/js/layout-modes/masonry.js"(e,t){(function(e,n){typeof define=="function"&&define.amd?define(["../layout-mode","masonry-layout/masonry"],n):typeof t=="object"&&t.exports?t.exports=n(s(),j()):n(e.Isotope.LayoutMode,e.Masonry)})(window,function(t,n){"use strict";var o,a,r,i=t.create("masonry"),s=i.prototype,c={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(o in n.prototype)c[o]||(s[o]=n.prototype[o]);return a=s.measureColumns,s.measureColumns=function(){this.items=this.isotope.filteredItems,a.call(this)},r=s._getOption,s._getOption=function(e){return e=="fitWidth"?this.options.isFitWidth!==0[0]?this.options.isFitWidth:this.options.fitWidth:r.apply(this.isotope,arguments)},i})}}),p=e({"node_modules/isotope-layout/js/layout-modes/fit-rows.js"(e,t){(function(n,o){typeof define=="function"&&define.amd?define(["../layout-mode"],o):typeof e=="object"?t.exports=o(s()):o(n.Isotope.LayoutMode)})(window,function(t){"use strict";var s=t.create("fitRows"),n=s.prototype;return n._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},n._getItemLayoutPosition=function(e){e.getSize();var n,t=e.size.outerWidth+this.gutter,s=this.isotope.size.innerWidth+this.gutter;return this.x!==0&&t+this.x>s&&(this.x=0,this.y=this.maxY),n={x:this.x,y:this.y},this.maxY=Math.max(this.maxY,this.y+e.size.outerHeight),this.x+=t,n},n._getContainerSize=function(){return{height:this.maxY}},s})}}),w=e({"node_modules/isotope-layout/js/layout-modes/vertical.js"(e,t){(function(e,n){typeof define=="function"&&define.amd?define(["../layout-mode"],n):typeof t=="object"&&t.exports?t.exports=n(s()):n(e.Isotope.LayoutMode)})(window,function(t){"use strict";var s=t.create("vertical",{horizontalAlignment:0}),n=s.prototype;return n._resetLayout=function(){this.y=0},n._getItemLayoutPosition=function(e){e.getSize();var t=(this.isotope.size.innerWidth-e.size.outerWidth)*this.options.horizontalAlignment,n=this.y;return this.y+=e.size.outerHeight,{x:t,y:n}},n._getContainerSize=function(){return{height:this.y}},s})}}),O=e({"node_modules/isotope-layout/js/isotope.js"(e,o){(function(e,i){typeof define=="function"&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","./item","./layout-mode","./layout-modes/masonry","./layout-modes/fit-rows","./layout-modes/vertical"],function(t,n,s,o,a,r){return i(e,t,n,s,o,a,r)}):typeof o=="object"&&o.exports?o.exports=i(e,n(),t(),m(),c(),v(),s(),y(),p(),w()):e.Isotope=i(e,e.Outlayer,e.getSize,e.matchesSelector,e.fizzyUIUtils,e.Isotope.Item,e.Isotope.LayoutMode)})(window,function(t,n,s,o,i,a,r){"use strict";var c,u,h,d=t.jQuery,m=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/g,"")},l=n.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});l.Item=a,l.LayoutMode=r,c=l.prototype,c._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),n.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var e in r.modes)this._initLayoutMode(e)},c.reloadItems=function(){this.itemGUID=0,n.prototype.reloadItems.call(this)},c._itemize=function(){for(var s,e=n.prototype._itemize.apply(this,arguments),t=0;t<e.length;t++)s=e[t],s.id=this.itemGUID++;return this._updateItemsSortData(e),e},c._initLayoutMode=function(e){var t=r.modes[e],n=this.options[e]||{};this.options[e]=t.options?i.extend(t.options,n):n,this.modes[e]=new t(this)},c.layout=function(){if(!this._isLayoutInited&&this._getOption("initLayout")){this.arrange();return}this._layout()},c._layout=function(){var e=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,e),this._isLayoutInited=!0},c.arrange=function(e){this.option(e),this._getIsInstant();var t=this._filter(this.items);this.filteredItems=t.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[t]):this._hideReveal(t),this._sort(),this._layout()},c._init=c.arrange,c._hideReveal=function(e){this.reveal(e.needReveal),this.hide(e.needHide)},c._getIsInstant=function(){var e=this._getOption("layoutInstant"),t=e!==0[0]?e:!this._isLayoutInited;return this._isInstant=t,t},c._bindArrangeComplete=function(){var t,n,s,o=this;function e(){t&&n&&s&&o.dispatchEvent("arrangeComplete",null,[o.filteredItems])}this.once("layoutComplete",function(){t=!0,e()}),this.once("hideComplete",function(){n=!0,e()}),this.once("revealComplete",function(){s=!0,e()})},c._filter=function(e){for(var t,n,s=this.options.filter,s=s||"*",i=[],a=[],r=[],c=this._getFilterTest(s),o=0;o<e.length;o++){if(t=e[o],t.isIgnored)continue;n=c(t),n&&i.push(t),n&&t.isHidden?a.push(t):!n&&!t.isHidden&&r.push(t)}return{matches:i,needReveal:a,needHide:r}},c._getFilterTest=function(e){return d&&this.options.isJQueryFiltering?function(t){return d(t.element).is(e)}:typeof e=="function"?function(t){return e(t.element)}:function(t){return o(t.element,e)}},c.updateSortData=function(e){var t;e?(e=i.makeArray(e),t=this.getItems(e)):t=this.items,this._getSorters(),this._updateItemsSortData(t)},c._getSorters=function(){var t,n,e=this.options.getSortData;for(t in e)n=e[t],this._sorters[t]=u(n)},c._updateItemsSortData=function(e){for(var s,n=e&&e.length,t=0;n&&t<n;t++)s=e[t],s.updateSortData()},u=function(){function e(e){if(typeof e!="string")return e;var n=m(e).split(" "),s=n[0],o=s.match(/^\[(.+)\]$/),r=o&&o[1],i=t(r,s),a=l.sortDataParsers[n[1]];return e=a?function(e){return e&&a(i(e))}:function(e){return e&&i(e)},e}function t(e,t){return e?function(n){return n.getAttribute(e)}:function(n){var s=n.querySelector(t);return s&&s.textContent}}return e}(),l.sortDataParsers={parseInt:function(e){return parseInt(e,10)},parseFloat:function(e){return parseFloat(e)}},c._sort=function(){if(!this.options.sortBy)return;var t,e=i.makeArray(this.options.sortBy);this._getIsSameSortBy(e)||(this.sortHistory=e.concat(this.sortHistory)),t=f(this.sortHistory,this.options.sortAscending),this.filteredItems.sort(t)},c._getIsSameSortBy=function(e){for(var t=0;t<e.length;t++)if(e[t]!=this.sortHistory[t])return!1;return!0};function f(e,t){return function(s,o){for(var i,a,r,l,d,c=0;c<e.length;c++)if(i=e[c],a=s.sortData[i],r=o.sortData[i],a>r||a<r)return l=t[i]!==0[0]?t[i]:t,d=l?1:-1,(a>r?1:-1)*d;return 0}}return c._mode=function(){var e=this.options.layoutMode,t=this.modes[e];if(!t)throw new Error("No layout mode: "+e);return t.options=this.options[e],t},c._resetLayout=function(){n.prototype._resetLayout.call(this),this._mode()._resetLayout()},c._getItemLayoutPosition=function(e){return this._mode()._getItemLayoutPosition(e)},c._manageStamp=function(e){this._mode()._manageStamp(e)},c._getContainerSize=function(){return this._mode()._getContainerSize()},c.needsResizeLayout=function(){return this._mode().needsResizeLayout()},c.appended=function(e){var n,t=this.addItems(e);if(!t.length)return;n=this._filterRevealAdded(t),this.filteredItems=this.filteredItems.concat(n)},c.prepended=function(e){var n,t=this._itemize(e);if(!t.length)return;this._resetLayout(),this._manageStamps(),n=this._filterRevealAdded(t),this.layoutItems(this.filteredItems),this.filteredItems=n.concat(this.filteredItems),this.items=t.concat(this.items)},c._filterRevealAdded=function(e){var t=this._filter(e);return this.hide(t.needHide),this.reveal(t.matches),this.layoutItems(t.matches,!0),t.matches},c.insert=function(e){var t,s,o,i,n=this.addItems(e);if(!n.length)return;s=n.length;for(t=0;t<s;t++)o=n[t],this.element.appendChild(o.element);i=this._filter(n).matches;for(t=0;t<s;t++)n[t].isLayoutInstant=!0;this.arrange();for(t=0;t<s;t++)delete n[t].isLayoutInstant;this.reveal(i)},h=c.remove,c.remove=function(e){e=i.makeArray(e);var t,s,o,n=this.getItems(e);h.call(this,e);for(s=n&&n.length,t=0;s&&t<s;t++)o=n[t],i.removeFrom(this.filteredItems,o)},c.shuffle=function(){for(var t,e=0;e<this.items.length;e++)t=this.items[e],t.sortData.random=Math.random();this.options.sortBy="random",this._sort(),this._layout()},c._noTransition=function(e,t){var n,s=this.options.transitionDuration;return this.options.transitionDuration=0,n=e.apply(this,t),this.options.transitionDuration=s,n},c.getFilteredItemElements=function(){return this.filteredItems.map(function(e){return e.element})},l})}}),x=e({"node_modules/bootstrap/dist/js/bootstrap.bundle.js"(e,t){(function(n,s){typeof e=="object"&&typeof t!="undefined"?t.exports=s():typeof define=="function"&&define.amd?define(s):(n=typeof globalThis!="undefined"?globalThis:n||self,n.bootstrap=s())})(e,function(){"use strict";const C=new Map,gt={set(e,t,n){C.has(e)||C.set(e,new Map);const s=C.get(e);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,n)},get(e,t){return C.has(e)?C.get(e).get(t)||null:null},remove(e,t){if(!C.has(e))return;const n=C.get(e);n.delete(t),n.size===0&&C.delete(e)}},Jr=1e6,Xr=1e3,dt="transitionend",is=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),Gr=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Yr=e=>{do e+=Math.floor(Math.random()*Jr);while(document.getElementById(e))return e},Pr=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const s=Number.parseFloat(t),o=Number.parseFloat(n);return!s&&!o?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*Xr)},ns=e=>{e.dispatchEvent(new Event(dt))},g=e=>!!e&&typeof e=="object"&&(typeof e.jquery!="undefined"&&(e=e[0]),typeof e.nodeType!="undefined"),w=e=>g(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(is(e)):null,R=e=>{if(!g(e)||e.getClientRects().length===0)return!1;const n=getComputedStyle(e).getPropertyValue("visibility")==="visible",t=e.closest("details:not([open])");if(!t)return n;if(t!==e){const n=e.closest("summary");if(n&&n.parentNode!==t)return!1;if(n===null)return!1}return n},y=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(typeof e.disabled!="undefined"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false"),ts=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?ts(e.parentNode):null},ve=()=>{},te=e=>{e.offsetHeight},Jn=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ke=[],Nr=e=>{document.readyState==="loading"?(Ke.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ke)e()}),Ke.push(e)):e()},c=()=>document.documentElement.dir==="rtl",u=e=>{Nr(()=>{const t=Jn();if(t){const n=e.NAME,s=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=s,e.jQueryInterface)}})},o=(e,t=[],n=e)=>typeof e=="function"?e.call(...t):n,Zn=(e,t,n=!0)=>{if(!n){o(e);return}const a=5,r=Pr(t)+a;let s=!1;const i=({target:n})=>{if(n!==t)return;s=!0,t.removeEventListener(dt,i),o(e)};t.addEventListener(dt,i),setTimeout(()=>{s||ns(t)},r)},We=(e,t,n,s)=>{const i=e.length;let o=e.indexOf(t);return o===-1?!n&&s?e[i-1]:e[0]:(o+=n?1:-1,s&&(o=(o+i)%i),e[Math.max(0,Math.min(o,i-1))])},zr=/[^.]*(?=\..*)\.|.*/,Tr=/\..*/,Ar=/::\d+$/,Ne={};let qn=1;const Un={mouseenter:"mouseover",mouseleave:"mouseout"},Er=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Hn(e,t){return t&&`${t}::${qn++}`||e.uidEvent||qn++}function Ln(e){const t=Hn(e);return e.uidEvent=t,Ne[t]=Ne[t]||{},Ne[t]}function xr(t,n){return function s(o){return at(o,{delegateTarget:t}),s.oneOff&&e.off(t,o.type,n),n.apply(t,[o])}}function Or(t,n,s){return function o(i){const a=t.querySelectorAll(n);for(let{target:r}=i;r&&r!==this;r=r.parentNode)for(const c of a){if(c!==r)continue;return at(i,{delegateTarget:r}),o.oneOff&&e.off(t,i.type,n,s),s.apply(r,[i])}}}function Sn(e,t,n=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===n)}function An(e,t,n){const o=typeof t=="string",i=o?n:t||n;let s=Cn(e);return Er.has(s)||(s=e),[o,i,s]}function kn(e,t,n,s,o){if(typeof t!="string"||!e)return;let[r,i,c]=An(t,n,s);if(t in Un){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};i=e(i)}const d=Ln(e),u=d[c]||(d[c]={}),l=Sn(u,i,r?n:null);if(l){l.oneOff=l.oneOff&&o;return}const h=Hn(i,t.replace(zr,"")),a=r?Or(e,n,i):xr(e,i);a.delegationSelector=r?n:null,a.callable=i,a.oneOff=o,a.uidEvent=h,u[h]=a,e.addEventListener(c,a,r)}function nt(e,t,n,s,o){const i=Sn(t[n],s,o);if(!i)return;e.removeEventListener(n,i,Boolean(o)),delete t[n][i.uidEvent]}function wr(e,t,n,s){const o=t[n]||{};for(const[a,i]of Object.entries(o))a.includes(s)&&nt(e,t,n,i.callable,i.delegationSelector)}function Cn(e){return e=e.replace(Tr,""),Un[e]||e}const e={on(e,t,n,s){kn(e,t,n,s,!1)},one(e,t,n,s){kn(e,t,n,s,!0)},off(e,t,n,s){if(typeof t!="string"||!e)return;const[c,a,i]=An(t,n,s),l=i!==t,o=Ln(e),r=o[i]||{},d=t.startsWith(".");if(typeof a!="undefined"){if(!Object.keys(r).length)return;nt(e,o,i,a,c?n:null);return}if(d)for(const n of Object.keys(o))wr(e,o,n,t.slice(1));for(const[s,n]of Object.entries(r)){const a=s.replace(Ar,"");(!l||t.includes(a))&&nt(e,o,i,n.callable,n.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const i=Jn(),l=Cn(t),d=t!==l;let s=null,a=!0,r=!0,c=!1;d&&i&&(s=i.Event(t,n),i(e).trigger(s),a=!s.isPropagationStopped(),r=!s.isImmediatePropagationStopped(),c=s.isDefaultPrevented());const o=at(new Event(t,{bubbles:a,cancelable:!0}),n);return c&&o.preventDefault(),r&&e.dispatchEvent(o),o.defaultPrevented&&s&&s.preventDefault(),o}};function at(e,t={}){for(const[n,s]of Object.entries(t))try{e[n]=s}catch{Object.defineProperty(e,n,{configurable:!0,get(){return s}})}return e}function xn(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function ut(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const v={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${ut(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ut(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const o of n){let s=o.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1),t[s]=xn(e.dataset[o])}return t},getDataAttribute(e,t){return xn(e.getAttribute(`data-bs-${ut(t)}`))}};class se{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=g(t)?v.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...g(t)?v.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[n,s]of Object.entries(t)){const o=e[n],i=g(o)?"element":Gr(o);if(!new RegExp(s).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${i}" but expected type "${s}".`)}}}const _r="5.3.8";class h extends se{constructor(e,t){if(super(),e=w(e),!e)return;this._element=e,this._config=this._getConfig(t),gt.set(this._element,this.constructor.DATA_KEY,this)}dispose(){gt.remove(this._element,this.constructor.DATA_KEY),e.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,n=!0){Zn(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return gt.get(w(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return _r}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const mt=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(e=>is(e)).join(","):null},t={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(e=>e.matches(t))},parents(e,t){const s=[];let n=e.parentNode.closest(t);for(;n;)s.push(n),n=n.parentNode.closest(t);return s},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!y(e)&&R(e))},getSelectorFromElement(e){const n=mt(e);return n?t.findOne(n)?n:null:null},getElementFromSelector(e){const n=mt(e);return n?t.findOne(n):null},getMultipleElementsFromSelector(e){const n=mt(e);return n?t.find(n):[]}},ge=(n,s="hide")=>{const i=`click.dismiss${n.EVENT_KEY}`,o=n.NAME;e.on(document,i,`[data-bs-dismiss="${o}"]`,function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),y(this))return;const i=t.getElementFromSelector(this)||this.closest(`.${o}`),a=n.getOrCreateInstance(i);a[s]()})},yr="alert",jr="bs.alert",jn=`.${jr}`,vr=`close${jn}`,cr=`closed${jn}`,ir="fade",Qa="show";class pe extends h{static get NAME(){return yr}close(){const t=e.trigger(this._element,vr);if(t.defaultPrevented)return;this._element.classList.remove(Qa);const n=this._element.classList.contains(ir);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),e.trigger(this._element,cr),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=pe.getOrCreateInstance(this);if(typeof e!="string")return;if(t[e]===0[0]||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)})}}ge(pe,"close"),u(pe);const Ga="button",qa="bs.button",Wa=`.${qa}`,Ba=".data-api",Pa="active",fn='[data-bs-toggle="button"]',Ta=`click${Wa}${Ba}`;class fe extends h{static get NAME(){return Ga}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Pa))}static jQueryInterface(e){return this.each(function(){const t=fe.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}e.on(document,Ta,fn,e=>{e.preventDefault();const t=e.target.closest(fn),n=fe.getOrCreateInstance(t);n.toggle()}),u(fe);const va="swipe",P=".bs.swipe",ga=`touchstart${P}`,pa=`touchmove${P}`,fa=`touchend${P}`,ma=`pointerdown${P}`,ua=`pointerup${P}`,la="touch",Qi="pen",Gi="pointer-event",Vi=40,Bi={endCallback:null,leftCallback:null,rightCallback:null},Ri={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Pe extends se{constructor(e,t){if(super(),this._element=e,!e||!Pe.isSupported())return;this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents()}static get Default(){return Bi}static get DefaultType(){return Ri}static get NAME(){return va}dispose(){e.off(this._element,P)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),o(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=Vi)return;const t=e/this._deltaX;if(this._deltaX=0,!t)return;o(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(e.on(this._element,ma,e=>this._start(e)),e.on(this._element,ua,e=>this._end(e)),this._element.classList.add(Gi)):(e.on(this._element,ga,e=>this._start(e)),e.on(this._element,pa,e=>this._move(e)),e.on(this._element,fa,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Qi||e.pointerType===la)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ni="carousel",Di="bs.carousel",_=`.${Di}`,qt=".data-api",zi="ArrowLeft",Mi="ArrowRight",Si=500,ne="next",W="prev",U="left",ke="right",Ei=`slide${_}`,Be=`slid${_}`,ji=`keydown${_}`,bi=`mouseenter${_}`,gi=`mouseleave${_}`,li=`dragstart${_}`,ci=`load${_}${qt}`,si=`click${_}${qt}`,Pt="carousel",xe="active",ei="slide",Jo="carousel-item-end",Zo="carousel-item-start",Qo="carousel-item-next",Xo="carousel-item-prev",Dt=".active",vt=".carousel-item",Go=Dt+vt,Ko=".carousel-item img",Bo=".carousel-indicators",Po="[data-bs-slide], [data-bs-slide-to]",No='[data-bs-ride="carousel"]',Do={[zi]:ke,[Mi]:U},To={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Fo={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ie extends h{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=t.findOne(Bo,this._element),this._addEventListeners(),this._config.ride===Pt&&this.cycle()}static get Default(){return To}static get DefaultType(){return Fo}static get NAME(){return Ni}next(){this._slide(ne)}nextWhenVisible(){!document.hidden&&R(this._element)&&this.next()}prev(){this._slide(W)}pause(){this._isSliding&&ns(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!this._config.ride)return;if(this._isSliding){e.one(this._element,Be,()=>this.cycle());return}this.cycle()}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){e.one(this._element,Be,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const o=t>s?ne:W;this._slide(o,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&e.on(this._element,ji,e=>this._keydown(e)),this._config.pause==="hover"&&(e.on(this._element,bi,()=>this.pause()),e.on(this._element,gi,()=>this._maybeEnableCycle())),this._config.touch&&Pe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of t.find(Ko,this._element))e.on(n,li,e=>e.preventDefault());const n=()=>{if(this._config.pause!=="hover")return;this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Si+this._config.interval)},s={leftCallback:()=>this._slide(this._directionToOrder(U)),rightCallback:()=>this._slide(this._directionToOrder(ke)),endCallback:n};this._swipeHelper=new Pe(this._element,s)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Do[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const s=t.findOne(Dt,this._indicatorsElement);s.classList.remove(xe),s.removeAttribute("aria-current");const n=t.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(xe),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const o=this._getActive(),a=t===ne,s=n||We(this._getItems(),o,a,this._config.wrap);if(s===o)return;const c=this._getItemIndex(s),l=n=>e.trigger(this._element,n,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(o),to:c}),d=l(Ei);if(d.defaultPrevented)return;if(!o||!s)return;const u=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=s;const i=a?Zo:Jo,r=a?Qo:Xo;s.classList.add(r),te(s),o.classList.add(i),s.classList.add(i);const h=()=>{s.classList.remove(i,r),s.classList.add(xe),o.classList.remove(xe,r,i),this._isSliding=!1,l(Be)};this._queueCallback(h,o,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(ei)}_getActive(){return t.findOne(Go,this._element)}_getItems(){return t.find(vt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return c()?e===U?W:ne:e===U?ne:W}_orderToDirection(e){return c()?e===W?U:ke:e===W?ke:U}static jQueryInterface(e){return this.each(function(){const t=ie.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===0[0]||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}e.on(document,si,Po,function(e){const s=t.getElementFromSelector(this);if(!s||!s.classList.contains(Pt))return;e.preventDefault();const n=ie.getOrCreateInstance(s),o=this.getAttribute("data-bs-slide-to");if(o){n.to(o),n._maybeEnableCycle();return}if(v.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()}),e.on(window,ci,()=>{const e=t.find(No);for(const t of e)ie.getOrCreateInstance(t)}),u(ie);const cs="collapse",vo="bs.collapse",ee=`.${vo}`,po=".data-api",co=`show${ee}`,ao=`shown${ee}`,io=`hide${ee}`,Js=`hidden${ee}`,Qs=`click${ee}${po}`,Fe="show",L="collapse",me="collapsing",Gs="collapsed",Ys=`:scope .${L} .${L}`,Ks="collapse-horizontal",Us="width",Ws="height",$s=".collapse.show, .collapse.collapsing",st='[data-bs-toggle="collapse"]',Vs={parent:null,toggle:!0},Bs={parent:"(null|element)",toggle:"boolean"};class re extends h{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const s=t.find(st);for(const e of s){const n=t.getSelectorFromElement(e),o=t.find(n).filter(e=>e===this._element);n!==null&&o.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Vs}static get DefaultType(){return Bs}static get NAME(){return cs}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren($s).filter(e=>e!==this._element).map(e=>re.getOrCreateInstance(e,{toggle:!1}))),n.length&&n[0]._isTransitioning)return;const s=e.trigger(this._element,co);if(s.defaultPrevented)return;for(const e of n)e.hide();const t=this._getDimension();this._element.classList.remove(L),this._element.classList.add(me),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(me),this._element.classList.add(L,Fe),this._element.style[t]="",e.trigger(this._element,ao)},i=t[0].toUpperCase()+t.slice(1),a=`scroll${i}`;this._queueCallback(o,this._element,!0),this._element.style[t]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const s=e.trigger(this._element,io);if(s.defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,te(this._element),this._element.classList.add(me),this._element.classList.remove(L,Fe);for(const e of this._triggerArray){const n=t.getElementFromSelector(e);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(me),this._element.classList.add(L),e.trigger(this._element,Js)};this._element.style[n]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Fe)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=w(e.parent),e}_getDimension(){return this._element.classList.contains(Ks)?Us:Ws}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(st);for(const n of e){const s=t.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(e){const n=t.find(Ys,this._config.parent);return t.find(e,this._config.parent).filter(e=>!n.includes(e))}_addAriaAndCollapsedClass(e,t){if(!e.length)return;for(const n of e)n.classList.toggle(Gs,!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const n=re.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e]()}})}}e.on(document,Qs,st,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const e of t.getMultipleElementsFromSelector(this))re.getOrCreateInstance(e,{toggle:!1}).toggle()}),u(re);var E,ce,A,Nn,In,Q,Yn,Xn,Se,dn,Tt,Ft,St,ue,s="top",a="bottom",i="right",n="left",Ce="auto",Y=[s,a,i,n],T="start",q="end",Vt="clippingParents",$e="viewport",I="popper",Ut="reference",ze=Y.reduce(function(e,t){return e.concat([t+"-"+T,t+"-"+q])},[]),Te=[].concat(Y,[Ce]).reduce(function(e,t){return e.concat([t,t+"-"+T,t+"-"+q])},[]),Yt="beforeRead",Gt="read",Xt="afterRead",Qt="beforeMain",Zt="main",Jt="afterMain",en="beforeWrite",tn="write",nn="afterWrite",sn=[Yt,Gt,Xt,Qt,Zt,Jt,en,tn,nn];function f(e){return e?(e.nodeName||"").toLowerCase():null}function r(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t?t.defaultView||window:window}return e}function D(e){var t=r(e).Element;return e instanceof t||e instanceof Element}function l(e){var t=r(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ye(e){if(typeof ShadowRoot=="undefined")return!1;var t=r(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Is(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var o=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];if(!l(n)||!f(n))return;Object.assign(n.style,o),Object.keys(s).forEach(function(e){var t=s[e];t===!1?n.removeAttribute(e):n.setAttribute(e,t===!0?"":t)})})}function Hs(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]),a=i.reduce(function(e,t){return e[t]="",e},{});if(!l(s)||!f(s))return;Object.assign(s.style,a),Object.keys(o).forEach(function(e){s.removeAttribute(e)})})}}const Ze={name:"applyStyles",enabled:!0,phase:"write",fn:Is,effect:Hs,requires:["computeStyles"]};function p(e){return e.split("-")[0]}E=Math.max,ce=Math.min,A=Math.round;function ht(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function bn(){return!/^((?!chrome|android).)*safari/i.test(ht())}function X(e,t,n){t===0[0]&&(t=!1),n===0[0]&&(n=!1),s=e.getBoundingClientRect(),o=1,i=1,t&&l(e)&&(o=e.offsetWidth>0?A(s.width)/e.offsetWidth||1:1,i=e.offsetHeight>0?A(s.height)/e.offsetHeight||1:1);var s,o,i,f=D(e)?r(e):window,a=f.visualViewport,u=!bn()&&n,c=(s.left+(u&&a?a.offsetLeft:0))/o,d=(s.top+(u&&a?a.offsetTop:0))/i,h=s.width/o,m=s.height/i;return{width:h,height:m,top:d,right:c+h,bottom:d+m,left:c,x:c,y:d}}function ft(e){var t=X(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function _n(e,t){var n,s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&Ye(s)){n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function j(e){return r(e).getComputedStyle(e)}function Ps(e){return["table","td","th"].indexOf(f(e))>=0}function k(e){return((D(e)?e.ownerDocument:e.document)||window.document).documentElement}function he(e){return f(e)==="html"?e:e.assignedSlot||e.parentNode||(Ye(e)?e.host:null)||k(e)}function En(e){return!l(e)||j(e).position==="fixed"?null:e.offsetParent}function Rs(e){var t,n,o,s=/firefox/i.test(ht()),i=/Trident/i.test(ht());if(i&&l(e)&&(o=j(e),o.position==="fixed"))return null;for(t=he(e),Ye(t)&&(t=t.host);l(t)&&["html","body"].indexOf(f(t))<0;){if(n=j(t),n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||s&&n.willChange==="filter"||s&&n.filter&&n.filter!=="none")return t;t=t.parentNode}return null}function Z(e){for(var n=r(e),t=En(e);t&&Ps(t)&&j(t).position==="static";)t=En(t);return t&&(f(t)==="html"||f(t)==="body"&&j(t).position==="static")?n:t||Rs(e)||n}function Ge(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function J(e,t,n){return E(e,ce(t,n))}function As(e,t,n){var s=J(e,t,n);return s>n?n:s}function Tn(){return{top:0,right:0,bottom:0,left:0}}function zn(e){return Object.assign({},Tn(),e)}function Dn(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}Nn=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,zn(typeof t!="number"?t:Dn(t,Y))};function Cs(e){var r,c,d,u,f,g,v,b,j,y,_,O,x,C,E,t=e.state,S=e.name,A=e.options,h=t.elements.arrow,m=t.modifiersData.popperOffsets,w=p(t.placement),o=Ge(w),k=[n,i].indexOf(w)>=0,l=k?"height":"width";if(!h||!m)return;g=Nn(A.padding,t),v=ft(h),b=o==="y"?s:n,j=o==="y"?a:i,y=t.rects.reference[l]+t.rects.reference[o]-m[o]-t.rects.popper[l],_=m[o]-t.rects.reference[o],c=Z(h),f=c?o==="y"?c.clientHeight||0:c.clientWidth||0:0,O=y/2-_/2,x=g[b],C=f-v[l]-g[j],u=f/2-v[l]/2+O,d=J(x,u,C),E=o,t.modifiersData[S]=(r={},r[E]=d,r.centerOffset=d-u,r)}function Os(e){var n=e.state,o=e.options,s=o.element,t=s===0[0]?"[data-popper-arrow]":s;if(t==null)return;if(typeof t=="string"&&(t=n.elements.popper.querySelector(t),!t))return;if(!_n(n.elements.popper,t))return;n.elements.arrow=t}const Pn={name:"arrow",enabled:!0,phase:"main",fn:Cs,effect:Os,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function V(e){return e.split("-")[1]}In={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ys(e,t){var s=e.x,o=e.y,n=t.devicePixelRatio||1;return{x:A(s*n)/n||0,y:A(o*n)/n||0}}function Vn(e){var c,u,h,g,v,b,w,T,z,m=e.popper,F=e.popperRect,d=e.placement,L=e.variation,f=e.offsets,S=e.position,y=e.gpuAcceleration,E=e.adaptive,p=e.roundOffsets,M=e.isFixed,N=f.x,t=N===0[0]?0:N,C=f.y,o=C===0[0]?0:C,D=typeof p=="function"?p({x:t,y:o}):{x:t,y:o},t=D.x,o=D.y,A=f.hasOwnProperty("x"),x=f.hasOwnProperty("y"),O=n,_=s,l=window;return E&&(c=Z(m),g="clientHeight",b="clientWidth",c===r(m)&&(c=k(m),j(c).position!=="static"&&S==="absolute"&&(g="scrollHeight",b="scrollWidth")),c=c,(d===s||(d===n||d===i)&&L===q)&&(_=a,T=M&&c===l&&l.visualViewport?l.visualViewport.height:c[g],o-=T-F.height,o*=y?1:-1),(d===n||(d===s||d===a)&&L===q)&&(O=i,z=M&&c===l&&l.visualViewport?l.visualViewport.width:c[b],t-=z-F.width,t*=y?1:-1)),w=Object.assign({position:S},E&&In),v=p===!0?ys({x:t,y:o},r(m)):{x:t,y:o},t=v.x,o=v.y,y?Object.assign({},w,(u={},u[_]=x?"0":"",u[O]=A?"0":"",u.transform=(l.devicePixelRatio||1)<=1?"translate("+t+"px, "+o+"px)":"translate3d("+t+"px, "+o+"px, 0)",u)):Object.assign({},w,(h={},h[_]=x?o+"px":"",h[O]=A?t+"px":"",h.transform="",h))}function bs(e){var t=e.state,n=e.options,s=n.gpuAcceleration,c=s===0[0]||s,o=n.adaptive,l=o===0[0]||o,i=n.roundOffsets,a=i===0[0]||i,r={placement:p(t.placement),variation:V(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Vn(Object.assign({},r,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:a})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vn(Object.assign({},r,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Xe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bs,data:{}};Q={passive:!0};function vs(e){var n=e.state,t=e.instance,s=e.options,o=s.scroll,i=o===0[0]||o,a=s.resize,c=a===0[0]||a,l=r(n.elements.popper),d=[].concat(n.scrollParents.reference,n.scrollParents.popper);return i&&d.forEach(function(e){e.addEventListener("scroll",t.update,Q)}),c&&l.addEventListener("resize",t.update,Q),function(){i&&d.forEach(function(e){e.removeEventListener("scroll",t.update,Q)}),c&&l.removeEventListener("resize",t.update,Q)}}const De={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vs,data:{}};Yn={left:"right",right:"left",bottom:"top",top:"bottom"};function Ae(e){return e.replace(/left|right|bottom|top/g,function(e){return Yn[e]})}Xn={start:"end",end:"start"};function Qn(e){return e.replace(/start|end/g,function(e){return Xn[e]})}function Ue(e){var t=r(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function qe(e){return X(k(e)).left+Ue(e).scrollLeft}function gs(e,t){var s,d=r(e),o=k(e),n=d.visualViewport,i=o.clientWidth,a=o.clientHeight,c=0,l=0;return n&&(i=n.width,a=n.height,s=bn(),(s||!s&&t==="fixed")&&(c=n.offsetLeft,l=n.offsetTop)),{width:i,height:a,x:c+qe(e),y:l}}function hs(e){var s,n=k(e),o=Ue(e),t=(s=e.ownerDocument)==null?0[0]:s.body,i=E(n.scrollWidth,n.clientWidth,t?t.scrollWidth:0,t?t.clientWidth:0),r=E(n.scrollHeight,n.clientHeight,t?t.scrollHeight:0,t?t.clientHeight:0),a=-o.scrollLeft+qe(e),c=-o.scrollTop;return j(t||n).direction==="rtl"&&(a+=E(n.clientWidth,t?t.clientWidth:0)-i),{width:i,height:r,x:a,y:c}}function et(e){var t=j(e),n=t.overflow,s=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function ss(e){return["html","body","#document"].indexOf(f(e))>=0?e.ownerDocument.body:l(e)&&et(e)?e:ss(he(e))}function ae(e,t){t===0[0]&&(t=[]);var s,n=ss(e),o=n===((s=e.ownerDocument)==null?0[0]:s.body),i=r(n),a=o?[i].concat(i.visualViewport||[],et(n)?n:[]):n,c=t.concat(a);return o?c:c.concat(ae(he(a)))}function lt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function us(e,t){var n=X(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function zt(e,t,n){return t===$e?lt(gs(e,n)):D(t)?us(t,n):lt(hs(k(e)))}function Ti(e){var n=ae(he(e)),s=["absolute","fixed"].indexOf(j(e).position)>=0,t=s&&l(e)?Z(e):e;return D(t)?n.filter(function(e){return D(e)&&_n(e,t)&&f(e)!=="body"}):[]}function ds(e,t,n,s){var a=t==="clippingParents"?Ti(e):[].concat(t),i=[].concat(a,[n]),r=i[0],o=i.reduce(function(t,n){var o=zt(e,n,s);return t.top=E(o.top,t.top),t.right=ce(o.right,t.right),t.bottom=ce(o.bottom,t.bottom),t.left=E(o.left,t.left),t},zt(e,r,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function rs(e){var o,r,l,t=e.reference,c=e.element,d=e.placement,u=d?p(d):null,f=d?V(d):null,h=t.x+t.width/2-c.width/2,m=t.y+t.height/2-c.height/2;switch(u){case s:o={x:h,y:t.y-c.height};break;case a:o={x:h,y:t.y+t.height};break;case i:o={x:t.x+t.width,y:m};break;case n:o={x:t.x-c.width,y:m};break;default:o={x:t.x,y:t.y}}if(r=u?Ge(u):null,r!=null)switch(l=r==="y"?"height":"width",f){case T:o[r]=o[r]-(t[l]/2-c[l]/2);break;case q:o[r]=o[r]+(t[l]/2-c[l]/2);break}return o}function N(e,t){t===0[0]&&(t={});var g,n=t,m=n.placement,f=m===0[0]?e.placement:m,x=n.strategy,T=x===0[0]?e.strategy:x,O=n.boundary,C=O===0[0]?Vt:O,j=n.rootBoundary,F=j===0[0]?$e:j,_=n.elementContext,c=_===0[0]?I:_,p=n.altBoundary,M=p!==0[0]&&p,b=n.padding,h=b===0[0]?0:b,o=zn(typeof h!="number"?h:Dn(h,Y)),S=c===I?Ut:I,w=e.rects.popper,u=e.elements[M?S:c],r=ds(D(u)?u:u.contextElement||k(e.elements.popper),C,F,T),y=X(e.elements.reference),E=rs({reference:y,element:w,placement:f}),A=lt(Object.assign({},w,E)),l=c===I?A:y,d={top:r.top-l.top+o.top,bottom:l.bottom-r.bottom+o.bottom,left:r.left-l.left+o.left,right:l.right-r.right+o.right},v=e.modifiersData.offset;return c===I&&v&&(g=v[f],Object.keys(d).forEach(function(e){var t=[i,a].indexOf(e)>=0?1:-1,n=[s,a].indexOf(e)>=0?"y":"x";d[e]+=g[n]*t})),d}function ms(e,t){t===0[0]&&(t={});var s,n=t,c=n.placement,l=n.boundary,d=n.rootBoundary,u=n.padding,h=n.flipVariations,i=n.allowedAutoPlacements,m=i===0[0]?Te:i,a=V(c),r=a?h?ze:ze.filter(function(e){return V(e)===a}):Y,o=r.filter(function(e){return m.indexOf(e)>=0});return o.length===0&&(o=r),s=o.reduce(function(t,n){return t[n]=N(e,{placement:n,boundary:l,rootBoundary:d,padding:u})[p(n)],t},{}),Object.keys(s).sort(function(e,t){return s[e]-s[t]})}function fs(e){if(p(e)===Ce)return[];var t=Ae(e);return[Qn(e),t,Qn(t)]}function ps(e){var t=e.state,o=e.options,C=e.name;if(t.modifiersData[C]._skip)return;for(var r,c,l,u,h,g,v,y,_,x,E,k,z,M=o.mainAxis,I=M===0[0]||M,D=o.altAxis,P=D===0[0]||D,R=o.fallbackPlacements,L=o.padding,w=o.boundary,O=o.rootBoundary,B=o.altBoundary,F=o.flipVariations,j=F===0[0]||F,$=o.allowedAutoPlacements,d=t.options.placement,K=p(d),H=K===d,q=R||(H||!j?[Ae(d)]:fs(d)),f=[d].concat(q).reduce(function(e,n){return e.concat(p(n)===Ce?ms(t,{placement:n,boundary:w,rootBoundary:O,padding:L,flipVariations:j,allowedAutoPlacements:$}):n)},[]),U=t.rects.reference,W=t.rects.popper,A=new Map,S=!0,m=f[0],b=0;b<f.length;b++){if(r=f[b],v=p(r),g=V(r)===T,y=[s,a].indexOf(v)>=0,_=y?"width":"height",h=N(t,{placement:r,boundary:w,rootBoundary:O,altBoundary:B,padding:L}),l=y?g?i:n:g?a:s,U[_]>W[_]&&(l=Ae(l)),z=Ae(l),c=[],I&&c.push(h[v]<=0),P&&c.push(h[l]<=0,h[z]<=0),c.every(function(e){return e})){m=r,S=!1;break}A.set(r,c)}if(S)for(k=j?3:1,E=function(t){var n=f.find(function(e){var n=A.get(e);if(n)return n.slice(0,t).every(function(e){return e})});if(n)return m=n,"break"},u=k;u>0;u--)if(x=E(u),x==="break")break;t.placement!==m&&(t.modifiersData[C]._skip=!0,t.placement=m,t.reset=!0)}const es={name:"flip",enabled:!0,phase:"main",fn:ps,requiresIfExists:["offset"],data:{_skip:!1}};function Kn(e,t,n){return n===0[0]&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function $n(e){return[s,i,a,n].some(function(t){return e[t]>=0})}function js(e){var t=e.state,a=e.name,r=t.rects.reference,c=t.rects.popper,l=t.modifiersData.preventOverflow,d=N(t,{elementContext:"reference"}),u=N(t,{altBoundary:!0}),n=Kn(d,r),s=Kn(u,c,l),o=$n(n),i=$n(s);t.modifiersData[a]={referenceClippingOffsets:n,popperEscapeOffsets:s,isReferenceHidden:o,hasPopperEscaped:i},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":o,"data-popper-escaped":i})}const Bn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:js};function _s(e,t,o){var c=p(e),d=[n,s].indexOf(c)>=0?-1:1,l=typeof o=="function"?o(Object.assign({},t,{placement:e})):o,a=l[0],r=l[1],a=a||0,r=(r||0)*d;return[n,i].indexOf(c)>=0?{x:r,y:a}:{x:a,y:r}}function ws(e){var t=e.state,i=e.options,a=e.name,n=i.offset,r=n===0[0]?[0,0]:n,s=Te.reduce(function(e,n){return e[n]=_s(n,t.rects,r),e},{}),o=s[t.placement],c=o.x,l=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[a]=s}const Rn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ws};function xs(e){var t=e.state,n=e.name;t.modifiersData[n]=rs({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Le={name:"popperOffsets",enabled:!0,phase:"read",fn:xs,data:{}};function Es(e){return e==="x"?"y":"x"}function ks(e){var fe,r,h,P,H,$,W,U,ee,Y,Q,ue,v,k,K,q,ne,se,x,ie,B,re,le,G,me,c,f,w,A,M,F,z,D,R,I,X,t=e.state,l=e.options,be=e.name,pe=l.mainAxis,ge=pe===0[0]||pe,oe=l.altAxis,we=oe!==0[0]&&oe,_e=l.boundary,ye=l.rootBoundary,ve=l.altBoundary,je=l.padding,de=l.tether,d=de===0[0]||de,ae=l.tetherOffset,S=ae===0[0]?0:ae,O=N(t,{boundary:_e,rootBoundary:ye,padding:je,altBoundary:ve}),te=p(t.placement),C=V(t.placement),he=!C,o=Ge(te),j=Es(o),b=t.modifiersData.popperOffsets,u=t.rects.reference,g=t.rects.popper,_=typeof S=="function"?S(Object.assign({},t.rects,{placement:t.placement})):S,m=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(!b)return;ge&&(P=o==="y"?s:n,H=o==="y"?a:i,r=o==="y"?"height":"width",h=b[o],$=h+O[P],W=h-O[H],U=d?-g[r]/2:0,ee=C===T?u[r]:g[r],Q=C===T?-g[r]:-u[r],Y=t.elements.arrow,ue=d&&Y?ft(Y):{width:0,height:0},k=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Tn(),q=k[P],K=k[H],v=J(0,u[r],ue[r]),ne=he?u[r]/2-U-v-q-m.mainAxis:ee-v-q-m.mainAxis,se=he?-u[r]/2+U+v+K+m.mainAxis:Q+v+K+m.mainAxis,x=t.elements.arrow&&Z(t.elements.arrow),ie=x?o==="y"?x.clientTop||0:x.clientLeft||0:0,B=(fe=y?.[o])!=null?fe:0,re=h+ne-B-ie,le=h+se-B,I=J(d?ce($,re):$,h,d?E(W,le):W),b[o]=I,L[o]=I-h),we&&(G=o==="x"?s:n,me=o==="x"?a:i,c=b[j],f=j==="y"?"height":"width",R=c+O[G],D=c-O[me],w=[s,n].indexOf(te)!==-1,z=(X=y?.[j])!=null?X:0,F=w?R:c-u[f]-g[f]-z+m.altAxis,M=w?c+u[f]+g[f]-z-m.altAxis:D,A=d&&w?As(F,c,M):J(d?F:R,c,d?M:D),b[j]=A,L[j]=A-c),t.modifiersData[be]=L}const Fn={name:"preventOverflow",enabled:!0,phase:"main",fn:ks,requiresIfExists:["offset"]};function Ss(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ms(e){return e===r(e)||!l(e)?Ue(e):Ss(e)}function Fs(e){var t=e.getBoundingClientRect(),n=A(t.width)/e.offsetWidth||1,s=A(t.height)/e.offsetHeight||1;return n!==1||s!==1}function Ts(e,t,n){n===0[0]&&(n=!1);var r=l(t),c=l(t)&&Fs(t),i=k(t),o=X(e,c,n),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!n)&&((f(t)!=="body"||et(i))&&(a=Ms(t)),l(t)?(s=X(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):i&&(s.x=qe(i))),{x:o.left+a.scrollLeft-s.x,y:o.top+a.scrollTop-s.y,width:o.width,height:o.height}}function zs(e){var n=new Map,t=new Set,s=[];e.forEach(function(e){n.set(e.name,e)});function o(e){t.add(e.name);var i=[].concat(e.requires||[],e.requiresIfExists||[]);i.forEach(function(e){if(!t.has(e)){var s=n.get(e);s&&o(s)}}),s.push(e)}return e.forEach(function(e){t.has(e.name)||o(e)}),s}function Ds(e){var t=zs(e);return sn.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}function Ns(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=0[0],n(e())})})),t}}function Ls(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}Se={placement:"bottom",modifiers:[],strategy:"absolute"};function On(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(e){return!e||typeof e.getBoundingClientRect!="function"})}function Oe(e){e===0[0]&&(e={});var n=e,s=n.defaultModifiers,i=s===0[0]?[]:s,o=n.defaultOptions,t=o===0[0]?Se:o;return function(n,s,o){o===0[0]&&(o=t);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Se,t),modifiersData:{},elements:{reference:n,popper:s},attributes:{},styles:{}},c=[],l=!1,r={state:a,setOptions:function(o){var c,l=typeof o=="function"?o(a.options):o;return d(),a.options=Object.assign({},t,a.options,l),a.scrollParents={reference:D(n)?ae(n):n.contextElement?ae(n.contextElement):[],popper:ae(s)},c=Ds(Ls([].concat(i,a.options.modifiers))),a.orderedModifiers=c.filter(function(e){return e.enabled}),u(),r.update()},forceUpdate:function(){if(l)return;var o=a.elements,i=o.reference,n=o.popper;if(!On(i,n))return;a.rects={reference:Ts(i,Z(n),a.options.strategy==="fixed"),popper:ft(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(t=0;t<a.orderedModifiers.length;t++){if(a.reset===!0){a.reset=!1,t=-1;continue}var t,s=a.orderedModifiers[t],c=s.fn,d=s.options,u=d===0[0]?{}:d,h=s.name;typeof c=="function"&&(a||=c({state:a,options:u,name:h,instance:r}))}},update:Ns(function(){return new Promise(function(e){r.forceUpdate(),e(a)})}),destroy:function(){d(),l=!0}};if(!On(n,s))return r;r.setOptions(o).then(function(e){!l&&o.onFirstUpdate&&o.onFirstUpdate(e)});function u(){a.orderedModifiers.forEach(function(e){var s,o,i=e.name,t=e.options,l=t===0[0]?{}:t,n=e.effect;typeof n=="function"&&(s=n({state:a,name:i,instance:r,options:l}),o=function(){},c.push(s||o))})}function d(){c.forEach(function(e){return e()}),c=[]}return r}}dn=Oe(),Tt=[De,Le,Xe,Ze],Ft=Oe({defaultModifiers:Tt}),St=[De,Le,Xe,Ze,Rn,es,Fn,Pn,Bn],ue=Oe({defaultModifiers:St});const kt=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Jt,afterRead:Xt,afterWrite:nn,applyStyles:Ze,arrow:Pn,auto:Ce,basePlacements:Y,beforeMain:Qt,beforeRead:Yt,beforeWrite:en,bottom:a,clippingParents:Vt,computeStyles:Xe,createPopper:ue,createPopperBase:dn,createPopperLite:Ft,detectOverflow:N,end:q,eventListeners:De,flip:es,hide:Bn,left:n,main:Zt,modifierPhases:sn,offset:Rn,placements:Te,popper:I,popperGenerator:Oe,popperOffsets:Le,preventOverflow:Fn,read:Gt,reference:Ut,right:i,start:T,top:s,variationPlacements:ze,viewport:$e,write:tn},Symbol.toStringTag,{value:"Module"})),Et="dropdown",qs="bs.dropdown",F=`.${qs}`,rt=".data-api",Xs="Escape",yt="Tab",Zs="ArrowUp",jt="ArrowDown",eo=2,to=`hide${F}`,no=`hidden${F}`,so=`show${F}`,oo=`shown${F}`,bt=`click${F}${rt}`,_t=`keydown${F}${rt}`,ro=`keyup${F}${rt}`,G="show",lo="dropup",uo="dropend",ho="dropstart",mo="dropup-center",fo="dropdown-center",z='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',go=`${z}.${G}`,we=".dropdown-menu",bo=".navbar",jo=".navbar-nav",yo=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",_o=c()?"top-end":"top-start",wo=c()?"top-start":"top-end",Oo=c()?"bottom-end":"bottom-start",xo=c()?"bottom-start":"bottom-end",Co=c()?"left-start":"right-start",Eo=c()?"right-start":"left-start",ko="top",Ao="bottom",So={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Mo={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class m extends h{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=t.next(this._element,we)[0]||t.prev(this._element,we)[0]||t.findOne(we,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return So}static get DefaultType(){return Mo}static get NAME(){return Et}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const t={relatedTarget:this._element},n=e.trigger(this._element,so,t);if(n.defaultPrevented)return;if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(jo))for(const t of[].concat(...document.body.children))e.on(t,"mouseover",ve);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(G),this._element.classList.add(G),e.trigger(this._element,oo,t)}hide(){if(y(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const n=e.trigger(this._element,to,t);if(n.defaultPrevented)return;if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))e.off(t,"mouseover",ve);this._popper&&this._popper.destroy(),this._menu.classList.remove(G),this._element.classList.remove(G),this._element.setAttribute("aria-expanded","false"),v.removeDataAttribute(this._menu,"popper"),e.trigger(this._element,no,t)}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!g(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Et.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof kt=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:g(this._config.reference)?e=w(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=ue(e,this._menu,t)}_isShown(){return this._menu.classList.contains(G)}_getPlacement(){const e=this._parent;if(e.classList.contains(uo))return Co;if(e.classList.contains(ho))return Eo;if(e.classList.contains(mo))return ko;if(e.classList.contains(fo))return Ao;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(lo)?t?wo:_o:t?xo:Oo}_detectNavbar(){return this._element.closest(bo)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(e=>Number.parseInt(e,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(v.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...o(this._config.popperConfig,[0[0],e])}}_selectMenuItem({key:e,target:n}){const s=t.find(yo,this._menu).filter(e=>R(e));if(!s.length)return;We(s,n,e===jt,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const t=m.getOrCreateInstance(this,e);if(typeof e!="string")return;if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()})}static clearMenus(e){if(e.button===eo||e.type==="keyup"&&e.key!==yt)return;const n=t.find(go);for(const a of n){const t=m.getInstance(a);if(!t||t._config.autoClose===!1)continue;const s=e.composedPath(),o=s.includes(t._menu);if(s.includes(t._element)||t._config.autoClose==="inside"&&!o||t._config.autoClose==="outside"&&o)continue;if(t._menu.contains(e.target)&&(e.type==="keyup"&&e.key===yt||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const i={relatedTarget:t._element};e.type==="click"&&(i.clickEvent=e),t._completeHide(i)}}static dataApiKeydownHandler(e){const a=/input|textarea/i.test(e.target.tagName),s=e.key===Xs,o=[Zs,jt].includes(e.key);if(!o&&!s)return;if(a&&!s)return;e.preventDefault();const i=this.matches(z)?this:t.prev(this,z)[0]||t.next(this,z)[0]||t.findOne(z,e.delegateTarget.parentNode),n=m.getOrCreateInstance(i);if(o){e.stopPropagation(),n.show(),n._selectMenuItem(e);return}n._isShown()&&(e.stopPropagation(),n.hide(),i.focus())}}e.on(document,_t,z,m.dataApiKeydownHandler),e.on(document,_t,we,m.dataApiKeydownHandler),e.on(document,bt,m.clearMenus),e.on(document,ro,m.clearMenus),e.on(document,bt,z,function(e){e.preventDefault(),m.getOrCreateInstance(this).toggle()}),u(m);const wt="backdrop",zo="fade",Ot="show",xt=`mousedown.bs.${wt}`,Lo={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ro={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ct extends se{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Lo}static get DefaultType(){return Ro}static get NAME(){return wt}show(e){if(!this._config.isVisible){o(e);return}this._append();const t=this._getElement();this._config.isAnimated&&te(t),t.classList.add(Ot),this._emulateAnimation(()=>{o(e)})}hide(e){if(!this._config.isVisible){o(e);return}this._getElement().classList.remove(Ot),this._emulateAnimation(()=>{this.dispose(),o(e)})}dispose(){if(!this._isAppended)return;e.off(this._element,xt),this._element.remove(),this._isAppended=!1}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(zo),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=w(e.rootElement),e}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),e.on(t,xt,()=>{o(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Zn(e,this._getElement(),this._config.isAnimated)}}const Ho="focustrap",Io="bs.focustrap",de=`.${Io}`,Vo=`focusin${de}`,$o=`keydown.tab${de}`,Wo="Tab",Uo="forward",At="backward",qo={autofocus:!0,trapElement:null},Yo={autofocus:"boolean",trapElement:"element"};class Mt extends se{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return qo}static get DefaultType(){return Yo}static get NAME(){return Ho}activate(){if(this._isActive)return;this._config.autofocus&&this._config.trapElement.focus(),e.off(document,de),e.on(document,Vo,e=>this._handleFocusin(e)),e.on(document,$o,e=>this._handleKeydown(e)),this._isActive=!0}deactivate(){if(!this._isActive)return;this._isActive=!1,e.off(document,de)}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const s=t.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===At?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){if(e.key!==Wo)return;this._lastTabNavDirection=e.shiftKey?At:Uo}}const Nt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Lt=".sticky-top",ye="padding-right",Rt="margin-right";class Me{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ye,t=>t+e),this._setElementAttributes(Nt,ye,t=>t+e),this._setElementAttributes(Lt,Rt,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ye),this._resetElementAttributes(Nt,ye),this._resetElementAttributes(Lt,Rt)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const s=this.getWidth(),o=e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const o=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${n(Number.parseFloat(o))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&v.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){const n=e=>{const n=v.getDataAttribute(e,t);if(n===null){e.style.removeProperty(t);return}v.removeDataAttribute(e,t),e.style.setProperty(t,n)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,n){if(g(e)){n(e);return}for(const s of t.find(e,this._element))n(s)}}const ti="modal",ni="bs.modal",d=`.${ni}`,oi=".data-api",ii="Escape",ai=`hide${d}`,ri=`hidePrevented${d}`,Ht=`hidden${d}`,It=`show${d}`,di=`shown${d}`,ui=`resize${d}`,hi=`click.dismiss${d}`,mi=`mousedown.dismiss${d}`,fi=`keydown.dismiss${d}`,pi=`click${d}${oi}`,Bt="modal-open",vi="fade",$t="show",Ve="modal-static",yi=".modal.show",_i=".modal-dialog",wi=".modal-body",Oi='[data-bs-toggle="modal"]',xi={backdrop:!0,focus:!0,keyboard:!0},Ci={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class K extends h{constructor(e,n){super(e,n),this._dialog=t.findOne(_i,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Me,this._addEventListeners()}static get Default(){return xi}static get DefaultType(){return Ci}static get NAME(){return ti}toggle(e){return this._isShown?this.hide():this.show(e)}show(t){if(this._isShown||this._isTransitioning)return;const n=e.trigger(this._element,It,{relatedTarget:t});if(n.defaultPrevented)return;this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Bt),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t))}hide(){if(!this._isShown||this._isTransitioning)return;const t=e.trigger(this._element,ai);if(t.defaultPrevented)return;this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($t),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())}dispose(){e.off(window,d),e.off(this._dialog,d),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ct({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Mt({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const s=t.findOne(wi,this._dialog);s&&(s.scrollTop=0),te(this._element),this._element.classList.add($t);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,e.trigger(this._element,di,{relatedTarget:n})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){e.on(this._element,fi,e=>{if(e.key!==ii)return;if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}),e.on(window,ui,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),e.on(this._element,mi,t=>{e.one(this._element,hi,e=>{if(this._element!==t.target||this._element!==e.target)return;if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Bt),this._resetAdjustments(),this._scrollBar.reset(),e.trigger(this._element,Ht)})}_isAnimated(){return this._element.classList.contains(vi)}_triggerBackdropTransition(){const n=e.trigger(this._element,ri);if(n.defaultPrevented)return;const s=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;if(t==="hidden"||this._element.classList.contains(Ve))return;s||(this._element.style.overflowY="hidden"),this._element.classList.add(Ve),this._queueCallback(()=>{this._element.classList.remove(Ve),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus()}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=c()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=c()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const n=K.getOrCreateInstance(this,e);if(typeof e!="string")return;if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e](t)})}}e.on(document,pi,Oi,function(n){const s=t.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),e.one(s,It,t=>{if(t.defaultPrevented)return;e.one(s,Ht,()=>{R(this)&&this.focus()})});const o=t.findOne(yi);o&&K.getInstance(o).hide();const i=K.getOrCreateInstance(s);i.toggle(this)}),ge(K),u(K);const ki="offcanvas",Ai="bs.offcanvas",b=`.${Ai}`,Wt=".data-api",Fi=`load${b}${Wt}`,ls="Escape",Kt="show",on="showing",an="hiding",Li="offcanvas-backdrop",rn=".offcanvas.show",Pi=`show${b}`,Hi=`shown${b}`,Ii=`hide${b}`,cn=`hidePrevented${b}`,ln=`hidden${b}`,$i=`resize${b}`,Wi=`click${b}${Wt}`,Ui=`keydown.dismiss${b}`,Ki='[data-bs-toggle="offcanvas"]',qi={backdrop:!0,keyboard:!0,scroll:!1},Yi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class O extends h{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return qi}static get DefaultType(){return Yi}static get NAME(){return ki}toggle(e){return this._isShown?this.hide():this.show(e)}show(t){if(this._isShown)return;const n=e.trigger(this._element,Pi,{relatedTarget:t});if(n.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Me).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(on);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Kt),this._element.classList.remove(on),e.trigger(this._element,Hi,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown)return;const t=e.trigger(this._element,Ii);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(an),this._backdrop.hide();const n=()=>{this._element.classList.remove(Kt,an),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Me).reset(),e.trigger(this._element,ln)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){e.trigger(this._element,cn);return}this.hide()},t=Boolean(this._config.backdrop);return new Ct({className:Li,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?n:null})}_initializeFocusTrap(){return new Mt({trapElement:this._element})}_addEventListeners(){e.on(this._element,Ui,t=>{if(t.key!==ls)return;if(this._config.keyboard){this.hide();return}e.trigger(this._element,cn)})}static jQueryInterface(e){return this.each(function(){const t=O.getOrCreateInstance(this,e);if(typeof e!="string")return;if(t[e]===0[0]||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)})}}e.on(document,Wi,Ki,function(n){const s=t.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),y(this))return;e.one(s,ln,()=>{R(this)&&this.focus()});const o=t.findOne(rn);o&&o!==s&&O.getInstance(o).hide();const i=O.getOrCreateInstance(s);i.toggle(this)}),e.on(window,Fi,()=>{for(const e of t.find(rn))O.getOrCreateInstance(e).show()}),e.on(window,$i,()=>{for(const e of t.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&O.getOrCreateInstance(e).hide()}),ge(O),u(O);const Xi=/^aria-[\w-]*$/i,un={"*":["class","dir","id","lang","role",Xi],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Zi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ji=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ea=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Zi.has(n)||Boolean(Ji.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(n))};function ta(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const o=new window.DOMParser,s=o.parseFromString(e,"text/html"),i=[].concat(...s.body.querySelectorAll("*"));for(const e of i){const n=e.nodeName.toLowerCase();if(!Object.keys(t).includes(n)){e.remove();continue}const s=[].concat(...e.attributes),o=[].concat(t["*"]||[],t[n]||[]);for(const t of s)ea(t,o)||e.removeAttribute(t.nodeName)}return s.body.innerHTML}const na="TemplateFactory",sa={allowList:un,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},oa={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ia={entry:"(string|element|function|null)",selector:"(string|element)"};class aa extends se{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return sa}static get DefaultType(){return oa}static get NAME(){return na}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,n]of Object.entries(this._config.content))this._setContent(e,n,t);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},ia)}_setContent(e,n,s){const o=t.findOne(s,e);if(!o)return;if(n=this._resolvePossibleFunction(n),!n){o.remove();return}if(g(n)){this._putElementInTemplate(w(n),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(n);return}o.textContent=n}_maybeSanitize(e){return this._config.sanitize?ta(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return o(e,[0[0],this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const ra="tooltip",ca=new Set(["sanitize","allowList","sanitizeFn"]),Qe="fade",da="modal",_e="show",ha=".tooltip-inner",hn=`.${da}`,mn="hide.bs.modal",oe="hover",Je="focus",tt="click",ba="manual",ja="hide",ya="hidden",_a="show",wa="shown",Oa="inserted",xa="click",Ca="focusin",Ea="focusout",ka="mouseenter",Aa="mouseleave",Sa={AUTO:"auto",TOP:"top",RIGHT:c()?"left":"right",BOTTOM:"bottom",LEFT:c()?"right":"left"},Ma={allowList:un,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Fa={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class H extends h{constructor(e,t){if(typeof kt=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ma}static get DefaultType(){return Fa}static get NAME(){return ra}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!this._isEnabled)return;if(this._isShown()){this._leave();return}this._enter()}dispose(){clearTimeout(this._timeout),e.off(this._element.closest(hn),mn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const n=e.trigger(this._element,this.constructor.eventName(_a)),s=ts(this._element),o=(s||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!o)return;this._disposePopper();const t=this._getTipElement();this._element.setAttribute("aria-describedby",t.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(t),e.trigger(this._element,this.constructor.eventName(Oa))),this._popper=this._createPopper(t),t.classList.add(_e),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))e.on(t,"mouseover",ve);const a=()=>{e.trigger(this._element,this.constructor.eventName(wa)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=e.trigger(this._element,this.constructor.eventName(ja));if(t.defaultPrevented)return;const n=this._getTipElement();if(n.classList.remove(_e),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))e.off(t,"mouseover",ve);this._activeTrigger[tt]=!1,this._activeTrigger[Je]=!1,this._activeTrigger[oe]=!1,this._isHovered=null;const s=()=>{if(this._isWithActiveTrigger())return;this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),e.trigger(this._element,this.constructor.eventName(ya))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Qe,_e),t.classList.add(`bs-${this.constructor.NAME}-auto`);const n=Yr(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(Qe),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new aa({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ha]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Qe)}_isShown(){return this.tip&&this.tip.classList.contains(_e)}_createPopper(e){const t=o(this._config.placement,[this,e,this._element]),n=Sa[t.toUpperCase()];return ue(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(e=>Number.parseInt(e,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return o(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...o(this._config.popperConfig,[0[0],t])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")e.on(this._element,this.constructor.eventName(xa),this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[tt]=!t._isShown()||!t._activeTrigger[tt],t.toggle()});else if(n!==ba){const t=n===oe?this.constructor.eventName(ka):this.constructor.eventName(Ca),s=n===oe?this.constructor.eventName(Aa):this.constructor.eventName(Ea);e.on(this._element,t,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[e.type==="focusin"?Je:oe]=!0,t._enter()}),e.on(this._element,s,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[e.type==="focusout"?Je:oe]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},e.on(this._element.closest(hn),mn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");if(!e)return;!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title")}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){if(this._isWithActiveTrigger())return;this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide)}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=v.getDataAttributes(this._element);for(const e of Object.keys(t))ca.has(e)&&delete t[e];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:w(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=H.getOrCreateInstance(this,e);if(typeof e!="string")return;if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()})}}u(H);const za="popover",Da=".popover-header",Na=".popover-body",La={...H.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ra={...H.DefaultType,content:"(null|string|element|function)"};class ot extends H{static get Default(){return La}static get DefaultType(){return Ra}static get NAME(){return za}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Da]:this._getTitle(),[Na]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=ot.getOrCreateInstance(this,e);if(typeof e!="string")return;if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()})}}u(ot);const Ha="scrollspy",Ia="bs.scrollspy",it=`.${Ia}`,Va=".data-api",$a=`activate${it}`,pn=`click${it}`,Ua=`load${it}${Va}`,Ka="dropdown-item",$="active",Ya='[data-bs-spy="scroll"]',ct="[href]",Xa=".nav, .list-group",gn=".nav-link",Za=".nav-item",Ja=".list-group-item",er=`${gn}, ${Za} > ${gn}, ${Ja}`,tr=".dropdown",nr=".dropdown-toggle",sr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},or={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class be extends h{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return sr}static get DefaultType(){return or}static get NAME(){return Ha}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=w(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){if(!this._config.smoothScroll)return;e.off(this._config.target,pn),e.on(this._config.target,pn,ct,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:s,behavior:"smooth"});return}n.scrollTop=s}})}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const n=e=>this._targetLinks.get(`#${e.target.id}`),s=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(n(e))},t=(this._rootElement||document.documentElement).scrollTop,o=t>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=t;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(i));continue}const a=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&a){if(s(i),!t)return;continue}!o&&!a&&s(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=t.find(ct,this._config.target);for(const n of e){if(!n.hash||y(n))continue;const s=t.findOne(decodeURI(n.hash),this._element);R(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(t){if(this._activeTarget===t)return;this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add($),this._activateParents(t),e.trigger(this._element,$a,{relatedTarget:t})}_activateParents(e){if(e.classList.contains(Ka)){t.findOne(nr,e.closest(tr)).classList.add($);return}for(const n of t.parents(e,Xa))for(const e of t.prev(n,er))e.classList.add($)}_clearActiveClass(e){e.classList.remove($);const n=t.find(`${ct}.${$}`,e);for(const e of n)e.classList.remove($)}static jQueryInterface(e){return this.each(function(){const t=be.getOrCreateInstance(this,e);if(typeof e!="string")return;if(t[e]===0[0]||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()})}}e.on(window,Ua,()=>{for(const e of t.find(Ya))be.getOrCreateInstance(e)}),u(be);const ar="tab",rr="bs.tab",M=`.${rr}`,lr=`hide${M}`,dr=`hidden${M}`,ur=`show${M}`,hr=`shown${M}`,mr=`click${M}`,fr=`keydown${M}`,pr=`load${M}`,gr="ArrowLeft",vn="ArrowRight",br="ArrowUp",yn="ArrowDown",pt="Home",wn="End",S="active",Mn="fade",He="show",Cr="dropdown",Wn=".dropdown-toggle",kr=".dropdown-menu",Re=`:not(${Wn})`,Sr='.list-group, .nav, [role="tablist"]',Mr=".nav-item, .list-group-item",Fr=`.nav-link${Re}, .list-group-item${Re}, [role="tab"]${Re}`,Gn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ie=`${Fr}, ${Gn}`,Dr=`.${S}[data-bs-toggle="tab"], .${S}[data-bs-toggle="pill"], .${S}[data-bs-toggle="list"]`;class B extends h{constructor(t){if(super(t),this._parent=this._element.closest(Sr),!this._parent)return;this._setInitialAttributes(this._parent,this._getChildren()),e.on(this._element,fr,e=>this._keydown(e))}static get NAME(){return ar}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?e.trigger(n,lr,{relatedTarget:t}):null,o=e.trigger(t,ur,{relatedTarget:n});if(o.defaultPrevented||s&&s.defaultPrevented)return;this._deactivate(n,t),this._activate(t,n)}_activate(n,s){if(!n)return;n.classList.add(S),this._activate(t.getElementFromSelector(n));const o=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(He);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),e.trigger(n,hr,{relatedTarget:s})};this._queueCallback(o,n,n.classList.contains(Mn))}_deactivate(n,s){if(!n)return;n.classList.remove(S),n.blur(),this._deactivate(t.getElementFromSelector(n));const o=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(He);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),e.trigger(n,dr,{relatedTarget:s})};this._queueCallback(o,n,n.classList.contains(Mn))}_keydown(e){if(![gr,vn,br,yn,pt,wn].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(e=>!y(e));let t;if([pt,wn].includes(e.key))t=n[e.key===pt?0:n.length-1];else{const s=[vn,yn].includes(e.key);t=We(n,e.target,s,!0)}t&&(t.focus({preventScroll:!0}),B.getOrCreateInstance(t).show())}_getChildren(){return t.find(Ie,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=t.getElementFromSelector(e);if(!n)return;this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`)}_toggleDropDown(e,n){const s=this._getOuterElement(e);if(!s.classList.contains(Cr))return;const o=(e,o)=>{const i=t.findOne(e,s);i&&i.classList.toggle(o,n)};o(Wn,S),o(kr,He),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(S)}_getInnerElement(e){return e.matches(Ie)?e:t.findOne(Ie,e)}_getOuterElement(e){return e.closest(Mr)||e}static jQueryInterface(e){return this.each(function(){const t=B.getOrCreateInstance(this);if(typeof e!="string")return;if(t[e]===0[0]||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()})}}e.on(document,mr,Gn,function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),y(this))return;B.getOrCreateInstance(this).show()}),e.on(window,pr,()=>{for(const e of t.find(Dr))B.getOrCreateInstance(e)}),u(B);const Lr="toast",Rr="bs.toast",x=`.${Rr}`,Hr=`mouseover${x}`,Ir=`mouseout${x}`,Br=`focusin${x}`,Vr=`focusout${x}`,$r=`hide${x}`,Wr=`hidden${x}`,Ur=`show${x}`,Kr=`shown${x}`,qr="fade",os="hide",le="show",je="showing",Qr={animation:"boolean",autohide:"boolean",delay:"number"},Zr={animation:!0,autohide:!0,delay:5e3};class Ee extends h{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Zr}static get DefaultType(){return Qr}static get NAME(){return Lr}show(){const t=e.trigger(this._element,Ur);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(qr);const n=()=>{this._element.classList.remove(je),e.trigger(this._element,Kr),this._maybeScheduleHide()};this._element.classList.remove(os),te(this._element),this._element.classList.add(le,je),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=e.trigger(this._element,$r);if(t.defaultPrevented)return;const n=()=>{this._element.classList.add(os),this._element.classList.remove(je,le),e.trigger(this._element,Wr)};this._element.classList.add(je),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(le),super.dispose()}isShown(){return this._element.classList.contains(le)}_maybeScheduleHide(){if(!this._config.autohide)return;if(this._hasMouseInteraction||this._hasKeyboardInteraction)return;this._timeout=setTimeout(()=>{this.hide()},this._config.delay)}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const n=e.relatedTarget;if(this._element===n||this._element.contains(n))return;this._maybeScheduleHide()}_setListeners(){e.on(this._element,Hr,e=>this._onInteraction(e,!0)),e.on(this._element,Ir,e=>this._onInteraction(e,!1)),e.on(this._element,Br,e=>this._onInteraction(e,!0)),e.on(this._element,Vr,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Ee.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ge(Ee),u(Ee);const ec={Alert:pe,Button:fe,Carousel:ie,Collapse:re,Dropdown:m,Modal:K,Offcanvas:O,Popover:ot,ScrollSpy:be,Tab:B,Toast:Ee,Tooltip:H};return ec})}}),C=e({"node_modules/slick-carousel/slick/slick.js"(e,t){(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof e!="undefined"?t.exports=n(l()):n(jQuery)})(function(e){"use strict";var t=window.Slick||{},t=function(){var t=0;function n(n,s){var i,o=this;o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(n),appendDots:e(n),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,n){return e('<button type="button" />').text(n+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.focussed=!1,o.interrupted=!1,o.hidden="hidden",o.paused=!0,o.positionProp=null,o.respondTo=null,o.rowCount=1,o.shouldClick=!0,o.$slider=e(n),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.visibilityChange="visibilitychange",o.windowWidth=0,o.windowTimer=null,i=e(n).data("slick")||{},o.options=e.extend({},o.defaults,s,i),o.currentSlide=o.options.initialSlide,o.originalSettings=o.options,typeof document.mozHidden!="undefined"?(o.hidden="mozHidden",o.visibilityChange="mozvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o.hidden="webkitHidden",o.visibilityChange="webkitvisibilitychange"),o.autoPlay=e.proxy(o.autoPlay,o),o.autoPlayClear=e.proxy(o.autoPlayClear,o),o.autoPlayIterator=e.proxy(o.autoPlayIterator,o),o.changeSlide=e.proxy(o.changeSlide,o),o.clickHandler=e.proxy(o.clickHandler,o),o.selectHandler=e.proxy(o.selectHandler,o),o.setPosition=e.proxy(o.setPosition,o),o.swipeHandler=e.proxy(o.swipeHandler,o),o.dragHandler=e.proxy(o.dragHandler,o),o.keyHandler=e.proxy(o.keyHandler,o),o.instanceUid=t++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.registerBreakpoints(),o.init(!0)}return n}();t.prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,n,s){var o=this;if(typeof n=="boolean")s=n,n=null;else if(n<0||n>=o.slideCount)return!1;o.unload(),typeof n=="number"?n===0&&o.$slides.length===0?e(t).appendTo(o.$slideTrack):s?e(t).insertBefore(o.$slides.eq(n)):e(t).insertAfter(o.$slides.eq(n)):s===!0?e(t).prependTo(o.$slideTrack):e(t).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each(function(t,n){e(n).attr("data-slick-index",t)}),o.$slidesCache=o.$slides,o.reinit()},t.prototype.animateHeight=function(){var t,e=this;e.options.slidesToShow===1&&e.options.adaptiveHeight===!0&&e.options.vertical===!1&&(t=e.$slides.eq(e.currentSlide).outerHeight(!0),e.$list.animate({height:t},e.options.speed))},t.prototype.animateSlide=function(t,n){var o={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(t=-t),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:t},s.options.speed,s.options.easing,n):s.$slideTrack.animate({top:t},s.options.speed,s.options.easing,n):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),e({animStart:s.currentLeft}).animate({animStart:t},{duration:s.options.speed,easing:s.options.easing,step:function(e){e=Math.ceil(e),s.options.vertical===!1?(o[s.animType]="translate("+e+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+e+"px)",s.$slideTrack.css(o))},complete:function(){n&&n.call()}})):(s.applyTransition(),t=Math.ceil(t),s.options.vertical===!1?o[s.animType]="translate3d("+t+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+t+"px, 0px)",s.$slideTrack.css(o),n&&setTimeout(function(){s.disableTransition(),n.call()},s.options.speed))},t.prototype.getNavTarget=function(){var n=this,t=n.options.asNavFor;return t&&t!==null&&(t=e(t).not(n.$slider)),t},t.prototype.asNavFor=function(t){var s=this,n=s.getNavTarget();n!==null&&typeof n=="object"&&n.each(function(){var n=e(this).slick("getSlick");n.unslicked||n.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,n={};t.options.fade===!1?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;!e.paused&&!e.interrupted&&!e.focussed&&(e.options.infinite===!1&&(e.direction===1&&e.currentSlide+1===e.slideCount-1?e.direction=0:e.direction===0&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var n,s,t=this;if(t.options.dots===!0&&t.slideCount>t.options.slidesToShow){t.$slider.addClass("slick-dotted"),s=e("<ul />").addClass(t.options.dotsClass);for(n=0;n<=t.getDotCount();n+=1)s.append(e("<li />").append(t.options.customPaging.call(this,t,n)));t.$dots=s.appendTo(t.options.appendDots),t.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("data-slick-index",t).data("originalStyling",e(n).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=t.slideCount===0?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses(typeof t.currentSlide=="number"?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var t,n,s,i,a,r,c,d,e=this,l=document.createDocumentFragment(),o=e.$slider.children();if(e.options.rows>0){i=e.options.slidesPerRow*e.options.rows,d=Math.ceil(o.length/i);for(t=0;t<d;t++){a=document.createElement("div");for(n=0;n<e.options.rows;n++){r=document.createElement("div");for(s=0;s<e.options.slidesPerRow;s++)c=t*i+(n*e.options.slidesPerRow+s),o.get(c)&&r.appendChild(o.get(c));a.appendChild(r)}l.appendChild(a)}e.$slider.empty().append(l),e.$slider.children().children().children().css({width:100/e.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,n){var o,i,a,s=this,r=!1,c=s.$slider.width(),l=window.innerWidth||e(window).width();if(s.respondTo==="window"?a=l:s.respondTo==="slider"?a=c:s.respondTo==="min"&&(a=Math.min(l,c)),s.options.responsive&&s.options.responsive.length&&s.options.responsive!==null){o=null;for(i in s.breakpoints)s.breakpoints.hasOwnProperty(i)&&(s.originalSettings.mobileFirst===!1?a<s.breakpoints[i]&&(o=s.breakpoints[i]):a>s.breakpoints[i]&&(o=s.breakpoints[i]));o!==null?s.activeBreakpoint!==null?(o!==s.activeBreakpoint||n)&&(s.activeBreakpoint=o,s.breakpointSettings[o]==="unslick"?s.unslick(o):(s.options=e.extend({},s.originalSettings,s.breakpointSettings[o]),t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),r=o):(s.activeBreakpoint=o,s.breakpointSettings[o]==="unslick"?s.unslick(o):(s.options=e.extend({},s.originalSettings,s.breakpointSettings[o]),t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),r=o):s.activeBreakpoint!==null&&(s.activeBreakpoint=null,s.options=s.originalSettings,t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t),r=o),!t&&r!==!1&&s.$slider.trigger("breakpoint",[s,r])}},t.prototype.changeSlide=function(t,n){var i,a,r,c,s=this,o=e(t.currentTarget);switch(o.is("a")&&t.preventDefault(),o.is("li")||(o=o.closest("li")),r=s.slideCount%s.options.slidesToScroll!==0,i=r?0:(s.slideCount-s.currentSlide)%s.options.slidesToScroll,t.data.message){case"previous":a=i===0?s.options.slidesToScroll:s.options.slidesToShow-i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide-a,!1,n);break;case"next":a=i===0?s.options.slidesToScroll:i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide+a,!1,n);break;case"index":c=t.data.index===0?0:t.data.index||o.index()*s.options.slidesToScroll,s.slideHandler(s.checkNavigable(c),!1,n),o.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var s,o=this,t=o.getNavigableIndexes(),n=0;if(e>t[t.length-1])e=t[t.length-1];else for(s in t){if(e<t[s]){e=n;break}n=t[s]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&t.$dots!==null&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),t.options.accessibility===!0&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var t,e=this;e.options.rows>0&&(t=e.$slides.children().children(),t.removeAttr("style"),e.$slider.empty().append(t))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var n=this;n.autoPlayClear(),n.touchObject={},n.cleanUpEvents(),e(".slick-cloned",n.$slider).detach(),n.$dots&&n.$dots.remove(),n.$prevArrow&&n.$prevArrow.length&&(n.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.prevArrow)&&n.$prevArrow.remove()),n.$nextArrow&&n.$nextArrow.length&&(n.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.nextArrow)&&n.$nextArrow.remove()),n.$slides&&(n.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.detach(),n.$list.detach(),n.$slider.append(n.$slides)),n.cleanUpRows(),n.$slider.removeClass("slick-slider"),n.$slider.removeClass("slick-initialized"),n.$slider.removeClass("slick-dotted"),n.unslicked=!0,t||n.$slider.trigger("destroy",[n])},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t){var n=this;n.cssTransitions===!1?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;e!==null&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(n){n.stopImmediatePropagation();var s=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=s.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,n=0,s=0,t=0;if(e.options.infinite===!0)if(e.slideCount<=e.options.slidesToShow)++t;else for(;n<e.slideCount;)++t,n=s+e.options.slidesToScroll,s+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)t=e.slideCount;else if(e.options.asNavFor)for(;n<e.slideCount;)++t,n=s+e.options.slidesToScroll,s+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else t=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return t-1},t.prototype.getLeft=function(e){var n,s,o,a,t=this,i=0;return t.slideOffset=0,o=t.$slides.first().outerHeight(!0),t.options.infinite===!0?(t.slideCount>t.options.slidesToShow&&(t.slideOffset=t.slideWidth*t.options.slidesToShow*-1,a=-1,t.options.vertical===!0&&t.options.centerMode===!0&&(t.options.slidesToShow===2?a=-1.5:t.options.slidesToShow===1&&(a=-2)),i=o*t.options.slidesToShow*a),t.slideCount%t.options.slidesToScroll!==0&&e+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow&&(e>t.slideCount?(t.slideOffset=(t.options.slidesToShow-(e-t.slideCount))*t.slideWidth*-1,i=(t.options.slidesToShow-(e-t.slideCount))*o*-1):(t.slideOffset=t.slideCount%t.options.slidesToScroll*t.slideWidth*-1,i=t.slideCount%t.options.slidesToScroll*o*-1))):e+t.options.slidesToShow>t.slideCount&&(t.slideOffset=(e+t.options.slidesToShow-t.slideCount)*t.slideWidth,i=(e+t.options.slidesToShow-t.slideCount)*o),t.slideCount<=t.options.slidesToShow&&(t.slideOffset=0,i=0),t.options.centerMode===!0&&t.slideCount<=t.options.slidesToShow?t.slideOffset=t.slideWidth*Math.floor(t.options.slidesToShow)/2-t.slideWidth*t.slideCount/2:t.options.centerMode===!0&&t.options.infinite===!0?t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)-t.slideWidth:t.options.centerMode===!0&&(t.slideOffset=0,t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)),t.options.vertical===!1?s=e*t.slideWidth*-1+t.slideOffset:s=e*o*-1+i,t.options.variableWidth===!0&&(t.slideCount<=t.options.slidesToShow||t.options.infinite===!1?n=t.$slideTrack.children(".slick-slide").eq(e):n=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow),t.options.rtl===!0?n[0]?s=(t.$slideTrack.width()-n[0].offsetLeft-n.width())*-1:s=0:s=n[0]?n[0].offsetLeft*-1:0,t.options.centerMode===!0&&(t.slideCount<=t.options.slidesToShow||t.options.infinite===!1?n=t.$slideTrack.children(".slick-slide").eq(e):n=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow+1),t.options.rtl===!0?n[0]?s=(t.$slideTrack.width()-n[0].offsetLeft-n.width())*-1:s=0:s=n[0]?n[0].offsetLeft*-1:0,s+=(t.$list.width()-n.outerWidth())/2)),s},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var s,e=this,t=0,n=0,o=[];for(e.options.infinite===!1?s=e.slideCount:(t=e.options.slidesToScroll*-1,n=e.options.slidesToScroll*-1,s=e.slideCount*2);t<s;)o.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return o},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var n,s,t=this,o=t.options.centerMode===!0?t.slideWidth*Math.floor(t.options.slidesToShow/2):0;return t.options.swipeToSlide===!0?(t.$slideTrack.find(".slick-slide").each(function(n,i){if(i.offsetLeft-o+e(i).outerWidth()/2>t.swipeLeft*-1)return s=i,!1}),n=Math.abs(e(s).attr("data-slick-index")-t.currentSlide)||1,n):t.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var n=this;n.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var n=this;e(n.$slider).hasClass("slick-initialized")||(e(n.$slider).addClass("slick-initialized"),n.buildRows(),n.buildOut(),n.setProps(),n.startLoad(),n.loadSlider(),n.initializeEvents(),n.updateArrows(),n.updateDots(),n.checkResponsive(!0),n.focusHandler()),t&&n.$slider.trigger("init",[n]),n.options.accessibility===!0&&n.initADA(),n.options.autoplay&&(n.paused=!1,n.autoPlay())},t.prototype.initADA=function(){var n,o,t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),s=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$dots!==null&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(n){var o,i=s.indexOf(n);e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+n,tabindex:-1}),i!==-1&&(o="slick-slide-control"+t.instanceUid+i,e("#"+o).length&&e(this).attr({"aria-describedby":o}))}),t.$dots.attr("role","tablist").find("li").each(function(n){var o=s[n];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+n,"aria-controls":"slick-slide"+t.instanceUid+o,"aria-label":n+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(n=t.currentSlide,o=n+t.options.slidesToShow;n<o;n++)t.options.focusOnChange?t.$slides.eq(n).attr({tabindex:"0"}):t.$slides.eq(n).removeAttr("tabindex");t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.accessibility===!0&&t.$dots.on("keydown.slick",t.keyHandler)),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(e.keyCode===37&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):e.keyCode===39&&t.options.accessibility===!0&&t.changeSlide({data:{message:t.options.rtl===!0?"previous":"next"}}))},t.prototype.lazyLoad=function(){t=this;function a(n){e("img[data-lazy]",n).each(function(){var n=e(this),s=e(this).attr("data-lazy"),i=e(this).attr("data-srcset"),a=e(this).attr("data-sizes")||t.$slider.attr("data-sizes"),o=document.createElement("img");o.onload=function(){n.animate({opacity:0},100,function(){i&&(n.attr("srcset",i),a&&n.attr("sizes",a)),n.attr("src",s).animate({opacity:1},200,function(){n.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),t.$slider.trigger("lazyLoaded",[t,n,s])})},o.onerror=function(){n.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),t.$slider.trigger("lazyLoadError",[t,n,s])},o.src=s})}if(t.options.centerMode===!0?t.options.infinite===!0?(n=t.currentSlide+(t.options.slidesToShow/2+1),s=n+t.options.slidesToShow+2):(n=Math.max(0,t.currentSlide-(t.options.slidesToShow/2+1)),s=2+(t.options.slidesToShow/2+1)+t.currentSlide):(n=t.options.infinite?t.options.slidesToShow+t.currentSlide:t.currentSlide,s=Math.ceil(n+t.options.slidesToShow),t.options.fade===!0&&(n>0&&n--,s<=t.slideCount&&s++)),o=t.$slider.find(".slick-slide").slice(n,s),t.options.lazyLoad==="anticipated")for(var t,n,s,o,i,r=n-1,c=s,l=t.$slider.find(".slick-slide"),d=0;d<t.options.slidesToScroll;d++)r<0&&(r=t.slideCount-1),o=o.add(l.eq(r)),o=o.add(l.eq(c)),r--,c++;a(o),t.slideCount<=t.options.slidesToShow?(i=t.$slider.find(".slick-slide"),a(i)):t.currentSlide>=t.slideCount-t.options.slidesToShow?(i=t.$slider.find(".slick-cloned").slice(0,t.options.slidesToShow),a(i)):t.currentSlide===0&&(i=t.$slider.find(".slick-cloned").slice(t.options.slidesToShow*-1),a(i))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),e.options.lazyLoad==="progressive"&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var s,n=this;n.unslicked||(n.$slider.trigger("afterChange",[n,t]),n.animating=!1,n.slideCount>n.options.slidesToShow&&n.setPosition(),n.swipeLeft=null,n.options.autoplay&&n.autoPlay(),n.options.accessibility===!0&&(n.initADA(),n.options.focusOnChange&&(s=e(n.$slides.get(n.currentSlide)),s.attr("tabindex",0).focus())))},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t||=1;var s,o,i,a,r,n=this,c=e("img[data-lazy]",n.$slider);c.length?(s=c.first(),o=s.attr("data-lazy"),a=s.attr("data-srcset"),r=s.attr("data-sizes")||n.$slider.attr("data-sizes"),i=document.createElement("img"),i.onload=function(){a&&(s.attr("srcset",a),r&&s.attr("sizes",r)),s.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),n.options.adaptiveHeight===!0&&n.setPosition(),n.$slider.trigger("lazyLoaded",[n,s,o]),n.progressiveLazyLoad()},i.onerror=function(){t<3?setTimeout(function(){n.progressiveLazyLoad(t+1)},500):(s.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,s,o]),n.progressiveLazyLoad())},i.src=o):n.$slider.trigger("allImagesLoaded",[n])},t.prototype.refresh=function(t){var s,n=this,o=n.slideCount-n.options.slidesToShow;!n.options.infinite&&n.currentSlide>o&&(n.currentSlide=o),n.slideCount<=n.options.slidesToShow&&(n.currentSlide=0),s=n.currentSlide,n.destroy(!0),e.extend(n,n.initials,{currentSlide:s}),n.init(),t||n.changeSlide({data:{message:"index",index:s}},!1)},t.prototype.registerBreakpoints=function(){var n,o,i,t=this,s=t.options.responsive||null;if(e.type(s)==="array"&&s.length){t.respondTo=t.options.respondTo||"window";for(o in s)if(n=t.breakpoints.length-1,s.hasOwnProperty(o)){for(i=s[o].breakpoint;n>=0;)t.breakpoints[n]&&t.breakpoints[n]===i&&t.breakpoints.splice(n,1),n--;t.breakpoints.push(i),t.breakpointSettings[i]=s[o].settings}t.breakpoints.sort(function(e,n){return t.options.mobileFirst?e-n:n-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&t.currentSlide!==0&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(typeof t.currentSlide=="number"?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,n){var s=this;if(typeof e=="boolean"?(t=e,e=t===!0?0:s.slideCount-1):e=t===!0?--e:e,s.slideCount<1||e<0||e>s.slideCount-1)return!1;s.unload(),n===!0?s.$slideTrack.children().remove():s.$slideTrack.children(this.options.slide).eq(e).remove(),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slidesCache=s.$slides,s.reinit()},t.prototype.setCSS=function(e){var s,o,t=this,n={};t.options.rtl===!0&&(e=-e),s=t.positionProp=="left"?Math.ceil(e)+"px":"0px",o=t.positionProp=="top"?Math.ceil(e)+"px":"0px",n[t.positionProp]=e,t.transformsEnabled===!1?t.$slideTrack.css(n):(n={},t.cssTransitions===!1?(n[t.animType]="translate("+s+", "+o+")",t.$slideTrack.css(n)):(n[t.animType]="translate3d("+s+", "+o+", 0px)",t.$slideTrack.css(n)))},t.prototype.setDimensions=function(){var t,e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length))),t=e.$slides.first().outerWidth(!0)-e.$slides.first().width(),e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var n,t=this;t.$slides.each(function(s,o){n=t.slideWidth*s*-1,t.options.rtl===!0?e(o).css({position:"relative",right:n,top:0,zIndex:t.options.zIndex-2,opacity:0}):e(o).css({position:"relative",left:n,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var t,e=this;e.options.slidesToShow===1&&e.options.adaptiveHeight===!0&&e.options.vertical===!1&&(t=e.$slides.eq(e.currentSlide).outerHeight(!0),e.$list.css("height",t))},t.prototype.setOption=t.prototype.slickSetOption=function(){var n,s,o,i,a,t=this,r=!1;if(e.type(arguments[0])==="object"?(a=arguments[0],r=arguments[1],s="multiple"):e.type(arguments[0])==="string"&&(a=arguments[0],n=arguments[1],r=arguments[2],arguments[0]==="responsive"&&e.type(arguments[1])==="array"?s="responsive":typeof arguments[1]!="undefined"&&(s="single")),s==="single")t.options[a]=n;else if(s==="multiple")e.each(a,function(e,n){t.options[e]=n});else if(s==="responsive")for(i in n)if(e.type(t.options.responsive)!=="array")t.options.responsive=[n[i]];else{for(o=t.options.responsive.length-1;o>=0;)t.options.responsive[o].breakpoint===n[i].breakpoint&&t.options.responsive.splice(o,1),o--;t.options.responsive.push(n[i])}r&&(t.unload(),t.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left",e.positionProp==="top"?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(t.WebkitTransition!==0[0]||t.MozTransition!==0[0]||t.msTransition!==0[0])&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&(typeof e.options.zIndex=="number"?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),t.OTransform!==0[0]&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",t.perspectiveProperty===0[0]&&t.webkitPerspective===0[0]&&(e.animType=!1)),t.MozTransform!==0[0]&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",t.perspectiveProperty===0[0]&&t.MozPerspective===0[0]&&(e.animType=!1)),t.webkitTransform!==0[0]&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",t.perspectiveProperty===0[0]&&t.webkitPerspective===0[0]&&(e.animType=!1)),t.msTransform!==0[0]&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",t.msTransform===0[0]&&(e.animType=!1)),t.transform!==0[0]&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&e.animType!==null&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var s,o,i,a,t=this,n=t.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");t.$slides.eq(e).addClass("slick-current"),t.options.centerMode===!0?(a=t.options.slidesToShow%2===0?1:0,o=Math.floor(t.options.slidesToShow/2),t.options.infinite===!0&&(e>=o&&e<=t.slideCount-1-o?t.$slides.slice(e-o+a,e+o+1).addClass("slick-active").attr("aria-hidden","false"):(s=t.options.slidesToShow+e,n.slice(s-o+1+a,s+o+2).addClass("slick-active").attr("aria-hidden","false")),e===0?n.eq(n.length-1-t.options.slidesToShow).addClass("slick-center"):e===t.slideCount-1&&n.eq(t.options.slidesToShow).addClass("slick-center")),t.$slides.eq(e).addClass("slick-center")):e>=0&&e<=t.slideCount-t.options.slidesToShow?t.$slides.slice(e,e+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=t.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(i=t.slideCount%t.options.slidesToShow,s=t.options.infinite===!0?t.options.slidesToShow+e:e,t.options.slidesToShow==t.options.slidesToScroll&&t.slideCount-e<t.options.slidesToShow?n.slice(s-(t.options.slidesToShow-i),s+i).addClass("slick-active").attr("aria-hidden","false"):n.slice(s,s+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),(t.options.lazyLoad==="ondemand"||t.options.lazyLoad==="anticipated")&&t.lazyLoad()},t.prototype.setupInfinite=function(){var n,s,o,t=this;if(t.options.fade===!0&&(t.options.centerMode=!1),t.options.infinite===!0&&t.options.fade===!1&&(s=null,t.slideCount>t.options.slidesToShow)){t.options.centerMode===!0?o=t.options.slidesToShow+1:o=t.options.slidesToShow;for(n=t.slideCount;n>t.slideCount-o;n-=1)s=n-1,e(t.$slides[s]).clone(!0).attr("id","").attr("data-slick-index",s-t.slideCount).prependTo(t.$slideTrack).addClass("slick-cloned");for(n=0;n<o+t.slideCount;n+=1)s=n,e(t.$slides[s]).clone(!0).attr("id","").attr("data-slick-index",s+t.slideCount).appendTo(t.$slideTrack).addClass("slick-cloned");t.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var n=this,o=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),s=parseInt(o.attr("data-slick-index"));if(s||(s=0),n.slideCount<=n.options.slidesToShow){n.slideHandler(s,!1,!0);return}n.slideHandler(s)},t.prototype.slideHandler=function(e,t,n){var o,i,a,r,c,l=null,s=this;if(t||=!1,s.animating===!0&&s.options.waitForAnimate===!0)return;if(s.options.fade===!0&&s.currentSlide===e)return;if(t===!1&&s.asNavFor(e),o=e,l=s.getLeft(o),r=s.getLeft(s.currentSlide),s.currentLeft=s.swipeLeft===null?r:s.swipeLeft,s.options.infinite===!1&&s.options.centerMode===!1&&(e<0||e>s.getDotCount()*s.options.slidesToScroll)){s.options.fade===!1&&(o=s.currentSlide,n!==!0&&s.slideCount>s.options.slidesToShow?s.animateSlide(r,function(){s.postSlide(o)}):s.postSlide(o));return}if(s.options.infinite===!1&&s.options.centerMode===!0&&(e<0||e>s.slideCount-s.options.slidesToScroll)){s.options.fade===!1&&(o=s.currentSlide,n!==!0&&s.slideCount>s.options.slidesToShow?s.animateSlide(r,function(){s.postSlide(o)}):s.postSlide(o));return}if(s.options.autoplay&&clearInterval(s.autoPlayTimer),o<0?s.slideCount%s.options.slidesToScroll!==0?i=s.slideCount-s.slideCount%s.options.slidesToScroll:i=s.slideCount+o:o>=s.slideCount?s.slideCount%s.options.slidesToScroll!==0?i=0:i=o-s.slideCount:i=o,s.animating=!0,s.$slider.trigger("beforeChange",[s,s.currentSlide,i]),c=s.currentSlide,s.currentSlide=i,s.setSlideClasses(s.currentSlide),s.options.asNavFor&&(a=s.getNavTarget(),a=a.slick("getSlick"),a.slideCount<=a.options.slidesToShow&&a.setSlideClasses(s.currentSlide)),s.updateDots(),s.updateArrows(),s.options.fade===!0){n!==!0?(s.fadeSlideOut(c),s.fadeSlide(i,function(){s.postSlide(i)})):s.postSlide(i),s.animateHeight();return}n!==!0&&s.slideCount>s.options.slidesToShow?s.animateSlide(l,function(){s.postSlide(i)}):s.postSlide(i)},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var t=this,n=t.touchObject.startX-t.touchObject.curX,s=t.touchObject.startY-t.touchObject.curY,o=Math.atan2(s,n),e=Math.round(o*180/Math.PI);return e<0&&(e=360-Math.abs(e)),e<=45&&e>=0?t.options.rtl===!1?"left":"right":e<=360&&e>=315?t.options.rtl===!1?"left":"right":e>=135&&e<=225?t.options.rtl===!1?"right":"left":t.options.verticalSwiping===!0?e>=35&&e<=135?"down":"up":"vertical"},t.prototype.swipeEnd=function(){var n,s,t=this;if(t.dragging=!1,t.swiping=!1,t.scrolling)return t.scrolling=!1,!1;if(t.interrupted=!1,t.shouldClick=!(t.touchObject.swipeLength>10),t.touchObject.curX===0[0])return!1;if(t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe){switch(n=t.swipeDirection(),n){case"left":case"down":s=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.currentDirection=0;break;case"right":case"up":s=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.currentDirection=1;break;default:}n!="vertical"&&(t.slideHandler(s),t.touchObject={},t.$slider.trigger("swipe",[t,n]))}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1)return;if(t.options.draggable===!1&&e.type.indexOf("mouse")!==-1)return;switch(t.touchObject.fingerCount=e.originalEvent&&e.originalEvent.touches!==0[0]?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e);break}},t.prototype.swipeMove=function(e){var s,o,i,a,r,t=this,c=!1,n=e.originalEvent!==0[0]?e.originalEvent.touches:null;if(!t.dragging||t.scrolling||n&&n.length!==1)return!1;if(i=t.getLeft(t.currentSlide),t.touchObject.curX=n!==0[0]?n[0].pageX:e.clientX,t.touchObject.curY=n!==0[0]?n[0].pageY:e.clientY,t.touchObject.swipeLength=Math.round(((t.touchObject.curX-t.touchObject.startX)**2)**.5),r=Math.round(((t.touchObject.curY-t.touchObject.startY)**2)**.5),!t.options.verticalSwiping&&!t.swiping&&r>4)return t.scrolling=!0,!1;if(t.options.verticalSwiping===!0&&(t.touchObject.swipeLength=r),a=t.swipeDirection(),e.originalEvent!==0[0]&&t.touchObject.swipeLength>4&&(t.swiping=!0,e.preventDefault()),o=(t.options.rtl===!1?1:-1)*(t.touchObject.curX>t.touchObject.startX?1:-1),t.options.verticalSwiping===!0&&(o=t.touchObject.curY>t.touchObject.startY?1:-1),s=t.touchObject.swipeLength,t.touchObject.edgeHit=!1,t.options.infinite===!1&&(t.currentSlide===0&&a==="right"||t.currentSlide>=t.getDotCount()&&a==="left")&&(s=t.touchObject.swipeLength*t.options.edgeFriction,t.touchObject.edgeHit=!0),t.options.vertical===!1?t.swipeLeft=i+s*o:t.swipeLeft=i+s*(t.$list.height()/t.listWidth)*o,t.options.verticalSwiping===!0&&(t.swipeLeft=i+s*o),t.options.fade===!0||t.options.touchMove===!1)return!1;if(t.animating===!0)return t.swipeLeft=null,!1;t.setCSS(t.swipeLeft)},t.prototype.swipeStart=function(e){var n,t=this;if(t.interrupted=!0,t.touchObject.fingerCount!==1||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;e.originalEvent!==0[0]&&e.originalEvent.touches!==0[0]&&(n=e.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=n!==0[0]?n.pageX:e.clientX,t.touchObject.startY=t.touchObject.curY=n!==0[0]?n.pageY:e.clientY,t.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;e.$slidesCache!==null&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this,t=Math.floor(e.options.slidesToShow/2);e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.currentSlide===0?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;e.$dots!==null&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,o,n=this,s=arguments[0],i=Array.prototype.slice.call(arguments,1),a=n.length;for(e=0;e<a;e++)if(typeof s=="object"||typeof s=="undefined"?n[e].slick=new t(n[e],s):o=n[e].slick[s].apply(n[e].slick,i),typeof o!="undefined")return o;return n}})}}),a=o(l());window.jQuery=a.default,window.$=a.default,r=o(g()),d=o(O()),window.bootstrap=x(),window.Headroom=r.default,window.Isotope=d.default,C()})(),(()=>{var m,Ce,B,lo,ft,Qt,S,Yt,bo,l,h,be,Gs,d,p,y,W,qs,Ks,Ve,Oo,Ws,xt,De,it,xo,R,Ao,ie,lt,yt,oe,st,wt,Ct,Lo,Xe,Po,Vo,Jo,oa,aa,Ls,s,Ns,nn,k,Ca,f,sn,Es,Cs,dt,ht,H,ps,Pe,Cl,Qe,$e,me,Jt,Re,q1,U1,qu,os,ts,es,eu,Yd,Ud,$d,Et,Ze,Ld,Nd,Dd,Pn,Ln,Nn,zd,x,et,gl,pl,Tc,Sr,Ar,gr,Ye,Ge,Ee,M,V,ke,re,Oe,dn,qe,Ae,w,pn,na,Qi,ye,An,Q,Pi,pt,Ri,zi,Ti,In,Fi,Mi,Ei,Un,qn,Dt,Be,Rt,ii,Pt,Yo,Io,ge,ks,As,Ss,Do,en,Zt,ko,Is,Bs,Vs,Eo,Co,D,oo,Kd,co,fo,po,Zs,c,ut,U,zt,Ne,N,Ie,Ms,rt,a,Qo,Zo,C,Le,Ht,rs,Se,ss,He,hi,_,ji,Gn,Yn,Kn,Oi,xi,K,$n,ki,Ai,nt,Bn,L,Di,Ni,Rn,Tn,gt,Mn,Cn,xn,St,Zi,Ji,yn,sa,mn,Xt,tt,da,ua,fe,ma,de,pa,ga,ba,i,wa,Oa,un,Ea,ka,Aa,Sa,Ma,Fa,Ta,za,Da,Na,La,Ra,Ha,Ia,Ba,Ut,Wa,Ua,Wt,Ya,Ga,Xa,Qa,Ja,er,tr,nr,sr,or,ir,ar,rr,lr,It,hr,mr,pr,hn,vr,br,je,_r,wr,fn,Cr,Er,gn,Tr,zr,Dr,Nr,Lr,Rr,Pr,Ir,Vr,$r,Wr,Ur,Kr,qr,Yr,Gr,Xr,Qr,Zr,Jr,ec,tc,nc,sc,oc,ic,ac,rc,cc,lc,dc,uc,hc,mc,fc,pc,gc,vc,bc,jc,to,wc,Oc,xc,Cc,Ec,kc,Ac,Sc,Mc,bn,zc,Dc,Lc,Rc,Pc,Ic,Bc,Vc,$c,Wc,Uc,Kc,qc,Yc,Gc,Xc,Qc,Zc,Jc,el,tl,nl,sl,ol,il,al,rl,cl,ll,dl,ul,ml,On,vl,bl,jl,yl,wl,Ol,xl,El,kl,Al,Sl,Ml,Fl,Tl,zl,Dl,Ll,Rl,Pl,Hl,Il,Bl,Vl,$l,Wl,Kl,ql,Yl,Xl,Ql,Zl,ed,td,nd,od,id,ad,cd,ld,dd,hd,md,fd,gd,_t,yd,Fn,ue,Od,kd,Dn,Hn,Wn,Xn,no,Gd,Xd,Qd,Zd,Ft,tu,nu,ou,iu,au,cu,lu,du,hu,mu,fu,gu,vu,bu,ju,yu,_u,wu,Ou,xu,Cu,Eu,ku,Au,Su,Mu,Fu,Tu,zu,Du,Nu,Lu,Ru,Hu,Iu,Bu,ns,Wu,Uu,is,Yu,Gu,Qu,Zu,Ju,t1,n1,s1,i1,a1,r1,l1,d1,u1,m1,f1,p1,v1,b1,j1,_1,w1,O1,x1,C1,k1,A1,S1,F1,T1,z1,N1,L1,R1,H1,Bt,B1,V1,W1,Vt,Kt,us,X1,Q1,Z1,J1,e4,t4,n4,s4,o4,i4,a4,r4,c4,l4,d4,u4,h4,f4,p4,g4,b4,j4,y4,w4,O4,x4,E4,k4,A4,M4,F4,T4,D4,N4,L4,P4,H4,I4,V4,$4,W4,K4,q4,Y4,X4,Q4,Z4,e0,t0,n0,o0,i0,a0,c0,l0,d0,h0,m0,f0,g0,v0,b0,j0,y0,p0,u0,r0,s0,J4,G4,U4,B4,R4,z4,S4,C4,_4,v4,m4,Y1,$1,P1,D1,M1,E1,y1,g1,h1,c1,o1,e1,Xu,Ku,$u,Vu,Pu,pu,uu,ru,su,Jd,qd,Wd,Vd,Bd,Id,Hd,Rd,Td,Md,Sd,Ad,Ed,Cd,xd,wd,_d,jd,pd,ud,rd,sd,Jl,Gl,Ul,Nl,hs,_l,hl,fs,Nc,Fc,vs,_c,yc,js,Hr,Fr,kr,xr,ys,_s,jr,fr,ur,cr,xs,Fs,qa,Ka,Ts,Va,Pa,Ds,xa,_a,ya,va,ha,Rs,Ps,ta,ea,Xi,Yi,qi,Ki,Ui,Vi,Bi,Hi,Li,Si,Ci,_i,bi,gi,pi,mi,li,ci,si,ni,qt,Wo,Bo,Ho,$s,jo,go,ao,Dh,$2={};function Js(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}m={},Ce=[],B=()=>{},lo=()=>!1,ft=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Qt=e=>e.startsWith("onUpdate:"),S=Object.assign,Yt=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},bo=Object.prototype.hasOwnProperty,h=(e,t)=>bo.call(e,t),l=Array.isArray,be=e=>Ve(e)==="[object Map]",Gs=e=>Ve(e)==="[object Set]",d=e=>typeof e=="function",y=e=>typeof e=="string",W=e=>typeof e=="symbol",p=e=>e!==null&&typeof e=="object",qs=e=>(p(e)||d(e))&&d(e.then)&&d(e.catch),Ks=Object.prototype.toString,Ve=e=>Ks.call(e),Oo=e=>Ve(e).slice(8,-1),Ws=e=>Ve(e)==="[object Object]",xt=e=>y(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,De=Js(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),it=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},xo=/-(\w)/g,R=it(e=>e.replace(xo,(e,t)=>t?t.toUpperCase():"")),Ao=/\B([A-Z])/g,ie=it(e=>e.replace(Ao,"-$1").toLowerCase()),lt=it(e=>e.charAt(0).toUpperCase()+e.slice(1)),yt=it(e=>e?`on${lt(e)}`:""),oe=(e,t)=>!Object.is(e,t),st=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},wt=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ct=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Xe=()=>Lo||(Lo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pe(e){if(l(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=y(s)?V3(s):pe(s);if(o)for(const e in o)t[e]=o[e]}return t}if(y(e)||p(e))return e}Po=/;(?![^(]*\))/g,Vo=/:([^]+)/,Jo=/\/\*[^]*?\*\//g;function V3(e){const t={};return e.replace(Jo,"").split(Po).forEach(e=>{if(e){const n=e.split(Vo);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function j(e){let t="";if(y(e))t=e;else if(l(e))for(let n=0;n<e.length;n++){const s=j(e[n]);s&&(t+=s+" ")}else if(p(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}oa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aa=Js(oa);function ja(e){return!!e||e===""}Ls=e=>!!(e&&e.__v_isRef===!0),s=e=>y(e)?e:e==null?"":l(e)||p(e)&&(e.toString===Ks||!d(e.toString))?Ls(e)?s(e.value):JSON.stringify(e,Ns,2):String(e),Ns=(e,t)=>Ls(t)?Ns(e,t.value):be(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],s)=>(e[nn(t,s)+" =>"]=n,e),{})}:Gs(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>nn(e))}:W(t)?nn(t):p(t)&&!l(t)&&!Ws(t)?String(t):t,nn=(e,t="")=>{var n;return W(e)?`Symbol(${(n=e.description)!=null?n:t})`:e},Ca=class{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=k,!e&&k&&(this.index=(k.scopes||(k.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=k;try{return k=this,e()}finally{k=t}}}on(){++this._on===1&&(this.prevScope=k,k=this)}off(){this._on>0&&--this._on===0&&(k=this.prevScope,this.prevScope=0[0])}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=0[0]}}};function $a(){return k}function C2(e){k&&k.cleanups.push(e)}sn=new WeakSet,Es=class{constructor(e){this.fn=e,this.deps=0[0],this.depsTail=0[0],this.flags=5,this.next=0[0],this.cleanup=0[0],this.scheduler=0[0],k&&k.active&&k.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sn.has(this)&&(sn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Za(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hc(this),yr(this);const e=f,t=H;f=this,H=!0;try{return this.fn()}finally{Or(this),f=e,H=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bs(e);this.deps=this.depsTail=0[0],Hc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rn(this)&&this.run()}get dirty(){return rn(this)}},Cs=0;function Za(e,t=!1){if(e.flags|=8,t){e.next=ht,ht=e;return}e.next=dt,dt=e}function Os(){Cs++}function ws(){if(--Cs>0)return;if(ht){let e=ht;for(ht=0[0];e;){const t=e.next;e.next=0[0],e.flags&=-9,e=t}}let e;for(;dt;){let t=dt;for(dt=0[0];t;){const n=t.next;if(t.next=0[0],t.flags&=-9,t.flags&1)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}function yr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Or(e){let s,n=e.depsTail,t=n;for(;t;){const e=t.prevDep;t.version===-1?(t===n&&(n=e),bs(t),V2(t)):s=t,t.dep.activeLink=t.prevActiveLink,t.prevActiveLink=0[0],t=e}e.deps=s,e.depsTail=n}function rn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Br(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Br(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Pe)||(e.globalVersion=Pe,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!rn(e))))return;e.flags|=2;const t=e.dep,n=f,s=H;f=e,H=!0;try{yr(e);const n=e.fn(e._value);(t.version===0||oe(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{f=n,H=s,Or(e),e.flags&=-3}}function bs(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=0[0]),o&&(o.prevSub=s,e.nextSub=0[0]),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)bs(e,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function V2(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=0[0]),n&&(n.prevDep=t,e.nextDep=0[0])}H=!0,ps=[];function J(){ps.push(H),H=!1}function ee(){const e=ps.pop();H=e===0[0]||e}function Hc(e){const{cleanup:t}=e;if(e.cleanup=0[0],t){const e=f;f=0[0];try{t()}finally{f=e}}}Pe=0,Cl=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=0[0]}},Qe=class{constructor(e){this.computed=e,this.version=0,this.activeLink=0[0],this.subs=0[0],this.map=0[0],this.key=0[0],this.sc=0,this.__v_skip=!0}track(){if(!f||!H||f===this.computed)return;let t=this.activeLink;if(t===0[0]||t.sub!==f)t=this.activeLink=new Cl(f,this),f.deps?(t.prevDep=f.depsTail,f.depsTail.nextDep=t,f.depsTail=t):f.deps=f.depsTail=t,G1(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=f.depsTail,t.nextDep=0[0],f.depsTail.nextDep=t,f.depsTail=t,f.deps===t&&(f.deps=e)}return t}trigger(e){this.version++,Pe++,this.notify(e)}notify(){Os();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{ws()}}};function G1(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let e=n.deps;e;e=e.nextDep)G1(e)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}$e=new WeakMap,me=Symbol(""),Jt=Symbol(""),Re=Symbol("");function E(e,t,n){if(H&&f){let t=$e.get(e);t||$e.set(e,t=new Map);let s=t.get(n);s||(t.set(n,s=new Qe),s.map=t,s.key=n),s.track()}}function Z(e,t,n,s){const a=$e.get(e);if(!a){Pe++;return}const r=e=>{e&&e.trigger()};if(Os(),t==="clear")a.forEach(r);else{const o=l(e),i=o&&xt(n);if(o&&n==="length"){const e=Number(s);a.forEach((t,n)=>{(n==="length"||n===Re||!W(n)&&n>=e)&&r(t)})}else switch((n!==0[0]||a.has(0[0]))&&r(a.get(n)),i&&r(a.get(Re)),t){case"add":o?i&&r(a.get("length")):(r(a.get(me)),be(e)&&r(a.get(Jt)));break;case"delete":o||(r(a.get(me)),be(e)&&r(a.get(Jt)));break;case"set":be(e)&&r(a.get(me));break}}ws()}function H0(e,t){const n=$e.get(e);return n&&n.get(t)}function ze(e){const t=u(e);return t===e?t:(E(t,"iterate",Re),P(e)?t:t.map(x))}function $t(e){return E(e=u(e),"iterate",Re),e}q1={__proto__:null,[Symbol.iterator](){return ls(this,Symbol.iterator,x)},concat(...e){return ze(this).concat(...e.map(e=>l(e)?ze(e):e))},entries(){return ls(this,"entries",e=>(e[1]=x(e[1]),e))},every(e,t){return ne(this,"every",e,t,0[0],arguments)},filter(e,t){return ne(this,"filter",e,t,e=>e.map(x),arguments)},find(e,t){return ne(this,"find",e,t,x,arguments)},findIndex(e,t){return ne(this,"findIndex",e,t,0[0],arguments)},findLast(e,t){return ne(this,"findLast",e,t,x,arguments)},findLastIndex(e,t){return ne(this,"findLastIndex",e,t,0[0],arguments)},forEach(e,t){return ne(this,"forEach",e,t,0[0],arguments)},includes(...e){return cs(this,"includes",e)},indexOf(...e){return cs(this,"indexOf",e)},join(e){return ze(this).join(e)},lastIndexOf(...e){return cs(this,"lastIndexOf",e)},map(e,t){return ne(this,"map",e,t,0[0],arguments)},pop(){return Ue(this,"pop")},push(...e){return Ue(this,"push",e)},reduce(e,...t){return I1(this,"reduce",e,t)},reduceRight(e,...t){return I1(this,"reduceRight",e,t)},shift(){return Ue(this,"shift")},some(e,t){return ne(this,"some",e,t,0[0],arguments)},splice(...e){return Ue(this,"splice",e)},toReversed(){return ze(this).toReversed()},toSorted(e){return ze(this).toSorted(e)},toSpliced(...e){return ze(this).toSpliced(...e)},unshift(...e){return Ue(this,"unshift",e)},values(){return ls(this,"values",x)}};function ls(e,t,n){const o=$t(e),s=o[t]();return o!==e&&!P(e)&&(s._next=s.next,s.next=()=>{const e=s._next();return e.value&&(e.value=n(e.value)),e}),s}U1=Array.prototype;function ne(e,t,n,s,o,i){const a=$t(e),r=a!==e&&!P(e),c=a[t];if(c!==U1[t]){const t=c.apply(e,i);return r?x(t):t}let l=n;a!==e&&(r?l=function(t,s){return n.call(this,x(t),s,e)}:n.length>2&&(l=function(t,s){return n.call(this,t,s,e)}));const d=c.call(a,l,s);return r&&o?o(d):d}function I1(e,t,n,s){const i=$t(e);let o=n;return i!==e&&(P(e)?n.length>3&&(o=function(t,s,o){return n.call(this,t,s,o,e)}):o=function(t,s,o){return n.call(this,t,x(s),o,e)}),i[t](o,...s)}function cs(e,t,n){const s=u(e);E(s,"iterate",Re);const o=s[t](...n);return(o===-1||o===!1)&&En(n[0])?(n[0]=u(n[0]),s[t](...n)):o}function Ue(e,t,n=[]){J(),Os();const s=u(e)[t].apply(e,n);return ws(),ee(),s}qu=Js("__proto__,__v_isRef,__isVue"),os=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(W));function e2(e){W(e)||(e=String(e));const t=u(this);return E(t,"has",e),t.hasOwnProperty(e)}ts=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const o=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!o;if(t==="__v_isReadonly")return o;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(o?i?zd:Nn:i?Ln:Pn).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:0[0];const a=l(e);if(!o){let e;if(a&&(e=q1[t]))return e;if(t==="hasOwnProperty")return e2}const s=Reflect.get(e,t,O(e)?e:n);return(W(t)?os.has(t):qu(t))||(o||E(e,"get",t),i)?s:O(s)?a&&xt(t)?s:s.value:p(s)?o?Sn(s):vt(s):s}},es=class extends ts{constructor(e=!1){super(!1,e)}set(e,t,n,s){let o=e[t];if(!this._isShallow){const t=ce(o);if(!P(n)&&!ce(n)&&(o=u(o),n=u(n)),!l(e)&&O(o)&&!O(n))return!t&&(o.value=n,!0)}const i=l(e)&&xt(t)?Number(t)<e.length:h(e,t),a=Reflect.set(e,t,n,O(e)?e:s);return e===u(s)&&(i?oe(n,o)&&Z(e,"set",t,n):Z(e,"add",t,n)),a}deleteProperty(e,t){const s=h(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&Z(e,"delete",t,0[0]),n}has(e,t){const n=Reflect.has(e,t);return(!W(t)||!os.has(t))&&E(e,"has",t),n}ownKeys(e){return E(e,"iterate",l(e)?"length":me),Reflect.ownKeys(e)}},eu=class extends ts{constructor(e=!1){super(!0,e)}set(){return!0}deleteProperty(){return!0}},Yd=new es,Ud=new eu,$d=new es(!0),Et=e=>e,Ze=e=>Reflect.getPrototypeOf(e);function u2(e,t,n){return function(...r){const o=this.__v_raw,i=u(o),a=be(i),c=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,d=o[e](...r),s=n?Et:t?et:x;return!t&&E(i,"iterate",l?Jt:me),{next(){const{value:e,done:t}=d.next();return t?{value:e,done:t}:{value:c?[s(e[0]),s(e[1])]:s(e),done:t}},[Symbol.iterator](){return this}}}}function Ot(e){return function(...t){return e!=="delete"&&(e==="clear"?0[0]:this)}}function p2(e,t){const n={get(n){const o=this.__v_raw,s=u(o),i=u(n);e||(oe(n,i)&&E(s,"get",n),E(s,"get",i));const{has:a}=Ze(s),r=t?Et:e?et:x;if(a.call(s,n))return r(o.get(n));if(a.call(s,i))return r(o.get(i));o!==s&&o.get(n)},get size(){const t=this.__v_raw;return!e&&E(u(t),"iterate",me),Reflect.get(t,"size",t)},has(t){const n=this.__v_raw,o=u(n),s=u(t);return e||(oe(t,s)&&E(o,"has",t),E(o,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)},forEach(n,s){const o=this,i=o.__v_raw,r=u(i),a=t?Et:e?et:x;return!e&&E(r,"iterate",me),i.forEach((e,t)=>n.call(s,a(e),a(t),o))}};return S(n,e?{add:Ot("add"),set:Ot("set"),delete:Ot("delete"),clear:Ot("clear")}:{add(e){!t&&!P(e)&&!ce(e)&&(e=u(e));const n=u(this);return Ze(n).has.call(n,e)||(n.add(e),Z(n,"add",e,e)),this},set(e,n){!t&&!P(n)&&!ce(n)&&(n=u(n));const s=u(this),{has:i,get:a}=Ze(s);let o=i.call(s,e);o||(e=u(e),o=i.call(s,e));const r=a.call(s,e);return s.set(e,n),o?oe(n,r)&&Z(s,"set",e,n):Z(s,"add",e,n),this},delete(e){const t=u(this),{has:s,get:o}=Ze(t);let n=s.call(t,e);n||(e=u(e),n=s.call(t,e)),o&&o.call(t,e);const i=t.delete(e);return n&&Z(t,"delete",e,0[0]),i},clear(){const e=u(this),t=e.size!==0,n=e.clear();return t&&Z(e,"clear",0[0],0[0]),n}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=u2(s,e,t)}),n}function Vn(e,t){const n=p2(e,t);return(t,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?t:Reflect.get(h(n,s)&&s in t?n:t,s,o)}Ld={get:Vn(!1,!1)},Nd={get:Vn(!1,!0)},Dd={get:Vn(!0,!1)},Pn=new WeakMap,Ln=new WeakMap,Nn=new WeakMap,zd=new WeakMap;function j2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function O2(e){return e.__v_skip||!Object.isExtensible(e)?0:j2(Oo(e))}function vt(e){return ce(e)?e:kn(e,!1,Yd,Ld,Pn)}function s3(e){return kn(e,!1,$d,Nd,Ln)}function Sn(e){return kn(e,!0,Ud,Dd,Nn)}function kn(e,t,n,s,o){if(!p(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=O2(e);if(i===0)return e;const a=o.get(e);if(a)return a;const r=new Proxy(e,i===2?s:n);return o.set(e,r),r}function Fe(e){return ce(e)?Fe(e.__v_raw):!!(e&&e.__v_isReactive)}function ce(e){return!!(e&&e.__v_isReadonly)}function P(e){return!!(e&&e.__v_isShallow)}function En(e){return!!e&&!!e.__v_raw}function u(e){const t=e&&e.__v_raw;return t?u(t):e}function E2(e){return!h(e,"__v_skip")&&Object.isExtensible(e)&&wt(e,"__v_skip",!0),e}x=e=>p(e)?vt(e):e,et=e=>p(e)?Sn(e):e;function O(e){return!!e&&e.__v_isRef===!0}function Je(e){return vd(e,!1)}function F(e){return vd(e,!0)}function vd(e,t){return O(e)?e:new gl(e,t)}gl=class{constructor(e,t){this.dep=new Qe,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:u(e),this._value=t?e:x(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,t=this.__v_isShallow||P(e)||ce(e);e=t?e:u(e),oe(e,n)&&(this._rawValue=e,this._value=t?e:x(e),this.dep.trigger())}};function _n(e){return O(e)?e.value:e}function b(e){return d(e)?e():_n(e)}pl={get:(e,t,n)=>t==="__v_raw"?e:_n(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return O(o)&&!O(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function fl(e){return Fe(e)?e:new Proxy(e,pl)}Tc=class{constructor(e){this.__v_isRef=!0,this._value=0[0];const t=this.dep=new Qe,{get:n,set:s}=e(t.track.bind(t),t.trigger.bind(t));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}};function q2(e){return new Tc(e)}Sr=class{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=0[0]}get value(){const e=this._object[this._key];return this._value=e===0[0]?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return H0(u(this._object),this._key)}},Ar=class{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=0[0]}get value(){return this._value=this._getter()}};function G2(e,t,n){return O(e)?e:d(e)?new Ar(e):p(e)&&arguments.length>1?Q2(e,t,n):Je(e)}function Q2(e,t,n){const s=e[t];return O(s)?s:new Sr(e,t,n)}gr=class{constructor(e,t,n){this.fn=e,this.setter=t,this._value=0[0],this.dep=new Qe(this),this.__v_isRef=!0,this.deps=0[0],this.depsTail=0[0],this.flags=16,this.globalVersion=Pe-1,this.next=0[0],this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&f!==this)return Za(this,!0),!0}get value(){const e=this.dep.track();return Br(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}};function e3(e,t,n=!1){let s,o;return d(e)?s=e:(s=e.get,o=e.set),new gr(s,o,n)}Ye={},Ge=new WeakMap;function o3(e,t=!1,n=Ee){if(n){let t=Ge.get(n);t||Ge.set(n,t=[]),t.push(e)}}function a3(e,t,n=m){const{immediate:_,deep:a,once:w,scheduler:v,augmentJob:y,call:o}=n,j=e=>a?e:P(e)||a===!1||a===0?te(e,1):te(e);let s,i,h,p,g=!1,f=!1;if(O(e)?(i=()=>e.value,g=P(e)):Fe(e)?(i=()=>j(e),g=!0):l(e)?(f=!0,g=e.some(e=>Fe(e)||P(e)),i=()=>e.map(e=>{if(O(e))return e.value;if(Fe(e))return j(e);if(d(e))return o?o(e,2):e()})):d(e)?t?i=o?()=>o(e,2):e:i=()=>{if(h){J();try{h()}finally{ee()}}const t=Ee;Ee=s;try{return o?o(e,3,[p]):e(p)}finally{Ee=t}}:i=B,t&&a){const e=i,t=a===!0?1/0:a;i=()=>te(e(),t)}const b=$a(),c=()=>{s.stop(),b&&b.active&&Yt(b.effects,s)};if(w&&t){const e=t;t=(...t)=>{e(...t),c()}}let r=f?new Array(e.length).fill(Ye):Ye;const u=e=>{if(!(!(s.flags&1)||!s.dirty&&!e))if(t){{const e=s.run();if(a||g||(f?e.some((e,t)=>oe(e,r[t])):oe(e,r))){h&&h();const n=Ee;Ee=s;try{const n=[e,r===Ye?0[0]:f&&r[0]===Ye?[]:r,p];r=e,o?o(t,3,n):t(...n)}finally{Ee=n}}}}else s.run()};return y&&y(u),s=new Es(i),s.scheduler=v?()=>v(u,!1):u,p=e=>o3(e,!1,s),h=s.onStop=()=>{const e=Ge.get(s);if(e){if(o)o(e,4);else for(const t of e)t();Ge.delete(s)}},t?_?u(!0):r=s.run():v?v(u.bind(null,!0),!0):s.run(),c.pause=s.pause.bind(s),c.resume=s.resume.bind(s),c.stop=c,c}function te(e,t=1/0,n){if(t<=0||!p(e)||e.__v_skip||(n||=new Set,n.has(e)))return e;if(n.add(e),t--,O(e))te(e.value,t,n);else if(l(e))for(let s=0;s<e.length;s++)te(e[s],t,n);else if(Gs(e)||be(e))e.forEach(e=>{te(e,t,n)});else if(Ws(e)){for(const s in e)te(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&te(e[s],t,n)}return e}function mt(e,t,n,s){try{return s?e(...s):e()}catch(e){Gt(e,t,n)}}function X(e,t,n,s){if(d(e)){const o=mt(e,t,n,s);return o&&qs(o)&&o.catch(e=>{Gt(e,t,n)}),o}if(l(e)){const o=[];for(let i=0;i<e.length;i++)o.push(X(e[i],t,n,s));return o}}function Gt(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||m;if(t){let s=t.parent;const i=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const t=s.ec;if(t)for(let n=0;n<t.length;n++)if(t[n](e,i,a)===!1)return;s=s.parent}if(o){J(),mt(o,null,10,[e,i,a]),ee();return}}l3(e,n,i,s,a)}function l3(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}M=[],V=-1,ke=[],re=null,Oe=0,dn=Promise.resolve(),qe=null;function ln(e){const t=qe||dn;return e?t.then(this?e.bind(this):e):t}function u3(e){let t=V+1,n=M.length;for(;t<n;){const s=t+n>>>1,o=M[s],i=Ae(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function cn(e){if(!(e.flags&1)){const t=Ae(e),n=M[M.length-1];!n||!(e.flags&2)&&t>=Ae(n)?M.push(e):M.splice(u3(t),0,e),e.flags|=1,fa()}}function fa(){qe||(qe=dn.then(ia))}function g3(e){l(e)?ke.push(...e):re&&e.id===-1?re.splice(Oe+1,0,e):e.flags&1||(ke.push(e),e.flags|=1),fa()}function la(e,t,n=V+1){for(;n<M.length;n++){const t=M[n];if(t&&t.flags&2){if(e&&t.id!==e.uid)continue;M.splice(n,1),n--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function ca(){if(ke.length){const e=[...new Set(ke)].sort((e,t)=>Ae(e)-Ae(t));if(ke.length=0,re){re.push(...e);return}for(re=e,Oe=0;Oe<re.length;Oe++){const t=re[Oe];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}re=null,Oe=0}}Ae=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ia(){try{for(V=0;V<M.length;V++){const e=M[V];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),mt(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;V<M.length;V++){const e=M[V];e&&(e.flags&=-2)}V=-1,M.length=0,ca(),qe=null,(M.length||ke.length)&&ia()}}w=null,pn=null;function Lt(e){const t=w;return w=e,pn=e&&e.type.__scopeId||null,t}function I(e,t=w){if(!t||e._n)return e;const s=(...n)=>{s._d&&Fo(-1);const i=Lt(t);let o;try{o=e(...n)}finally{Lt(i),s._d&&Fo(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function A(e,t){if(w===null)return e;const n=Mt(w),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,i,a,r=m]=t[o];e&&(d(e)&&(e={mounted:e,updated:e}),e.deep&&te(i),s.push({dir:e,instance:n,value:i,oldValue:0[0],arg:a,modifiers:r}))}return e}function _e(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let a=0;a<o.length;a++){const r=o[a];i&&(r.oldValue=i[a].value);let c=r.dir[s];c&&(J(),X(c,n,8,[e.el,r,e,t]),ee())}}na=Symbol("_vte"),Qi=e=>e.__isTeleport;function wn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,wn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function At(){const e=Le();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Gi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function x3(e){const t=Le(),n=F(null);if(t){const s=t.refs===m?t.refs={}:t.refs;Object.defineProperty(s,e,{enumerable:!0,get:()=>n.value,set:e=>n.value=e})}return n}function ct(e,t,n,s,o=!1){if(l(e)){e.forEach((e,i)=>ct(e,t&&(l(t)?t[i]:t),n,s,o));return}if(ye(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ct(e,t,n,s.component.subTree);return}const c=s.shapeFlag&4?Mt(s.component):s.el,f=o?null:c,{i:g,r:i}=e,a=t&&t.r,r=g.refs===m?g.refs={}:g.refs,p=g.setupState,b=u(p),v=p===m?()=>!1:e=>h(b,e);if(a!=null&&a!==i&&(y(a)?(r[a]=null,v(a)&&(p[a]=null)):O(a)&&(a.value=null)),d(i))mt(i,g,12,[f,r]);else{const t=y(i),s=O(i);if(t||s){const a=()=>{if(e.f){const n=t?v(i)?p[i]:r[i]:i.value;o?l(n)&&Yt(n,c):l(n)?n.includes(c)||n.push(c):t?(r[i]=[c],v(i)&&(p[i]=r[i])):(i.value=[c],e.k&&(r[e.k]=i.value))}else t?(r[i]=f,v(i)&&(p[i]=f)):s&&(i.value=f,e.k&&(r[e.k]=f))};f?(a.id=-1,D(a,n)):a()}}}Xe().requestIdleCallback,Xe().cancelIdleCallback,ye=e=>!!e.type.__asyncLoader,An=e=>e.type.__isKeepAlive;function E3(e,t){Ii(e,"a",t)}function k3(e,t){Ii(e,"da",t)}function Ii(e,t,n=C){const s=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(bt(t,s,n),n){let e=n.parent;for(;e&&e.parent;)An(e.parent.vnode)&&S3(s,t,n,e),e=e.parent}}function S3(e,t,n,s){const o=bt(t,e,s,!0);In(()=>{Yt(s[t],o)},n)}function bt(e,t,n=C,s=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{J();const o=Se(n),i=X(t,n,e,s);return o(),ee(),i});return s?i.unshift(o):i.push(o),o}}Q=e=>(t,n=C)=>{(!He||e==="sp")&&bt(e,(...e)=>t(...e),n)},Pi=Q("bm"),pt=Q("m"),Ri=Q("bu"),zi=Q("u"),Ti=Q("bum"),In=Q("um"),Fi=Q("sp"),Mi=Q("rtg"),Ei=Q("rtc");function T3(e,t=C){bt("ec",e,t)}Un="components";function wi(e,t){return yi(Un,e,!0,t)||e}qn=Symbol.for("v-ndc");function z3(e){return y(e)?yi(Un,e,!1)||e:e||qn}function yi(e,t,n=!0,s=!1){const o=w||C;if(o){const n=o.type;{const e=L3(n,!1);if(e&&(e===t||e===R(t)||e===lt(R(t))))return n}const i=vi(o[e]||n[e],t)||vi(o.appContext[e],t);return!i&&s?n:i}}function vi(e,t){return e&&(e[t]||e[R(t)]||e[lt(R(t))])}function g(e,t,n){let o;const i=n,a=l(e);if(a||y(e)){const r=a&&Fe(e);let n=!1,s=!1;r&&(n=!P(e),s=ce(e),e=$t(e)),o=new Array(e.length);for(let a=0,r=e.length;a<r;a++)o[a]=t(n?s?et(x(e[a])):x(e[a]):e[a],a,0[0],i)}else if(typeof e=="number"){o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,0[0],i)}else if(p(e))if(e[Symbol.iterator])o=Array.from(e,(e,n)=>t(e,n,0[0],i));else{const n=Object.keys(e);o=new Array(n.length);for(let s=0,r=n.length;s<r;s++){const a=n[s];o[s]=t(e[a],a,s,i)}}else o=[];return o}function fi(t,n,s={},o){if(w.ce||w.parent&&ye(w.parent)&&w.parent.ce)return n!=="default"&&(s.name=n),e(),r(c,null,[a("slot",s,o)],64);let l=t[n];l&&l._c&&(l._d=!1),e();const d=l&&ri(l(s)),h=s.key||d&&d.key,u=r(c,{key:(h&&!W(h)?h:`_${n}`)+(!d&&o?"_fb":"")},d||[],d&&t._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function ri(e){return e.some(e=>!We(e)||!(e.type===U||e.type===c&&!ri(e.children)))?e:null}Dt=e=>e?ai(e)?Mt(e):Dt(e.parent):null,Be=S(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Dt(e.parent),$root:e=>Dt(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Xo(e),$forceUpdate:e=>e.f||(e.f=()=>{cn(e.update)}),$nextTick:e=>e.n||(e.n=ln.bind(e.proxy)),$watch:e=>zh.bind(e)}),Rt=(e,t)=>e!==m&&!e.__isScriptSetup&&h(e,t),ii={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:a,data:o,props:c,accessCache:s,type:u,appContext:f}=e;let l;if(t[0]!=="$"){const i=s[t];if(i!==0[0])switch(i){case 1:return a[t];case 2:return o[t];case 4:return n[t];case 3:return c[t]}else{if(Rt(a,t))return s[t]=1,a[t];if(o!==m&&h(o,t))return s[t]=2,o[t];if((l=e.propsOptions[0])&&h(l,t))return s[t]=3,c[t];if(n!==m&&h(n,t))return s[t]=4,n[t];Pt&&(s[t]=0)}}const d=Be[t];let i,r;if(d)return t==="$attrs"&&E(e.attrs,"get",""),d(e);if((i=u.__cssModules)&&(i=i[t]))return i;if(n!==m&&h(n,t))return s[t]=4,n[t];if(r=f.config.globalProperties,h(r,t))return r[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return Rt(o,t)?(o[t]=n,!0):s!==m&&h(s,t)?(s[t]=n,!0):!(h(e.props,t)||t[0]==="$"&&t.slice(1)in e)&&(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i}},a){let r;return!!n[a]||e!==m&&h(e,a)||Rt(t,a)||(r=i[0])&&h(r,a)||h(s,a)||h(Be,a)||h(o.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:h(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function oi(e){return l(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}Pt=!0;function I3(e){const u=Xo(e),t=e.proxy,s=e.ctx;Pt=!1,u.beforeCreate&&ti(u.beforeCreate,e,"bc");const{data:j,computed:a,methods:r,watch:c,provide:o,inject:h,created:m,beforeMount:S,mounted:T,beforeUpdate:O,updated:F,activated:w,deactivated:M,beforeDestroy:N,beforeUnmount:C,destroyed:z,unmounted:x,render:b,renderTracked:E,renderTriggered:k,errorCaptured:A,serverPrefetch:y,expose:i,inheritAttrs:v,components:g,directives:f,filters:D}=u;if(h&&B3(h,s,null),r)for(const e in r){const n=r[e];d(n)&&(s[e]=n.bind(t))}if(j){const n=j.call(t,t);p(n)&&(e.data=vt(n))}if(Pt=!0,a)for(const n in a){const e=a[n],i=d(e)?e.bind(t,t):d(e.get)?e.get.bind(t,t):B,r=!d(e)&&d(e.set)?e.set.bind(t):B,o=_({get:i,set:r});Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e})}if(c)for(const e in c)ei(c[e],s,t,e);if(o){const e=d(o)?o.call(t):o;Reflect.ownKeys(e).forEach(t=>{sh(t,e[t])})}m&&ti(m,e,"c");function n(e,n){l(n)?n.forEach(n=>e(n.bind(t))):n&&e(n.bind(t))}if(n(Pi,S),n(pt,T),n(Ri,O),n(zi,F),n(E3,w),n(k3,M),n(T3,A),n(Ei,E),n(Mi,k),n(Ti,C),n(In,x),n(Fi,y),l(i))if(i.length){const n=e.exposed||(e.exposed={});i.forEach(e=>{Object.defineProperty(n,e,{get:()=>t[e],set:n=>t[e]=n,enumerable:!0})})}else e.exposed||(e.exposed={});b&&e.render===B&&(e.render=b),v!=null&&(e.inheritAttrs=v),g&&(e.components=g),f&&(e.directives=f),y&&Gi(e)}function B3(e,t){l(e)&&(e=gs(e));for(const o in e){const s=e[o];let n;p(s)?"default"in s?n=on(s.from||o,s.default,!0):n=on(s.from||o):n=on(s),O(n)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n.value,set:e=>n.value=e}):t[o]=n}}function ti(e,t,n){X(l(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function ei(e,t,n,s){let o=s.includes(".")?ro(n,s):()=>n[s];if(y(e)){const n=t[e];d(n)&&$(o,n)}else if(d(e))$(o,e.bind(n));else if(p(e))if(l(e))e.forEach(e=>ei(e,t,n,s));else{const s=d(e.handler)?e.handler.bind(n):t[e.handler];d(s)&&$(o,s,e)}}function Xo(e){const n=e.type,{mixins:r,extends:c}=n,{mixins:s,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(n);let t;return a?t=a:!s.length&&!r&&!c?t=n:(t={},s.length&&s.forEach(e=>tn(t,e,i,!0)),tn(t,n,i)),p(n)&&o.set(n,t),t}function tn(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&tn(e,i,n,!0),o&&o.forEach(t=>tn(e,t,n,!0));for(const o in t)if(!s||o!=="expose"){const s=Yo[o]||n&&n[o];e[o]=s?s(e[o],t[o]):t[o]}return e}Yo={data:qo,props:Uo,emits:Uo,methods:ot,computed:ot,beforeCreate:T,created:T,beforeMount:T,mounted:T,beforeUpdate:T,updated:T,beforeDestroy:T,beforeUnmount:T,destroyed:T,unmounted:T,activated:T,deactivated:T,errorCaptured:T,serverPrefetch:T,components:ot,directives:ot,watch:G3,provide:qo,inject:Y3};function qo(e,t){return t?e?function(){return S(d(e)?e.call(this,this):e,d(t)?t.call(this,this):t)}:t:e}function Y3(e,t){return ot(gs(e),gs(t))}function gs(e){if(l(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function T(e,t){return e?[...new Set([].concat(e,t))]:t}function ot(e,t){return e?S(Object.create(null),e,t):t}function Uo(e,t){return e?l(e)&&l(t)?[...new Set([...e,...t])]:S(Object.create(null),oi(e),oi(t??{})):t}function G3(e,t){if(!e)return t;if(!t)return e;const n=S(Object.create(null),e);for(const s in t)n[s]=T(e[s],t[s]);return n}function $o(){return{app:null,config:{isNativeTag:lo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:0[0],warnHandler:0[0],compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}Io=0;function eh(e){return function(t,n=null){d(t)||(t=S({},t)),n!=null&&!p(n)&&(n=null);const o=$o(),i=new WeakSet,c=[];let r=!1;const s=o.app={_uid:Io++,_component:t,_props:n,_container:null,_context:o,_instance:null,version:ji,get config(){return o.config},set config(e){},use(e,...t){return i.has(e)||(e&&d(e.install)?(i.add(e),e.install(s,...t)):d(e)&&(i.add(e),e(s,...t))),s},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),s},component(e,t){return t?(o.components[e]=t,s):o.components[e]},directive(e,t){return t?(o.directives[e]=t,s):o.directives[e]},mount(i,c,l){if(!r){const c=s._ceVNode||a(t,n);return c.appContext=o,l===!0?l="svg":l===!1&&(l=0[0]),e(c,i,l),r=!0,s._container=i,i.__vue_app__=s,Mt(c.component)}},onUnmount(e){c.push(e)},unmount(){r&&(X(c,s._instance,16),e(null,s._container),delete s._container.__vue_app__)},provide(e,t){return o.provides[e]=t,s},runWithContext(e){const t=ge;ge=s;try{return e()}finally{ge=t}}};return s}}ge=null;function sh(e,t){if(C){let n=C.provides;const s=C.parent&&C.parent.provides;s===n&&(n=C.provides=Object.create(s)),n[e]=t}}function on(e,t,n=!1){const s=Le();if(s||ge){let o=ge?ge._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:0[0];if(o&&e in o)return o[e];if(arguments.length>1)return n&&d(t)?t.call(s&&s.proxy):t}}ks={},As=()=>Object.create(ks),Ss=e=>Object.getPrototypeOf(e)===ks;function oh(e,t,n,s=!1){const o={},i=As();e.propsDefaults=Object.create(null),No(e,t,o,i);for(const t in e.propsOptions[0])t in o||(o[t]=0[0]);n?e.props=s?o:s3(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function ih(e,t,n,s){const{props:i,attrs:o,vnode:{patchFlag:l}}=e,r=u(i),[c]=e.propsOptions;let a=!1;if((s||l>0)&&!(l&16)){if(l&8){const n=e.vnode.dynamicProps;for(let d=0;d<n.length;d++){let s=n[d];if(an(e.emitsOptions,s))continue;const l=t[s];if(c)if(h(o,s))l!==o[s]&&(o[s]=l,a=!0);else{const t=R(s);i[t]=zs(c,r,t,l,e,!1)}else l!==o[s]&&(o[s]=l,a=!0)}}}else{No(e,t,i,o)&&(a=!0);let s;for(const o in r)(!t||!h(t,o)&&((s=ie(o))===o||!h(t,s)))&&(c?n&&(n[o]!==0[0]||n[s]!==0[0])&&(i[o]=zs(c,r,o,0[0],e,!0)):delete i[o]);if(o!==r)for(const e in o)(!t||!h(t,e))&&(delete o[e],a=!0)}a&&Z(e.attrs,"set","")}function No(e,t,n,s){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let c in t){if(De(c))continue;const l=t[c];let d;i&&h(i,d=R(c))?!o||!o.includes(d)?n[d]=l:(a||(a={}))[d]=l:an(e.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,r=!0)}if(o){const s=u(n),t=a||m;for(let r=0;r<o.length;r++){const a=o[r];n[a]=zs(i,s,a,t[a],e,!h(t,a))}}return r}function zs(e,t,n,s,o,i){const a=e[n];if(a!=null){const e=h(a,"default");if(e&&s===0[0]){const e=a.default;if(a.type!==Function&&!a.skipFactory&&d(e)){const{propsDefaults:i}=o;if(n in i)s=i[n];else{const a=Se(o);s=i[n]=e.call(null,t),a()}}else s=e;o.ce&&o.ce._setProp(n,s)}a[0]&&(i&&!e?s=!1:a[1]&&(s===""||s===ie(n))&&(s=!0))}return s}Do=new WeakMap;function zo(e,t,n=!1){const i=n?Do:t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let c=!1;if(!d(e)){const s=e=>{c=!0;const[s,n]=zo(e,t,!0);S(o,s),n&&a.push(...n)};!n&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}if(!s&&!c)return p(e)&&i.set(e,Ce),Ce;if(l(s))for(let e=0;e<s.length;e++){const t=R(s[e]);So(t)&&(o[t]=m)}else if(s)for(const t in s){const e=R(t);if(So(e)){const i=s[t],r=o[e]=l(i)||d(i)?{type:i}:S({},i),n=r.type;let c=!1,u=!0;if(l(n))for(let e=0;e<n.length;++e){const t=n[e],s=d(t)&&t.name;if(s==="Boolean"){c=!0;break}s==="String"&&(u=!1)}else c=d(n)&&n.name==="Boolean";r[0]=c,r[1]=u,(c||h(r,"default"))&&a.push(e)}}const u=[o,a];return p(e)&&i.set(e,u),u}function So(e){return e[0]!=="$"&&!De(e)}en=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",Zt=e=>l(e)?e.map(G):[G(e)],ko=(e,t,n)=>{if(t._n)return t;const s=I((...e)=>Zt(t(...e)),n);return s._c=!1,s},Is=(e,t)=>{const s=e._ctx;for(const n in e){if(en(n))continue;const o=e[n];if(d(o))t[n]=ko(n,o,s);else if(o!=null){const e=Zt(o);t[n]=()=>e}}},Bs=(e,t)=>{const n=Zt(t);e.slots.default=()=>n},Vs=(e,t,n)=>{for(const s in t)(n||!en(s))&&(e[s]=t[s])},Eo=(e,t,n)=>{const s=e.slots=As();if(e.vnode.shapeFlag&32){const e=t.__;e&&wt(s,"__",e,!0);const o=t._;o?(Vs(s,t,n),n&&wt(s,"_",o,!0)):Is(t,s)}else t&&Bs(e,t)},Co=(e,t,n)=>{const{vnode:a,slots:s}=e;let o=!0,i=m;if(a.shapeFlag&32){const e=t._;e?n&&e===1?o=!1:Vs(s,t,n):(o=!t.$stable,Is(t,s)),i=t}else t&&(Bs(e,t),i={default:1});if(o)for(const e in s)!en(e)&&i[e]==null&&delete s[e]},D=wh;function lh(e){return uh(e)}function uh(e){const N=Xe();N.__VUE__=!0;const{insert:n,remove:r,patchProp:o,createElement:se,createText:j,createComment:te,setText:Z,setElementText:f,parentNode:E,nextSibling:h,setScopeId:O=B,insertStaticContent:$}=e,s=(e,t,n,s=null,o=null,a=null,r=0[0],l=null,d=!!t.dynamicChildren)=>{if(e===t)return;e&&!Ke(e,t)&&(s=g(e),i(e,o,a,!0),e=null),t.patchFlag===-2&&(d=!1,t.dynamicChildren=null);const{type:m,ref:h,shapeFlag:u}=t;switch(m){case ut:H(e,t,n,s);break;case U:M(e,t,n,s);break;case zt:e==null&&z(t,n,s,r);break;case c:R(e,t,n,s,o,a,r,l,d);break;default:u&1?ne(e,t,n,s,o,a,r,l,d):u&6?W(e,t,n,s,o,a,r,l,d):(u&64||u&128)&&m.process(e,t,n,s,o,a,r,l,d,p)}h!=null&&o?ct(h,e&&e.ref,a,t||e,!t):h==null&&e&&e.ref!=null&&ct(e.ref,null,a,e,!0)},H=(e,t,s,o)=>{if(e==null)n(t.el=j(t.children),s,o);else{const n=t.el=e.el;t.children!==e.children&&Z(n,t.children)}},M=(e,t,s,o)=>{e==null?n(t.el=te(t.children||""),s,o):t.el=e.el},z=(e,t,n,s)=>{[e.el,e.anchor]=$(e.children,t,n,s,e.el,e.anchor)},K=({el:e,anchor:t},s,o)=>{let i;for(;e&&e!==t;)i=h(e),n(e,s,o),e=i;n(t,s,o)},P=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),r(e),e=n;r(t)},ne=(e,t,n,s,o,i,a,r,c)=>{t.type==="svg"?a="svg":t.type==="math"&&(a="mathml"),e==null?Q(t,n,s,o,i,a,r,c):V(e,t,o,i,a,r,c)},Q=(e,t,s,i,a,r,c,l)=>{let h,m;const{props:d,shapeFlag:b,transition:g,dirs:p}=e;if(h=e.el=se(e.type,r,d&&d.is,d),b&8?f(h,e.children):b&16&&u(e.children,h,null,i,a,Ys(e,r),c,l),p&&_e(e,null,i,"created"),k(h,e,e.scopeId,c,i),d){for(const e in d)e!=="value"&&!De(e)&&o(h,e,null,d[e],r,i);"value"in d&&o(h,"value",null,d.value,r),(m=d.onVnodeBeforeMount)&&q(m,i,e)}p&&_e(e,null,i,"beforeMount");const v=_h(a,g);v&&g.beforeEnter(h),n(h,t,s),((m=d&&d.onVnodeMounted)||v||p)&&D(()=>{m&&q(m,i,e),v&&g.enter(h),p&&_e(e,null,i,"mounted")},a)},k=(e,t,n,s,o)=>{if(n&&O(e,n),s)for(let t=0;t<s.length;t++)O(e,s[t]);if(o){let n=o.subTree;if(t===n||Zs(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=o.vnode;k(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},u=(e,t,n,o,i,a,r,c,l=0)=>{for(let d=l;d<e.length;d++){const u=e[d]=c?le(e[d]):G(e[d]);s(null,u,t,n,o,i,a,r,c)}},V=(e,t,n,s,i,a,r)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:p,dirs:g}=t;d|=e.patchFlag&16;const u=e.props||m,c=t.props||m;let h;if(n&&ve(n,!1),(h=c.onVnodeBeforeUpdate)&&q(h,n,t,e),g&&_e(t,e,n,"beforeUpdate"),n&&ve(n,!0),(u.innerHTML&&c.innerHTML==null||u.textContent&&c.textContent==null)&&f(l,""),p?w(e.dynamicChildren,p,l,n,s,Ys(t,i),a):r||y(e,t,l,null,n,s,Ys(t,i),a,!1),d>0){if(d&16)F(l,u,c,n,i);else if(d&2&&u.class!==c.class&&o(l,"class",null,c.class,i),d&4&&o(l,"style",u.style,c.style,i),d&8){const e=t.dynamicProps;for(let s=0;s<e.length;s++){const t=e[s],a=u[t],r=c[t];(r!==a||t==="value")&&o(l,t,a,r,i,n)}}d&1&&e.children!==t.children&&f(l,t.children)}else!r&&p==null&&F(l,u,c,n,i);((h=c.onVnodeUpdated)||g)&&D(()=>{h&&q(h,n,t,e),g&&_e(t,e,n,"updated")},s)},w=(e,t,n,o,i,a,r)=>{for(let d=0;d<t.length;d++){const l=e[d],u=t[d],h=l.el&&(l.type===c||!Ke(l,u)||l.shapeFlag&198)?E(l.el):n;s(l,u,h,null,o,i,a,r,!0)}},F=(e,t,n,s,i)=>{if(t!==n){if(t!==m)for(const a in t)!De(a)&&!(a in n)&&o(e,a,t[a],null,i,s);for(const a in n){if(De(a))continue;const r=n[a],c=t[a];r!==c&&a!=="value"&&o(e,a,c,r,i,s)}"value"in n&&o(e,"value",t.value,n.value,i)}},R=(e,t,s,o,i,a,r,c,l)=>{const p=t.el=e?e.el:j(""),d=t.anchor=e?e.anchor:j("");let{patchFlag:m,dynamicChildren:f,slotScopeIds:h}=t;h&&(c=c?c.concat(h):h),e==null?(n(p,s,o),n(d,s,o),u(t.children||[],s,d,i,a,r,c,l)):m>0&&m&64&&f&&e.dynamicChildren?(w(e.dynamicChildren,f,s,i,a,r,c),(t.key!=null||i&&t===i.subTree)&&_o(e,t,!0)):y(e,t,s,d,i,a,r,c,l)},W=(e,t,n,s,o,i,a,r,c)=>{t.slotScopeIds=r,e==null?t.shapeFlag&512?o.ctx.activate(t,n,s,a,c):x(t,n,s,o,i,a,c):L(e,t,c)},x=(e,t,n,s,o,i,r)=>{const c=e.component=W3(e,s,o);if(An(e)&&(c.ctx.renderer=p),H3(c,!1,r),c.asyncDep){if(o&&o.registerDep(c,T,r),!e.el){const s=c.subTree=a(U);M(null,s,t,n),e.placeholder=s.el}}else T(c,e,t,n,o,i,r)},L=(e,t,n)=>{const s=t.component=e.component;if(Mh(e,t,n))if(s.asyncDep&&!s.asyncResolved){_(s,t,n);return}else s.next=t,s.update();else t.el=e.el,s.vnode=t},T=(e,t,n,o,i,a,r)=>{const d=()=>{if(e.isMounted){let{next:t,bu:u,u:h,parent:m,vnode:n}=e;{const s=ho(e);if(s){t&&(t.el=n.el,_(e,t,r)),s.asyncDep.then(()=>{e.isUnmounted||d()});return}}let f=t,o;ve(e,!1),t?(t.el=n.el,_(e,t,r)):t=n,u&&st(u),(o=t.props&&t.props.onVnodeBeforeUpdate)&&q(o,m,t,n),ve(e,!0);const c=mo(e),l=e.subTree;e.subTree=c,s(l,c,E(l.el),g(l),e,i,a),t.el=c.el,f===null&&Sh(e,c.el),h&&D(h,i),(o=t.props&&t.props.onVnodeUpdated)&&D(()=>q(o,m,t,n),i)}else{let c;const{el:p,props:l}=t,{bm:u,m:h,parent:r,root:d,type:f}=e,m=ye(t);ve(e,!1),u&&st(u),!m&&(c=l&&l.onVnodeBeforeMount)&&q(c,r,t),ve(e,!0);{d.ce&&d.ce._def.shadowRoot!==!1&&d.ce._injectChildStyle(f);const r=e.subTree=mo(e);s(null,r,n,o,e,i,a),t.el=r.el}if(h&&D(h,i),!m&&(c=l&&l.onVnodeMounted)){const e=t;D(()=>q(c,r,e),i)}(t.shapeFlag&256||r&&ye(r.vnode)&&r.vnode.shapeFlag&256)&&e.a&&D(e.a,i),e.isMounted=!0,t=n=o=null}};e.scope.on();const c=e.effect=new Es(d);e.scope.off();const u=e.update=c.run.bind(c),l=e.job=c.runIfDirty.bind(c);l.i=e,l.id=e.uid,c.scheduler=()=>cn(l),ve(e,!0),u()},_=(e,t,n)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,ih(e,t.props,s,n),Co(e,t.children,n),J(),la(e),ee()},y=(e,t,n,s,o,i,a,r,c=!1)=>{const l=e&&e.children,m=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:g}=t;if(p>0){if(p&128){S(l,h,n,s,o,i,a,r,c);return}if(p&256){I(l,h,n,s,o,i,a,r,c);return}}g&8?(m&16&&d(l,o,i),h!==l&&f(n,h)):m&16?g&16?S(l,h,n,s,o,i,a,r,c):d(l,o,i,!0):(m&8&&f(n,""),g&16&&u(h,n,s,o,i,a,r,c))},I=(e,t,n,o,i,a,r,c,l)=>{e||=Ce,t||=Ce;const f=e.length,p=t.length,m=Math.min(f,p);let h;for(h=0;h<m;h++){const o=t[h]=l?le(t[h]):G(t[h]);s(e[h],o,n,null,i,a,r,c,l)}f>p?d(e,i,a,!0,!1,m):u(t,n,o,i,a,r,c,l,m)},S=(e,t,n,o,a,r,c,l,d)=>{let u=0;const f=t.length;let m=e.length-1,h=f-1;for(;u<=m&&u<=h;){const o=e[u],i=t[u]=d?le(t[u]):G(t[u]);if(Ke(o,i))s(o,i,n,null,a,r,c,l,d);else break;u++}for(;u<=m&&u<=h;){const o=e[m],i=t[h]=d?le(t[h]):G(t[h]);if(Ke(o,i))s(o,i,n,null,a,r,c,l,d);else break;m--,h--}if(u>m){if(u<=h){const e=h+1,i=e<f?t[e].el:o;for(;u<=h;)s(null,t[u]=d?le(t[u]):G(t[u]),n,i,a,r,c,l,d),u++}}else if(u>h)for(;u<=m;)i(e[u],a,r,!0),u++;else{const C=u,g=u,_=new Map;for(u=g;u<=h;u++){const e=t[u]=d?le(t[u]):G(t[u]);e.key!=null&&_.set(e.key,u)}let p,w=0;const j=h-g+1;let y=!1,O=0;const b=new Array(j);for(u=0;u<j;u++)b[u]=0;for(u=C;u<=m;u++){const f=e[u];if(w>=j){i(f,a,r,!0);continue}let o;if(f.key!=null)o=_.get(f.key);else for(p=g;p<=h;p++)if(b[p-g]===0&&Ke(f,t[p])){o=p;break}o===0[0]?i(f,a,r,!0):(b[o-g]=u+1,o>=O?O=o:y=!0,s(f,t[o],n,null,a,r,c,l,d),w++)}const x=y?kh(b):Ce;for(p=x.length-1,u=j-1;u>=0;u--){const e=g+u,i=t[e],h=t[e+1],m=e+1<f?h.el||h.placeholder:o;b[u]===0?s(null,i,n,m,a,r,c,l,d):y&&(p<0||u!==x[p]?v(i,n,m,2):p--)}}},v=(e,t,s,o,i=null)=>{const{el:a,type:u,transition:l,children:h,shapeFlag:d}=e;if(d&6){v(e.component.subTree,t,s,o);return}if(d&128){e.suspense.move(t,s,o);return}if(d&64){u.move(e,t,s,p);return}if(u===c){n(a,t,s);for(let e=0;e<h.length;e++)v(h[e],t,s,o);n(e.anchor,t,s);return}if(u===zt){K(e,t,s);return}if(o!==2&&d&1&&l)if(o===0)l.beforeEnter(a),n(a,t,s),D(()=>l.enter(a),i);else{const{leave:u,delayLeave:o,afterLeave:i}=l,c=()=>{e.ctx.isUnmounted?r(a):n(a,t,s)},d=()=>{u(a,()=>{c(),i&&i()})};o?o(a,c,d):d()}else n(a,t,s)},i=(e,t,n,s=!1,o=!1)=>{const{type:m,props:r,ref:f,children:b,dynamicChildren:u,shapeFlag:i,patchFlag:l,dirs:j,cacheIndex:g}=e;if(l===-2&&(o=!1),f!=null&&(J(),ct(f,null,n,e,!0),ee()),g!=null&&(t.renderCache[g]=0[0]),i&256){t.ctx.deactivate(e);return}const h=i&1&&j,v=!ye(e);let a;if(v&&(a=r&&r.onVnodeBeforeUnmount)&&q(a,t,e),i&6)X(e.component,n,s);else{if(i&128){e.suspense.unmount(n,s);return}h&&_e(e,null,t,"beforeUnmount"),i&64?e.type.remove(e,t,n,p,s):u&&!u.hasOnce&&(m!==c||l>0&&l&64)?d(u,t,n,!1,!0):(m===c&&l&384||!o&&i&16)&&d(b,t,n),s&&A(e)}(v&&(a=r&&r.onVnodeUnmounted)||h)&&D(()=>{a&&q(a,t,e),h&&_e(e,null,t,"unmounted")},n)},A=e=>{const{type:o,el:n,anchor:i,transition:t}=e;if(o===c){Y(n,i);return}if(o===zt){P(e);return}const s=()=>{r(n),t&&!t.persisted&&t.afterLeave&&t.afterLeave()};if(e.shapeFlag&1&&t&&!t.persisted){const{leave:a,delayLeave:o}=t,i=()=>a(n,s);o?o(e.el,s,i):i()}else s()},Y=(e,t)=>{let n;for(;e!==t;)n=h(e),r(e),e=n;r(t)},X=(e,t,n)=>{const{bum:s,scope:d,job:o,subTree:u,um:a,m:h,a:m,parent:r,slots:{__:c}}=e;io(h),io(m),s&&st(s),r&&l(c)&&c.forEach(e=>{r.renderCache[e]=0[0]}),d.stop(),o&&(o.flags|=8,i(u,e,t,n)),a&&D(a,t),D(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,t.deps===0&&t.resolve())},d=(e,t,n,s=!1,o=!1,a=0)=>{for(let r=a;r<e.length;r++)i(e[r],t,n,s,o)},g=e=>{if(e.shapeFlag&6)return g(e.component.subTree);if(e.shapeFlag&128)return e.suspense.next();const t=h(e.anchor||e.el),n=t&&t[na];return n?h(n):t};let b=!1;const C=(e,t,n)=>{e==null?t._vnode&&i(t._vnode,null,null,!0):s(t._vnode||null,e,t,null,null,null,n),t._vnode=e,b||(b=!0,la(),ca(),b=!1)},p={p:s,um:i,m:v,r:A,mt:x,mc:u,pc:y,pbc:w,n:g,o:e};return{render:C,hydrate:0[0],createApp:eh(C)}}function Ys({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?0[0]:n}function ve({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function _h(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function _o(e,t,n=!1){const o=e.children,s=t.children;if(l(o)&&l(s))for(let t=0;t<o.length;t++){const i=o[t];let e=s[t];e.shapeFlag&1&&!e.dynamicChildren&&((e.patchFlag<=0||e.patchFlag===32)&&(e=s[t]=le(s[t]),e.el=i.el),!n&&e.patchFlag!==-2&&_o(i,e)),e.type===ut&&(e.el=i.el),e.type===U&&!e.el&&(e.el=i.el)}}function kh(e){const a=e.slice(),t=[0];let s,r,n,o,i;const c=e.length;for(s=0;s<c;s++){const l=e[s];if(l!==0){if(r=t[t.length-1],e[r]<l){a[s]=r,t.push(s);continue}for(n=0,o=t.length-1;n<o;)i=n+o>>1,e[t[i]]<l?n=i+1:o=i;l<e[t[n]]&&(n>0&&(a[s]=t[n-1]),t[n]=s)}}for(n=t.length,o=t[n-1];n-- >0;)t[n]=o,o=a[o];return t}function ho(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ho(t)}function io(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}oo=Symbol.for("v-scx"),Kd=()=>on(oo);function so(e,t){return eo(e,null,t)}function $(e,t,n){return eo(e,t,n)}function eo(e,t,n=m){const{immediate:d,deep:u,flush:i,once:h}=n,o=S({},n),c=t&&d||!t&&i!=="post";let a;if(He)if(i==="sync"){const e=Kd();a=e.__watcherHandles||(e.__watcherHandles=[])}else if(!c){const e=()=>{};return e.stop=B,e.resume=B,e.pause=B,e}const s=C;o.call=(e,t,n)=>X(e,s,t,n);let l=!1;i==="post"?o.scheduler=e=>{D(e,s&&s.suspense)}:i!=="sync"&&(l=!0,o.scheduler=(e,t)=>{t?e():cn(e)}),o.augmentJob=e=>{t&&(e.flags|=4),l&&(e.flags|=2,s&&(e.id=s.uid,e.i=s))};const r=a3(e,t,o);return He&&(a?a.push(r):c&&r()),r}function zh(e,t,n){const s=this.proxy,i=y(e)?e.includes(".")?ro(s,e):()=>s[e]:e.bind(s,s);let o;d(t)?o=t:(o=t.handler,n=t);const a=Se(this),r=eo(i,o.bind(s),n);return a(),r}function ro(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}co=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${R(t)}Modifiers`]||e[`${ie(t)}Modifiers`];function Fh(e,n,...a){if(e.isUnmounted)return;const s=e.vnode.props||m;let o=a;const c=n.startsWith("update:"),r=c&&co(s,n.slice(7));r&&(r.trim&&(o=a.map(e=>y(e)?e.trim():e)),r.number&&(o=a.map(Ct)));let t,i=s[t=yt(n)]||s[t=yt(R(n))];!i&&c&&(i=s[t=yt(ie(n))]),i&&X(i,e,6,o);const l=s[t+"Once"];if(l){if(e.emitted){if(e.emitted[t])return}else e.emitted={};e.emitted[t]=!0,X(l,e,6,o)}}function uo(e,t,n=!1){const i=t.emitsCache,a=i.get(e);if(a!==0[0])return a;const o=e.emits;let s={},r=!1;if(!d(e)){const o=e=>{const n=uo(e,t,!0);n&&(r=!0,S(s,n))};!n&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return!o&&!r?(p(e)&&i.set(e,null),null):(l(o)?o.forEach(e=>s[e]=null):S(s,o),p(e)&&i.set(e,s),s)}function an(e,t){return!!e&&!!ft(t)&&(t=t.slice(2).replace(/Once$/,""),h(e,t[0].toLowerCase()+t.slice(1))||h(e,ie(t))||h(e,t))}function mo(e){const{type:c,vnode:s,proxy:y,withProxy:j,propsOptions:[l],slots:b,attrs:i,emit:h,render:d,renderCache:u,props:r,data:m,setupState:f,ctx:p,inheritAttrs:g}=e,v=Lt(e);let o,n;try{if(s.shapeFlag&4){const e=j||y,t=e;o=G(d.call(t,e,u,r,f,m,p)),n=i}else{const e=c;o=G(e.length>1?e(r,{attrs:i,slots:b,emit:h}):e(r,null)),n=c.props?i:fo(i)}}catch(t){Ne.length=0,Gt(t,e,1),o=a(U)}let t=o;if(n&&g!==!1){const e=Object.keys(n),{shapeFlag:s}=t;e.length&&s&7&&(l&&e.some(Qt)&&(n=po(n,l)),t=Te(t,n,!1,!0))}return s.dirs&&(t=Te(t,null,!1,!0),t.dirs=t.dirs?t.dirs.concat(s.dirs):s.dirs),s.transition&&wn(t,s.transition),o=t,Lt(v),o}fo=e=>{let t;for(const n in e)(n==="class"||n==="style"||ft(n))&&((t||(t={}))[n]=e[n]);return t},po=(e,t)=>{const n={};for(const s in e)(!Qt(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Mh(e,t,n){const{props:o,children:c,component:l}=e,{props:s,children:a,patchFlag:i}=t,r=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&i>=0){{if(i&1024)return!0;if(i&16)return o?vo(o,s,r):!!s;if(i&8){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==o[n]&&!an(r,n))return!0}}}}else return!(!c&&!a||!!a&&!!a.$stable)||o!==s&&(o?!s||vo(o,s,r):!!s);return!1}function vo(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!an(n,i))return!0}return!1}function Sh({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}Zs=e=>e.__isSuspense;function wh(e,t){t&&t.pendingBranch?l(e)?t.effects.push(...e):t.effects.push(e):g3(e)}c=Symbol.for("v-fgt"),ut=Symbol.for("v-txt"),U=Symbol.for("v-cmt"),zt=Symbol.for("v-stc"),Ne=[],N=null;function e(e=!1){Ne.push(N=e?null:[])}function ah(){Ne.pop(),N=Ne[Ne.length-1]||null}Ie=1;function Fo(e,t=!1){Ie+=e,e<0&&N&&t&&(N.hasOnce=!0)}function To(e){return e.dynamicChildren=Ie>0?N||Ce:null,ah(),Ie>0&&N&&N.push(e),e}function n(e,n,s,o,i,a){return To(t(e,n,s,o,i,a,!0))}function r(e,t,n,s,o){return To(a(e,t,n,s,o,!0))}function We(e){return!!e&&e.__v_isVNode===!0}function Ke(e,t){return e.type===t.type&&e.key===t.key}Ms=({key:e})=>e??null,rt=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e+=""),e!=null?y(e)||O(e)||d(e)?{i:w,r:e,k:t,f:!!n}:e:null);function t(e,t=null,n=null,s=0,o=null,i=e===c?0:1,a=!1,r=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ms(t),ref:t&&rt(t),scopeId:pn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:w};return r?(ms(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=y(n)?8:16),Ie>0&&!a&&N&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&N.push(l),l}a=Q3;function Q3(e,n=null,s=null,o=0,i=null,a=!1){if((!e||e===qn)&&(e=U),We(e)){const t=Te(e,n,!0);return s&&ms(t,s),Ie>0&&!a&&N&&(t.shapeFlag&6?N[N.indexOf(e)]=t:N.push(t)),t.patchFlag=-2,t}if(N3(e)&&(e=e.__vccOpts),n){n=X3(n);let{class:t,style:e}=n;t&&!y(t)&&(n.class=j(t)),p(e)&&(En(e)&&!l(e)&&(e=S({},e)),n.style=pe(e))}const r=y(e)?1:Zs(e)?128:Qi(e)?64:p(e)?4:d(e)?2:0;return t(e,n,s,o,i,r,a,!0)}function X3(e){return e?En(e)||Ss(e)?S({},e):e:null}function Te(e,t,n=!1,s=!1){const{props:u,ref:o,patchFlag:i,children:h,transition:a}=e,r=t?U3(u||{},t):u,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&Ms(r),ref:t&&t.ref?n&&o?l(o)?o.concat(rt(t)):[o,rt(t)]:rt(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==c?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Te(e.ssContent),ssFallback:e.ssFallback&&Te(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&wn(d,a.clone(d)),d}function z(e=" ",t=0){return a(ut,null,e,t)}function o(t="",n=!1){return n?(e(),r(U,null,t)):a(U,null,t)}function G(e){return e==null||typeof e=="boolean"?a(U):l(e)?a(c,null,e.slice()):We(e)?le(e):a(ut,null,String(e))}function le(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Te(e)}function ms(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(l(t))n=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),ms(e,n()),n._c&&(n._d=!0));return}else{n=32;const s=t._;!s&&!Ss(t)?t._ctx=w:s===3&&w&&(w.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else d(t)?(t={default:t,_ctx:w},n=32):(t=String(t),s&64?(n=16,t=[z(t)]):n=8);e.children=t,e.shapeFlag|=n}function U3(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const t in n)if(t==="class")e.class!==n.class&&(e.class=j([e.class,n.class]));else if(t==="style")e.style=pe([e.style,n.style]);else if(ft(t)){const s=e[t],o=n[t];o&&s!==o&&!(l(s)&&s.includes(o))&&(e[t]=s?[].concat(s,o):o)}else t!==""&&(e[t]=n[t])}return e}function q(e,t,n,s=null){X(e,t,7,[n,s])}Qo=$o(),Zo=0;function W3(e,t,n){const o=e.type,i=(t?t.appContext:e.appContext)||Qo,s={uid:Zo++,vnode:e,type:o,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ca(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zo(o,i),emitsOptions:uo(o,i),emit:null,emitted:null,propsDefaults:m,inheritAttrs:o.inheritAttrs,ctx:m,data:m,props:m,attrs:m,slots:m,refs:m,setupState:m,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Fh.bind(null,s),e.ce&&e.ce(s),s}C=null,Le=()=>C||w;{const e=Xe(),t=(t,n)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(n),e=>{s.length>1?s.forEach(t=>t(e)):s[0](e)}};Ht=t("__VUE_INSTANCE_SETTERS__",e=>C=e),rs=t("__VUE_SSR_SETTERS__",e=>He=e)}Se=e=>{const t=C;return Ht(e),e.scope.on(),()=>{e.scope.off(),Ht(t)}},ss=()=>{C&&C.scope.off(),Ht(null)};function ai(e){return e.vnode.shapeFlag&4}He=!1;function H3(e,t=!1,n=!1){t&&rs(t);const{props:o,children:i}=e.vnode,s=ai(e);oh(e,o,s,t),Eo(e,i,n||t);const a=s?P3(e,t):0[0];return t&&rs(!1),a}function P3(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ii);const{setup:n}=s;if(n){J();const i=e.setupContext=n.length>1?R3(e):null,a=Se(e),s=mt(n,e,0,[e.props,i]),o=qs(s);if(ee(),a(),(o||e.sp)&&!ye(e)&&Gi(e),o){if(s.then(ss,ss),t)return s.then(t=>{di(e,t)}).catch(t=>{Gt(t,e,0)});e.asyncDep=s}else di(e,s)}else ui(e)}function di(e,t){d(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:p(t)&&(e.setupState=fl(t)),ui(e)}function ui(e){const s=e.type;e.render||(e.render=s.render||B);{const t=Se(e);J();try{I3(e)}finally{ee(),t()}}}hi={get(e,t){return E(e,"get",""),e[t]}};function R3(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,hi),slots:e.slots,emit:e.emit,expose:t}}function Mt(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(fl(E2(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Be)return Be[n](e)},has(e,t){return t in e||t in Be}})):e.proxy}function L3(e,t=!0){return d(e)?e.displayName||e.name:e.name||t&&e.__name}function N3(e){return d(e)&&"__vccOpts"in e}_=(e,t)=>e3(e,t,He);function D3(e,t,n){const s=arguments.length;return s===2?p(t)&&!l(t)?We(t)?a(e,null,[t]):a(e,t):a(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&We(n)&&(n=[n]),a(e,t,n))}if(ji="3.5.18",Yn=typeof window<"u"&&window.trustedTypes,Yn)try{Gn=Yn.createPolicy("vue",{createHTML:e=>e})}catch{}Kn=Gn?e=>Gn.createHTML(e):e=>e,Oi="http://www.w3.org/2000/svg",xi="http://www.w3.org/1998/Math/MathML",K=typeof document<"u"?document:null,$n=K&&K.createElement("template"),ki={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?K.createElementNS(Oi,e):t==="mathml"?K.createElementNS(xi,e):n?K.createElement(e,{is:n}):K.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>K.createTextNode(e),createComment:e=>K.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>K.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const a=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),o!==i&&!!(o=o.nextSibling););else{$n.innerHTML=Kn(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const o=$n.content;if(s==="svg"||s==="mathml"){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ai=Symbol("_vtc");function F3(e,t,n){const s=e[Ai];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}nt=Symbol("_vod"),Bn=Symbol("_vsh"),L={beforeMount(e,{value:t},{transition:n}){e[nt]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):at(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),at(e,!0),s.enter(e)):s.leave(e,()=>{at(e,!1)}):at(e,t))},beforeUnmount(e,{value:t}){at(e,t)}};function at(e,t){e.style.display=t?e[nt]:"none",e[Bn]=!t}Di=Symbol(""),Ni=/(^|;)\s*display\s*:/;function M3(e,t,n){const s=e.style,i=y(n);let o=!1;if(n&&!i){if(t)if(y(t))for(const e of t.split(";")){const o=e.slice(0,e.indexOf(":")).trim();n[o]==null&&jt(s,o,"")}else for(const e in t)n[e]==null&&jt(s,e,"");for(const e in n)e==="display"&&(o=!0),jt(s,e,n[e])}else if(i){if(t!==n){const e=s[Di];e&&(n+=";"+e),s.cssText=n,o=Ni.test(n)}}else t&&e.removeAttribute("style");nt in e&&(e[nt]=o?s.display:"",e[Bn]&&(s.display="none"))}Rn=/\s*!important$/;function jt(e,t,n){if(l(n))n.forEach(n=>jt(e,t,n));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=A3(e,t);Rn.test(n)?e.setProperty(ie(s),n.replace(Rn,""),"important"):e[s]=n}}Tn=["Webkit","Moz","ms"],gt={};function A3(e,t){const s=gt[t];if(s)return s;let n=R(t);if(n!=="filter"&&n in e)return gt[t]=n;n=lt(n);for(let s=0;s<Tn.length;s++){const o=Tn[s]+n;if(o in e)return gt[t]=o}return t}Mn="http://www.w3.org/1999/xlink";function $i(e,t,n,s,o,i=aa(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Mn,t.slice(6,t.length)):e.setAttributeNS(Mn,t,n):n==null||i&&!ja(n)?e.removeAttribute(t):e.setAttribute(t,i?"":W(n)?String(n):n)}function Wi(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Kn(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?e.getAttribute("value")||"":e.value,s=n==null?e.type==="checkbox"?"on":"":String(n);(o!==s||!("_value"in e))&&(e.value=s),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=ja(n):n==null&&s==="string"?(n="",a=!0):s==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(o||t)}function Me(e,t,n,s){e.addEventListener(t,n,s)}function C3(e,t,n,s){e.removeEventListener(t,n,s)}Cn=Symbol("_vei");function O3(e,t,n,s,o=null){const a=e[Cn]||(e[Cn]={}),i=a[t];if(s&&i)i.value=s;else{const[n,r]=w3(t);if(s){const i=a[t]=_3(s,o);Me(e,n,i,r)}else i&&(C3(e,n,i,r),a[t]=0[0])}}xn=/(?:Once|Passive|Capture)$/;function w3(e){let t;if(xn.test(e)){t={};let n;for(;n=e.match(xn);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ie(e.slice(2)),t]}St=0,Zi=Promise.resolve(),Ji=()=>St||(Zi.then(()=>St=0),St=Date.now());function _3(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();X(y3(e,n.value),t,5,[e])};return n.value=e,n.attached=Ji(),n}function y3(e,t){if(l(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}yn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,sa=(e,t,n,s,o,i)=>{const a=o==="svg";t==="class"?F3(e,s,a):t==="style"?M3(e,n,s):ft(t)?Qt(t)||O3(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):b3(e,t,s,a))?(Wi(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&$i(e,t,s,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!y(s))?Wi(e,R(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),$i(e,t,s,a))};function b3(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&yn(t)&&d(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const t=e.tagName;if(t==="IMG"||t==="VIDEO"||t==="CANVAS"||t==="SOURCE")return!1}return!(yn(t)&&y(n))&&t in e}mn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return l(t)?e=>st(t,e):t};function v3(e){e.target.composing=!0}function ra(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}Xt=Symbol("_assign"),tt={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Xt]=mn(o);const i=s||o.props&&o.props.type==="number";Me(e,t?"change":"input",t=>{if(t.target.composing)return;let s=e.value;n&&(s=s.trim()),i&&(s=Ct(s)),e[Xt](s)}),n&&Me(e,"change",()=>{e.value=e.value.trim()}),t||(Me(e,"compositionstart",v3),Me(e,"compositionend",ra),Me(e,"change",ra))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},a){if(e[Xt]=mn(a),e.composing)return;const c=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ct(e.value):e.value,r=t??"";c!==r&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===r)||(e.value=r))}},da=["ctrl","shift","alt","meta"],ua={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>da.some(n=>e[`${n}Key`]&&!t.includes(n))},fe=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(n,...s)=>{for(let e=0;e<t.length;e++){const s=ua[t[e]];if(s&&s(n,t))return}return e(n,...s)})},ma={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},de=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=n=>{if(!("key"in n))return;const s=ie(n.key);if(t.some(e=>e===s||ma[e]===s))return e(n)})},pa=S({patchProp:sa},ki);function p3(){return ga||(ga=lh(pa))}ba=(...e)=>{const t=p3().createApp(...e),{mount:n}=t;return t.mount=e=>{const s=h3(e);if(!s)return;const o=t._component;!d(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,m3(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t};function m3(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function h3(e){return y(e)?document.querySelector(e):e}i=(e,t)=>{const n=e.__vccOpts||e;for(const[e,s]of t)n[e]=s;return n},wa={},Oa={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function d3(s,o){return e(),n("svg",Oa,o[0]||(o[0]=[t("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},null,-1)]))}un=i(wa,[["render",d3]]),Ea={blobBaseUrl:"https://github.com/tify-iiif-viewer/tify/blob/v0.34.5",bugsUrl:"https://github.com/tify-iiif-viewer/tify/issues",license:"AGPL-3.0",repositoryUrl:"https://github.com/tify-iiif-viewer/tify",version:"0.34.5"},ka={computed:{env:()=>Ea}},Aa={class:"tify-help",tabindex:"0"},Sa={class:"tify-sr-only"},Ma=["innerHTML"],Fa={class:"tify-list"},Ta=["href"],za=["href"],Da=["href"],Na=["href"],La={class:"tify-help-footer"},Ra=["innerHTML"];function c3(o,i,a,r,c,l){return e(),n("section",Aa,[t("h2",Sa,s(o.$translate("Help")),1),t("h3",null,s(o.$translate("About TIFY")),1),t("p",{innerHTML:o.$translate("$info")},null,8,Ma),t("ul",Fa,[t("li",null,[t("a",{href:l.env.repositoryUrl},s(o.$translate("Source code")),9,Ta)]),t("li",null,[t("a",{href:`${l.env.blobBaseUrl}/doc`},s(o.$translate("Documentation")),9,za)]),t("li",null,[t("a",{href:`${l.env.blobBaseUrl}/CONTRIBUTORS.md`},s(o.$translate("Contributors")),9,Da)]),t("li",null,[t("a",{href:l.env.bugsUrl},s(o.$translate("Report a bug")),9,Na)])]),t("footer",La,[t("p",{innerHTML:o.$translate("$copyright")},null,8,Ra),t("p",null,[z(s(o.$translate("Version"))+" ",1),t("b",null,s(l.env.version),1)])])])}Ha=i(ka,[["render",c3]]),Ia={},Ba={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function r3(s,o){return e(),n("svg",Ba,o[0]||(o[0]=[t("path",{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"},null,-1)]))}Ut=i(Ia,[["render",r3]]),Wa={},Ua={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function i3(s,o){return e(),n("svg",Ua,o[0]||(o[0]=[t("path",{d:"M19,13H5V11H19V13Z"},null,-1)]))}Wt=i(Wa,[["render",i3]]),Ya={name:"CollectionNode",props:{item:{type:Object,default:()=>{}}},data(){return{children:null,expanded:!1}},computed:{id(){return this.$getId(At())}},methods:{toggleChildren(){if(this.expanded){this.expanded=!1;return}if(this.children){this.expanded=!0;return}if(this.item.children){this.children=this.item.children,this.expanded=!0;return}this.$store.fetchJson(this.item["@id"]||this.item.id).then(e=>{this.children=e.collections||e.items||e.manifests||[],this.expanded=!0},e=>{const t=e.response&&(e.response.statusText||e.response.data)||e.message;this.$store.addError(`Error loading IIIF manifest: ${t}`),this.children=!1})}}},Ga=["aria-controls","aria-expanded","aria-label"],Xa=["id"],Qa=["id"];function Ah(t,o,i,a,l,d){const u=Wt,h=Ut,m=wi("CollectionNode",!0);return e(),n("li",{class:j(["tify-collection-item",{"-current":t.$store.manifest&&t.$store.manifest.id===(i.item["@id"]||i.item.id)}])},[i.item.type==="Collection"?(e(),n("button",{key:0,type:"button",class:"tify-collection-link -has-children","aria-controls":d.id,"aria-expanded":l.expanded,"aria-label":t.$translate(l.expanded?"Collapse":"Expand"),onClick:o[0]||(o[0]=e=>d.toggleChildren())},[l.expanded?(e(),r(u,{key:0})):(e(),r(h,{key:1})),z(" "+s(t.$store.localize(i.item.label)),1)],8,Ga)):(e(),n("a",{key:1,href:"javascript:;",class:"tify-collection-link",onClick:o[1]||(o[1]=e=>t.$store.loadManifest(i.item["@id"]||i.item.id,{expectedType:i.item.type,reset:!0}))},s(t.$store.localize(i.item.label)),1)),l.children!==!1?A((e(),n("ol",{key:2,id:d.id,class:"tify-collection-list"},[(e(!0),n(c,null,g(l.children,t=>(e(),r(m,{key:t.id,item:t},null,8,["item"]))),128))],8,Xa)),[[L,l.expanded]]):A((e(),n("p",{key:3,id:d.id,class:"tify-collection-error"},s(t.$translate("Could not load child manifest")),9,Qa)),[[L,l.expanded]])],2)}Ja=i(Ya,[["render",Ah]]),er={data(){return{filter:""}},computed:{filteredItems(){const e=this.filter.trim().toLowerCase().split(/\s+/);return this.$store.collection.items.filter(t=>{const n=this.$store.localize(t.label).toLowerCase();return e.every(e=>n.includes(e))})}}},tr={class:"tify-collection",tabindex:"0"},nr={class:"tify-sr-only"},sr={key:0,class:"tify-collection-controls"},or=["aria-label","placeholder"],ir=["disabled"],ar={key:1,class:"tify-collection-list"},rr={key:2,class:"tify-collection-no-results"};function _0(i,a,l,d,u,h){const m=Ja;return e(),n("section",tr,[t("h2",nr,s(i.$translate("Collection")),1),i.$store.collection.items.length>5?(e(),n("p",sr,[A(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.filter=e),"aria-label":i.$translate("Filter collection"),class:"tify-collection-filter",placeholder:i.$translate("Filter collection"),type:"text",onKeydown:[a[1]||(a[1]=de(fe(e=>u.filter?u.filter="":e.target.blur(),["prevent"]),["esc"])),a[2]||(a[2]=fe(()=>{},["stop"]))]},null,40,or),[[tt,u.filter]]),t("button",{type:"button",class:"tify-collection-reset",disabled:!u.filter,onClick:a[3]||(a[3]=e=>u.filter="")},s(i.$translate("Reset")),9,ir)])):o("",!0),h.filteredItems.length?(e(),n("ol",ar,[(e(!0),n(c,null,g(h.filteredItems,t=>(e(),r(m,{key:t.id,item:t},null,8,["item"]))),128))])):(e(),n("p",rr,s(i.$translate("No results")),1))])}lr=i(er,[["render",_0]]);function dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}It={exports:{}},hr=It.exports;function J2(){return mr||(mr=1,function(e){(function(t){if(typeof n!="function"){var n=function(e){return e};n.nonNative=!0}const s=n("plaintext"),i=n("html"),a=n("comment"),l=/<(\w*)>/g,d=/<\/?([^\s/>]+)/;function o(e,t,n){e||="",t||=[],n||="";let s=r(t,n);return c(e,s)}function u(e,t){e||=[],t||="";let n=r(e,t);return function(e){return c(e||"",n)}}o.init_streaming_mode=u;function r(e,t){return e=h(e),{allowable_tags:e,tag_replacement:t,state:s,tag_buffer:"",depth:0,in_quote_char:""}}function c(e,t){if(typeof e!="string")throw new TypeError("'html' parameter must be a string");let d=t.allowable_tags,u=t.tag_replacement,o=t.state,n=t.tag_buffer,l=t.depth,r=t.in_quote_char,c="";for(let h=0,f=e.length;h<f;h++){let t=e[h];if(o===s)switch(t){case"<":o=i,n+=t;break;default:c+=t;break}else if(o===i)switch(t){case"<":if(r)break;l++;break;case">":if(r)break;if(l){l--;break}r="",o=s,n+=">",d.has(m(n))?c+=n:c+=u,n="";break;case'"':case"'":t===r?r="":r||=t,n+=t;break;case"-":n==="<!-"&&(o=a),n+=t;break;case" ":case`
`:if(n==="<"){o=s,c+="< ",n="";break}n+=t;break;default:n+=t;break}else if(o===a)switch(t){case">":n.slice(-2)=="--"&&(o=s),n="";break;default:n+=t;break}}return t.state=o,t.tag_buffer=n,t.depth=l,t.in_quote_char=r,c}function h(e){let t=new Set;if(typeof e=="string"){let n;for(;n=l.exec(e);)t.add(n[1])}else!n.nonNative&&typeof e[n.iterator]=="function"?t=new Set(e):typeof e.forEach=="function"&&e.forEach(t.add,t);return t}function m(e){let t=d.exec(e);return t?t[1].toLowerCase():null}e.exports?e.exports=o:t.striptags=o})(hr)}(It)),It.exports}pr=J2(),hn=dr(pr),vr={props:{number:{type:Number,required:!0},wrap:{type:Boolean,default:!1}},computed:{classes(){return{L:"tify-page-name-label",P:"tify-page-name-number"}},label(){return hn(this.$store.localize(this.$store.manifest.items[this.number-1].label))||this.$translate("$n/a")},html(){return`<span>${this.$store.options.pageLabelFormat}</span>`.replace("P",`${this.number}`).replace("L",`</span>${this.label}<span>`).replace("<span></span>","")}}},br=["innerHTML"];function Z2(t,s,o,i,a,r){return e(),n("span",{class:j(["tify-page-name",{"-wrap":o.wrap}]),innerHTML:r.html},null,10,br)}je=i(vr,[["render",Z2]]),_r={},wr={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function X2(s,o){return e(),n("svg",wr,o[0]||(o[0]=[t("path",{d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"},null,-1)]))}fn=i(_r,[["render",X2]]),Cr={},Er={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function Y2(s,o){return e(),n("svg",Er,o[0]||(o[0]=[t("path",{d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},null,-1)]))}gn=i(Cr,[["render",Y2]]);function Nt(e){const n=["a","b","br","i","img","p","span"],s={a:["href"],img:["alt","src"]};let t=hn(e,n);const o=/<(\w+)((\s+.+?(\s*=\s*(?:".*?"|'.*?'|.*?|[\^'">\s]+))?)+\s*|\s*)>/g;return t=t.replace(o,(e,t,n)=>{if(!n)return`<${t}>`;const i=/(?:([^\s"'=]+)(?:=(?:"(.*?)"|'(.*?)'|([^\s>]+)))?)/g,o=[];return n.replace(i,(e,n)=>{var i;(i=s[t])!=null&&i.includes(n)&&o.push(e)}),o.length>0?`<${t} ${o.join(" ")}>`:`<${t}>`}),t}function Mr(e,t){if(!(e instanceof Array)||!t||new Set(e).size!==e.length)return!1;for(let n=0,s=e.length;n<s;n+=1)if(!Number.isInteger(e[n])||n>0&&e[n]>0&&e[n]<=e[n-1]||e[n]<-1||e[n]>t)return!1;return!0}function vn(e,t=["https:","http:"]){let n;try{n=new URL(e)}catch{return!1}return t.includes(n.protocol)}Tr={props:{metadata:{type:Array,default:()=>[]}},data(){return{infoItems:[]}},watch:{metadata(){this.init()},"$store.options.view":{handler(e){e==="info"&&this.init()},immediate:!0}},methods:{init(){this.$nextTick(()=>{var e;(e=this.$refs.contents)==null||e.forEach((e,t)=>{const n=e.offsetHeight;this.infoItems[t]={collapsed:!0,exceedsHeight:!0},this.$nextTick(()=>{const o=e.offsetHeight,s=n>=o;this.infoItems[t]={collapsed:s,exceedsHeight:s}})})})},filterHtml:Nt,isValidUrl:vn}},zr={class:"tify-info-metadata"},Dr={key:0},Nr={class:"tify-info-value"},Lr=["href"],Rr=["innerHTML"],Pr=["onClick"];function K2(i,r,l,d,u,h){const m=gn,f=fn;return e(),n("div",zr,[(e(!0),n(c,null,g(l.metadata,(r,l)=>(e(),n("div",{key:l},[r.label?(e(),n("h4",Dr,s(i.$store.localize(r.label)),1)):o("",!0),t("div",{ref_for:!0,ref:"contents",class:j(["tify-info-content",{"-collapsed":u.infoItems[l]&&u.infoItems[l].collapsed}])},[t("div",Nr,[h.isValidUrl(r.value)?(e(),n("p",{key:`url-${l}`},[t("a",{href:r.value},s(r.value),9,Lr)])):(e(),n("div",{key:`html-${l}`,innerHTML:h.filterHtml(i.$store.localize(r.value))||i.$translate("$n/a")},null,8,Rr))]),u.infoItems[l]&&u.infoItems[l].exceedsHeight?(e(),n("button",{key:0,type:"button",class:"tify-info-toggle",onClick:e=>u.infoItems[l].collapsed=!u.infoItems[l].collapsed},[u.infoItems[l].collapsed?(e(),n(c,{key:0},[a(m),z(" "+s(i.$translate("Expand")),1)],64)):(e(),n(c,{key:1},[a(f),z(" "+s(i.$translate("Collapse")),1)],64))],8,Pr)):o("",!0)],2)]))),128))])}Ir=i(Tr,[["render",K2]]);function U2(e,t){try{return new Date(e).toLocaleDateString(t,{month:"long",day:"numeric",year:"numeric"})}catch{return e}}Vr={data(){return{collectionDataShown:!1}},computed:{hasProvider(){var e;return(e=this.manifestOrCollection.provider)==null?0[0]:e.some(e=>{var t;return this.$store.localize(e.label)||((t=e.homepage)==null?0[0]:t.length)})},homepages(){return[].concat(this.manifestOrCollection.homepage||[])},logos(){var t;let e=[].concat(this.manifestOrCollection.logo||[]);return(t=this.manifestOrCollection.provider)==null||t.forEach(t=>{t.logo&&(e=e.concat(t.logo))}),e=[...new Map(e.map(e=>[e.id,e])).values()],e=e.map(e=>{var t,n,s,o;return{id:e.id,link:((n=(t=e.service)==null?0[0]:t[0])==null?0[0]:n.id)||((o=(s=e.service)==null?0[0]:s[0])==null?0[0]:o["@id"])}}),e},manifestOrCollection(){return this.collectionDataShown?this.$store.collection:this.$store.manifest||this.$store.collection||{}},metadataItems(){return this.$store.manifest.items.map((e,t)=>({metadata:e.metadata,number:t+1})).filter(({metadata:e,number:t})=>e?.length&&this.$store.options.pages.includes(t))},pages(){return this.$store.options.pages.filter(e=>e>0).map(e=>{var t,n;const s={page:e,media:[]},o=(n=(t=this.$store.manifest.items[e-1].items)==null?0[0]:t[0])==null?0[0]:n.items;return o==null||o.forEach(e=>{var t;const n=((t=e.body)==null?0[0]:t.items)||[e.body];s.media.push(...n.filter(e=>e.label).map(e=>({label:e.label})))}),s})}},methods:{filterHtml:Nt,formatDate:U2,isValidUrl:vn}},$r={class:"tify-info",tabindex:"0"},Wr={class:"tify-sr-only"},Ur={key:0,class:"tify-info-header"},Kr=["aria-pressed"],qr=["aria-pressed"],Yr={key:1,class:"tify-info-section -title"},Gr={key:2,class:"tify-info-section -time"},Xr={key:3,class:"tify-info-section -place"},Qr={key:4,class:"tify-info-section -metadata"},Zr={key:5,class:"tify-info-section -description"},Jr={key:6,class:"tify-info-section -metadata -structure"},ec={key:0,class:"tify-info-structure"},tc={key:7,class:"tify-info-section -pages"},nc={class:"tify-list -unstyled"},sc={key:0,class:"tify-info-image-labels"},oc={key:8,class:"tify-info-section -related"},ic={class:"tify-list"},ac=["href"],rc=["href"],cc={key:9,class:"tify-info-section -attribution"},lc=["innerHTML"],dc={key:10,class:"tify-info-section -license"},uc=["href"],hc={key:11,class:"tify-info-section -provider"},mc={key:0},fc={key:1,class:"tify-list"},pc=["href"],gc={key:12,class:"tify-info-section -logo"},vc=["href"],bc=["src","alt"],jc=["src","alt"];function W2(i,l,d,u,h,m){var p,v,b,j;const f=Ir,y=je;return e(),n("section",$r,[t("h2",Wr,s(i.$translate("Info")),1),i.$store.collection&&i.$store.manifest?(e(),n("div",Ur,[t("button",{type:"button",class:"tify-info-button","aria-pressed":!h.collectionDataShown,onClick:l[0]||(l[0]=e=>h.collectionDataShown=!1)},s(i.$translate("Document")),9,Kr),t("button",{type:"button",class:"tify-info-button","aria-pressed":h.collectionDataShown,onClick:l[1]||(l[1]=e=>h.collectionDataShown=!0)},s(i.$translate("Collection")),9,qr)])):o("",!0),m.manifestOrCollection.label?(e(),n("div",Yr,[t("h3",null,s(i.$translate("Title")),1),t("p",null,s(i.$store.localize(m.manifestOrCollection.label)),1)])):o("",!0),m.manifestOrCollection.navDate?(e(),n("div",Gr,[t("h3",null,s(i.$translate("Date")),1),t("p",null,s(m.formatDate(m.manifestOrCollection.navDate,i.$store.options.language)),1)])):o("",!0),m.manifestOrCollection.navPlace?(e(),n("div",Xr,[t("h3",null,s(i.$translate("Place")),1),(e(!0),n(c,null,g(m.manifestOrCollection.navPlace.features,t=>(e(),n("p",{key:t.id},s(i.$store.localize(t.properties.label)),1))),128))])):o("",!0),m.manifestOrCollection.metadata&&m.manifestOrCollection.metadata.length?(e(),n("div",Qr,[t("h3",null,s(i.$translate("Metadata")),1),i.$store.options.view==="info"?(e(),r(f,{key:0,metadata:m.manifestOrCollection.metadata},null,8,["metadata"])):o("",!0)])):o("",!0),m.manifestOrCollection.summary?(e(),n("div",Zr,[t("h3",null,s(i.$translate("Description")),1),i.$store.options.view==="info"?(e(),r(f,{key:0,metadata:[{value:m.manifestOrCollection.summary}]},null,8,["metadata"])):o("",!0)])):o("",!0),m.manifestOrCollection.structures&&((p=i.$store.currentStructure)!=null&&p.label||(v=i.$store.currentStructure)!=null&&v.metadata)?(e(),n("div",Jr,[t("h3",null,s(i.$translate("Current Section")),1),(b=i.$store.currentStructure)!=null&&b.label?(e(),n("p",ec,s(i.$store.localize(i.$store.currentStructure.label)),1)):o("",!0),i.$store.options.view==="info"&&(j=i.$store.currentStructure)!=null&&j.metadata?(e(),r(f,{key:1,class:"tify-info-section -metadata",metadata:i.$store.currentStructure.metadata},null,8,["metadata"])):o("",!0)])):o("",!0),m.manifestOrCollection.type==="Manifest"?(e(),n("div",tc,[t("h3",null,s(i.$translate(m.pages.length>1?"Current Pages":"Current Page")),1),t("ol",nc,[(e(!0),n(c,null,g(m.pages,t=>(e(),n("li",{key:t},[a(y,{number:t.page,wrap:""},null,8,["number"]),t.media.length?(e(),n("ul",sc,[(e(!0),n(c,null,g(t.media,(t,o)=>(e(),n("li",{key:o},s(i.$store.localize(t.label)),1))),128))])):o("",!0),i.$store.manifest.items[t.page-1].metadata?(e(),r(f,{key:1,class:"tify-info-section -metadata",metadata:i.$store.manifest.items[t.page-1].metadata},null,8,["metadata"])):o("",!0)]))),128))])])):o("",!0),m.homepages.length?(e(),n("div",oc,[t("h3",null,s(i.$translate("Related Resources")),1),t("ul",ic,[(e(!0),n(c,null,g(m.homepages,(t,o)=>(e(),n("li",{key:o},[typeof t=="string"?(e(),n("a",{key:0,href:t},s(t),9,ac)):(e(),n("a",{key:1,href:t.id},s(t.label?i.$store.localize(t.label):t.id),9,rc))]))),128))])])):o("",!0),m.manifestOrCollection.requiredStatement?(e(),n("div",cc,[t("h3",null,s(i.$store.localize(m.manifestOrCollection.requiredStatement.label)),1),t("div",{innerHTML:m.filterHtml(i.$store.localize(m.manifestOrCollection.requiredStatement.value))},null,8,lc)])):o("",!0),m.manifestOrCollection.rights?(e(),n("div",dc,[t("h3",null,s(i.$translate("License")),1),t("p",null,[t("a",{href:m.manifestOrCollection.rights},s(m.manifestOrCollection.rights),9,uc)])])):o("",!0),m.hasProvider?(e(),n("div",hc,[t("h3",null,s(i.$translate("Provided by")),1),(e(!0),n(c,null,g(m.manifestOrCollection.provider,a=>{var r;return e(),n("div",{key:a.id},[a.label?(e(),n("p",mc,s(i.$store.localize(a.label)),1)):o("",!0),(r=a.homepage)!=null&&r.length?(e(),n("ul",fc,[(e(!0),n(c,null,g(a.homepage,o=>(e(),n("li",{key:o.id},[t("a",{href:o.id},s(o.label?i.$store.localize(o.label):o.id),9,pc)]))),128))])):o("",!0)])}),128))])):o("",!0),m.logos.length?(e(),n("div",gc,[(e(!0),n(c,null,g(m.logos,(s,o)=>(e(),n("p",{key:o},[s.link?(e(),n("a",{key:0,href:s.link},[t("img",{class:"tify-info-logo",src:s.id,alt:i.$translate("Logo")},null,8,bc)],8,vc)):(e(),n("img",{key:1,class:"tify-info-logo",src:s.id,alt:i.$translate("Logo")},null,8,jc))]))),128))])):o("",!0)])}to=i(Vr,[["render",W2]]),wc={name:"TocList",props:{level:{type:Number,default:0},structures:{type:Array,default:()=>[]},purpose:{type:String,default:""}},data(){var e;return{expandedStructures:this.level===0&&this.structures.length===1&&(e=this.structures[0].items)!=null&&e.some(e=>e.items)?[!0]:[]}},computed:{id(){return this.$getId(At())}},methods:{getFirstPage(e){if(e.items)return this.getFirstPage(e.items[0]);const t=this.$store.manifest.items.findIndex(t=>t.id===e.id);return t<0?1:t+1},getFirstPageLabel(e){var t;const n=this.getFirstPage(e);return this.$store.localize((t=this.$store.manifest.items[n-1])==null?0[0]:t.label)},getLastPage(e){if(e.items)return this.getLastPage(e.items.at(-1));const t=this.$store.manifest.items.findLastIndex(t=>t.id===e.id);return t<0?this.$store.manifest.items.length:t+1},isCurrentPageInStructure(e){if(this.$store.manifest.items.filter((e,t)=>this.$store.options.pages.includes(t+1)).map(e=>e.id).some(t=>{var n;return(n=e.items)==null?0[0]:n.some(e=>e.id===t)}))return!0;const t=e.firstPage||this.getFirstPage(e),n=e.lastPage||this.getLastPage(e);return this.$store.options.pages.some(e=>e>=t&&e<=n)},setPage(e){this.$store.setPage(e),this.$store.isContainerWidthAtLeast("medium")||this.$store.updateOptions({view:null})},toggleAllChildren(e=null){if(this.$refs.children){for(let t=this.structures.length-1;t>=0;t-=1)this.toggleChildren(t,e);this.$refs.children.forEach(t=>{t.toggleAllChildren(e)})}},toggleChildren(e,t=null){var n;(n=this.structures[e].items)!=null&&n.some(e=>e.items)&&(this.expandedStructures[e]=t!==null?t:!this.expandedStructures[e])}}},Oc={class:"tify-toc-list"},xc=["aria-controls","aria-expanded","aria-label","title","onClick"],Cc=["href"],Ec=["onClick"],kc={class:"tify-toc-label"},Ac={class:"tify-toc-page"},Sc=["onClick"],Mc={class:"tify-toc-label"};function B2(i,a,l,d,u,h){const m=Wt,f=Ut,p=wi("TocList",!0);return e(),n("ul",Oc,[(e(!0),n(c,null,g(l.structures,(a,c)=>{var d,g;return e(),n("li",{key:c,class:j(["tify-toc-structure",{"-current":h.isCurrentPageInStructure(a),"-expanded":u.expandedStructures[c]}])},[(d=a.items)!=null&&d.some(e=>e.items)?(e(),n("button",{key:0,type:"button",class:"tify-toc-toggle","aria-controls":`${h.id}-${c}`,"aria-expanded":!!u.expandedStructures[c],"aria-label":i.$translate(u.expandedStructures[c]?"Collapse":"Expand"),title:i.$translate(u.expandedStructures[c]?"Collapse":"Expand"),onClick:e=>h.toggleChildren(c)},[u.expandedStructures[c]?(e(),r(m,{key:0})):(e(),r(f,{key:1}))],8,xc)):o("",!0),l.purpose==="pdf"&&a.pageCount?(e(),n("a",{key:1,class:"tify-toc-link",href:a.rendering[0].id,download:""},s(i.$store.localize(a.label))+" ("+s(a.pageCount)+"\xA0"+s(i.$translate(a.pageCount===1?"page":"pages"))+") ",9,Cc)):a.label&&i.$store.localize(a.label)!==h.getFirstPageLabel(a)?(e(),n("a",{key:2,class:"tify-toc-link -dots",href:"javascript:;",onClick:e=>h.setPage(a.firstPage||h.getFirstPage(a))},[t("span",kc,s(i.$store.localize(a.label)),1),t("span",Ac,s(h.getFirstPageLabel(a)||"—"),1)],8,Ec)):(e(),n("a",{key:3,class:"tify-toc-link",href:"javascript:;",onClick:e=>h.setPage(a.firstPage||h.getFirstPage(a))},[t("span",Mc,s(i.$store.localize(a.label,"string")||h.getFirstPageLabel(a)||i.$translate("$n/a")),1)],8,Sc)),(g=a.items)!=null&&g.some(e=>e.items)?A((e(),r(p,{key:4,id:`${h.id}-${c}`,ref_for:!0,ref:"children",level:l.level+1,purpose:l.purpose,structures:a.items},null,8,["id","level","purpose","structures"])),[[L,u.expandedStructures[c]]]):o("",!0)],2)}),128))])}bn=i(wc,[["render",B2]]),zc={},Dc={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function I2(s,o){return e(),n("svg",Dc,o[0]||(o[0]=[t("path",{d:"M18,9H16V7H18M18,13H16V11H18M18,17H16V15H18M8,9H6V7H8M8,13H6V11H8M8,17H6V15H8M18,3V5H16V3H8V5H6V3H4V21H6V19H8V21H16V19H18V21H20V3H18Z"},null,-1)]))}Lc=i(zc,[["render",I2]]),Rc={},Pc={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function H2(s,o){return e(),n("svg",Pc,o[0]||(o[0]=[t("path",{d:"M22 12L20 13L19 14L18 13L17 16L16 13L15 21L14 13L13 15L12 13L11 17L10 13L9 22L8 13L7 19L6 13L5 14L4 13L2 12L4 11L5 10L6 11L7 5L8 11L9 2L10 11L11 7L12 11L13 9L14 11L15 3L16 11L17 8L18 11L19 10L20 11L22 12Z"},null,-1)]))}Ic=i(Rc,[["render",H2]]),Bc={data(){return{otherItems:[],perElementPdfLinksVisible:!1}},computed:{hasElementPdfLinks(){var e,t;return!!((t=(e=this.$store.manifest.structures)==null?0[0]:e[0])!=null&&t.rendering)&&this.$store.manifest.structures[0].rendering.some(e=>e.format&&e.format==="application/pdf")},media(){const e=[];return this.$store.options.pages.filter(e=>e>0).forEach(t=>{var n,s;const o=(s=(n=this.$store.manifest.items[t-1].items)==null?0[0]:n[0])==null?0[0]:s.items;o==null||o.forEach((n,s)=>{var o;(((o=n.body)==null?0[0]:o.items)||[n.body]).forEach((n,o)=>{var a;const i=(a=n.format)==null?0[0]:a.split("/")[1],r={fileName:n.id.split("/").at(-1),format:i?.toUpperCase(),label:n.label,type:n.type,url:n.id,page:t,itemIndex:s,layerIndex:o};if(n.service){const e=[].concat(n.service)[0],s=["ImageService2","ImageService3"].includes(e.type||e["@type"])?"default":"native",o=e.type==="ImageService3"?"max":"full",t=e.id||e["@id"],a=t.at(-1)==="/"?"":"/";r.url=`${t}${a}full/${o}/0/${s}.${i==="jpeg"?"jpg":i}`}e.push(r)})})}),e},pages(){return this.$store.options.pages.filter(e=>e>0)},renderings(){return[].concat(this.$store.manifest.rendering||[])}}},Vc={class:"tify-export",tabindex:"0"},$c={class:"tify-sr-only"},Wc={key:0,class:"tify-export-section -links"},Uc={class:"tify-export-list"},Kc=["href"],qc={class:"tify-export-link-media"},Yc=["src"],Gc={class:"tify-export-link-text"},Xc={key:0,class:"tify-export-link-hint"},Qc={class:"tify-export-link-format"},Zc={key:1,class:"tify-export-section -renderings"},Jc={class:"tify-list"},el=["href"],tl={key:0,class:"tify-export-container"},nl=["aria-controls","aria-expanded","aria-label"],sl=["id"],ol={class:"tify-export-section -iiif"},il={class:"tify-list"},al={key:0},rl=["href"],cl=["href"],ll={key:2,class:"tify-export-section -other"},dl={class:"tify-list"},ul=["href"];function P2(i,l,d,u,h,m){var f,p,v;const b=Ic,y=Lc,_=je,w=un,O=bn;return e(),n("section",Vc,[t("h2",$c,s(i.$translate("Export [noun]")),1),i.$store.manifest?(e(),n("div",Wc,[t("h3",null,s(i.$translate("Media Files")),1),t("ul",Uc,[(e(!0),n(c,null,g(m.media,l=>(e(),n("li",{key:l.url},[t("a",{href:l.url,class:"tify-export-link",download:"",rel:"noopener noreferrer",target:"_blank"},[t("span",qc,[i.$store.getThumbnailUrl(l.page,96,l.itemIndex,l.layerIndex)?(e(),n("img",{key:0,src:i.$store.getThumbnailUrl(l.page,96,l.itemIndex,l.layerIndex),alt:""},null,8,Yc)):l.type==="Sound"?(e(),r(b,{key:1})):l.type==="Video"?(e(),r(y,{key:2})):o("",!0)]),t("span",Gc,[a(_,{number:l.page,wrap:!0},null,8,["number"]),l.label?(e(),n("span",Xc,s(i.$store.localize(l.label)),1)):o("",!0),t("span",Qc,[l.type==="Sound"?(e(),n(c,{key:0},[z(s(i.$translate("Audio"))+" \xB7 ",1)],64)):l.type==="Video"?(e(),n(c,{key:1},[z(s(i.$translate("Video"))+" \xB7 ",1)],64)):l.type==="Image"?(e(),n(c,{key:2},[z(s(i.$translate("Image"))+" \xB7 ",1)],64)):o("",!0),z(" "+s(l.format),1)])])],8,Kc)]))),128))])])):o("",!0),(f=i.$store.manifest)!=null&&f.rendering?(e(),n("div",Zc,[t("h3",null,s(i.$translate("Renderings")),1),t("ul",Jc,[(e(!0),n(c,null,g(m.renderings,o=>(e(),n("li",{key:o.id},[t("a",{href:o.id},s(i.$store.localize(o.label)),9,el)]))),128))]),m.hasElementPdfLinks?(e(),n("div",tl,[t("button",{type:"button",class:j(["tify-export-toggle",{"-close":h.perElementPdfLinksVisible}]),"aria-controls":i.$getId("export-pdf-list"),"aria-expanded":h.perElementPdfLinksVisible,"aria-label":h.perElementPdfLinksVisible?i.$translate("Close PDF list"):null,onClick:l[0]||(l[0]=e=>h.perElementPdfLinksVisible=!h.perElementPdfLinksVisible)},[h.perElementPdfLinksVisible?(e(),r(w,{key:1})):(e(),n(c,{key:0},[z(s(i.$translate("PDFs for each element")),1)],64))],10,nl),A(t("div",{id:i.$getId("export-pdf-list"),class:"tify-export-toc"},[t("h4",null,s(i.$translate("PDFs for each element")),1),a(O,{ref:"children",purpose:"pdf",level:0,structures:i.$store.structures},null,8,["structures"])],8,sl),[[L,h.perElementPdfLinksVisible]])])):o("",!0)])):o("",!0),t("div",ol,[l[1]||(l[1]=t("h3",null,"IIIF",-1)),t("ul",il,[i.$store.options.childManifestUrl?(e(),n("li",al,[t("a",{href:i.$store.options.childManifestUrl,download:"manifest.json"},s(i.$translate("IIIF manifest (current document)")),9,rl)])):o("",!0),t("li",null,[t("a",{href:i.$store.options.manifestUrl,download:"manifest.json"},s(i.$translate(i.$store.collection?"IIIF manifest (collection)":"IIIF manifest")),9,cl)])])]),(v=(p=i.$store.manifest)==null?0[0]:p.seeAlso)!=null&&v.length?(e(),n("div",ll,[t("h3",null,s(i.$translate("Other Formats")),1),t("ul",dl,[(e(!0),n(c,null,g(i.$store.manifest.seeAlso,o=>(e(),n("li",{key:o.id},[t("a",{href:o.id,download:""},s(o.label?i.$store.localize(o.label):o.id),9,ul)]))),128))])])):o("",!0)])}ml=i(Bc,[["render",P2]]);function Tt(e,t,n=120){const s=e,o=n===!0?120:n;if(!o||o<0){s.scrollTop=t;return}const i=(t-e.scrollTop)/o/.1;setTimeout(()=>{s.scrollTop+=i,s.scrollTop!==t&&Tt(s,t,o-10)},10)}function jn(e,t,n=!0){const s=t.querySelectorAll(e);if(!s.length)return;let i=s[0];const c=s[s.length-1];Array.prototype.forEach.call(s,e=>{e.dataset.level>=i.dataset.level&&(i=e)});const o=t.getBoundingClientRect(),a=i.getBoundingClientRect(),r=c.getBoundingClientRect();if(a.top<o.top){const e=a.top-o.top+t.scrollTop;Tt(t,e-50,n)}else if(r.bottom>o.bottom){const e=r.bottom-o.bottom+t.scrollTop;Tt(t,e+50,n)}}On=".tify-toc-structure.-current",vl={data(){return{isInited:!1}},computed:{isNested(){return this.$store.structures.filter(e=>{var t;return(t=e.items)==null?0[0]:t.some(e=>e.items)}).length}},watch:{"$store.options.pages":function(){this.$nextTick(()=>jn(On,this.$el))},"$store.options.view":{handler(e){e==="toc"&&this.$nextTick(this.init)},immediate:!0}},methods:{init(){this.isInited=!0,this.$nextTick(()=>jn(On,this.$el,!1))}}},bl={class:"tify-toc",tabindex:"0"},jl={class:"tify-sr-only"},yl={key:0,class:"tify-toc-header"};function R2(i,a,c,l,d,u){const h=bn;return e(),n("section",bl,[t("h2",jl,s(i.$translate("Table of Contents")),1),u.isNested?(e(),n("div",yl,[t("button",{type:"button",class:"tify-toc-toggle-all",onClick:a[0]||(a[0]=e=>i.$refs.children.toggleAllChildren(!0))},s(i.$translate("Expand all")),1),t("button",{type:"button",class:"tify-toc-toggle-all",onClick:a[1]||(a[1]=e=>i.$refs.children.toggleAllChildren(!1))},s(i.$translate("Collapse all")),1)])):o("",!0),d.isInited?(e(),r(h,{key:1,ref:"children",level:0,structures:i.$store.structures},null,8,["structures"])):o("",!0)])}wl=i(vl,[["render",R2]]),Ol={},xl={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function L2(s,o){return e(),n("svg",xl,o[0]||(o[0]=[t("path",{d:"M21,5V11.59L18,8.58L14,12.59L10,8.59L6,12.59L3,9.58V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5M18,11.42L21,14.43V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V12.42L6,15.41L10,11.41L14,15.41"},null,-1)]))}El=i(Ol,[["render",L2]]),kl=750,Al={data(){return{itemHeight:0,itemVMargin:0,items:[{}],itemsPerRow:0,lastScrollTop:0,resizeObserver:null,resizeTimeout:null,style:{},thumbnailWidth:0,touchTimeout:null}},watch:{"$store.options.pages":function(e){this.$nextTick(()=>{const t=".tify-thumbnails-item.-current";e.length>2||e.length>1&&e[1]!==e[0]+1||(this.$refs.container.querySelector(t)?jn(t,this.$el):this.scrollToCurrentPage())})},"$store.options.view":{handler(e){e==="thumbnails"&&this.$nextTick(this.init)},immediate:!0}},mounted(){this.style.flex=this.$el.style.flex},unmounted(){var e;(e=this.resizeObserver)==null||e.disconnect(),clearTimeout(this.resizeTimeout)},methods:{init(){this.updateDimensions(),this.scrollToCurrentPage(!1),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.$el)},onResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.$store.options.view==="thumbnails"&&this.updateDimensions()},200)},updateDimensions(){if(!this.$refs.container)return;const e=this.$refs.container.querySelector(".tify-thumbnails-item"),t=e.currentStyle||window.getComputedStyle(e),n=parseInt(t.marginTop,10)+parseFloat(t.marginBottom,10);this.itemHeight=e.offsetHeight+n,this.itemVerticalMargin=n;const s=parseInt(t.marginLeft,10)+parseFloat(t.marginRight,10),o=e.offsetWidth+s;this.thumbnailWidth=e.offsetWidth,this.itemsPerRow=Math.floor(this.$refs.container.clientWidth/o);const i=Math.ceil(this.$store.manifest.items.length/this.itemsPerRow)*this.itemHeight;this.$refs.container.style.height=`${i}px`,this.redrawThumbnails(),this.scrollToCurrentPage(!1)},redrawThumbnails(){const n=this.$el.scrollTop,e=Math.floor(n/this.itemHeight)*this.itemsPerRow+1,s=Math.ceil(this.$el.offsetHeight/this.itemHeight)*this.itemsPerRow,o=e+this.itemsPerRow+s,i=Math.min(this.$store.manifest.items.length,o),t=[];for(let n=e;n<=i;n+=1)t.push({thumbnailUrl:this.$store.getThumbnailUrl(n,this.thumbnailWidth),page:n});this.items=t,this.$nextTick(()=>{const t=Math.floor(e/this.itemsPerRow);this.$refs.container.style.paddingTop=`${t*this.itemHeight}px`})},scrollToCurrentPage(e=!0){const t=Math.floor((this.$store.options.pages[0]-1)/this.itemsPerRow)*this.itemHeight+(this.itemVMargin-50);e?Tt(this.$el,t):this.$el.scrollTop=t},setPageAndSwitchView(e,t=!1){if(t){const t=this.$store.options.pages.slice(0),n=t.indexOf(e);n<0?(t.push(e),t.sort((e,t)=>e-t),t[0]===0&&t.shift()):t.length>1&&t.splice(n,1),this.$store.updateOptions({pages:t});return}this.$store.setPage(e),this.$store.isContainerWidthAtLeast("medium")||this.$store.updateOptions({view:null})},touchStartTogglePage(e){this.lastScrollTop=this.$el.scrollTop,this.touchTimeout=setTimeout(()=>{this.$el.scrollTop===this.lastScrollTop&&this.setPageAndSwitchView(e,!0)},kl)},touchEnd(){clearTimeout(this.touchTimeout)}}},Sl={class:"tify-sr-only"},Ml={ref:"container",class:"tify-thumbnails-list"},Fl=["onClick","onTouchstart"],Tl=["src"],zl={key:1,class:"tify-thumbnails-image"},Dl={class:"tify-sr-only"};function N2(o,i,r,l,d,u){const h=El,m=je;return e(),n("section",{class:"tify-thumbnails",tabindex:"0",onScroll:i[1]||(i[1]=(...e)=>u.redrawThumbnails&&u.redrawThumbnails(...e))},[t("h2",Sl,s(o.$translate("Pages")),1),t("ol",Ml,[(e(!0),n(c,null,g(d.items,r=>(e(),n("li",{key:r.page,class:j(["tify-thumbnails-item",{"-current":o.$store.options.pages.includes(r.page)}])},[t("button",{type:"button",class:"tify-thumbnails-button",onClick:fe(e=>u.setPageAndSwitchView(r.page,e.ctrlKey),["prevent"]),onTouchstart:e=>u.touchStartTogglePage(r.page),onTouchend:i[0]||(i[0]=(...e)=>u.touchEnd&&u.touchEnd(...e))},[r.thumbnailUrl?(e(),n("img",{key:0,class:"tify-thumbnails-image",alt:"",src:r.thumbnailUrl},null,8,Tl)):(e(),n("span",zl,[a(h),t("span",Dl,s(o.$translate("Image missing")),1)])),a(m,{number:r.page||1},null,8,["number"])],40,Fl)],2))),128))],512)],32)}Ll=i(Al,[["render",N2]]),Rl={computed:{pages(){return this.$store.options.pages.filter(e=>e>0)}},watch:{"$store.options.annotationId":function(){this.scrollToCurrentAnnotation()},"$store.annotationsAvailable":function(){this.$store.options.annotationId&&this.scrollToCurrentAnnotation()}},mounted(){this.$store.options.annotationId&&this.$store.annotationsAvailable&&this.scrollToCurrentAnnotation()},methods:{filterHtml:Nt,scrollToCurrentAnnotation(){this.$nextTick(()=>{var t;const e=(t=this.$refs.currentItem)==null?0[0]:t[0];e&&e.scrollIntoView({behavior:"smooth",block:e.offsetHeight<this.$refs.panel.offsetHeight/2?"center":"start"})})}}},Pl={ref:"panel",class:"tify-text",tabindex:"0"},Hl={class:"tify-sr-only"},Il={key:0,class:"tify-text-pages"},Bl={key:0},Vl={class:"tify-text-list"},$l=["onClick","onKeydown","innerHTML"],Wl={key:1,class:"tify-text-none"};function D2(i,r,l,d,u,h){const m=je;return e(),n("section",Pl,[t("h2",Hl,s(i.$translate("Text")),1),i.$store.annotationsAvailable!==!1?(e(),n("div",Il,[(e(!0),n(c,null,g(h.pages,s=>(e(),n("div",{key:s,class:"tify-text-page"},[i.$store.pageCount>1?(e(),n("h3",Bl,[a(m,{number:s},null,8,["number"])])):o("",!0),t("ul",Vl,[(e(!0),n(c,null,g(i.$store.annotations[s],(o,a)=>(e(),n("li",{key:`${s}-${a}`,ref_for:!0,ref:i.$store.options.annotationId===o.id?"currentItem":"",class:j(["tify-text-item",{"-current":i.$store.options.annotationId===o.id}])},[t("div",{role:"button",tabindex:"0",class:"tify-text-toggle",onClick:e=>i.$store.toggleAnnotationId(o.id),onKeydown:de(e=>i.$store.toggleAnnotationId(o.id),["enter","space"]),innerHTML:h.filterHtml(o.html)},null,40,$l)],2))),128))])]))),128))])):(e(),n("p",Wl,s(i.$translate("Text not available for this page")),1))],512)}Kl=i(Rl,[["render",D2]]),ql={},Yl={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function z2(s,o){return e(),n("svg",Yl,o[0]||(o[0]=[t("path",{d:"M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"},null,-1)]))}Xl=i(ql,[["render",z2]]),Ql={},Zl={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function T2(s,o){return e(),n("svg",Zl,o[0]||(o[0]=[t("path",{d:"M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z"},null,-1)]))}ed=i(Ql,[["render",T2]]),td={},nd={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function F2(s,o){return e(),n("svg",nd,o[0]||(o[0]=[t("path",{d:"M7,9V15H11L16,20V4L11,9H7Z"},null,-1)]))}od=i(td,[["render",F2]]),id={},ad={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function M2(s,o){return e(),n("svg",ad,o[0]||(o[0]=[t("path",{d:"M5.64,3.64L21.36,19.36L19.95,20.78L16,16.83V20L11,15H7V9H8.17L4.22,5.05L5.64,3.64M16,4V11.17L12.41,7.58L16,4Z"},null,-1)]))}cd=i(id,[["render",M2]]),ld={},dd={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function S2(s,o){return e(),n("svg",dd,o[0]||(o[0]=[t("path",{d:"M5,4C4.45,4 4,4.18 3.59,4.57C3.2,4.96 3,5.44 3,6V18C3,18.56 3.2,19.04 3.59,19.43C4,19.82 4.45,20 5,20H19C19.5,20 20,19.81 20.39,19.41C20.8,19 21,18.53 21,18V6C21,5.47 20.8,5 20.39,4.59C20,4.19 19.5,4 19,4H5M4.5,5.5H19.5V18.5H4.5V5.5M7,9C6.7,9 6.47,9.09 6.28,9.28C6.09,9.47 6,9.7 6,10V14C6,14.3 6.09,14.53 6.28,14.72C6.47,14.91 6.7,15 7,15H10C10.27,15 10.5,14.91 10.71,14.72C10.91,14.53 11,14.3 11,14V13H9.5V13.5H7.5V10.5H9.5V11H11V10C11,9.7 10.91,9.47 10.71,9.28C10.5,9.09 10.27,9 10,9H7M14,9C13.73,9 13.5,9.09 13.29,9.28C13.09,9.47 13,9.7 13,10V14C13,14.3 13.09,14.53 13.29,14.72C13.5,14.91 13.73,15 14,15H17C17.3,15 17.53,14.91 17.72,14.72C17.91,14.53 18,14.3 18,14V13H16.5V13.5H14.5V10.5H16.5V11H18V10C18,9.7 17.91,9.47 17.72,9.28C17.53,9.09 17.3,9 17,9H14Z"},null,-1)]))}hd=i(ld,[["render",S2]]),md={},fd={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function A2(s,o){return e(),n("svg",fd,o[0]||(o[0]=[t("path",{d:"M18,11H16.5V10.5H14.5V13.5H16.5V13H18V14A1,1 0 0,1 17,15H14A1,1 0 0,1 13,14V10A1,1 0 0,1 14,9H17A1,1 0 0,1 18,10M11,11H9.5V10.5H7.5V13.5H9.5V13H11V14A1,1 0 0,1 10,15H7A1,1 0 0,1 6,14V10A1,1 0 0,1 7,9H10A1,1 0 0,1 11,10M19,4H5C3.89,4 3,4.89 3,6V18A2,2 0 0,0 5,20H19A2,2 0 0,0 21,18V6C21,4.89 20.1,4 19,4Z"},null,-1)]))}gd=i(md,[["render",A2]]);function kt(e){return!!$a()&&(C2(e),!0)}function bd(){const e=new Set,t=t=>{e.delete(t)};return{on:n=>{e.add(n);const s=()=>t(n);return kt(s),{off:s}},off:t,trigger:(...t)=>Promise.all(Array.from(e).map(e=>e(...t))),clear:()=>{e.clear()}}}_t=typeof window<"u"&&typeof document<"u",typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,yd=Object.prototype.toString,Fn=e=>yd.call(e)==="[object Object]",ue=()=>{},Od=w2();function w2(){var e,t;return _t&&((e=window?.navigator)==null?0[0]:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?0[0]:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function _2(...e){if(e.length!==1)return G2(...e);const t=e[0];return typeof t=="function"?Sn(q2(()=>({get:t,set:ue}))):Je(t)}function y2(e,t){function n(...n){return new Promise((s,o)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(o)})}return n}kd=e=>e();function zn(e){return Array.isArray(e)?e:[e]}function b2(){return Le()}function v2(e,t=!0,n){b2()?pt(e,n):t?e():ln(e)}function Fd(e,t,n={}){const{eventFilter:c=kd,...s}=n,r=y2(c,t);let o,i,a;if(s.flush==="sync"){let t=!1;i=()=>{},o=e=>{t=!0,e(),t=!1},a=$(e,(...e)=>{t||r(...e)},s)}else{const c=[];let n=0,t=0;i=()=>{n=t},c.push($(e,()=>{t++},{...s,flush:"sync"})),o=e=>{const s=t;e(),n+=t-s},c.push($(e,(...e)=>{const s=n>0&&n===t;n=0,t=0,!s&&r(...e)},s)),a=()=>{c.forEach(e=>e())}}return{stop:a,ignoreUpdates:o,ignorePrevAsyncUpdates:i}}function g2(e,t,n){return $(e,t,{...n,immediate:!0})}Dn=_t?window:0[0],Hn=_t?window.document:0[0];function we(e){var n;const t=b(e);return(n=t?.$el)!=null?n:t}function v(...e){const n=[],s=()=>{n.forEach(e=>e()),n.length=0},o=(e,t,n,s)=>(e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)),t=_(()=>{const t=zn(b(e[0])).filter(e=>e!=null);return t.every(e=>typeof e!="string")?t:0[0]}),i=g2(()=>{var n,s;return[(s=(n=t.value)==null?0[0]:n.map(e=>we(e)))!=null?s:[Dn].filter(e=>e!=null),zn(b(t.value?e[1]:e[0])),zn(_n(t.value?e[2]:e[1])),b(t.value?e[3]:e[2])]},([e,t,i,a])=>{if(s(),e==null||!e.length||t==null||!t.length||i==null||!i.length)return;const r=Fn(a)?{...a}:a;n.push(...e.flatMap(e=>t.flatMap(t=>i.map(n=>o(e,t,n,r)))))},{flush:"post"}),a=()=>{i(),s()};return kt(s),a}Wn=!1;function Pd(e,t,n={}){const{window:s=Dn,ignore:f=[],capture:m=!0,detectIframe:d=!1,controls:r=!1}=n;if(!s)return r?{stop:ue,cancel:ue,trigger:ue}:ue;if(Od&&!Wn){Wn=!0;const e={passive:!0};Array.from(s.document.body.children).forEach(t=>t.addEventListener("click",ue,e)),s.document.documentElement.addEventListener("click",ue,e)}let o=!0;const c=e=>b(f).some(t=>{if(typeof t=="string")return Array.from(s.document.querySelectorAll(t)).some(t=>t===e.target||e.composedPath().includes(t));{const n=we(t);return n&&(e.target===n||e.composedPath().includes(n))}});function u(e){const t=b(e);return t&&t.$.subTree.shapeFlag===16}function h(e,t){const s=b(e),n=s.$.subTree&&s.$.subTree.children;return n!=null&&!!Array.isArray(n)&&n.some(e=>e.el===t.target||t.composedPath().includes(e.el))}const a=n=>{const s=we(e);if(n.target!=null&&!(!(s instanceof Element)&&u(e)&&h(e,n))&&!(!s||s===n.target||n.composedPath().includes(s))){if("detail"in n&&n.detail===0&&(o=!c(n)),!o){o=!0;return}t(n)}};let i=!1;const p=[v(s,"click",e=>{i||(i=!0,setTimeout(()=>{i=!1},0),a(e))},{passive:!0,capture:m}),v(s,"pointerdown",t=>{const n=we(e);o=!c(t)&&!!(n&&!t.composedPath().includes(n))},{passive:!0}),d&&v(s,"blur",n=>{setTimeout(()=>{var o;const i=we(e);((o=s.document.activeElement)==null?0[0]:o.tagName)==="IFRAME"&&!(i!=null&&i.contains(s.document.activeElement))&&t(n)},0)},{passive:!0})].filter(Boolean),l=()=>p.forEach(e=>e());return r?{stop:l,cancel:()=>{o=!1},trigger:e=>{o=!0,a(e),o=!1}}:l}function m2(){const e=F(!1),t=Le();return t&&pt(()=>{e.value=!0},t),e}function h2(e){const t=m2();return _(()=>(t.value,!!e()))}Xn=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function d2(e,t={}){const{document:n=Hn,autoExit:g=!1}=t,s=_(()=>{var t;return(t=we(e))!=null?t:n?.documentElement}),o=F(!1),c=_(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(e=>n&&e in n||s.value&&e in s.value)),i=_(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(e=>n&&e in n||s.value&&e in s.value)),a=_(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(e=>n&&e in n||s.value&&e in s.value)),u=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(e=>n&&e in n),l=h2(()=>s.value&&n&&c.value!==0[0]&&i.value!==0[0]&&a.value!==0[0]),p=()=>!!u&&n?.[u]===s.value,h=()=>{if(a.value){if(n&&n[a.value]!=null)return n[a.value];{const e=s.value;if(e?.[a.value]!=null)return!!e[a.value]}}return!1};async function r(){if(!!l.value&&!!o.value){if(i.value)if(n?.[i.value]!=null)await n[i.value]();else{const e=s.value;e?.[i.value]!=null&&await e[i.value]()}o.value=!1}}async function m(){if(!l.value||o.value)return;h()&&await r();const e=s.value;c.value&&e?.[c.value]!=null&&(await e[c.value](),o.value=!0)}async function b(){await(o.value?r():m())}const d=()=>{const e=h();(!e||e&&p())&&(o.value=e)},f={capture:!1,passive:!0};return v(n,Xn,d,f),v(()=>we(s),Xn,d,f),v2(d,!1),g&&kt(r),{isSupported:l,isFullscreen:o,enter:m,exit:r,toggle:b}}function Qn(e,t){b(e)&&t(b(e))}function l2(e){let t=[];for(let n=0;n<e.length;++n)t=[...t,[e.start(n),e.end(n)]];return t}function Zn(e){return Array.from(e).map(({label:e,kind:t,language:n,mode:s,activeCues:o,cues:i,inBandMetadataTrackDispatchType:a},r)=>({id:r,label:e,kind:t,language:n,mode:s,activeCues:o,cues:i,inBandMetadataTrackDispatchType:a}))}no={src:"",tracks:[]};function c2(e,t={}){e=_2(e),t={...no,...t};const{document:s=Hn}=t,n={passive:!0},f=F(0),x=F(0),g=F(!1),r=F(1),c=F(!1),p=F(!1),o=F(!1),u=F(1),w=F(!1),C=Je([]),i=Je([]),m=F(-1),a=F(!1),h=F(!1),y=s&&"pictureInPictureEnabled"in s,_=bd(),j=bd(),O=t=>{Qn(e,e=>{if(t){const n=typeof t=="number"?t:t.id;e.textTracks[n].mode="disabled"}else for(let t=0;t<e.textTracks.length;++t)e.textTracks[t].mode="disabled";m.value=-1})},E=(t,n=!0)=>{Qn(e,e=>{const s=typeof t=="number"?t:t.id;n&&O(),e.textTracks[s].mode="showing",m.value=s})},k=()=>new Promise((t,n)=>{Qn(e,async e=>{y&&(a.value?s.exitPictureInPicture().then(t).catch(n):e.requestPictureInPicture().then(t).catch(n))})});so(()=>{if(!s)return;const i=b(e);if(!i)return;const o=b(t.src);let a=[];o&&(typeof o=="string"?a=[{src:o}]:Array.isArray(o)?a=o:Fn(o)&&(a=[o]),i.querySelectorAll("source").forEach(e=>{e.remove()}),a.forEach(({src:e,type:t,media:o})=>{const a=s.createElement("source");a.setAttribute("src",e),a.setAttribute("type",t||""),a.setAttribute("media",o||""),v(a,"error",_.trigger,n),i.appendChild(a)}),i.load())}),$([e,r],()=>{const t=b(e);t&&(t.volume=r.value)}),$([e,h],()=>{const t=b(e);t&&(t.muted=h.value)}),$([e,u],()=>{const t=b(e);t&&(t.playbackRate=u.value)}),so(()=>{if(!s)return;const n=b(t.tracks),o=b(e);!n||!n.length||!o||(o.querySelectorAll("track").forEach(e=>e.remove()),n.forEach(({default:e,kind:t,label:n,src:i,srcLang:a},r)=>{const c=s.createElement("track");c.default=e||!1,c.kind=t,c.label=n,c.src=i,c.srclang=a,c.default&&(m.value=r),o.appendChild(c)}))});const{ignoreUpdates:A}=Fd(f,t=>{const n=b(e);n&&(n.currentTime=t)}),{ignoreUpdates:d}=Fd(o,t=>{const n=b(e);n&&(t?n.play().catch(e=>{throw j.trigger(e),e}):n.pause())});v(e,"timeupdate",()=>A(()=>f.value=b(e).currentTime),n),v(e,"durationchange",()=>x.value=b(e).duration,n),v(e,"progress",()=>C.value=l2(b(e).buffered),n),v(e,"seeking",()=>g.value=!0,n),v(e,"seeked",()=>g.value=!1,n),v(e,["waiting","loadstart"],()=>{c.value=!0,d(()=>o.value=!1)},n),v(e,"loadeddata",()=>c.value=!1,n),v(e,"playing",()=>{c.value=!1,p.value=!1,d(()=>o.value=!0)},n),v(e,"ratechange",()=>u.value=b(e).playbackRate,n),v(e,"stalled",()=>w.value=!0,n),v(e,"ended",()=>p.value=!0,n),v(e,"pause",()=>d(()=>o.value=!1),n),v(e,"play",()=>d(()=>o.value=!0),n),v(e,"enterpictureinpicture",()=>a.value=!0,n),v(e,"leavepictureinpicture",()=>a.value=!1,n),v(e,"volumechange",()=>{const t=b(e);t&&(r.value=t.volume,h.value=t.muted)},n);const l=[],S=$([e],()=>{const t=b(e);t&&(S(),l[0]=v(t.textTracks,"addtrack",()=>i.value=Zn(t.textTracks),n),l[1]=v(t.textTracks,"removetrack",()=>i.value=Zn(t.textTracks),n),l[2]=v(t.textTracks,"change",()=>i.value=Zn(t.textTracks),n))});return kt(()=>l.forEach(e=>e())),{currentTime:f,duration:x,waiting:c,seeking:g,ended:p,stalled:w,buffered:C,playing:o,rate:u,volume:r,muted:h,tracks:i,selectedTrack:m,enableTrack:E,disableTrack:O,supportsPictureInPicture:y,togglePictureInPicture:k,isPictureInPicture:a,onSourceError:_.on,onPlaybackError:j.on}}function Jn(e){return!!(e.altKey||e.ctrlKey||e.metaKey||["INPUT","SELECT","TEXTAREA"].includes(e.target.nodeName)&&e.target.type!=="range")}Gd={props:{label:{default:null,type:String},position:{default:"bottom",type:String},shortcut:{default:null,type:String}},emits:["open"],data(){return{open:!1}},computed:{id(){return this.$.appContext.config.globalProperties.$getId?this.$getId(At()):At()}},mounted(){var e;(((e=this.$store)==null?0[0]:e.rootElement)||document.documentElement).addEventListener("keydown",this.onKeydown),Pd(this.$el,()=>{this.open=!1})},beforeUnmount(){var e;(((e=this.$store)==null?0[0]:e.rootElement)||document.documentElement).removeEventListener("keydown",this.onKeydown)},methods:{onKeydown(e){if(!Jn(e)){if(e.key==="Escape"){this.open=!1;return}e.key===this.shortcut&&(this.open=!this.open,this.open&&this.$emit("open"),e.preventDefault())}}}},Xd={class:"tify-dropdown"},Qd=["aria-controls","aria-expanded","aria-label","title"],Zd=["id"];function r2(s,o,i,a,r,c){return e(),n("div",Xd,[t("button",{type:"button",class:"tify-dropdown-button","aria-controls":c.id,"aria-expanded":r.open,"aria-label":i.label,title:i.label,onClick:o[0]||(o[0]=e=>{r.open=!r.open,r.open&&s.$emit("open")})},[fi(s.$slots,"button")],8,Qd),A(t("div",{id:c.id,class:j(`tify-dropdown-content -${i.position}`),onClick:o[1]||(o[1]=e=>e.target.closest("a, button")&&(r.open=!1))},[fi(s.$slots,"default")],10,Zd),[[L,r.open]])])}Ft=i(Gd,[["render",r2]]),tu={},nu={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function a2(s,o){return e(),n("svg",nu,o[0]||(o[0]=[t("path",{d:"M13,2.05V4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03V2.05M5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37L5.67,19.74M7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74M5.69,7.1L4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1M4.06,13H2.06C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13M10,16.5L16,12L10,7.5V16.5Z"},null,-1)]))}ou=i(tu,[["render",a2]]),iu={},au={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function i2(s,o){return e(),n("svg",au,o[0]||(o[0]=[t("path",{d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)]))}cu=i(iu,[["render",i2]]),lu={},du={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function o2(s,o){return e(),n("svg",du,o[0]||(o[0]=[t("path",{d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)]))}hu=i(lu,[["render",o2]]),mu={},fu={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function s2(s,o){return e(),n("svg",fu,o[0]||(o[0]=[t("path",{d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},null,-1)]))}gu=i(mu,[["render",s2]]),vu={props:{src:{required:!0,type:String},format:{required:!0,type:String},hasImage:{type:Boolean,default:!1}},data(){return{currentSubtitle:null,media:c2(x3("av")),mouseInterval:null,mouseMoving:!0,rates:[.5,.75,1,1.25,1.5,2]}},computed:{type(){var e;return(e=this.format)==null?0[0]:e.split("/")[0]},subtitles(){var t,n;const e=(n=(t=this.$store.manifest.items[this.$store.options.pages[0]-1].annotations)==null?0[0]:t[0].items)==null?0[0]:n[0].body;return e?e.items||[e]:[]}},watch:{currentSubtitle(e){Object.values(this.$refs.av.textTracks).forEach(t=>{t.mode=t.language===e?.language?"showing":"disabled"})}},beforeUnmount(){clearInterval(this.mouseInterval)},mounted(){window.addEventListener("mousemove",this.onMouseMove)},unmounted(){window.removeEventListener("mousemove",this.onMouseMove)},methods:{formatTime(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=Math.floor(e%60);return[...this.media.duration>3600?[t.toString().padStart(2,"0")]:[],n.toString().padStart(2,"0"),s.toString().padStart(2,"0")].join(":")},onMouseMove(){clearTimeout(this.mouseInterval),this.mouseMoving=!0,this.mouseInterval=setInterval(()=>{this.mouseMoving=this.$store.options.view||this.media.paused},2e3)}}},bu=["src","type"],ju=["srclang","src"],yu={class:"tify-player-controls"},_u=["aria-label"],wu=["max","aria-label"],Ou={class:"tify-player-time"},xu={class:"tify-player-elapsed"},Cu={class:"tify-player-duration"},Eu={class:"tify-sr-only"},ku={key:0,class:"tify-player-select-badge"},Au={class:"tify-player-select-title"},Su={class:"tify-button-list"},Mu=["aria-pressed","onClick"],Fu={class:"tify-sr-only"},Tu={class:"tify-player-select-title"},zu={class:"tify-button-list"},Du=["aria-pressed","onClick"],Nu=["aria-pressed"],Lu=["aria-label","disabled"],Ru=["aria-label"];function n2(i,l,d,u,h,m){const v=gu,f=hu,b=cu,y=ou,p=Ft,_=gd,w=hd,O=cd,x=od,C=ed,E=Xl;return e(),n("div",{class:j(["tify-player",`
			-${m.type}
			${h.mouseMoving||h.media.paused?"-mousing":""}
			${h.media.playing||h.media.waiting?"-playing":""}
			${d.hasImage&&(m.type==="audio"||!h.media.currentTime)?"-bottom":""}
		`]),onKeydown:l[7]||(l[7]=de(fe(e=>h.media.playing=!h.media.playing,["prevent"]),["space"]))},[(e(),r(z3(m.type),{ref:"av",class:"tify-player-av",poster:i.$store.getThumbnailUrl(i.$store.options.pages[0],0),preload:"metadata",crossorigin:"anonymous",onClick:l[0]||(l[0]=e=>{h.media.playing=!h.media.playing,m.onMouseMove()})},{default:I(()=>[t("source",{src:d.src,type:d.format},null,8,bu),(e(!0),n(c,null,g(m.subtitles,t=>(e(),n("track",{key:t.id,kind:"captions",srclang:t.language,src:t.id},null,8,ju))),128))]),_:1},8,["poster"])),m.type==="video"?(e(),n("div",{key:0,class:j(["tify-player-overlay",{"-hidden":h.media.playing||d.hasImage&&!h.media.currentTime}])},[h.media.waiting?(e(),r(v,{key:0,class:"-spin"})):h.media.currentTime?o("",!0):(e(),r(f,{key:1}))],2)):o("",!0),t("div",yu,[t("div",null,[t("button",{type:"button",class:"tify-player-play-pause","aria-label":i.$translate(h.media.paused?"Play [verb]":"Pause [verb]"),onClick:l[1]||(l[1]=e=>h.media.playing=!h.media.playing)},[h.media.playing||h.media.seeking&&h.media.waiting?(e(),r(b,{key:0})):(e(),r(f,{key:1}))],8,_u),A(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>h.media.currentTime=e),type:"range",class:"tify-player-seekbar",min:"0",max:h.media.duration,step:"any","aria-label":i.$translate("Current time"),style:pe(`--value: ${h.media.currentTime/h.media.duration*100}%`)},null,12,wu),[[tt,h.media.currentTime,0[0],{number:!0}]]),t("span",Ou,[t("span",xu,s(m.formatTime(h.media.currentTime)),1),t("span",Cu," / "+s(m.formatTime(h.media.duration)),1)]),a(p,{class:"tify-player-select -rate",alignment:"center",position:"top",shortcut:"r"},{button:I(()=>[t("span",Eu,s(i.$translate("Playback rate")),1),a(y),h.media.rate!==1?(e(),n("span",ku,s(h.media.rate.toLocaleString(i.$store.options.language))+"x ",1)):o("",!0)]),default:I(()=>[t("h3",Au,s(i.$translate("Playback rate")),1),t("ol",Su,[(e(!0),n(c,null,g(h.rates,o=>(e(),n("li",{key:o},[t("button",{type:"button","aria-pressed":o===h.media.rate,onClick:e=>h.media.rate=o},s(o===1?i.$translate("Normal"):`${o.toLocaleString(i.$store.options.language)}x`),9,Mu)]))),128))])]),_:1}),m.subtitles.length?(e(),r(p,{key:0,class:"tify-player-select -captions",alignment:"center",position:"top",shortcut:"c"},{button:I(()=>[t("span",Fu,s(i.$translate("Closed Captions")),1),h.currentSubtitle?(e(),r(_,{key:0})):(e(),r(w,{key:1}))]),default:I(()=>[t("h3",Tu,s(i.$translate("Closed Captions")),1),t("ol",zu,[(e(!0),n(c,null,g(m.subtitles,o=>(e(),n("li",{key:o.id},[t("button",{type:"button","aria-pressed":o===h.currentSubtitle,onClick:e=>h.currentSubtitle=o},s(i.$store.localize(o.label)||o.language),9,Du)]))),128)),t("li",null,[t("button",{type:"button","aria-pressed":!h.currentSubtitle,onClick:l[3]||(l[3]=e=>h.currentSubtitle=null)},s(i.$translate("None")),9,Nu)])])]),_:1})):o("",!0)]),t("div",null,[t("button",{type:"button",class:"tify-player-mute","aria-label":i.$translate("Toggle mute"),disabled:h.media.volume===0,onClick:l[4]||(l[4]=e=>h.media.muted=!h.media.muted)},[h.media.muted?(e(),r(O,{key:0})):h.media.volume<.34?(e(),r(x,{key:1})):h.media.volume<.67?(e(),r(C,{key:2})):(e(),r(E,{key:3}))],8,Lu),A(t("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>h.media.volume=e),type:"range",class:"tify-player-volume",min:"0",max:"1",step:"0.01","aria-label":i.$translate("Volume"),style:pe(`--value: ${h.media.volume*100}%`),onInput:l[6]||(l[6]=e=>h.media.muted=h.media.volume===0)},null,44,Ru),[[tt,h.media.volume,0[0],{number:!0}]])])])],34)}Hu=i(vu,[["render",n2]]),Iu={},Bu={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function t2(s,o){return e(),n("svg",Bu,o[0]||(o[0]=[t("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))}ns=i(Iu,[["render",t2]]),Wu={},Uu={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function J0(s,o){return e(),n("svg",Uu,o[0]||(o[0]=[t("path",{d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},null,-1)]))}is=i(Wu,[["render",J0]]),Yu={},Gu={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function Z0(s,o){return e(),n("svg",Gu,o[0]||(o[0]=[t("path",{d:"M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z"},null,-1)]))}Qu=i(Yu,[["render",Z0]]),Zu={},Ju={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function Q0(s,o){return e(),n("svg",Ju,o[0]||(o[0]=[t("path",{d:"M7.2 4L5.2 2H20C21.11 2 22 2.9 22 4V16C22 16.76 21.57 17.41 20.95 17.75L19.2 16H20V4H7.2M22.11 21.46L20.84 22.73L16.11 18H13.9L10.2 21.71C10 21.9 9.75 22 9.5 22H9C8.45 22 8 21.55 8 21V18H4C2.9 18 2 17.11 2 16V4C2 3.97 2 3.93 2 3.9L1.11 3L2.39 1.73L22.11 21.46M14.11 16L4 5.89V16H10V19.08L13.08 16H14.11Z"},null,-1)]))}t1=i(Zu,[["render",Q0]]),n1={},s1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function X0(s,o){return e(),n("svg",s1,o[0]||(o[0]=[t("path",{d:"M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10M6,7H18V9H6V7M6,11H15V13H6V11Z"},null,-1)]))}i1=i(n1,[["render",X0]]),a1={},r1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function G0(s,o){return e(),n("svg",r1,o[0]||(o[0]=[t("path",{d:"M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z"},null,-1)]))}l1=i(a1,[["render",G0]]),d1={},u1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function Y0(s,o){return e(),n("svg",u1,o[0]||(o[0]=[t("path",{d:"M12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2C17.5,2 22,6 22,11A6,6 0 0,1 16,17H14.2C13.9,17 13.7,17.2 13.7,17.5C13.7,17.6 13.8,17.7 13.8,17.8C14.2,18.3 14.4,18.9 14.4,19.5C14.5,20.9 13.4,22 12,22M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C12.3,20 12.5,19.8 12.5,19.5C12.5,19.3 12.4,19.2 12.4,19.1C12,18.6 11.8,18.1 11.8,17.5C11.8,16.1 12.9,15 14.3,15H16A4,4 0 0,0 20,11C20,7.1 16.4,4 12,4M6.5,10C7.3,10 8,10.7 8,11.5C8,12.3 7.3,13 6.5,13C5.7,13 5,12.3 5,11.5C5,10.7 5.7,10 6.5,10M9.5,6C10.3,6 11,6.7 11,7.5C11,8.3 10.3,9 9.5,9C8.7,9 8,8.3 8,7.5C8,6.7 8.7,6 9.5,6M14.5,6C15.3,6 16,6.7 16,7.5C16,8.3 15.3,9 14.5,9C13.7,9 13,8.3 13,7.5C13,6.7 13.7,6 14.5,6M17.5,10C18.3,10 19,10.7 19,11.5C19,12.3 18.3,13 17.5,13C16.7,13 16,12.3 16,11.5C16,10.7 16.7,10 17.5,10Z"},null,-1)]))}m1=i(d1,[["render",Y0]]),f1={},p1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function q0(s,o){return e(),n("svg",p1,o[0]||(o[0]=[t("path",{d:"M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"},null,-1)]))}v1=i(f1,[["render",q0]]),b1={},j1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function K0(s,o){return e(),n("svg",j1,o[0]||(o[0]=[t("path",{d:"M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M11,18H13V15.87C14.73,15.43 16,13.86 16,12A4,4 0 0,0 12,8A4,4 0 0,0 8,12C8,13.86 9.27,15.43 11,15.87V18Z"},null,-1)]))}_1=i(b1,[["render",K0]]),w1={emits:["update"],computed:{saturation(){const e=this.$store.options.filters.saturate;return typeof e=="number"?e:1}}},O1=["value"],x1=["value"],C1=["value"];function U0(o,i,r,l,d,u){const h=_1,m=v1,f=m1;return e(),n(c,null,[t("p",null,[t("label",null,[a(h),z(" "+s(o.$translate("Brightness"))+" ",1),t("b",null,s(Math.round((o.$store.options.filters.brightness||1)*100))+"\xA0%",1),t("input",{ref:"firstSlider",max:"2",min:".5",step:".01",type:"range",value:o.$store.options.filters.brightness||1,style:pe(`--value: ${((o.$store.options.filters.brightness||1)-.5)*.66667*100}%`),onInput:i[0]||(i[0]=e=>o.$emit("update","brightness",e))},null,44,O1)])]),t("p",null,[t("label",null,[a(m),z(" "+s(o.$translate("Contrast"))+" ",1),t("b",null,s(Math.round((o.$store.options.filters.contrast||1)*100))+"\xA0%",1),t("input",{max:"2",min:".5",step:".01",type:"range",value:o.$store.options.filters.contrast||1,style:pe(`--value: ${((o.$store.options.filters.contrast||1)-.5)*.66667*100}%`),onInput:i[1]||(i[1]=e=>o.$emit("update","contrast",e))},null,44,x1)])]),t("p",null,[t("label",null,[a(f),z(" "+s(o.$translate("Saturation"))+" ",1),t("b",null,s(Math.round(u.saturation*100))+"\xA0%",1),t("input",{max:"3",min:"0",step:".01",type:"range",value:u.saturation,style:pe(`--value: ${u.saturation/3*100}%`),onInput:i[2]||(i[2]=e=>o.$emit("update","saturate",e))},null,44,C1)])])],64)}k1=i(w1,[["render",U0]]),A1={},S1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function W0(s,o){return e(),n("svg",S1,o[0]||(o[0]=[t("path",{d:"M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"},null,-1)]))}F1=i(A1,[["render",W0]]),T1={},z1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function $0(s,o){return e(),n("svg",z1,o[0]||(o[0]=[t("path",{d:"M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,5.55Z"},null,-1)]))}N1=i(T1,[["render",$0]]),L1={},R1={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function V0(s,o){return e(),n("svg",R1,o[0]||(o[0]=[t("path",{d:"M19,12H17V15H14V17H19V12M7,9H10V7H5V12H7V9M21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3M21,19H3V5H21V19Z"},null,-1)]))}H1=i(L1,[["render",V0]]),Bt={exports:{}},B1=Bt.exports;function I0(){return V1||(V1=1,function(e){function t(e){return new t.Viewer(e)}(function(e){e.version={versionStr:"5.0.1",major:parseInt("5",10),minor:parseInt("0",10),revision:parseInt("1",10)};var s={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},o=Object.prototype.toString,n=Object.prototype.hasOwnProperty;e.isFunction=function(t){return e.type(t)==="function"},e.isArray=Array.isArray||function(t){return e.type(t)==="array"},e.isWindow=function(e){return e&&typeof e=="object"&&"setInterval"in e},e.type=function(e){return e==null?String(e):s[o.call(e)]||"object"},e.isPlainObject=function(s){if(!s||t.type(s)!=="object"||s.nodeType||e.isWindow(s)||s.constructor&&!n.call(s,"constructor")&&!n.call(s.constructor.prototype,"isPrototypeOf"))return!1;var o,i;for(i in s)o=i;return o===0[0]||n.call(s,o)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=function(){var t=document.createElement("canvas");return!!(e.isFunction(t.getContext)&&t.getContext("2d"))}(),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch{t=!0}return t},e.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),e.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),e.supportsEventListenerOptions=function(){var n,t=0;if(e.supportsAddEventListener)try{n={get capture(){return t++,!1},get once(){return t++,!1},get passive(){return t++,!1}},window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{t=0}return t>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(n,1)/s}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()})(t),function(e){e.extend=function(){var s,o,i,r,c,l,d,n=arguments[0]||{},h=arguments.length,u=!1,a=1;for(typeof n=="boolean"&&(u=n,n=arguments[1]||{},a=2),typeof n!="object"&&!t.isFunction(n)&&(n={}),h===a&&(n=this,--a);a<h;a++)if(c=arguments[a],c!==null||c!==0[0])for(o in c){if(r=Object.getOwnPropertyDescriptor(c,o),r!==0[0]){if(r.get||r.set){Object.defineProperty(n,o,r);continue}s=r.value}else{e.console.warn('Could not copy inherited property "'+o+'".');continue}n!==s&&(u&&s&&(t.isPlainObject(s)||(l=t.isArray(s)))?(i=n[o],l?(l=!1,d=i&&t.isArray(i)?i:[]):d=i&&t.isPlainObject(i)?i:{},n[o]=t.extend(u,d,s)):s!==0[0]&&(n[o]=s))}return n},s=function(){if(typeof navigator!="object")return!1;var e=navigator.userAgent;return typeof e=="string"&&(e.indexOf("iPhone")!==-1||e.indexOf("iPad")!==-1||e.indexOf("iPod")!==-1)},e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:s(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["webgl","canvas","html"],drawerOptions:{webgl:{},canvas:{},html:{},custom:{}},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(e,t){return function(){var n=arguments;return n===0[0]&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(t){return e._viewers.get(this.getElement(t))},getElement:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e},getElementPosition:function(t){var s,o,n=new e.Point;for(t=e.getElement(t),s=e.getElementStyle(t).position==="fixed",o=a(t,s);o;)n.x+=t.offsetLeft,n.y+=t.offsetTop,s&&(n=n.plus(e.getPageScroll())),t=o,s=e.getElementStyle(t).position==="fixed",o=a(t,s);return n},getElementOffset:function(t){t=e.getElement(t);var s,o,n=t&&t.ownerDocument,i={top:0,left:0};return n?(s=n.documentElement,typeof t.getBoundingClientRect<"u"&&(i=t.getBoundingClientRect()),o=n===n.window?n:n.nodeType===9&&(n.defaultView||n.parentWindow),new e.Point(i.left+(o.pageXOffset||s.scrollLeft)-(s.clientLeft||0),i.top+(o.pageYOffset||s.scrollTop)-(s.clientTop||0))):new e.Point},getElementSize:function(t){return t=e.getElement(t),new e.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return t=e.getElement(t),t.currentStyle}:function(t){return t=e.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var n={};return e.getCssPropertyWithVendorPrefix=function(t){if(n[t]!==0[0])return n[t];if(o=document.createElement("div").style,s=null,o[t]!==0[0])s=t;else for(var s,o,a,r=["Webkit","Moz","MS","O","webkit","moz","ms","o"],c=e.capitalizeFirstLetter(t),i=0;i<r.length;i++)if(a=r[i]+c,o[a]!==0[0]){s=a;break}return n[t]=s,s},e.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(t,n){t=e.getElement(t);var s=e.getElementOffset(t),o=e.getElementSize(t);return n.x>=s.x&&n.x<s.x+o.x&&n.y<s.y+o.y&&n.y>=s.y},getMousePosition:function(t){if(typeof t.pageX=="number")e.getMousePosition=function(t){var n=new e.Point;return n.x=t.pageX,n.y=t.pageY,n};else if(typeof t.clientX=="number")e.getMousePosition=function(t){var n=new e.Point;return n.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,n};else throw new Error("Unknown event mouse position, no known technique.");return e.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},n=document.body||{};if(typeof window.pageXOffset=="number")e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(n.scrollLeft||n.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else if(t.scrollLeft||t.scrollTop)e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new e.Point(0,0);return e.getPageScroll()},setPageScroll:function(t){if(typeof window.scrollTo<"u")e.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var s,n=e.getPageScroll();if(n.x===t.x&&n.y===t.y)return;if(document.body.scrollLeft=t.x,document.body.scrollTop=t.y,s=e.getPageScroll(),s.x!==n.x&&s.y!==n.y){e.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y};return}if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,s=e.getPageScroll(),s.x!==n.x&&s.y!==n.y){e.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y};return}e.setPageScroll=function(){}}e.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},n=document.body||{};if(typeof window.innerWidth=="number")e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(n.clientWidth||n.clientHeight)e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return e.getWindowSize()},makeCenteredNode:function(t){t=e.getElement(t);var n=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(n[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(n[1].style,{display:"table-row"}),e.extend(n[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),n[0].appendChild(n[1]),n[1].appendChild(n[2]),n[2].appendChild(t),n[0]},makeNeutralElement:function(e){var n=document.createElement(e),t=n.style;return t.background="transparent none",t.border="none",t.margin="0px",t.padding="0px",t.position="static",n},now:function(){return Date.now?e.now=Date.now:e.now=function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(t){var n=e.makeNeutralElement("img");return n.src=t,n},setElementOpacity:function(t,n,s){var o,i;t=e.getElement(t),s&&!e.Browser.alpha&&(n=Math.round(n)),e.Browser.opacity?t.style.opacity=n<1?n:"":n<1?(o=Math.round(100*n),i="alpha(opacity="+o+")",t.style.filter=i):t.style.filter=""},setElementTouchActionNone:function(t){t=e.getElement(t),typeof t.style.touchAction<"u"?t.style.touchAction="none":typeof t.style.msTouchAction<"u"&&(t.style.msTouchAction="none")},setElementPointerEvents:function(t,n){t=e.getElement(t),typeof t.style<"u"&&typeof t.style.pointerEvents<"u"&&(t.style.pointerEvents=n)},setElementPointerEventsNone:function(t){e.setElementPointerEvents(t,"none")},addClass:function(t,n){t=e.getElement(t),t.className?(" "+t.className+" ").indexOf(" "+n+" ")===-1&&(t.className+=" "+n):t.className=n},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var s,i,o=n||0;if(!e)throw new TypeError;if(i=e.length,i===0||o>=i)return-1;for(o<0&&(o=i-(o<0?-o:o)),s=o;s<i;s++)if(e[s]===t)return s;return-1},this.indexOf(e,t,n)},removeClass:function(t,n){var s,o,i=[];for(t=e.getElement(t),o=t.className.split(/\s+/),s=0;s<o.length;s++)o[s]&&o[s]!==n&&i.push(o[s]);t.className=i.join(" ")},normalizeEventListenerOptions:function(t){var n;return typeof t<"u"?typeof t=="boolean"?n=e.supportsEventListenerOptions?{capture:t}:t:n=e.supportsEventListenerOptions?t:typeof t.capture<"u"&&t.capture:n=!!e.supportsEventListenerOptions&&{capture:!1},n},addEvent:function(){if(e.supportsAddEventListener)return function(t,n,s,o){o=e.normalizeEventListenerOptions(o),t=e.getElement(t),t.addEventListener(n,s,o)};if(document.documentElement.attachEvent&&document.attachEvent)return function(t,n,s){t=e.getElement(t),t.attachEvent("on"+n,s)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(t,n,s,o){o=e.normalizeEventListenerOptions(o),t=e.getElement(t),t.removeEventListener(n,s,o)};if(document.documentElement.detachEvent&&document.detachEvent)return function(t,n,s){t=e.getElement(t),t.detachEvent("on"+n,s)};throw new Error("No known event model.")}(),cancelEvent:function(e){e.preventDefault()},eventIsCanceled:function(e){return e.defaultPrevented},stopEvent:function(e){e.stopPropagation()},createCallback:function(e,t){console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");var n,s=[];for(n=2;n<arguments.length;n++)s.push(arguments[n]);return function(){var n,o=s.concat([]);for(n=0;n<arguments.length;n++)o.push(arguments[n]);return t.apply(e,o)}},getUrlParameter:function(e){var t=i[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return t===null?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return e.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(t,n,s){e.isPlainObject(t)&&(n=t.success,s=t.error,l=t.withCredentials,i=t.headers,r=t.responseType||null,c=t.postData||null,t=t.url);var i,a,r,c,l,u,d=e.getUrlProtocol(t),o=e.createAjaxRequest();if(!e.isFunction(n))throw new Error("makeAjaxRequest requires a success callback");o.onreadystatechange=function(){o.readyState===4&&(o.onreadystatechange=function(){},o.status>=200&&o.status<300||o.status===0&&d!=="http:"&&d!=="https:"?n(o):e.isFunction(s)?s(o):e.console.error("AJAX request returned %d: %s",o.status,t))},u=c?"POST":"GET";try{if(o.open(u,t,!0),r&&(o.responseType=r),i)for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&o.setRequestHeader(a,i[a]);l&&(o.withCredentials=!0),o.send(c)}catch(t){e.console.error("%s while making AJAX request: %s",t.name,t.message),o.onreadystatechange=function(){},e.isFunction(s)&&s(o,t)}return o},jsonp:function(t){var n,o=t.url,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=t.callbackName||"openseadragon"+e.now(),r=window[s],c="$1"+s+"$2",l=t.param||"callback",a=t.callback,o=o.replace(/(=)\?(&|$)|\?\?/i,c);o+=(/\?/.test(o)?"&":"?")+l+"="+s,window[s]=function(t){if(r)window[s]=r;else try{delete window[s]}catch{}a&&e.isFunction(a)&&a(t)},n=document.createElement("script"),(t.async!==0[0]||t.async!==!1)&&(n.async="async"),t.scriptCharset&&(n.charset=t.scriptCharset),n.src=o,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=0[0])},i.insertBefore(n,i.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(window.DOMParser)e.parseXml=function(e){var n,t=null;return n=new DOMParser,t=n.parseFromString(e,"text/xml"),t};else throw new Error("Browser doesn't support XML DOM.");return e.parseXml(t)},parseJSON:function(t){return e.parseJSON=window.JSON.parse,e.parseJSON(t)},imageFormatSupported:function(e){return e||="",!!o[e.toLowerCase()]},setImageFormatsSupported:function(t){e.extend(o,t)}}),n=function(){},e.console=window.console||{log:n,debug:n,info:n,warn:n,error:n,assert:n},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var n,s,o={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},i={};(function(){var n,s,o,a,r,c,l,d,u=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(t.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(t.substring(t.indexOf("Edge")+5))):t.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(t.substring(t.indexOf("Edg")+4))):t.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):t.indexOf("Safari")>=0?(e.Browser.vendor=t.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):(l=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),l.exec(t)!==null&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(u);break}d=window.location.search.substring(1),a=d.split("&");for(o=0;o<a.length;o++)if(n=a[o],s=n.indexOf("="),s>0){r=n.substring(0,s),c=n.substring(s+1);try{i[r]=decodeURIComponent(c)}catch{e.console.error("Ignoring malformed URL parameter: %s=%s",r,c)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.console.error("Internet Explorer is not supported by OpenSeadragon")})(),function(t){if(i=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,a=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame,i&&a)e.requestAnimationFrame=function(){return i.apply(t,arguments)},e.cancelAnimationFrame=function(){return a.apply(t,arguments)};else{var o,i,a,n=[],s=[],r=0;e.requestAnimationFrame=function(t){return n.push([++r,t]),o||(o=setInterval(function(){if(n.length){var t=e.now(),i=s;for(s=n,n=i;s.length;)s.shift()[1](t)}else clearInterval(o),o=0[0]},1e3/50)),r},e.cancelAnimationFrame=function(e){var t,o;for(t=0,o=n.length;t<o;t+=1)if(n[t][0]===e){n.splice(t,1);return}for(t=0,o=s.length;t<o;t+=1)if(s[t][0]===e){s.splice(t,1);return}}}}(window);function a(e,t){return t&&e!==document.body?document.body:e.offsetParent}}(t),function(t,n){e.exports?e.exports=n():t.OpenSeadragon=n()}(B1,function(){return t}),function(e){class t{constructor(e){e||(e=[0,0,0,0,0,0,0,0,0]),this.values=e}static makeIdentity(){return new t([1,0,0,0,1,0,0,0,1])}static makeTranslation(e,n){return new t([1,0,0,0,1,0,e,n,1])}static makeRotation(e){var n=Math.cos(e),s=Math.sin(e);return new t([n,-s,0,s,n,0,0,0,1])}static makeScaling(e,n){return new t([e,0,0,0,n,0,0,0,1])}multiply(e){let n=this.values,s=e.values;var o=n[0],i=n[1],a=n[2],r=n[3],c=n[4],l=n[5],d=n[6],u=n[7],h=n[8],m=s[0],f=s[1],p=s[2],g=s[3],v=s[4],b=s[5],j=s[6],y=s[7],_=s[8];return new t([m*o+f*r+p*d,m*i+f*c+p*u,m*a+f*l+p*h,g*o+v*r+b*d,g*i+v*c+b*u,g*a+v*l+b*h,j*o+y*r+_*d,j*i+y*c+_*u,j*a+y*l+_*h])}}e.Mat3=t}(t),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(t){return t.requestFullscreen().catch(function(t){e.console.error("Fullscreen request failed: ",t)})},t.exitFullScreen=function(){document.exitFullscreen().catch(function(t){e.console.error("Error while exiting fullscreen: ",t)})},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return t.getFullScreenElement()!==null},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(t),function(e){e.EventSource=function(){this.events={},this._rejectedEventList={}},e.EventSource.prototype={addOnceHandler:function(e,t,n,s,o){i=this,s||=1;var i,a=0,r=function(n){return a++,a===s&&i.removeHandler(e,r),t(n)};return this.addHandler(e,r,n,o)},addHandler:function(t,n,s,o){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,t))return e.console.error(`Error adding handler for ${t}. ${this._rejectedEventList[t]}`),!1;if(i=this.events[t],i||(this.events[t]=i=[]),n&&e.isFunction(n)){var i,a=i.length,r={handler:n,userData:s||null,priority:o||0};for(i[a]=r;a>0&&i[a-1].priority<i[a].priority;)i[a]=i[a-1],i[a-1]=r,a--}return!0},removeHandler:function(t,n){var o,s=this.events[t],i=[];if(s&&e.isArray(s)){for(o=0;o<s.length;o++)s[o].handler!==n&&i.push(s[o]);this.events[t]=i}},numberOfHandlers:function(e){var t=this.events[e];return t?t.length:0},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return!t||!t.length?null:(t=t.length===1?[t[0]]:Array.apply(null,t),function(e,n){var s,o=t.length;for(s=0;s<o;s++)t[s]&&(n.eventSource=e,n.userData=t[s].userData,t[s].handler(n))})},raiseEvent:function(t,n){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,t))return e.console.error(`Error adding handler for ${t}. ${this._rejectedEventList[t]}`),!1;var s=this.getHandler(t);return s&&s(this,n||{}),!0},rejectEventHandler(e,t=""){this._rejectedEventList[e]=t},allowEventHandler(e){delete this._rejectedEventList[e]}}}(t),function(e){var m,o={};e.MouseTracker=function(t){var n,s=arguments;e.isPlainObject(t)||(t={element:s[0],clickTimeThreshold:s[1],clickDistThreshold:s[2]}),this.hash=Math.random(),this.element=e.getElement(t.element),this.clickTimeThreshold=t.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=t.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=t.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=t.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=t.userData||null,this.stopDelay=t.stopDelay||50,this.preProcessEventHandler=t.preProcessEventHandler||null,this.contextMenuHandler=t.contextMenuHandler||null,this.enterHandler=t.enterHandler||null,this.leaveHandler=t.leaveHandler||null,this.exitHandler=t.exitHandler||null,this.overHandler=t.overHandler||null,this.outHandler=t.outHandler||null,this.pressHandler=t.pressHandler||null,this.nonPrimaryPressHandler=t.nonPrimaryPressHandler||null,this.releaseHandler=t.releaseHandler||null,this.nonPrimaryReleaseHandler=t.nonPrimaryReleaseHandler||null,this.moveHandler=t.moveHandler||null,this.scrollHandler=t.scrollHandler||null,this.clickHandler=t.clickHandler||null,this.dblClickHandler=t.dblClickHandler||null,this.dragHandler=t.dragHandler||null,this.dragEndHandler=t.dragEndHandler||null,this.pinchHandler=t.pinchHandler||null,this.stopHandler=t.stopHandler||null,this.keyDownHandler=t.keyDownHandler||null,this.keyUpHandler=t.keyUpHandler||null,this.keyHandler=t.keyHandler||null,this.focusHandler=t.focusHandler||null,this.blurHandler=t.blurHandler||null,n=this,o[this.hash]={click:function(e){re(n,e)},dblclick:function(e){R(n,e)},keydown:function(e){ie(n,e)},keyup:function(e){oe(n,e)},keypress:function(e){te(n,e)},focus:function(e){ee(n,e)},blur:function(e){J(n,e)},contextmenu:function(e){Z(n,e)},wheel:function(e){ae(n,e)},mousewheel:function(e){h(n,e)},DOMMouseScroll:function(e){h(n,e)},MozMousePixelScroll:function(e){h(n,e)},losecapture:function(e){U(n,e)},mouseenter:function(e){N(n,e)},mouseleave:function(e){D(n,e)},mouseover:function(e){p(n,e)},mouseout:function(e){T(n,e)},mousedown:function(e){F(n,e)},mouseup:function(e){M(n,e)},mousemove:function(e){A(n,e)},touchstart:function(e){W(n,e)},touchend:function(e){V(n,e)},touchmove:function(e){B(n,e)},touchcancel:function(e){I(n,e)},gesturestart:function(e){H(n,e)},gesturechange:function(e){P(n,e)},gotpointercapture:function(e){Y(n,e)},lostpointercapture:function(e){G(n,e)},pointerenter:function(e){N(n,e)},pointerleave:function(e){D(n,e)},pointerover:function(e){p(n,e)},pointerout:function(e){T(n,e)},pointerdown:function(e){F(n,e)},pointerup:function(e){M(n,e)},pointermove:function(e){A(n,e)},pointercancel:function(e){L(n,e)},pointerupcaptured:function(e){$(n,e)},pointermovecaptured:function(e){K(n,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),t.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){C(this),this.element=null,o[this.hash]=null,delete o[this.hash]},isTracking:function(){return o[this.hash].tracking},setTracking:function(e){return e?q(this):C(this),this},getActivePointersListByType:function(t){var s,i,n=o[this.hash],a=n?n.activePointersLists.length:0;for(s=0;s<a;s++)if(n.activePointersLists[s].type===t)return n.activePointersLists[s];return i=new e.MouseTracker.GesturePointList(t),n&&n.activePointersLists.push(i),i},getActivePointerCount:function(){var e,t=o[this.hash],s=t.activePointersLists.length,n=0;for(e=0;e<s;e++)n+=t.activePointersLists[e].getLength();return n},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},m=function(){try{return window.self!==window.top}catch{return!0}}();function O(e){try{return e.addEventListener&&e.removeEventListener}catch{return!1}}e.MouseTracker.gesturePointVelocityTracker=function(){var t=[],s=0,n=0,o=function(e,t){return e.hash.toString()+t.type+t.id.toString()},i=function(){var s,o,i,r,c,l,d=t.length,a=e.now();for(r=a-n,n=a,i=0;i<d;i++)o=t[i],s=o.gPoint,s.direction=Math.atan2(s.currentPos.y-o.lastPos.y,s.currentPos.x-o.lastPos.x),c=o.lastPos.distanceTo(s.currentPos),o.lastPos=s.currentPos,l=1e3*c/(r+1),s.speed=.75*l+.25*s.speed},a=function(a,r){var c=o(a,r);t.push({guid:c,gPoint:r,lastPos:r.currentPos}),t.length===1&&(n=e.now(),s=window.setInterval(i,50))},r=function(e,n){var i,r=o(e,n),a=t.length;for(i=0;i<a;i++)if(t[i].guid===r){t.splice(i,1),a--,a===0&&window.clearInterval(s);break}};return{addPoint:a,removePoint:r}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==0[0]?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],e.MouseTracker.wheelEventName==="DOMMouseScroll"&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var t=document.createElement("div");return e.isFunction(t.setPointerCapture)&&e.isFunction(t.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function x(e){var t,n,i,a,r,s=o[e.hash],c=s.activePointersLists.length;for(n=0;n<c;n++)if(i=s.activePointersLists[n],i.getLength()>0){for(a=[],r=i.asArray(),t=0;t<r.length;t++)a.push(r[t]);for(t=0;t<a.length;t++)l(e,i,a[t])}for(n=0;n<c;n++)s.activePointersLists.pop();s.sentDragEvent=!1}function q(t){var n,s,i=o[t.hash];if(!i.tracking){for(s=0;s<e.MouseTracker.subscribeEvents.length;s++)n=e.MouseTracker.subscribeEvents[s],e.addEvent(t.element,n,i[n],n===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});x(t),i.tracking=!0}}function C(t){var n,i,s=o[t.hash];if(s.tracking){for(n=0;n<e.MouseTracker.subscribeEvents.length;n++)i=e.MouseTracker.subscribeEvents[n],e.removeEvent(t.element,i,s[i],!1);x(t),s.tracking=!1}}function E(e,t){var n=o[e.hash];if(t==="pointerevent")return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if(t==="mouse")return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if(t==="touch")return{upName:"touchend",upHandler:n.touchendcaptured,moveName:"touchmove",moveHandler:n.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function X(t,n){var s;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{t.element.setPointerCapture(n.id)}catch{e.console.warn("setPointerCapture() called on invalid pointer ID");return}else t.element.setCapture(!0);else s=E(t,e.MouseTracker.havePointerEvents?"pointerevent":n.type),m&&O(window.top)&&e.addEvent(window.top,s.upName,s.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,s.upName,s.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,s.moveName,s.moveHandler,!0);a(t,n,!0)}function g(t,n){var s,o,i;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(i=t.getActivePointersListByType(n.type),o=i.getById(n.id),!o||!o.captured)return;try{t.element.releasePointerCapture(n.id)}catch{}}else t.element.releaseCapture();else s=E(t,e.MouseTracker.havePointerEvents?"pointerevent":n.type),m&&O(window.top)&&e.removeEvent(window.top,s.upName,s.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,s.moveName,s.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,s.upName,s.upHandler,!0);a(t,n,!1)}function r(t){return e.MouseTracker.havePointerEvents?t.pointerId:e.MouseTracker.mousePointerId}function s(t){return e.MouseTracker.havePointerEvents&&t.pointerType?t.pointerType:"mouse"}function c(t){return!e.MouseTracker.havePointerEvents||t.isPrimary}function i(t){return e.getMousePosition(t)}function z(e,t){return n(i(e),t)}function n(t,n){var s=e.getElementOffset(n);return t.minus(s)}function d(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function re(n,s){var o={originalEvent:s,eventType:"click",pointerType:"mouse",isEmulated:!1};t(n,o),o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function R(n,s){var o={originalEvent:s,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};t(n,o),o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function ie(n,s){var i=null,o={originalEvent:s,eventType:"keydown",pointerType:"",isEmulated:!1};t(n,o),n.keyDownHandler&&!o.preventGesture&&!o.defaultPrevented&&(i={eventSource:n,keyCode:s.keyCode?s.keyCode:s.charCode,ctrl:s.ctrlKey,shift:s.shiftKey,alt:s.altKey,meta:s.metaKey,originalEvent:s,preventDefault:o.preventDefault||o.defaultPrevented,userData:n.userData},n.keyDownHandler(i)),(i&&i.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function oe(n,s){var i=null,o={originalEvent:s,eventType:"keyup",pointerType:"",isEmulated:!1};t(n,o),n.keyUpHandler&&!o.preventGesture&&!o.defaultPrevented&&(i={eventSource:n,keyCode:s.keyCode?s.keyCode:s.charCode,ctrl:s.ctrlKey,shift:s.shiftKey,alt:s.altKey,meta:s.metaKey,originalEvent:s,preventDefault:o.preventDefault||o.defaultPrevented,userData:n.userData},n.keyUpHandler(i)),(i&&i.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function te(n,s){var i=null,o={originalEvent:s,eventType:"keypress",pointerType:"",isEmulated:!1};t(n,o),n.keyHandler&&!o.preventGesture&&!o.defaultPrevented&&(i={eventSource:n,keyCode:s.keyCode?s.keyCode:s.charCode,ctrl:s.ctrlKey,shift:s.shiftKey,alt:s.altKey,meta:s.metaKey,originalEvent:s,preventDefault:o.preventDefault||o.defaultPrevented,userData:n.userData},n.keyHandler(i)),(i&&i.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function ee(e,n){var s={originalEvent:n,eventType:"focus",pointerType:"",isEmulated:!1};t(e,s),e.focusHandler&&!s.preventGesture&&e.focusHandler({eventSource:e,originalEvent:n,userData:e.userData})}function J(e,n){var s={originalEvent:n,eventType:"blur",pointerType:"",isEmulated:!1};t(e,s),e.blurHandler&&!s.preventGesture&&e.blurHandler({eventSource:e,originalEvent:n,userData:e.userData})}function Z(s,o){var r=null,a={originalEvent:o,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};t(s,a),s.contextMenuHandler&&!a.preventGesture&&!a.defaultPrevented&&(r={eventSource:s,position:n(i(o),s.element),originalEvent:a.originalEvent,preventDefault:a.preventDefault||a.defaultPrevented,userData:s.userData},s.contextMenuHandler(r)),(r&&r.preventDefault||a.preventDefault&&!a.defaultPrevented)&&e.cancelEvent(o),a.stopPropagation&&e.stopEvent(o)}function ae(e,t){k(e,t,t)}function h(t,n){var s={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:n.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};e.MouseTracker.wheelEventName==="mousewheel"?s.deltaY=-n.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:s.deltaY=n.detail,k(t,s,n)}function k(n,s,o){var r=0,a=null,r=s.deltaY?s.deltaY<0?1:-1:0,i={originalEvent:s,eventType:"wheel",pointerType:"mouse",isEmulated:s!==o};t(n,i),n.scrollHandler&&!i.preventGesture&&!i.defaultPrevented&&(a={eventSource:n,pointerType:"mouse",position:z(s,n.element),scroll:r,shift:s.shiftKey,isTouchEvent:!1,originalEvent:o,preventDefault:i.preventDefault||i.defaultPrevented,userData:n.userData},n.scrollHandler(a)),i.stopPropagation&&e.stopEvent(o),(a&&a.preventDefault||i.preventDefault&&!i.defaultPrevented)&&e.cancelEvent(o)}function U(n,s){var i={id:e.MouseTracker.mousePointerId,type:"mouse"},o={originalEvent:s,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};t(n,o),s.target===n.element&&a(n,i,!1),o.stopPropagation&&e.stopEvent(s)}function W(n,s){var o,r,c,l=s.changedTouches.length,d=n.getActivePointersListByType("touch"),u=e.now();d.getLength()>s.touches.length-l&&e.console.warn("Tracked touch contact count doesn't match event.touches.length"),o={originalEvent:s,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(t(n,o),r=0;r<l;r++)c={id:s.changedTouches[r].identifier,type:"touch",isPrimary:d.getLength()===0,currentPos:i(s.changedTouches[r]),currentTime:u},w(n,o,c),y(n,o,c,0),a(n,c,!0);o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function V(n,s){var r,c,d=s.changedTouches.length,l=e.now(),o={originalEvent:s,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(t(n,o),r=0;r<d;r++)c={id:s.changedTouches[r].identifier,type:"touch",currentPos:i(s.changedTouches[r]),currentTime:l},j(n,o,c,0),a(n,c,!1),_(n,o,c);o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(s),o.stopPropagation&&e.stopEvent(s)}function B(n,s){var o,r,l=s.changedTouches.length,c=e.now(),a={originalEvent:s,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(t(n,a),o=0;o<l;o++)r={id:s.changedTouches[o].identifier,type:"touch",currentPos:i(s.changedTouches[o]),currentTime:c},b(n,a,r);a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(s),a.stopPropagation&&e.stopEvent(s)}function I(n,s){var o,a,r=s.changedTouches.length,i={originalEvent:s,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(t(n,i),o=0;o<r;o++)a={id:s.changedTouches[o].identifier,type:"touch"},v(n,i,a);i.stopPropagation&&e.stopEvent(s)}function H(t,n){return e.eventIsCanceled(n)||n.preventDefault(),!1}function P(t,n){return e.eventIsCanceled(n)||n.preventDefault(),!1}function Y(n,o){var i={originalEvent:o,eventType:"gotpointercapture",pointerType:s(o),isEmulated:!1};t(n,i),o.target===n.element&&a(n,{id:o.pointerId,type:s(o)},!0),i.stopPropagation&&e.stopEvent(o)}function G(n,o){var i={originalEvent:o,eventType:"lostpointercapture",pointerType:s(o),isEmulated:!1};t(n,i),o.target===n.element&&a(n,{id:o.pointerId,type:s(o)},!1),i.stopPropagation&&e.stopEvent(o)}function N(n,o){var a={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},l={originalEvent:o,eventType:"pointerenter",pointerType:a.type,isEmulated:!1};t(n,l),w(n,l,a)}function D(n,o){var a={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},l={originalEvent:o,eventType:"pointerleave",pointerType:a.type,isEmulated:!1};t(n,l),_(n,l,a)}function p(n,o){var l={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},a={originalEvent:o,eventType:"pointerover",pointerType:l.type,isEmulated:!1};t(n,a),ne(n,a,l),a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(o),a.stopPropagation&&e.stopEvent(o)}function T(n,o){var l={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},a={originalEvent:o,eventType:"pointerout",pointerType:l.type,isEmulated:!1};t(n,a),se(n,a,l),a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(o),a.stopPropagation&&e.stopEvent(o)}function F(n,o){var d={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},u=e.MouseTracker.havePointerEvents&&d.type==="touch",l={originalEvent:o,eventType:"pointerdown",pointerType:d.type,isEmulated:!1};t(n,l),y(n,l,d,o.button),l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(o),l.stopPropagation&&e.stopEvent(o),l.shouldCapture&&(u?a(n,d,!0):X(n,d))}function M(e,t){S(e,t)}function $(t,n){var o=t.getActivePointersListByType(s(n));o.getById(n.pointerId)&&S(t,n),e.stopEvent(n)}function S(n,o){var d={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},l={originalEvent:o,eventType:"pointerup",pointerType:d.type,isEmulated:!1};t(n,l),j(n,l,d,o.button),l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(o),l.stopPropagation&&e.stopEvent(o),l.shouldReleaseCapture&&(o.target===n.element?g(n,d):a(n,d,!1))}function A(e,t){f(e,t)}function K(t,n){var o=t.getActivePointersListByType(s(n));o.getById(n.pointerId)&&f(t,n),e.stopEvent(n)}function f(n,o){var l={id:r(o),type:s(o),isPrimary:c(o),currentPos:i(o),currentTime:e.now()},a={originalEvent:o,eventType:"pointermove",pointerType:l.type,isEmulated:!1};t(n,a),b(n,a,l),a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(o),a.stopPropagation&&e.stopEvent(o)}function L(n,o){var a={id:o.pointerId,type:s(o)},i={originalEvent:o,eventType:"pointercancel",pointerType:a.type,isEmulated:!1};t(n,i),v(n,i,a),i.stopPropagation&&e.stopEvent(o)}function u(e,t){return t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function l(t,n,s){var o,i=n.getById(s.id);return i?(i.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),g(t,i)),n.removeContact(),o=n.removeById(s.id)):o=n.getLength(),o}function Q(e,t){switch(t.eventType){case"pointermove":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"pointerdown":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"pointerup":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"wheel":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasScrollHandler,t.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":t.isStoppable=!0,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"click":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.clickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;case"dblclick":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.dblClickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:t.isStoppable=!1,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break}}function t(t,n){n.eventSource=t,n.eventPhase=n.originalEvent&&typeof n.originalEvent.eventPhase<"u"?n.originalEvent.eventPhase:0,n.defaultPrevented=e.eventIsCanceled(n.originalEvent),n.shouldCapture=!1,n.shouldReleaseCapture=!1,n.userData=t.userData,Q(t,n),t.preProcessEventHandler&&t.preProcessEventHandler(n)}function a(t,n,s){var o=t.getActivePointersListByType(n.type),i=o.getById(n.id);i?s&&!i.captured?(i.captured=!0,o.captureCount++):!s&&i.captured&&(i.captured=!1,o.captureCount--,o.captureCount<0&&(o.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function w(e,t,s){var i=e.getActivePointersListByType(s.type),o=i.getById(s.id);o?(o.insideElement=!0,o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=s.currentPos,o.currentTime=s.currentTime,s=o):(s.captured=!1,s.insideElementPressed=!1,s.insideElement=!0,u(i,s)),e.enterHandler&&e.enterHandler({eventSource:e,pointerType:s.type,position:n(s.currentPos,e.element),buttons:i.buttons,pointers:e.getActivePointerCount(),insideElementPressed:s.insideElementPressed,buttonDownAny:i.buttons!==0,isTouchEvent:s.type==="touch",originalEvent:t.originalEvent,userData:e.userData})}function _(e,t,s){var a,i=e.getActivePointersListByType(s.type),o=i.getById(s.id);o?(o.captured?(o.insideElement=!1,o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=s.currentPos,o.currentTime=s.currentTime):l(e,i,o),s=o):(s.captured=!1,s.insideElementPressed=!1),(e.leaveHandler||e.exitHandler)&&(a={eventSource:e,pointerType:s.type,position:s.currentPos&&n(s.currentPos,e.element),buttons:i.buttons,pointers:e.getActivePointerCount(),insideElementPressed:s.insideElementPressed,buttonDownAny:i.buttons!==0,isTouchEvent:s.type==="touch",originalEvent:t.originalEvent,userData:e.userData},e.leaveHandler&&e.leaveHandler(a),e.exitHandler&&e.exitHandler(a))}function ne(e,t,s){var o=e.getActivePointersListByType(s.type),i=o.getById(s.id);i?s=i:(s.captured=!1,s.insideElementPressed=!1),e.overHandler&&e.overHandler({eventSource:e,pointerType:s.type,position:n(s.currentPos,e.element),buttons:o.buttons,pointers:e.getActivePointerCount(),insideElementPressed:s.insideElementPressed,buttonDownAny:o.buttons!==0,isTouchEvent:s.type==="touch",originalEvent:t.originalEvent,userData:e.userData})}function se(e,t,s){var o=e.getActivePointersListByType(s.type),i=o.getById(s.id);i?s=i:(s.captured=!1,s.insideElementPressed=!1),e.outHandler&&e.outHandler({eventSource:e,pointerType:s.type,position:s.currentPos&&n(s.currentPos,e.element),buttons:o.buttons,pointers:e.getActivePointerCount(),insideElementPressed:s.insideElementPressed,buttonDownAny:o.buttons!==0,isTouchEvent:s.type==="touch",originalEvent:t.originalEvent,userData:e.userData})}function y(t,s,i,a){var c,l=o[t.hash],r=t.getActivePointersListByType(i.type);if(typeof s.originalEvent.buttons<"u"?r.buttons=s.originalEvent.buttons:a===0?r.buttons|=1:a===1?r.buttons|=4:a===2?r.buttons|=2:a===3?r.buttons|=8:a===4?r.buttons|=16:a===5&&(r.buttons|=32),a!==0){s.shouldCapture=!1,s.shouldReleaseCapture=!1,t.nonPrimaryPressHandler&&!s.preventGesture&&!s.defaultPrevented&&(s.preventDefault=!0,t.nonPrimaryPressHandler({eventSource:t,pointerType:i.type,position:n(i.currentPos,t.element),button:a,buttons:r.buttons,isTouchEvent:i.type==="touch",originalEvent:s.originalEvent,userData:t.userData}));return}c=r.getById(i.id),c?(c.insideElementPressed=!0,c.insideElement=!0,c.originalTarget=s.originalEvent.target,c.contactPos=i.currentPos,c.contactTime=i.currentTime,c.lastPos=c.currentPos,c.lastTime=c.currentTime,c.currentPos=i.currentPos,c.currentTime=i.currentTime,i=c):(i.captured=!1,i.insideElementPressed=!0,i.insideElement=!0,i.originalTarget=s.originalEvent.target,u(r,i)),r.addContact(),!s.preventGesture&&!s.defaultPrevented?(s.shouldCapture=!0,s.shouldReleaseCapture=!1,s.preventDefault=!0,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,i),r.contacts===1?t.pressHandler&&!s.preventGesture&&t.pressHandler({eventSource:t,pointerType:i.type,position:n(i.contactPos,t.element),buttons:r.buttons,isTouchEvent:i.type==="touch",originalEvent:s.originalEvent,userData:t.userData}):r.contacts===2&&t.pinchHandler&&i.type==="touch"&&(l.pinchGPoints=r.asArray(),l.lastPinchDist=l.currentPinchDist=l.pinchGPoints[0].currentPos.distanceTo(l.pinchGPoints[1].currentPos),l.lastPinchCenter=l.currentPinchCenter=d(l.pinchGPoints[0].currentPos,l.pinchGPoints[1].currentPos))):(s.shouldCapture=!1,s.shouldReleaseCapture=!1)}function j(t,s,i,a){var r,m,f,p,h=o[t.hash],c=t.getActivePointersListByType(i.type),g=!1;if(typeof s.originalEvent.buttons<"u"?c.buttons=s.originalEvent.buttons:a===0?c.buttons^=-2:a===1?c.buttons^=-5:a===2?c.buttons^=-3:a===3?c.buttons^=-9:a===4?c.buttons^=-17:a===5&&(c.buttons^=-33),s.shouldCapture=!1,a!==0){s.shouldReleaseCapture=!1,t.nonPrimaryReleaseHandler&&!s.preventGesture&&!s.defaultPrevented&&(s.preventDefault=!0,t.nonPrimaryReleaseHandler({eventSource:t,pointerType:i.type,position:n(i.currentPos,t.element),button:a,buttons:c.buttons,isTouchEvent:i.type==="touch",originalEvent:s.originalEvent,userData:t.userData}));return}r=c.getById(i.id),r?(c.removeContact(),r.captured&&(g=!0),r.lastPos=r.currentPos,r.lastTime=r.currentTime,r.currentPos=i.currentPos,r.currentTime=i.currentTime,r.insideElement||l(t,c,r),m=r.currentPos,p=r.currentTime):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,u(c,i),r=i),!s.preventGesture&&!s.defaultPrevented&&(g?(s.shouldReleaseCapture=!0,s.preventDefault=!0,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,r),c.contacts===0?(t.releaseHandler&&m&&t.releaseHandler({eventSource:t,pointerType:r.type,position:n(m,t.element),buttons:c.buttons,insideElementPressed:r.insideElementPressed,insideElementReleased:r.insideElement,isTouchEvent:r.type==="touch",originalEvent:s.originalEvent,userData:t.userData}),t.dragEndHandler&&h.sentDragEvent&&t.dragEndHandler({eventSource:t,pointerType:r.type,position:n(r.currentPos,t.element),speed:r.speed,direction:r.direction,shift:s.originalEvent.shiftKey,isTouchEvent:r.type==="touch",originalEvent:s.originalEvent,userData:t.userData}),h.sentDragEvent=!1,(t.clickHandler||t.dblClickHandler)&&r.insideElement&&(f=p-r.contactTime<=t.clickTimeThreshold&&r.contactPos.distanceTo(m)<=t.clickDistThreshold,t.clickHandler&&t.clickHandler({eventSource:t,pointerType:r.type,position:n(r.currentPos,t.element),quick:f,shift:s.originalEvent.shiftKey,isTouchEvent:r.type==="touch",originalEvent:s.originalEvent,originalTarget:r.originalTarget,userData:t.userData}),t.dblClickHandler&&f&&(c.clicks++,c.clicks===1?(h.lastClickPos=m,h.dblClickTimeOut=setTimeout(function(){c.clicks=0},t.dblClickTimeThreshold)):c.clicks===2&&(clearTimeout(h.dblClickTimeOut),c.clicks=0,h.lastClickPos.distanceTo(m)<=t.dblClickDistThreshold&&t.dblClickHandler({eventSource:t,pointerType:r.type,position:n(r.currentPos,t.element),shift:s.originalEvent.shiftKey,isTouchEvent:r.type==="touch",originalEvent:s.originalEvent,userData:t.userData}),h.lastClickPos=null)))):c.contacts===2&&t.pinchHandler&&r.type==="touch"&&(h.pinchGPoints=c.asArray(),h.lastPinchDist=h.currentPinchDist=h.pinchGPoints[0].currentPos.distanceTo(h.pinchGPoints[1].currentPos),h.lastPinchCenter=h.currentPinchCenter=d(h.pinchGPoints[0].currentPos,h.pinchGPoints[1].currentPos))):(s.shouldReleaseCapture=!1,t.releaseHandler&&m&&(t.releaseHandler({eventSource:t,pointerType:r.type,position:n(m,t.element),buttons:c.buttons,insideElementPressed:r.insideElementPressed,insideElementReleased:r.insideElement,isTouchEvent:r.type==="touch",originalEvent:s.originalEvent,userData:t.userData}),s.preventDefault=!0)))}function b(e,t,s){var i,c,l,a=o[e.hash],r=e.getActivePointersListByType(s.type);if(typeof t.originalEvent.buttons<"u"&&(r.buttons=t.originalEvent.buttons),i=r.getById(s.id),i)i.lastPos=i.currentPos,i.lastTime=i.currentTime,i.currentPos=s.currentPos,i.currentTime=s.currentTime;else return;t.shouldCapture=!1,t.shouldReleaseCapture=!1,e.stopHandler&&s.type==="mouse"&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout(function(){ce(e,t.originalEvent,s.type)},e.stopDelay)),r.contacts===0?e.moveHandler&&e.moveHandler({eventSource:e,pointerType:s.type,position:n(s.currentPos,e.element),buttons:r.buttons,isTouchEvent:s.type==="touch",originalEvent:t.originalEvent,userData:e.userData}):r.contacts===1?(e.moveHandler&&(i=r.asArray()[0],e.moveHandler({eventSource:e,pointerType:i.type,position:n(i.currentPos,e.element),buttons:r.buttons,isTouchEvent:i.type==="touch",originalEvent:t.originalEvent,userData:e.userData})),e.dragHandler&&!t.preventGesture&&!t.defaultPrevented&&(i=r.asArray()[0],l=i.currentPos.minus(i.lastPos),e.dragHandler({eventSource:e,pointerType:i.type,position:n(i.currentPos,e.element),buttons:r.buttons,delta:l,speed:i.speed,direction:i.direction,shift:t.originalEvent.shiftKey,isTouchEvent:i.type==="touch",originalEvent:t.originalEvent,userData:e.userData}),t.preventDefault=!0,a.sentDragEvent=!0)):r.contacts===2&&(e.moveHandler&&(c=r.asArray(),e.moveHandler({eventSource:e,pointerType:c[0].type,position:n(d(c[0].currentPos,c[1].currentPos),e.element),buttons:r.buttons,isTouchEvent:c[0].type==="touch",originalEvent:t.originalEvent,userData:e.userData})),e.pinchHandler&&s.type==="touch"&&!t.preventGesture&&!t.defaultPrevented&&(l=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos),l!==a.currentPinchDist&&(a.lastPinchDist=a.currentPinchDist,a.currentPinchDist=l,a.lastPinchCenter=a.currentPinchCenter,a.currentPinchCenter=d(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos),e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:a.pinchGPoints,lastCenter:n(a.lastPinchCenter,e.element),center:n(a.currentPinchCenter,e.element),lastDistance:a.lastPinchDist,distance:a.currentPinchDist,shift:t.originalEvent.shiftKey,originalEvent:t.originalEvent,userData:e.userData}),t.preventDefault=!0)))}function v(e,t,n){var s=e.getActivePointersListByType(n.type),o=s.getById(n.id);o&&l(e,s,o)}function ce(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:z(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:n==="touch",originalEvent:t,userData:e.userData})}}(t),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,s){var o=t.parentNode;typeof n=="number"&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=typeof n.attachToViewer>"u"||n.attachToViewer,this.autoFade=typeof n.autoFade>"u"||n.autoFade,this.element=t,this.anchor=n.anchor,this.container=s,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof n.top=="number"?n.top+"px":n.top,this.wrapper.style.left=typeof n.left=="number"?n.left+"px":n.left,this.wrapper.style.height=typeof n.height=="number"?n.height+"px":n.height,this.wrapper.style.width=typeof n.width=="number"?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):o.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(t){this.wrapper.style.display=t?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){e.setElementOpacity(this.wrapper,t,!0)}}}(t),function(e){e.ControlDock=function(t){var n,s,o=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(Math.random()*1e6),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),e.getElementStyle(this.element).position==="static"&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%"),s=0;s<o.length;s++)n=o[s],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,s){n=e.getElement(n);var o=null;if(!(t(this,n)>=0)){switch(s.anchor){case e.ControlAnchor.TOP_RIGHT:o=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:o=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:o=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:o=this.container,n.style.margin="0px",n.style.padding="0px";break}this.controls.push(new e.Control(n,s,o)),n.style.display="inline-block"}},removeControl:function(n){n=e.getElement(n);var s=t(this,n);return s>=0&&(this.controls[s].destroy(),this.controls.splice(s,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}};function t(e,t){var n,s=e.controls;for(n=s.length-1;n>=0;n--)if(s[n].element===t)return n;return-1}}(t),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(t),function(e){var n={},V=1;e.Viewer=function(t){var a,i=arguments,s=this;e.isPlainObject(t)||(t={id:i[0],xmlPath:i.length>1?i[1]:0[0],prefixUrl:i.length>2?i[2]:0[0],controls:i.length>3?i[3]:0[0],overlays:i.length>4?i[4]:0[0]}),t.config&&(e.extend(!0,t,t.config),delete t.config);let d=["useCanvas"];if(t.drawerOptions=Object.assign({},d.reduce((e,n)=>(e[n]=t[n],delete t[n],e),{}),t.drawerOptions),e.extend(!0,this,{id:t.id,hash:t.hash||V++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,t),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");typeof n[this.hash]<"u"&&e.console.warn("Hash "+this.hash+" has already been used."),n[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);s._showMessage(n)}),e.ControlDock.call(this,t),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(e){e.width="100%",e.height="100%",e.overflow="hidden",e.position="absolute",e.top="0px",e.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),t.tabIndex!==""&&(this.canvas.tabIndex=t.tabIndex===0[0]?0:t.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,z),keyDownHandler:e.delegate(this,T),keyHandler:e.delegate(this,E),clickHandler:e.delegate(this,D),dblClickHandler:e.delegate(this,j),dragHandler:e.delegate(this,y),dragEndHandler:e.delegate(this,_),enterHandler:e.delegate(this,w),leaveHandler:e.delegate(this,O),pressHandler:e.delegate(this,x),releaseHandler:e.delegate(this,C),nonPrimaryPressHandler:e.delegate(this,v),nonPrimaryReleaseHandler:e.delegate(this,k),scrollHandler:e.delegate(this,F),pinchHandler:e.delegate(this,A),focusHandler:e.delegate(this,S),blurHandler:e.delegate(this,M)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,g),leaveHandler:e.delegate(this,p)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),n[this.hash].prevContainerSize=c(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){n[s.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(){s.source=s.world.getItemAt(0).source,n[s.hash].forceRedraw=!0,s._updateRequestId||(s._updateRequestId=l(s,u))}),this.world.addHandler("remove-item",function(){s.world.getItemCount()?s.source=s.world.getItemAt(0).source:s.source=null,n[s.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(){s.viewport&&s.viewport._setContentBounds(s.world.getHomeBounds(),s.world.getContentFactor())}),this.world.addHandler("item-index-change",function(){s.source=s.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:n[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:t.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(e.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=e.HTMLDrawer),delete this.drawerOptions.useCanvas);let r=Array.isArray(this.drawer)?this.drawer:[this.drawer];r.length===0&&(r=[e.DEFAULT_SETTINGS.drawer].flat(),e.console.warn("No valid drawers were selected. Using the default value.")),this.drawer=null;for(const e of r)if(this.requestDrawer(e,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw e.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(a=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(a,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(a=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(a,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),a=0;a<this.customControls.length;a++)this.addControl(this.customControls[a].id,{anchor:this.customControls[a].anchor});e.requestAnimationFrame(function(){o(s)}),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(t,n){if(s=this,this.close(),!t)return this;if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof n<"u"&&!isNaN(n)&&(this.initialPage=n),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(t)||(t=[t]),!t.length)return this;this._opening=!0;for(var s,i,l=t.length,o=0,r=0,c=function(){if(o+r===l)if(o){(s._firstOpen||!s.preserveViewport)&&(s.viewport.goHome(!0),s.viewport.update()),s._firstOpen=!1;var e,n=t[0];if(n.tileSource&&(n=n.tileSource),s.overlays&&!s.preserveOverlays)for(e=0;e<s.overlays.length;e++)s.currentOverlays[e]=h(s,s.overlays[e]);s._drawOverlays(),s._opening=!1,s.raiseEvent("open",{source:n})}else s._opening=!1,s.raiseEvent("open-failed",i)},d=function(t){(!e.isPlainObject(t)||!t.tileSource)&&(t={tileSource:t}),t.index!==0[0]&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),t.collectionImmediately===0[0]&&(t.collectionImmediately=!0);var n,a=t.success;t.success=function(e){if(o++,t.tileSource.overlays)for(var n=0;n<t.tileSource.overlays.length;n++)s.addOverlay(t.tileSource.overlays[n]);a&&a(e),c()},n=t.error,t.error=function(e){r++,i||(i=e),n&&n(e),c()},s.addTiledImage(t)},a=0;a<t.length;a++)d(t[a]);return this},close:function(){return n[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),n[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(n[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),n[this.navigator.hash]=null,delete n[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),n[this.hash]=null,delete n[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},requestDrawer(t,n){const a={mainDrawer:!0,redrawImmediately:!0,drawerOptions:null};n=e.extend(!0,a,n);const o=n.mainDrawer,r=n.redrawImmediately,c=n.drawerOptions,i=this.drawer;let s=null;if(t&&t.prototype instanceof e.DrawerBase?(s=t,t="custom"):typeof t=="string"&&(s=e.determineDrawer(t)),s||e.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."),s&&s.isSupported()){i&&o&&i.destroy();const e=new s({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:c||this.drawerOptions[t]});return o&&(this.drawer=e,r&&this.forceRedraw()),e}return!1},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t&&=this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?i(this):o(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},setAjaxHeaders:function(t,n){if(t===null&&(t={}),!e.isPlainObject(t)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(n===0[0]&&(n=!0),this.ajaxHeaders=t,n){for(var o,s=0;s<this.world.getItemCount();s++)this.world.getItemAt(s)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(o in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[o].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(e){this.buttonGroup.addButton(e)},isFullPage:function(){return n[this.hash]&&n[this.hash].fullPage},setFullPage:function(t){var a,r,l,d,u,i=document.body,s=i.style,o=document.documentElement.style,c=this;if(t===this.isFullPage())return this;if(l={fullPage:t,preventDefaultAction:!1},this.raiseEvent("pre-full-page",l),l.preventDefaultAction)return this;if(t&&this.element){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=s.margin,this.docMargin=o.margin,s.margin="0",o.margin="0",this.bodyPadding=s.padding,this.docPadding=o.padding,s.padding="0",o.padding="0",this.bodyWidth=s.width,this.docWidth=o.width,s.width="100%",o.width="100%",this.bodyHeight=s.height,this.docHeight=o.height,s.height="100%",o.height="100%",this.bodyDisplay=s.display,s.display="block",this.previousBody=[],n[this.hash].prevElementParent=this.element.parentNode,n[this.hash].prevNextSibling=this.element.nextSibling,n[this.hash].prevElementWidth=this.element.style.width,n[this.hash].prevElementHeight=this.element.style.height,r=i.childNodes.length,a=0;a<r;a++)this.previousBody.push(i.childNodes[0]),i.removeChild(i.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,i.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),i.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),n[this.hash].fullPage=!0,e.delegate(this,g)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,s.margin=this.bodyMargin,o.margin=this.docMargin,s.padding=this.bodyPadding,o.padding=this.docPadding,s.width=this.bodyWidth,o.width=this.docWidth,s.height=this.bodyHeight,o.height=this.docHeight,s.display=this.bodyDisplay,i.removeChild(this.element),r=this.previousBody.length,a=0;a<r;a++)i.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),n[this.hash].prevElementParent.insertBefore(this.element,n[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(i.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=n[this.hash].prevElementWidth,this.element.style.height=n[this.hash].prevElementHeight,d=0,u=function(){e.setPageScroll(c.pageScroll);var t=e.getPageScroll();d++,d<10&&(t.x!==c.pageScroll.x||t.y!==c.pageScroll.y)&&e.requestAnimationFrame(u)},e.requestAnimationFrame(u),n[this.hash].fullPage=!1,e.delegate(this,p)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var s,o,n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;if(o={fullScreen:t,preventDefaultAction:!1},this.raiseEvent("pre-full-screen",o),o.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%",s=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,s),e.removeEvent(document,e.fullScreenErrorEventName,s),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&setTimeout(function(){n.navigator.update(n.viewport)}),n.raiseEvent("full-screen",{fullScreen:t})},e.addEvent(document,e.fullScreenEventName,s),e.addEvent(document,e.fullScreenErrorEventName,s),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var s,n=this;t.replace&&(t.replaceItem=n.world.getItemAt(t.index)),this._hideMessage(),t.placeholderFillStyle===0[0]&&(t.placeholderFillStyle=this.placeholderFillStyle),t.opacity===0[0]&&(t.opacity=this.opacity),t.preload===0[0]&&(t.preload=this.preload),t.compositeOperation===0[0]&&(t.compositeOperation=this.compositeOperation),t.crossOriginPolicy===0[0]&&(t.crossOriginPolicy=t.tileSource.crossOriginPolicy!==0[0]?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),t.ajaxWithCredentials===0[0]&&(t.ajaxWithCredentials=this.ajaxWithCredentials),t.loadTilesWithAjax===0[0]&&(t.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(t.ajaxHeaders)||(t.ajaxHeaders={}),s={options:t};function o(e){for(var o=0;o<n._loadQueue.length;o++)if(n._loadQueue[o]===s){n._loadQueue.splice(o,1);break}n._loadQueue.length===0&&i(s),n.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function i(e){n.collectionMode&&(n.world.arrange({immediately:e.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}if(e.isArray(t.tileSource)){setTimeout(function(){o({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})});return}this._loadQueue.push(s);function a(){for(;n._loadQueue.length&&(t=n._loadQueue[0],!!t.tileSource);){if(n._loadQueue.splice(0,1),t.options.replace){var t,s,o,a=n.world.getIndexOfItem(t.options.replaceItem);a!==-1&&(t.options.index=a),n.world.removeItem(t.options.replaceItem)}s=new e.TiledImage({viewer:n,source:t.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,flipped:t.options.flipped,compositeOperation:t.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,maxTilesPerFrame:n.maxTilesPerFrame,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:n.debugMode,subPixelRoundingForTransparency:n.subPixelRoundingForTransparency}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.navigator&&(o=e.extend({},t.options,{replace:!1,originalTiledImage:s,tileSource:t.tileSource}),n.navigator.addTiledImage(o)),n.world.addItem(s,{index:t.options.index}),n._loadQueue.length===0&&i(t),n.world.getItemCount()===1&&!n.preserveViewport&&n.viewport.goHome(!0),t.options.success&&t.options.success({item:s})}}P(this,t.tileSource,t,function(e){s.tileSource=e,a()},function(e){e.options=t,o(e),a()})},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var s,n=this;return e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead."),s=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}}),this.addTiledImage(s),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return n[this.hash].forceRedraw=!0,this},forceResize:function(){n[this.hash].needsResize=!0,n[this.hash].forceResize=!0},bindSequenceControls:function(){var n=e.delegate(this,m),o=e.delegate(this,f),a=e.delegate(this,this.goToNextPage),r=e.delegate(this,this.goToPreviousPage),t=this.navImages,i=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(i=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:s(this.prefixUrl,t.previous.REST),srcGroup:s(this.prefixUrl,t.previous.GROUP),srcHover:s(this.prefixUrl,t.previous.HOVER),srcDown:s(this.prefixUrl,t.previous.DOWN),onRelease:r,onFocus:n,onBlur:o}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:s(this.prefixUrl,t.next.REST),srcGroup:s(this.prefixUrl,t.next.GROUP),srcHover:s(this.prefixUrl,t.next.HOVER),srcDown:s(this.prefixUrl,t.next.DOWN),onRelease:a,onFocus:n,onBlur:o}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),i&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var l=e.delegate(this,H),a=e.delegate(this,B),b=e.delegate(this,W),c=e.delegate(this,I),v=e.delegate(this,U),g=e.delegate(this,q),d=e.delegate(this,Y),p=e.delegate(this,G),h=e.delegate(this,X),u=e.delegate(this,Q),o=e.delegate(this,m),i=e.delegate(this,f),t=this.navImages,n=[],r=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(r=!1),this.showZoomControl&&(n.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:s(this.prefixUrl,t.zoomIn.REST),srcGroup:s(this.prefixUrl,t.zoomIn.GROUP),srcHover:s(this.prefixUrl,t.zoomIn.HOVER),srcDown:s(this.prefixUrl,t.zoomIn.DOWN),onPress:l,onRelease:a,onClick:b,onEnter:l,onExit:a,onFocus:o,onBlur:i})),n.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:s(this.prefixUrl,t.zoomOut.REST),srcGroup:s(this.prefixUrl,t.zoomOut.GROUP),srcHover:s(this.prefixUrl,t.zoomOut.HOVER),srcDown:s(this.prefixUrl,t.zoomOut.DOWN),onPress:c,onRelease:a,onClick:v,onEnter:c,onExit:a,onFocus:o,onBlur:i}))),this.showHomeControl&&n.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:s(this.prefixUrl,t.home.REST),srcGroup:s(this.prefixUrl,t.home.GROUP),srcHover:s(this.prefixUrl,t.home.HOVER),srcDown:s(this.prefixUrl,t.home.DOWN),onRelease:g,onFocus:o,onBlur:i})),this.showFullPageControl&&n.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:s(this.prefixUrl,t.fullpage.REST),srcGroup:s(this.prefixUrl,t.fullpage.GROUP),srcHover:s(this.prefixUrl,t.fullpage.HOVER),srcDown:s(this.prefixUrl,t.fullpage.DOWN),onRelease:d,onFocus:o,onBlur:i})),this.showRotationControl&&(n.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:s(this.prefixUrl,t.rotateleft.REST),srcGroup:s(this.prefixUrl,t.rotateleft.GROUP),srcHover:s(this.prefixUrl,t.rotateleft.HOVER),srcDown:s(this.prefixUrl,t.rotateleft.DOWN),onRelease:p,onFocus:o,onBlur:i})),n.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:s(this.prefixUrl,t.rotateright.REST),srcGroup:s(this.prefixUrl,t.rotateright.GROUP),srcHover:s(this.prefixUrl,t.rotateright.HOVER),srcDown:s(this.prefixUrl,t.rotateright.DOWN),onRelease:h,onFocus:o,onBlur:i}))),this.showFlipControl&&n.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:s(this.prefixUrl,t.flip.REST),srcGroup:s(this.prefixUrl,t.flip.GROUP),srcHover:s(this.prefixUrl,t.flip.HOVER),srcDown:s(this.prefixUrl,t.flip.DOWN),onRelease:u,onFocus:o,onBlur:i})),r?(this.buttonGroup=new e.ButtonGroup({buttons:n,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,K)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=n),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,n,s,o){if(e.isPlainObject(t)?i=t:i={element:t,location:n,placement:s,onDraw:o},t=e.getElement(i.element),a(this.currentOverlays,t)>=0)return this;var i,r=h(this,i);return this.currentOverlays.push(r),r.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:i.location,placement:i.placement}),this},updateOverlay:function(t,s,o){var i;return t=e.getElement(t),i=a(this.currentOverlays,t),i>=0&&(this.currentOverlays[i].update(s,o),n[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:s,placement:o})),this},removeOverlay:function(t){var s;return t=e.getElement(t),s=a(this.currentOverlays,t),s>=0&&(this.currentOverlays[s].destroy(),this.currentOverlays.splice(s,1),n[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return n[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),n=a(this.currentOverlays,t),n>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(!this.tileSources||this.tileSources.length-1===e?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var n=e.pixelDensityRatio,t=e.getCurrentPixelDensityRatio();n!==t&&(e.pixelDensityRatio=t,this.forceResize())},goToPreviousPage:function(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)},goToNextPage:function(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)},isAnimating:function(){return n[this.hash].animating}});function c(t){return t=e.getElement(t),new e.Point(t.clientWidth===0?1:t.clientWidth,t.clientHeight===0?1:t.clientHeight)}function P(t,n,s,o,i){var r,a=t;if(e.type(n)==="string")if(n.match(/^\s*<.*>\s*$/))n=e.parseXml(n);else if(n.match(/^\s*[{[].*[}\]]\s*$/))try{r=e.parseJSON(n),n=r}catch{}function c(e,t){e.ready?o(e):(e.addHandler("ready",function(){o(e)}),e.addHandler("open-failed",function(e){i({message:e.message,source:t})}))}setTimeout(function(){if(e.type(n)==="string")n=new e.TileSource({url:n,crossOriginPolicy:s.crossOriginPolicy!==0[0]?s.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:s.ajaxHeaders?s.ajaxHeaders:t.ajaxHeaders,splitHashDataForPost:t.splitHashDataForPost,success:function(e){o(e.tileSource)}}),n.addHandler("open-failed",function(e){i(e)});else if(e.isPlainObject(n)||n.nodeType)if(n.crossOriginPolicy===0[0]&&(s.crossOriginPolicy!==0[0]||t.crossOriginPolicy!==0[0])&&(n.crossOriginPolicy=s.crossOriginPolicy!==0[0]?s.crossOriginPolicy:t.crossOriginPolicy),n.ajaxWithCredentials===0[0]&&(n.ajaxWithCredentials=t.ajaxWithCredentials),e.isFunction(n.getTileUrl)){var r,d,l=new e.TileSource(n);l.getTileUrl=n.getTileUrl,o(l)}else{if(r=e.TileSource.determineType(a,n),!r){i({message:"Unable to load TileSource",source:n});return}d=r.prototype.configure.apply(a,[n]),c(new r(d),n)}else c(n,n)})}function h(t,n){if(n instanceof e.Overlay)return n;s=null,n.element?s=e.getElement(n.element):(c=n.id?n.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7),s=e.getElement(n.id),s||(s=document.createElement("a"),s.href="#/overlay/"+c),s.id=c,e.addClass(s,n.className?n.className:"openseadragon-overlay"));var s,o,i,c,d,u,l=n.location,a=n.width,r=n.height;return l||(d=n.x,u=n.y,n.px!==0[0]&&(o=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,a||0,r||0)),d=o.x,u=o.y,a=a!==0[0]?o.width:0[0],r=r!==0[0]?o.height:0[0]),l=new e.Point(d,u)),i=n.placement,i&&e.type(i)==="string"&&(i=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:s,location:l,placement:i,onDraw:n.onDraw,checkResize:n.checkResize,width:a,height:r,rotationMode:n.rotationMode})}function a(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function l(t,n){return e.requestAnimationFrame(function(){n(t)})}function d(t){e.requestAnimationFrame(function(){b(t)})}function o(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout(function(){d(t)},t.controlsFadeDelay))}function b(t){var n,s,o,i;if(t.controlsShouldFade){for(o=e.now(),i=o-t.controlsFadeBeginTime,n=1-i/t.controlsFadeLength,n=Math.min(1,n),n=Math.max(0,n),s=t.controls.length-1;s>=0;s--)t.controls[s].autoFade&&t.controls[s].setOpacity(n);n>0&&d(t)}}function i(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function m(){i(this)}function f(){o(this)}function z(e){var t={tracker:e.eventSource,position:e.position,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.raiseEvent("canvas-contextmenu",t),e.preventDefault=t.preventDefault}function T(t){var n={originalEvent:t.originalEvent,preventDefaultAction:!1,preventVerticalPan:t.preventVerticalPan||!this.panVertical,preventHorizontalPan:t.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",n),!n.preventDefaultAction&&!t.ctrl&&!t.alt&&!t.meta)switch(t.keyCode){case 38:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 40:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 37:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 39:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 87:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 83:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 65:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 68:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 82:t.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),t.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:t.preventDefault=!1;break}else t.preventDefault=!1}function E(e){var t={originalEvent:e.originalEvent};this.raiseEvent("canvas-key-press",t)}function D(t){var s,o,i=document.activeElement===this.canvas;i||this.canvas.focus(),this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),o={tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent,originalTarget:t.originalTarget,preventDefaultAction:!1},this.raiseEvent("canvas-click",o),!o.preventDefaultAction&&this.viewport&&t.quick&&(s=this.gestureSettingsByDeviceType(t.pointerType),s.clickToZoom===!0&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,s.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints()),s.dblClickDragToZoom&&(n[this.hash].draggingToZoom===!0?(n[this.hash].lastClickTime=null,n[this.hash].draggingToZoom=!1):n[this.hash].lastClickTime=e.now()))}function j(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints()))}function y(e){var t,s,o,a,i={tracker:e.eventSource,pointerType:e.pointerType,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-drag",i),s=this.gestureSettingsByDeviceType(e.pointerType),!i.preventDefaultAction&&this.viewport&&(s.dblClickDragToZoom&&n[this.hash].draggingToZoom?(a=this.zoomPerDblClickDrag**(e.delta.y/50),this.viewport.zoomBy(a)):s.dragToPan&&!n[this.hash].draggingToZoom&&((this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan)&&(t=this.viewport.deltaPointsFromPixels(e.delta.negate()),this.viewport.centerSpringX.target.value+=t.x,this.viewport.centerSpringY.target.value+=t.y,o=this.viewport.getConstrainedBounds(),this.viewport.centerSpringX.target.value-=t.x,this.viewport.centerSpringY.target.value-=t.y,o.xConstrained&&(e.delta.x=0),o.yConstrained&&(e.delta.y=0)),this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),s.flickEnabled&&!this.constrainDuringPan)))}function _(t){if(o={tracker:t.eventSource,pointerType:t.pointerType,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1},this.raiseEvent("canvas-drag-end",o),s=this.gestureSettingsByDeviceType(t.pointerType),!o.preventDefaultAction&&this.viewport){if(!n[this.hash].draggingToZoom&&s.dragToPan&&s.flickEnabled&&t.speed>=s.flickMinSpeed){i=0,this.panHorizontal&&(i=s.flickMomentum*t.speed*Math.cos(t.direction)),a=0,this.panVertical&&(a=s.flickMomentum*t.speed*Math.sin(t.direction));var s,o,i,a,r=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),c=this.viewport.pointFromPixel(new e.Point(r.x-i,r.y-a));this.viewport.panTo(c,!1)}this.viewport.applyConstraints()}s.dblClickDragToZoom&&n[this.hash].draggingToZoom===!0&&(n[this.hash].draggingToZoom=!1)}function w(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function O(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function x(t){if(this.raiseEvent("canvas-press",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent}),s=this.gestureSettingsByDeviceType(t.pointerType),s.dblClickDragToZoom){var s,o=n[this.hash].lastClickTime,i=e.now();if(o===null)return;i-o<this.dblClickTimeThreshold&&(n[this.hash].draggingToZoom=!0),n[this.hash].lastClickTime=null}}function C(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function v(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function k(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function A(e){if(t={tracker:e.eventSource,pointerType:e.pointerType,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1},this.raiseEvent("canvas-pinch",t),this.viewport&&(s=this.gestureSettingsByDeviceType(e.pointerType),s.pinchToZoom&&(!t.preventDefaultPanAction||!t.preventDefaultZoomAction)&&(n=this.viewport.pointFromPixel(e.center,!0),s.zoomToRefPoint&&!t.preventDefaultPanAction&&(i=this.viewport.pointFromPixel(e.lastCenter,!0),o=i.minus(n),this.panHorizontal||(o.x=0),this.panVertical||(o.y=0),this.viewport.panBy(o,!0)),t.preventDefaultZoomAction||this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),this.viewport.applyConstraints()),s.pinchRotate&&!t.preventDefaultRotateAction)){var t,n,s,o,i,a=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),r=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);n=this.viewport.pointFromPixel(e.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(a-r)*(180/Math.PI),n,!0)}}function S(e){this.raiseEvent("canvas-focus",{tracker:e.eventSource,originalEvent:e.originalEvent})}function M(e){this.raiseEvent("canvas-blur",{tracker:e.eventSource,originalEvent:e.originalEvent})}function F(t){var n,s,o,i=e.now(),a=i-this._lastScrollTime;a>this.minScrollDeltaTime?(this._lastScrollTime=i,n={tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",n),!n.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),s=this.gestureSettingsByDeviceType(t.pointerType),s.scrollToZoom&&(o=this.zoomPerScroll**t.scroll,this.viewport.zoomBy(o,s.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())),t.preventDefault=n.preventDefault):t.preventDefault=!0}function g(e){n[this.hash].mouseInside=!0,i(this),this.raiseEvent("container-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function p(e){e.pointers<1&&(n[this.hash].mouseInside=!1,n[this.hash].animating||o(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function u(e){L(e),e.isOpen()?e._updateRequestId=l(e,u):e._updateRequestId=!1}function N(t,s){var i,o=t.viewport,r=o.getZoom(),c=o.getCenter();if(o.resize(s,t.preserveImageSizeOnResize),o.panTo(c,!0),t.preserveImageSizeOnResize)i=n[t.hash].prevContainerSize.x/s.x;else{var a=new e.Point(0,0),l=new e.Point(n[t.hash].prevContainerSize.x,n[t.hash].prevContainerSize.y).distanceTo(a),d=new e.Point(s.x,s.y).distanceTo(a);i=d/l*n[t.hash].prevContainerSize.x/s.x}o.zoomTo(r*i,null,!0),n[t.hash].prevContainerSize=s,n[t.hash].forceRedraw=!0,n[t.hash].needsResize=!1,n[t.hash].forceResize=!1}function L(e){if(!e._opening&&!!n[e.hash]){(e.autoResize||n[e.hash].forceResize)&&(e._autoResizePolling&&(a=c(e.container),d=n[e.hash].prevContainerSize,a.equals(d)||(n[e.hash].needsResize=!0)),n[e.hash].needsResize&&N(e,a||c(e.container)));var s,a,l,d,r=e.viewport.update(),t=e.world.update(r)||r;r&&e.raiseEvent("viewport-change"),e.referenceStrip&&(t||=e.referenceStrip.update(e.viewport)),l=n[e.hash].animating,!l&&t&&(e.raiseEvent("animation-start"),i(e)),s=l&&!t,s&&(n[e.hash].animating=!1),(t||s||n[e.hash].forceRedraw||e.world.needsDraw())&&(R(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),n[e.hash].forceRedraw=!1,t&&e.raiseEvent("animation")),s&&(e.raiseEvent("animation-finish"),n[e.hash].mouseInside||o(e)),n[e.hash].animating=t}}function R(e){e.imageLoader.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}function s(e,t){return e?e+t:t}function H(){n[this.hash].lastZoomTime=e.now(),n[this.hash].zoomFactor=this.zoomPerSecond,n[this.hash].zooming=!0,r(this)}function I(){n[this.hash].lastZoomTime=e.now(),n[this.hash].zoomFactor=1/this.zoomPerSecond,n[this.hash].zooming=!0,r(this)}function B(){n[this.hash].zooming=!1}function r(t){e.requestAnimationFrame(e.delegate(t,$))}function $(){var t,s,o;n[this.hash].zooming&&this.viewport&&(t=e.now(),s=t-n[this.hash].lastZoomTime,o=n[this.hash].zoomFactor**(s/1e3),this.viewport.zoomBy(o),this.viewport.applyConstraints(),n[this.hash].lastZoomTime=t,r(this))}function W(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function U(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function K(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function q(){this.viewport&&this.viewport.goHome()}function Y(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function G(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e+=this.rotationIncrement:e-=this.rotationIncrement,this.viewport.setRotation(e)}}function X(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e-=this.rotationIncrement:e+=this.rotationIncrement,this.viewport.setRotation(e)}}function Q(){this.viewport.toggleFlip()}e.determineDrawer=function(n){for(let i in t){const o=t[i],s=o.prototype;if(s&&s instanceof t.DrawerBase&&e.isFunction(s.getType)&&s.getType.call(o)===n)return o}return null}}(t),function(e){e.Navigator=function(n){var l,d,h,c=n.viewer,r=this;n.element||n.id?(n.element?(n.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),n.element.id?n.id=n.element.id:n.id="navigator-"+e.now(),this.element=n.element):this.element=document.getElementById(n.id),n.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(n.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),n.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:n.autoFade},n.position&&(n.position==="BOTTOM_RIGHT"?n.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:n.position==="BOTTOM_LEFT"?n.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:n.position==="TOP_RIGHT"?n.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:n.position==="TOP_LEFT"?n.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:n.position==="ABSOLUTE"&&(n.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,n.controlOptions.top=n.top,n.controlOptions.left=n.left,n.controlOptions.height=n.height,n.controlOptions.width=n.width))),this.element.id=n.id,this.element.className+=" navigator",n=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},n,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:n.animationTime,autoResize:!1,minZoomImageRatio:1,background:n.background,opacity:n.opacity,borderColor:n.borderColor,displayRegionColor:n.displayRegionColor}),n.minPixelRatio=this.minPixelRatio=c.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),n.controlOptions.anchor!==e.ControlAnchor.NONE&&function(e,t){e.margin="0px",e.border=t+"px solid "+n.borderColor,e.padding="0px",e.background=n.background,e.opacity=n.opacity,e.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+n.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.zIndex=999999999,e.cursor="default",e.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),c.addControl(this.element,n.controlOptions),this._resizeWithViewer=n.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&n.controlOptions.anchor!==e.ControlAnchor.NONE,n.width&&n.height?(this.setWidth(n.width),this.setHeight(n.height)):this._resizeWithViewer&&(l=e.getElementSize(c.element),this.element.style.height=Math.round(l.y*n.sizeRatio)+"px",this.element.style.width=Math.round(l.x*n.sizeRatio)+"px",this.oldViewerSize=l,d=e.getElementSize(this.element),this.elementArea=d.x*d.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[n]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function u(e,n){t(r.displayRegionContainer,e),t(r.displayRegion,-e),r.viewport.setRotation(e,n)}n.navigatorRotate&&(h=n.viewer.viewport?n.viewer.viewport.getRotation():n.viewer.degrees||0,u(h,!0),n.viewer.addHandler("rotate",function(e){u(e.degrees,e.immediately)})),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,o),clickHandler:e.delegate(this,s),releaseHandler:e.delegate(this,i),scrollHandler:e.delegate(this,a),preProcessEventHandler:function(e){e.eventType==="wheel"&&(e.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){r.viewport&&r.viewport.goHome(!0)}),c.world.addHandler("item-index-change",function(e){window.setTimeout(function(){var t=r.world.getItemAt(e.previousIndex);r.world.setItemIndex(t,e.newIndex)},1)}),c.world.addHandler("remove-item",function(e){var n=e.item,t=r._getMatchingItem(n);t&&r.world.removeItem(t)}),this.update(c.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(e){this.width=e,this.element.style.width=typeof e=="number"?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(e){this.height=e,this.element.style.height=typeof e=="number"?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){n(this.canvas,e),n(this.element,e)},update:function(n){if(n||(n=this.viewer.viewport),s=e.getElementSize(this.viewer.element),this._resizeWithViewer&&s.x&&s.y&&!s.equals(this.oldViewerSize)&&(this.oldViewerSize=s,this.maintainSizeRatio||!this.elementArea?(i=s.x*this.sizeRatio,r=s.y*this.sizeRatio):(i=(this.elementArea*(s.x/s.y))**.5,r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=i*r),this.updateSize()),n&&this.viewport){(c=n.getBoundsNoRotate(!0),a=this.viewport.pixelFromPointNoRotate(c.getTopLeft(),!1),l=this.viewport.pixelFromPointNoRotate(c.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate)&&(d=n.getRotation(!0),t(this.displayRegion,-d)),o=this.displayRegion.style,o.display=this.world.getItemCount()?"block":"none",o.top=a.y.toFixed(2)+"px",o.left=a.x.toFixed(2)+"px";var s,o,i,a,r,c,l,d,u=l.x-a.x,h=l.y-a.y;o.width=Math.round(Math.max(u,0))+"px",o.height=Math.round(Math.max(h,0))+"px"}},addTiledImage:function(t){var o,s=this,n=t.originalTiledImage;return delete t.original,o=e.extend({},t,{success:function(e){var t=e.item;t._originalForNavigator=n,s._matchBounds(t,n,!0),s._matchOpacity(t,n),s._matchCompositeOperation(t,n);function o(){s._matchBounds(t,n)}function i(){s._matchOpacity(t,n)}function a(){s._matchCompositeOperation(t,n)}n.addHandler("bounds-change",o),n.addHandler("clip-change",o),n.addHandler("opacity-change",i),n.addHandler("composite-operation-change",a)}}),e.Viewer.prototype.addTiledImage.apply(this,[o])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(e){for(var t,s=this.world.getItemCount(),n=0;n<s;n++)if(t=this.world.getItemAt(n),t._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var s=t.getBoundsNoRotate();e.setPosition(s.getTopLeft(),n),e.setWidth(s.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip()),e.setFlip(t.getFlip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}});function s(e){var t,n={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-click",n),!n.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)&&(this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x),t=this.viewport.pointFromPixel(e.position),this.panVertical?this.panHorizontal||(t.x=this.viewer.viewport.getCenter(!0).x):t.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(t),this.viewer.viewport.applyConstraints())}function o(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function i(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function a(e){var t={tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.viewer.raiseEvent("navigator-scroll",t),e.preventDefault=t.preventDefault}function t(e,t){n(e,"rotate("+t+"deg)")}function n(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}}(t),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var s,i=n.split("."),o=null,r=arguments,a=t;for(s=0;s<i.length-1;s++)a=a[i[s]]||{};return o=a[i[s]],typeof o!="string"&&(e.console.error("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<r.length?r[t]:""})},setString:function(e,n){var s,o=e.split("."),i=t;for(s=0;s<o.length-1;s++)i[o[s]]||(i[o[s]]={}),i=i[o[s]];i[o[s]]=n}})}(t),function(e){e.Point=function(e,t){this.x=typeof e=="number"?e:0,this.y=typeof t=="number"?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return((this.x-e.x)**2+(this.y-e.y)**2)**.5},squaredDistanceTo:function(e){return(this.x-e.x)**2+(this.y-e.y)**2},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){if(n||=new e.Point(0,0),t%90===0)switch(a=e.positiveModulo(t,360),a){case 0:s=1,o=0;break;case 90:s=0,o=1;break;case 180:s=-1,o=0;break;case 270:s=0,o=-1;break}else i=t*Math.PI/180,s=Math.cos(i),o=Math.sin(i);var s,o,i,a,r=s*(this.x-n.x)-o*(this.y-n.y)+n.x,c=o*(this.x-n.x)+s*(this.y-n.y)+n.y;return new e.Point(r,c)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(t),function(e){e.TileSource=function(t){var r,l,d=this,c=arguments;if(e.isPlainObject(t)?r=t:r={width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},e.EventSource.call(this),e.extend(!0,this,r),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",function(e){d.success(e)}),e.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=r.width&&r.height?r.width/r.height:1,this.dimensions=new e.Point(r.width,r.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=r.tileOverlap?r.tileOverlap:0,this.minLevel=r.minLevel?r.minLevel:0,this.maxLevel=r.maxLevel!==0[0]&&r.maxLevel!==null?r.maxLevel:r.width&&r.height?Math.ceil(Math.log(Math.max(r.width,r.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},setMaxLevel:function(e){this.maxLevel=e,this._memoizeLevelScale()},getLevelScale:function(e){return this._memoizeLevelScale(),this.getLevelScale(e)},_memoizeLevelScale:function(){var e,t={};for(e=0;e<=this.maxLevel;e++)t[e]=1/2**(this.maxLevel-e);this.getLevelScale=function(e){return t[e]}},getNumTiles:function(t){var n=this.getLevelScale(t),s=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),o=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(s,o)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),s=1/n.x*e.pixelDensityRatio,o=1/n.y*e.pixelDensityRatio;return new e.Point(s,o)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&(t=this.getNumTiles(e),!(t.x>1||t.y>1));e++);return e-1},getTileAtPoint:function(t,n){s=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio,e.console.assert(s,"[TileSource.getTileAtPoint] must be called with a valid point.");var s,r,o=this.dimensions.x*this.getLevelScale(t),c=n.x*o,l=n.y*o,i=Math.floor(c/this.getTileWidth(t)),a=Math.floor(l/this.getTileHeight(t));return n.x>=1&&(i=this.getNumTiles(t).x-1),r=1e-15,n.y>=1/this.aspectRatio-r&&(a=this.getNumTiles(t).y-1),new e.Point(i,a)},getTileBounds:function(t,n,s,o){var c=this.dimensions.times(this.getLevelScale(t)),l=this.getTileWidth(t),d=this.getTileHeight(t),u=n===0?0:l*n-this.tileOverlap,h=s===0?0:d*s-this.tileOverlap,i=l+(n===0?1:2)*this.tileOverlap,a=d+(s===0?1:2)*this.tileOverlap,r=1/c.x;return i=Math.min(i,c.x-u),a=Math.min(a,c.y-h),o?new e.Rect(0,0,i,a):new e.Rect(u*r,h*r,i*r,a*r)},getImageInfo:function(t){var o,i,a,r,c,l,d,u,h,s=this;t&&(o=t.split("/"),l=o[o.length-1],d=l.lastIndexOf("."),d>-1&&(o[o.length-1]=l.slice(0,d))),i=null,this.splitHashDataForPost&&(r=t.indexOf("#"),r!==-1&&(i=t.substring(r+1),t=t.substr(0,r))),c=function(n){typeof n=="string"&&(n=e.parseXml(n));var o=e.TileSource.determineType(s,n,t);if(!o){s.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t});return}a=o.prototype.configure.apply(s,[n,t,i]),a.ajaxWithCredentials===0[0]&&(a.ajaxWithCredentials=s.ajaxWithCredentials),h=new o(a),s.ready=!0,s.raiseEvent("ready",{tileSource:h})},t.match(/\.js$/)?(u=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:u,callback:c})):e.makeAjaxRequest({url:t,postData:i,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(e){var t=n(e);c(t)},error:function(n,o){var a,r;try{a="HTTP "+n.status+" attempting to load TileSource: "+t}catch{typeof o>"u"||!o.toString?r="Unknown error":r=o.toString(),a=r+" attempting to load TileSource: "+t}e.console.error(a),s.raiseEvent("open-failed",{message:a,source:t,postData:i})}})},supports:function(){return!1},configure:function(){throw new Error("Method not implemented.")},getTileUrl:function(){throw new Error("Method not implemented.")},getTilePostData:function(){return null},getTileAjaxHeaders:function(){return{}},getTileHashKey:function(e,t,n,s,o){function a(e){return o?e+"+"+JSON.stringify(o):e}return a(typeof s!="string"?e+"/"+t+"_"+n:s)},tileExists:function(e,t,n){var s=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<s.x&&n<s.y},hasTransparency:function(e,t){return!!e||t.match(".png")},downloadTileStart:function(t){var o,s=t.userData,n=new Image;s.image=n,s.request=null,o=function(e){if(!n){t.finish(null,s.request,"Image load failed: undefined Image instance.");return}n.onload=n.onerror=n.onabort=null,t.finish(e?null:n,s.request,e)},n.onload=function(){o()},n.onabort=n.onerror=function(){o("Image load aborted.")},t.loadWithAjax?s.request=e.makeAjaxRequest({url:t.src,withCredentials:t.ajaxWithCredentials,headers:t.ajaxHeaders,responseType:"arraybuffer",postData:t.postData,success:function(e){try{t=new window.Blob([e.response])}catch(n){var t,s,i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n.name==="TypeError"&&i&&(s=new i,s.append(e.response),t=s.getBlob())}t.size===0?o("Empty image response."):n.src=(window.URL||window.webkitURL).createObjectURL(t)},error:function(){o("Image load aborted - XHR error")}}):(t.crossOriginPolicy!==!1&&(n.crossOrigin=t.crossOriginPolicy),n.src=t.src)},downloadTileAbort:function(e){e.userData.request&&e.userData.request.abort();var t=e.userData.image;e.userData.image&&(t.onload=t.onerror=t.onabort=null)},createTileCache:function(e,t){e._data=t},destroyTileCache:function(e){e._data=null,e._renderedContext=null},getTileCacheData:function(e){return e._data},getTileCacheDataAsImage:function(e){return e._data},getTileCacheDataAsContext2D:function(e){if(!e._renderedContext){var t=document.createElement("canvas");t.width=e._data.width,t.height=e._data.height,e._renderedContext=t.getContext("2d"),e._renderedContext.drawImage(e._data,0,0),e._data=null}return e._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype);function n(t){var s,i,n=t.responseText,o=t.status;if(t){if(t.status!==200&&t.status!==0)throw o=t.status,i=o===404?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,i))}else throw new Error(e.getString("Errors.Security"));if(n.match(/^\s*<.*/))try{s=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(n)}catch{s=t.responseText}else if(n.match(/\s*[{[].*/))try{s=e.parseJSON(n)}catch{s=n}else s=n;return s}e.TileSource.determineType=function(n,s,o){var i;for(i in t)if(i.match(/.+TileSource$/)&&e.isFunction(t[i])&&e.isFunction(t[i].prototype.supports)&&t[i].prototype.supports.call(n,s,o))return t[i];return e.console.error("No TileSource was able to open %s %s",o,s),null}}(t),function(e){e.DziTileSource=function(t){var d,u,h,m;if(e.isPlainObject(t)?u=t:u={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=u.tilesUrl,this.fileFormat=u.fileFormat,this.displayRects=u.displayRects,this.displayRects)for(h=this.displayRects.length-1;h>=0;h--)for(m=this.displayRects[h],d=m.minLevel;d<=m.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(m);e.TileSource.apply(this,[u])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&(e.documentElement.localName==="Image"||e.documentElement.tagName==="Image")&&(n=e.documentElement.namespaceURI),n=(n||"").toLowerCase(),n.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||n.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(s,o){var a;return e.isPlainObject(s)?a=t(this,s):a=n(this,s),o&&!a.tilesUrl&&(a.tilesUrl=o.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),o.search(/\.(dzi|xml|js)\?/)!==-1?a.queryParams=o.match(/\?.*/):a.queryParams=""),a},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var s,o,i,a,c,l,d,r=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!r||!r.length)return!0;for(d=r.length-1;d>=0;d--)if(s=r[d],!(e<s.minLevel||e>s.maxLevel)&&(o=this.getLevelScale(e),i=s.x*o,a=s.y*o,c=i+s.width*o,l=a+s.height*o,i=Math.floor(i/this._tileWidth),a=Math.floor(a/this._tileWidth),c=Math.ceil(c/this._tileWidth),l=Math.ceil(l/this._tileWidth),i<=t&&t<c&&a<=n&&n<l))return!0;return!1}});function n(n,s){if(!s||!s.documentElement)throw new Error(e.getString("Errors.Xml"));var i,r,c,l,d,f,p,o=s.documentElement,u=o.localName||o.tagName,h=s.documentElement.namespaceURI,a=null,m=[];if(u==="Image")try{if(l=o.getElementsByTagName("Size")[0],l===0[0]&&(l=o.getElementsByTagNameNS(h,"Size")[0]),a={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:o.getAttribute("Url"),Format:o.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(o.getAttribute("Overlap"),10),TileSize:parseInt(o.getAttribute("TileSize"),10),Size:{Height:parseInt(l.getAttribute("Height"),10),Width:parseInt(l.getAttribute("Width"),10)}}},!e.imageFormatSupported(a.Image.Format))throw new Error(e.getString("Errors.ImageFormat",a.Image.Format.toUpperCase()));for(r=o.getElementsByTagName("DisplayRect"),r===0[0]&&(r=o.getElementsByTagNameNS(h,"DisplayRect")[0]),d=0;d<r.length;d++)c=r[d],i=c.getElementsByTagName("Rect")[0],i===0[0]&&(i=c.getElementsByTagNameNS(h,"Rect")[0]),m.push({Rect:{X:parseInt(i.getAttribute("X"),10),Y:parseInt(i.getAttribute("Y"),10),Width:parseInt(i.getAttribute("Width"),10),Height:parseInt(i.getAttribute("Height"),10),MinLevel:parseInt(c.getAttribute("MinLevel"),10),MaxLevel:parseInt(c.getAttribute("MaxLevel"),10)}});return m.length&&(a.Image.DisplayRect=m),t(n,a)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if(u==="Collection")throw new Error(e.getString("Errors.Dzc"));if(u==="Error")throw f=o.getElementsByTagName("Message")[0],p=f.firstChild.nodeValue,new Error(p)}throw new Error(e.getString("Errors.Dzi"))}function t(t,n){var s,i,o=n.Image,l=o.Url,d=o.Format,a=o.Size,r=o.DisplayRect||[],u=parseInt(a.Width,10),h=parseInt(a.Height,10),m=parseInt(o.TileSize,10),f=parseInt(o.Overlap,10),c=[];for(i=0;i<r.length;i++)s=r[i].Rect,c.push(new e.DisplayRect(parseInt(s.X,10),parseInt(s.Y,10),parseInt(s.Width,10),parseInt(s.Height,10),parseInt(s.MinLevel,10),parseInt(s.MaxLevel,10)));return e.extend(!0,{width:u,height:h,tileSize:m,tileOverlap:f,minLevel:null,maxLevel:null,tilesUrl:l,fileFormat:d,displayRects:c},n)}}(t),function(e){e.IIIFTileSource=function(t){if(e.extend(!0,this,t),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(t.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=t.version,this.tile_width&&this.tile_height)t.tileWidth=this.tile_width,t.tileHeight=this.tile_height;else if(this.tile_width)t.tileSize=this.tile_width;else if(this.tile_height)t.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)t.tileWidth=this.tiles[0].width,t.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(o=0;o<this.tiles.length;o++)for(i=0;i<this.tiles[o].scaleFactors.length;i++)c=this.tiles[o].scaleFactors[i],this.scale_factors.push(c),t.tileSizePerScaleFactor[c]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}else if(n(t)){for(var o,i,r,c,h,u=Math.min(this.height,this.width),l=[256,512,1024],d=[],a=0;a<l.length;a++)l[a]<=u&&d.push(l[a]);d.length>0?t.tileSize=Math.max.apply(null,d):t.tileSize=u}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,t.levels=s(this),e.extend(!0,t,{width:t.levels[t.levels.length-1].width,height:t.levels[t.levels.length-1].height,tileSize:Math.max(t.height,t.width),tileOverlap:0,minLevel:0,maxLevel:t.levels.length-1}),this.levels=t.levels):e.console.error("Nothing in the info.json to construct image pyramids from");!t.maxLevel&&!this.emulateLegacyImagePyramid&&(this.scale_factors?(h=Math.max.apply(null,this.scale_factors),t.maxLevel=Math.round(Math.log(h)*Math.LOG2E)):t.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)))),this.sizes&&(r=this.sizes.length,(r===t.maxLevel||r===t.maxLevel+1)&&(this.levelSizes=this.sizes.slice().sort((e,t)=>e.width-t.width),r===t.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))),e.TileSource.apply(this,[t])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e){return!!(e.protocol&&e.protocol==="http://iiif.io/api/image"||e["@context"]&&(e["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||e["@context"]==="http://iiif.io/api/image/1/context.json")||e.profile&&e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||e.identifier&&e.width&&e.height)||!!(e.documentElement&&e.documentElement.tagName==="info"&&e.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(n,s){if(e.isPlainObject(n)){if(n["@context"]){var r,c,l,a=n["@context"];if(Array.isArray(a))for(r=0;r<a.length;r++)if(typeof a[r]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(a[r])||a[r]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){a=a[r];break}switch(a){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":n.version=1;break;case"http://iiif.io/api/image/2/context.json":n.version=2;break;case"http://iiif.io/api/image/3/context.json":n.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else n["@context"]="http://iiif.io/api/image/1.0/context.json",n["@id"]=s.replace("/info.json",""),n.version=1;if(n.preferredFormats)for(c=0;c<n.preferredFormats.length;c++)if(t.imageFormatSupported(n.preferredFormats[c])){n.tileFormat=n.preferredFormats[c];break}return n}return l=i(n),l["@context"]="http://iiif.io/api/image/1.0/context.json",l["@id"]=s.replace("/info.xml",""),l.version=1,l},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=2**(this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=2**(this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){if(this.emulateLegacyImagePyramid)return n=this.getLevelScale(t),n?new e.Point(1,1):new e.Point(0,0);if(this.levelSizes){var n,s=this.levelSizes[t],o=Math.ceil(s.width/this.getTileWidth(t)),i=Math.ceil(s.height/this.getTileHeight(t));return new e.Point(o,i)}return e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){s=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio,e.console.assert(s,"[TileSource.getTileAtPoint] must be called with a valid point.");var s,r,o=this.levelSizes[t].width,c=n.x*o,l=n.y*o,i=Math.floor(c/this.getTileWidth(t)),a=Math.floor(l/this.getTileHeight(t));return n.x>=1&&(i=this.getNumTiles(t).x-1),r=1e-15,n.y>=1/this.aspectRatio-r&&(a=this.getNumTiles(t).y-1),new e.Point(i,a)}return e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid)return h=null,this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(h=this.levels[e].url),h;var s,o,i,a,r,c,l,u,h,m,f,p,g,v,b,j,y,_="0",d=.5**(this.maxLevel-e);return this.levelSizes?(o=this.levelSizes[e].width,i=this.levelSizes[e].height):(o=Math.ceil(this.width*d),i=Math.ceil(this.height*d)),r=this.getTileWidth(e),c=this.getTileHeight(e),v=Math.round(r/d),u=Math.round(c/d),this.version===1?j="native."+this.tileFormat:j="default."+this.tileFormat,o<r&&i<c?(this.version===2&&o===this.width?s="full":this.version===3&&o===this.width&&i===this.height?s="max":this.version===3?s=o+","+i:s=o+",",l="full"):(m=t*v,f=n*u,p=Math.min(v,this.width-m),g=Math.min(u,this.height-f),t===0&&n===0&&p===this.width&&g===this.height?l="full":l=[m,f,p,g].join(","),a=Math.min(r,o-t*r),b=Math.min(c,i-n*c),this.version===2&&a===this.width?s="full":this.version===3&&a===this.width&&b===this.height?s="max":this.version===3?s=a+","+b:s=a+","),y=[this._id,l,s,_,j].join("/"),y},__testonly__:{canBeTiled:n,constructLevels:s}});function n(e){var n=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],s=Array.isArray(e.profile)?e.profile[0]:e.profile,o=n.indexOf(s)!==-1,t=!1;return e.version===2&&e.profile.length>1&&e.profile[1].supports&&(t=e.profile[1].supports.indexOf("sizeByW")!==-1),e.version===3&&e.extraFeatures&&(t=e.extraFeatures.indexOf("sizeByWh")!==-1),!o||t}function s(e){for(var n=[],t=0;t<e.sizes.length;t++)n.push({url:e._id+"/full/"+e.sizes[t].width+","+(e.version===3?e.sizes[t].height:"")+"/0/default."+e.tileFormat,width:e.sizes[t].width,height:e.sizes[t].height});return n.sort(function(e,t){return e.width-t.width})}function i(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var s=t.documentElement,i=s.tagName,n=null;if(i==="info")try{return n={},o(s,n),n}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function o(t,n,s){var i,a;if(t.nodeType===3&&s)i=t.nodeValue.trim(),i.match(/^\d*$/)&&(i=Number(i)),n[s]?(e.isArray(n[s])||(n[s]=[n[s]]),n[s].push(i)):n[s]=i;else if(t.nodeType===1)for(a=0;a<t.childNodes.length;a++)o(t.childNodes[a],n,t.nodeName)}}(t),function(e){e.OsmTileSource=function(t){var a;e.isPlainObject(t)?a=t:a={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!a.width||!a.height)&&(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,e.TileSource.apply(this,[a])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e){return e.type&&e.type==="openstreetmaps"},configure:function(e){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(t),function(e){e.TmsTileSource=function(t){e.isPlainObject(t)?a=t:a={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l,r=Math.ceil(a.width/256)*256,c=Math.ceil(a.height/256)*256;r>c?l=r/256:l=c/256,a.maxLevel=Math.ceil(Math.log(l)/Math.log(2))-1,a.tileSize=256,a.width=r,a.height=c,e.TileSource.apply(this,[a])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e){return e.type&&e.type==="tiledmapservice"},configure:function(e){return e},getTileUrl:function(e,t,n){var s=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(s-n)+".png"}})}(t),function(e){e.ZoomifyTileSource=function(e){typeof e.tileSize>"u"&&(e.tileSize=256),typeof e.fileFormat>"u"&&(e.fileFormat="jpg",this.fileFormat=e.fileFormat);var n={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(n.x,10)>e.tileSize||parseInt(n.y,10)>e.tileSize;)n.x=Math.floor(n.x/2),n.y=Math.floor(n.y/2),e.imageSizes.push({x:n.x,y:n.y}),e.gridSize.push(this._getGridSize(n.x,n.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,t.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var o=0,s={},i=0;i<e;i++)s=this.gridSize[i],o+=s.x*s.y;return s=this.gridSize[e],o+=s.x*n+t,o},supports:function(e){return e.type&&e.type==="zoomifytileservice"},configure:function(e){return e},getTileUrl:function(e,t,n){var s=0,o=this._calculateAbsoluteTileNumber(e,t,n);return s=Math.floor(o/256),this.tilesUrl+"TileGroup"+s+"/"+e+"-"+t+"-"+n+"."+this.fileFormat}})}(t),function(e){e.LegacyTileSource=function(t){var s,o,i;e.isArray(t)&&(s={type:"legacy-image-pyramid",levels:t}),s.levels=n(s.levels),s.levels.length>0?(o=s.levels[s.levels.length-1].width,i=s.levels[s.levels.length-1].height):(o=0,i=0,e.console.error("No supported image formats found")),e.extend(!0,s,{width:o,height:i,tileSize:Math.max(i,o),tileOverlap:0,minLevel:0,maxLevel:s.levels.length>0?s.levels.length-1:0}),e.TileSource.apply(this,[s]),this.levels=s.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e){return e.type&&e.type==="legacy-image-pyramid"||e.documentElement&&e.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(n){var a;return e.isPlainObject(n)?a=t(this,n):a=s(this,n),a},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e){var s=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(s=this.levels[e].url),s}});function n(t){var n,s,o=[];for(s=0;s<t.length;s++)n=t[s],n.height&&n.width&&n.url?o.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return o.sort(function(e,t){return e.height-t.height})}function s(n,s){if(!s||!s.documentElement)throw new Error(e.getString("Errors.Xml"));var i,a,r=s.documentElement,o=r.tagName,c=null,l=[];if(o==="image")try{for(c={type:r.getAttribute("type"),levels:[]},l=r.getElementsByTagName("level"),a=0;a<l.length;a++)i=l[a],c.levels.push({url:i.getAttribute("url"),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10)});return t(n,c)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(o==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(o==="error")throw new Error("Error: "+s)}throw new Error("Unknown element "+o)}function t(e,t){return t.levels}}(t),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e){return e.type&&e.type==="image"},configure:function(e){return e},getImageInfo:function(t){var s=this._image=new Image,n=this;this.crossOriginPolicy&&(s.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(s.useCredentials=this.ajaxWithCredentials),e.addEvent(s,"load",function(){n.width=s.naturalWidth,n.height=s.naturalHeight,n.aspectRatio=n.width/n.height,n.dimensions=new e.Point(n.width,n.height),n._tileWidth=n.width,n._tileHeight=n.height,n.tileOverlap=0,n.minLevel=0,n.levels=n._buildLevels(),n.maxLevel=n.levels.length-1,n.ready=!0,n.raiseEvent("ready",{tileSource:n})}),e.addEvent(s,"error",function(){n.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})}),s.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e){var s=null;return e>=this.minLevel&&e<=this.maxLevel&&(s=this.levels[e].url),s},getContext2D:function(e){var s=null;return e>=this.minLevel&&e<=this.maxLevel&&(s=this.levels[e].context2D),s},destroy:function(e){this._freeupCanvasMemory(e)},_buildLevels:function(){if(s=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}],!this.buildPyramid||!e.supportsCanvas)return delete this._image,s;var s,i,a,t=this._image.naturalWidth,n=this._image.naturalHeight,o=document.createElement("canvas"),r=o.getContext("2d");if(o.width=t,o.height=n,r.drawImage(this._image,0,0,t,n),s[0].context2D=r,delete this._image,e.isCanvasTainted(o))return s;for(;t>=2&&n>=2;)t=Math.floor(t/2),n=Math.floor(n/2),i=document.createElement("canvas"),a=i.getContext("2d"),i.width=t,i.height=n,a.drawImage(o,0,0,t,n),s.splice(0,0,{context2D:a,width:t,height:n}),o=i,r=a;return s},_freeupCanvasMemory:function(e){for(var t=0;t<this.levels.length;t++)this.levels[t].context2D&&(this.levels[t].context2D.canvas.height=0,this.levels[t].context2D.canvas.width=0,e&&e.raiseEvent("image-unloaded",{context2D:this.levels[t].context2D}))}})}(t),function(e){e.TileSourceCollection=function(){e.console.error("TileSourceCollection is deprecated; use World instead")}}(t),function(e){e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(s){var o=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},s),this.element=s.element||e.makeNeutralElement("div"),s.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(n){n.insideElementPressed?(t(o,e.ButtonState.DOWN),o.raiseEvent("enter",{originalEvent:n.originalEvent})):n.buttonDownAny||t(o,e.ButtonState.HOVER)},focusHandler:function(e){o.tracker.enterHandler(e),o.raiseEvent("focus",{originalEvent:e.originalEvent})},leaveHandler:function(t){n(o,e.ButtonState.GROUP),t.insideElementPressed&&o.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){o.tracker.leaveHandler(e),o.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(n){t(o,e.ButtonState.DOWN),o.raiseEvent("press",{originalEvent:n.originalEvent})},releaseHandler:function(s){s.insideElementPressed&&s.insideElementReleased?(n(o,e.ButtonState.HOVER),o.raiseEvent("release",{originalEvent:s.originalEvent})):s.insideElementPressed?n(o,e.ButtonState.GROUP):t(o,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&o.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){e.keyCode===13?(o.raiseEvent("click",{originalEvent:e.originalEvent}),o.raiseEvent("release",{originalEvent:e.originalEvent}),e.preventDefault=!0):e.preventDefault=!1}}),n(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){t(this,e.ButtonState.GROUP)},notifyGroupExit:function(){n(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function s(t){e.requestAnimationFrame(function(){o(t)})}function o(t){var n,o,i;t.shouldFade&&(o=e.now(),i=o-t.fadeBeginTime,n=1-i/t.fadeLength,n=Math.min(1,n),n=Math.max(0,n),t.imgGroup&&e.setElementOpacity(t.imgGroup,n,!0),n>0&&s(t))}function i(t){t.shouldFade=!0,t.fadeBeginTime=e.now()+t.fadeDelay,window.setTimeout(function(){s(t)},t.fadeDelay)}function a(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}function t(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState===e.ButtonState.REST&&(a(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState===e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState===e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function n(t,n){t.element.disabled||(n<=e.ButtonState.HOVER&&t.currentState===e.ButtonState.DOWN&&(t.imgDown&&(t.imgDown.style.visibility="hidden"),t.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&t.currentState===e.ButtonState.HOVER&&(t.imgHover&&(t.imgHover.style.visibility="hidden"),t.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&t.currentState===e.ButtonState.GROUP&&(i(t),t.currentState=e.ButtonState.REST))}}(t),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var s,o=this.buttons.concat([]),n=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",s=0;s<o.length;s++)this.element.appendChild(o[s].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var t;for(t=0;t<n.buttons.length;t++)n.buttons[t].notifyGroupEnter()},leaveHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<n.buttons.length;t++)n.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(e){this.buttons.push(e),this.element.appendChild(e.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var e=this.buttons.pop();this.element.removeChild(e.element),e.destroy()}this.tracker.destroy(),this.element=null}}}(t),function(e){e.Rect=function(t,n,s,o,i){this.x=typeof t=="number"?t:0,this.y=typeof n=="number"?n:0,this.width=typeof s=="number"?s:0,this.height=typeof o=="number"?o:0,this.degrees=typeof i=="number"?i:0,this.degrees=e.positiveModulo(this.degrees,360);var a,r;this.degrees>=270?(a=this.getTopRight(),this.x=a.x,this.y=a.y,r=this.height,this.height=this.width,this.width=r,this.degrees-=270):this.degrees>=180?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):this.degrees>=90&&(a=this.getBottomLeft(),this.x=a.x,this.y=a.y,r=this.height,this.height=this.width,this.width=r,this.degrees-=90)},e.Rect.fromSummits=function(t,n,s){var a=t.distanceTo(n),r=t.distanceTo(s),o=n.minus(t),i=Math.atan(o.y/o.x);return o.x<0?i+=Math.PI:o.y<0&&(i+=2*Math.PI),new e.Rect(t.x,t.y,a,r,i/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),s=t.getBoundingBox(),o=Math.min(n.x,s.x),i=Math.min(n.y,s.y),a=Math.max(n.x+n.width,s.x+s.width),r=Math.max(n.y+n.height,s.y+s.height);return new e.Rect(o,i,a-o,r-i)},intersection:function(t){var s=1e-10,n=[],x=this.getTopLeft();t.containsPoint(x,s)&&n.push(x),j=this.getTopRight(),t.containsPoint(j,s)&&n.push(j),y=this.getBottomLeft(),t.containsPoint(y,s)&&n.push(y),g=this.getBottomRight(),t.containsPoint(g,s)&&n.push(g),c=t.getTopLeft(),this.containsPoint(c,s)&&n.push(c),_=t.getTopRight(),this.containsPoint(_,s)&&n.push(_),d=t.getBottomLeft(),this.containsPoint(d,s)&&n.push(d),u=t.getBottomRight(),this.containsPoint(u,s)&&n.push(u);for(var O=this._getSegments(),w=t._getSegments(),f=0;f<O.length;f++)for(p=O[f],r=0;r<w.length;r++)v=w[r],b=C(p[0],p[1],v[0],v[1]),b&&n.push(b);function C(t,n,o,i){var r,d,a=n.minus(t),c=i.minus(o),l=-c.x*a.y+a.x*c.y;return l===0?null:(d=(a.x*(t.y-o.y)-a.y*(t.x-o.x))/l,r=(c.x*(t.y-o.y)-c.y*(t.x-o.x))/l,-s<=d&&d<=1-s&&-s<=r&&r<=1-s?new e.Point(t.x+r*a.x,t.y+r*a.y):null)}if(n.length===0)return null;for(var o,r,c,d,u,p,g,v,b,j,y,_,a=n[0].x,l=n[0].x,i=n[0].y,m=n[0].y,h=1;h<n.length;h++)o=n[h],o.x<a&&(a=o.x),o.x>l&&(l=o.x),o.y<i&&(i=o.y),o.y>m&&(m=o.y);return new e.Rect(a,i,l-a,m-i)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),s=this.getBottomRight();return[[e,t],[t,s],[s,n],[n,e]]},rotate:function(t,n){if(t=e.positiveModulo(t,360),t===0)return this.clone();n||=this.getCenter();var o=this.getTopLeft().rotate(t,n),a=this.getTopRight().rotate(t,n),s=a.minus(o),s=s.apply(function(e){var t=1e-15;return(e<0?-e:e)<t?0:e}),i=Math.atan(s.y/s.x);return s.x<0?i+=Math.PI:s.y<0&&(i+=2*Math.PI),new e.Rect(o.x,o.y,this.width,this.height,i/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),s=this.getBottomLeft(),o=this.getBottomRight(),i=Math.min(t.x,n.x,s.x,o.x),r=Math.max(t.x,n.x,s.x,o.x),a=Math.min(t.y,n.y,s.y,o.y),c=Math.max(t.y,n.y,s.y,o.y);return new e.Rect(i,a,r-i,c-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),s=Math.floor(t.y),o=Math.ceil(t.width+t.x-n),i=Math.ceil(t.height+t.y-s);return new e.Rect(n,s,o,i)},containsPoint:function(e,t){t||=0;var n=this.getTopLeft(),i=this.getTopRight(),a=this.getBottomLeft(),s=i.minus(n),o=a.minus(n);return(e.x-n.x)*s.x+(e.y-n.y)*s.y>=-t&&(e.x-i.x)*s.x+(e.y-i.y)*s.y<=t&&(e.x-n.x)*o.x+(e.y-n.y)*o.y>=-t&&(e.x-a.x)*o.x+(e.y-a.y)*o.y<=t},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(t),function(e){var s={};e.ReferenceStrip=function(d){var u,m,p,g=this,h=d.viewer,f=e.getElementSize(h.element);for(d.id||(d.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=d.id,this.element.className="referencestrip"),d=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},d,{element:this.element}),e.extend(this,d),s[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,m=this.element.style,m.marginTop="0px",m.marginRight="0px",m.marginBottom="0px",m.marginLeft="0px",m.left="0px",m.bottom="0px",m.border="0px",m.background="#000",m.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=h,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,i),dragHandler:e.delegate(this,a),scrollHandler:e.delegate(this,n),enterHandler:e.delegate(this,o),leaveHandler:e.delegate(this,r),keyDownHandler:e.delegate(this,c),keyHandler:e.delegate(this,l),preProcessEventHandler:function(e){e.eventType==="wheel"&&(e.preventDefault=!0)}}),d.width&&d.height?(this.element.style.width=d.width+"px",this.element.style.height=d.height+"px",h.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):d.scroll==="horizontal"?(this.element.style.width=f.x*d.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.height=f.y*d.sizeRatio+"px",h.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*d.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.width=f.x*d.sizeRatio+"px",h.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<h.tileSources.length;p++)u=e.makeNeutralElement("div"),u.id=this.element.id+"-"+p,u.style.width=g.panelWidth+"px",u.style.height=g.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.padding="2px",e.setElementTouchActionNone(u),e.setElementPointerEventsNone(u),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);t(this,this.scroll==="vertical"?f.y:f.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(n){var s,a=this.element.querySelector("#"+this.element.id+"-"+n),i=e.getElementSize(this.viewer.canvas),l=Number(this.element.style.width.replace("px","")),d=Number(this.element.style.height.replace("px","")),r=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==a&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=a,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(s=Number(n)*(this.panelWidth+3),s>r+i.x-this.panelWidth?(s=Math.min(s,l-i.x),this.element.style.marginLeft=-s+"px",t(this,i.x,-s)):s<r&&(s=Math.max(0,s-i.x/2),this.element.style.marginLeft=-s+"px",t(this,i.x,-s))):(s=Number(n)*(this.panelHeight+3),s>c+i.y-this.panelHeight?(s=Math.min(s,d-i.y),this.element.style.marginTop=-s+"px",t(this,i.y,-s)):s<c&&(s=Math.max(0,s-i.y/2),this.element.style.marginTop=-s+"px",t(this,i.y,-s))),this.currentPage=n,o.call(this,{eventSource:this.tracker}))},update:function(){return!!s[this.id].animating},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function i(e){if(e.quick){var t;this.scroll==="horizontal"?t=Math.floor(e.position.x/(this.panelWidth+4)):t=Math.floor(e.position.y/this.panelHeight),this.viewer.goToPage(t)}this.element.focus()}function a(n){if(this.dragging=!0,this.element){var s=Number(this.element.style.marginLeft.replace("px","")),o=Number(this.element.style.marginTop.replace("px","")),a=Number(this.element.style.width.replace("px","")),r=Number(this.element.style.height.replace("px","")),i=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-n.delta.x>0?s>-(a-i.x)&&(this.element.style.marginLeft=s+n.delta.x*2+"px",t(this,i.x,s+n.delta.x*2)):-n.delta.x<0&&s<0&&(this.element.style.marginLeft=s+n.delta.x*2+"px",t(this,i.x,s+n.delta.x*2)):-n.delta.y>0?o>-(r-i.y)&&(this.element.style.marginTop=o+n.delta.y*2+"px",t(this,i.y,o+n.delta.y*2)):-n.delta.y<0&&o<0&&(this.element.style.marginTop=o+n.delta.y*2+"px",t(this,i.y,o+n.delta.y*2))}}function n(n){if(this.element){var s=Number(this.element.style.marginLeft.replace("px","")),o=Number(this.element.style.marginTop.replace("px","")),a=Number(this.element.style.width.replace("px","")),r=Number(this.element.style.height.replace("px","")),i=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?n.scroll>0?s>-(a-i.x)&&(this.element.style.marginLeft=s-n.scroll*60+"px",t(this,i.x,s-n.scroll*60)):n.scroll<0&&s<0&&(this.element.style.marginLeft=s-n.scroll*60+"px",t(this,i.x,s-n.scroll*60)):n.scroll<0?o>i.y-r&&(this.element.style.marginTop=o+n.scroll*60+"px",t(this,i.y,o+n.scroll*60)):n.scroll>0&&o<0&&(this.element.style.marginTop=o+n.scroll*60+"px",t(this,i.y,o+n.scroll*60)),n.preventDefault=!0}}function t(t,n,s){for(t.scroll==="horizontal"?c=t.panelWidth:c=t.panelHeight,o=Math.ceil(n/c)+5,l=Math.ceil(((s<0?-s:s)+n)/c)+1,o-=l,o=o<0?0:o,a=o;a<l&&a<t.panels.length;a++)if(r=t.panels[a],!r.activePanel){var o,i,a,r,c,l,d,u=t.viewer.tileSources[a];u.referenceStripThumbnailUrl?d={type:"image",url:u.referenceStripThumbnailUrl}:d=u,i=new e.Viewer({id:r.id,tileSources:[d],element:r,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,drawer:"canvas"}),e.setElementPointerEventsNone(i.canvas),e.setElementPointerEventsNone(i.container),i.innerTracker.setTracking(!1),i.outerTracker.setTracking(!1),t.miniViewers[r.id]=i,r.activePanel=!0}}function o(e){var t=e.eventSource.element;this.scroll==="horizontal"?t.style.marginBottom="0px":t.style.marginLeft="0px"}function r(t){var n=t.eventSource.element;this.scroll==="horizontal"?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px"}function c(e){if(!e.ctrl&&!e.alt&&!e.meta)switch(e.keyCode){case 38:n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 40:n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;case 37:n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;case 39:n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1;break}else e.preventDefault=!1}function l(e){if(!e.ctrl&&!e.alt&&!e.meta)switch(e.keyCode){case 61:n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 45:n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;case 48:case 119:case 87:n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 115:case 83:n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;case 97:n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;case 100:n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1;break}else e.preventDefault=!1}}(t),function(e){e.DisplayRect=function(t,n,s,o,i,a){e.Rect.apply(this,[t,n,s,o]),this.minLevel=i,this.maxLevel=a},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(t),function(e){e.Spring=function(t){var n=arguments;typeof t!="object"&&(t={initial:n.length&&typeof n[0]=="number"?n[0]:0[0],springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert(typeof t.springStiffness=="number"&&t.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert(typeof t.animationTime=="number"&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||t!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||t!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=e.now();let n,s;if(this._exponential?(n=this.start._logValue,s=this.target._logValue):(n=this.start.value,s=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let e=n+(s-n)*t(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));this._exponential?this.current.value=Math.exp(e):this.current.value=e}return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function t(e,t){return(1-Math.exp(e*-t))/(1-Math.exp(-e))}}(t),function(e){e.ImageJob=function(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},t),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var e=this,t=this.abort;this.jobId=window.setTimeout(function(){e.finish(null,null,"Image load exceeded timeout ("+e.timeout+" ms)")},this.timeout),this.abort=function(){e.source.downloadTileAbort(e),typeof t=="function"&&t()},this.source.downloadTileStart(this)},finish:function(e,t,n){this.data=e,this.request=t,this.errorMsg=n,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(n){n.source||(e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource."),s=e.TileSource.prototype,n.source={downloadTileStart:s.downloadTileStart,downloadTileAbort:s.downloadTileAbort});var s,i=this,a=function(e){t(i,e,n.callback)},r={src:n.src,tile:n.tile||{},source:n.source,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.loadWithAjax?n.ajaxHeaders:null,crossOriginPolicy:n.crossOriginPolicy,ajaxWithCredentials:n.ajaxWithCredentials,postData:n.postData,callback:a,abort:n.abort,timeout:this.timeout},o=new e.ImageJob(r);!this.jobLimit||this.jobsInProgress<this.jobLimit?(o.start(),this.jobsInProgress++):this.jobQueue.push(o)},clear:function(){for(var t,e=0;e<this.jobQueue.length;e++)t=this.jobQueue[e],typeof t.abort=="function"&&t.abort();this.jobQueue=[]}};function t(e,t,n){t.errorMsg!==""&&(t.data===null||t.data===0[0])&&t.tries<1+e.tileRetryMax&&e.failedTiles.push(t);var s;e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(s=e.jobQueue.shift(),s.start(),e.jobsInProgress++),e.tileRetryMax>0&&e.jobQueue.length===0&&(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.failedTiles.length>0&&(s=e.failedTiles.shift(),setTimeout(function(){s.start()},e.tileRetryDelay),e.jobsInProgress++),n(t.data,t.errorMsg,t.request)}}(t),function(e){e.Tile=function(n,s,o,i,a,r,c,l,d,u,h,m){this.level=n,this.x=s,this.y=o,this.bounds=i,this.positionedBounds=new t.Rect(i.x,i.y,i.width,i.height),this.sourceBounds=u,this.exists=a,this._url=r,this.postData=h,this.context2D=c,this.loadWithAjax=l,this.ajaxHeaders=d,m===0[0]&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),m=e.TileSource.prototype.getTileHashKey(n,s,o,r,d,h)),this.cacheKey=m,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord&&this.cacheImageRecord.getRenderedContext()},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else if(this.context2D)t=this.context2D;else return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,s){var o=Math.max(1,Math.ceil((s.x-n.x)/2)),i=Math.max(1,Math.ceil((s.y-n.y)/2));return new e.Point(o,i).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply(function(e){return e%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(t),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,s){var o;e.isPlainObject(t)?o=t:o={element:t,location:n,placement:s},this.elementWrapper=document.createElement("div"),this.element=o.element,this.elementWrapper.appendChild(this.element),this.element.id?this.elementWrapper.id="overlay-wrapper-"+this.element.id:this.elementWrapper.id="overlay-wrapper",this.style=this.elementWrapper.style,this._init(o)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=t.placement===0[0]?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=t.checkResize===0[0]||t.checkResize,this.width=t.width===0[0]?null:t.width,this.height=t.height===0[0]?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var s=e.Placement.properties[this.placement];s&&(s.isHorizontallyCentered?t.x-=n.x/2:s.isRight&&(t.x-=n.x),s.isVerticallyCentered?t.y-=n.y/2:s.isBottom&&(t.y-=n.y))},destroy:function(){var s,o,n=this.elementWrapper,t=this.style;n.parentNode&&(n.parentNode.removeChild(n),n.prevElementParent&&(t.display="none",document.body.appendChild(n))),this.onDraw=null,t.top="",t.left="",t.position="",this.width!==null&&(t.width=""),this.height!==null&&(t.height=""),s=e.getCssPropertyWithVendorPrefix("transformOrigin"),o=e.getCssPropertyWithVendorPrefix("transform"),s&&o&&(t[s]="",t[o]="")},drawHTML:function(t,n){a=this.elementWrapper,a.parentNode!==t&&(a.prevElementParent=a.parentNode,a.prevNextSibling=a.nextSibling,t.appendChild(a),this.style.position="absolute",this.size=e.getElementSize(this.elementWrapper));var s,o,i,a,r,c,m,l=this._getOverlayPositionAndSize(n),d=l.position,u=this.size=l.size,h="";n.overlayPreserveContentDirection&&(h=n.flipped?" scaleX(-1)":" scaleX(1)"),r=n.flipped?-l.rotate:l.rotate,m=n.flipped?" scaleX(-1)":"",this.onDraw?this.onDraw(d,u,this.element):(s=this.style,i=this.element.style,i.display="block",s.left=d.x+"px",s.top=d.y+"px",this.width!==null&&(i.width=u.x+"px"),this.height!==null&&(i.height=u.y+"px"),c=e.getCssPropertyWithVendorPrefix("transformOrigin"),o=e.getCssPropertyWithVendorPrefix("transform"),c&&o&&(r&&!n.flipped?(i[o]="",s[c]=this._getTransformOrigin(),s[o]="rotate("+r+"deg)"):!r&&n.flipped?(i[o]=h,s[c]=this._getTransformOrigin(),s[o]=m):r&&n.flipped?(i[o]=h,s[c]=this._getTransformOrigin(),s[o]="rotate("+r+"deg)"+m):(i[o]="",s[c]="",s[o]="")),s.display="flex")},_getOverlayPositionAndSize:function(t){var o,i,a,n=t.pixelFromPoint(this.location,!0),s=this._getSizeInPixels(t);return this.adjust(n,s),o=0,t.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION&&(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null?(a=new e.Rect(n.x,n.y,s.x,s.y),i=this._getBoundingBox(a,t.getRotation(!0)),n=i.getTopLeft(),s=i.getSize()):o=t.getRotation(!0)),t.flipped&&(n.x=t.getContainerSize().x-n.x),{position:n,size:s,rotate:o}},_getSizeInPixels:function(t){var o,i,n=this.size.x,s=this.size.y;return(this.width!==null||this.height!==null)&&(o=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0),this.width!==null&&(n=o.x),this.height!==null&&(s=o.y)),this.checkResize&&(this.width===null||this.height===null)&&(i=this.size=e.getElementSize(this.elementWrapper),this.width===null&&(n=i.x),this.height===null&&(s=i.y)),new e.Point(n,s)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),s=e.Placement.properties[this.placement];return s&&(s.isHorizontallyCentered?n.x+=t.width/2:s.isRight&&(n.x+=t.width),s.isVerticallyCentered?n.y+=t.height/2:s.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n&&(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom")),t},update:function(t,n){var s=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:s.location||this.location,placement:s.placement!==0[0]?s.placement:this.placement,onDraw:s.onDraw||this.onDraw,checkResize:s.checkResize||this.checkResize,width:s.width!==0[0]?s.width:this.width,height:s.height!==0[0]?s.height:this.height,rotationMode:s.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var o,i,n=this.width,s=this.height;return(n===null||s===null)&&(i=t.deltaPointsFromPixelsNoRotate(this.size,!0),n===null&&(n=i.x),s===null&&(s=i.y)),o=this.location.clone(),this.adjust(o,new e.Point(n,s)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,n,s))},_adjustBoundsForRotation:function(t,n){if(!t||t.getRotation(!0)===0||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return n;var s=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(s.position.x,s.position.y,s.size.x,s.size.y))}return n.rotate(-t.getRotation(!0),this._getPlacementPoint(n))}}}(t),function(e){const t=e;t.DrawerBase=class{constructor(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required"),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor=typeof t.debugGridColor=="string"?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,this.options=t.options||{},this.container=e.getElement(t.element),this._renderingTarget=this._createDrawingElement(),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",e.setElementOpacity(this.canvas,this.viewer.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._checkForAPIOverrides()}get canvas(){return this._renderingTarget}get element(){return e.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getType(){e.console.error("Drawer.getType must be implemented by child class")}static isSupported(){e.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return e.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(){e.console.error("Drawer.draw must be implemented by child class")}canRotate(){e.console.error("Drawer.canRotate must be implemented by child class")}destroy(){e.console.error("Drawer.destroy must be implemented by child class")}minimumOverlapRequired(){return!1}setImageSmoothingEnabled(){e.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(){e.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){e.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}_checkForAPIOverrides(){if(this._createDrawingElement===e.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===e.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===e.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===e.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===e.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),s=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio)}viewportCoordToDrawerCoord(t){var n=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)}_calculateCanvasSize(){var n=e.pixelDensityRatio,s=this.viewport.getContainerSize();return new t.Point(Math.round(s.x*n),Math.round(s.y*n))}_raiseTiledImageDrawnEvent(e,t){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:e,tiles:t})}_raiseDrawerErrorEvent(e,t){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:e,drawer:this,error:t})}}}(t),function(e){const t=e;class n extends t.DrawerBase{constructor(e){super(e),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn")}static isSupported(){return!0}getType(){return"html"}minimumOverlapRequired(){return!0}_createDrawingElement(){return e.makeNeutralElement("div")}draw(e){var t=this;this._prepareNewFrame(),e.forEach(function(e){e.opacity!==0&&t._drawTiles(e)})}canRotate(){return!1}destroy(){this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(e){var t,s,n=e.getTilesToDraw().map(e=>e.tile);if(!(e.opacity===0||n.length===0&&!e.placeholderFillStyle))for(t=n.length-1;t>=0;t--)s=n[t],this._drawTile(s),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:s})}_drawTile(t){e.console.assert(t,"[Drawer._drawTile] tile is required");let n=this.canvas;if(!t.cacheImageRecord){e.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached",t.toString());return}if(!t.loaded){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",t.toString());return}if(!t.element){var s=t.getImage();if(!s)return;t.element=e.makeNeutralElement("div"),t.imgElement=s.cloneNode(),t.imgElement.style.msInterpolationMode="nearest-neighbor",t.imgElement.style.width="100%",t.imgElement.style.height="100%",t.style=t.element.style,t.style.position="absolute"}t.element.parentNode!==n&&n.appendChild(t.element),t.imgElement.parentNode!==t.element&&t.element.appendChild(t.imgElement),t.style.top=t.position.y+"px",t.style.left=t.position.x+"px",t.style.height=t.size.y+"px",t.style.width=t.size.x+"px",t.flipped&&(t.style.transform="scaleX(-1)"),e.setElementOpacity(t.element,t.opacity)}}e.HTMLDrawer=n}(t),function(e){const o=e;class i extends o.DrawerBase{constructor(e){super(e),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return e.supportsCanvas}getType(){return"canvas"}_createDrawingElement(){let t=e.makeNeutralElement("canvas"),n=this._calculateCanvasSize();return t.width=n.x,t.height=n.y,t}draw(e){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const t of e)t.opacity!==0&&this._drawTiles(t)}canRotate(){return!0}destroy(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(){return!0}setImageSmoothingEnabled(e){this._imageSmoothingEnabled=!!e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(t){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(e,t,n,s){this.viewer.raiseEvent("tile-drawing",{tiledImage:e,context:t,tile:n,rendered:s})}_prepareNewFrame(){var t,e=this._calculateCanvasSize();(this.canvas.width!==e.x||this.canvas.height!==e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)&&(t=this._calculateSketchCanvasSize(),this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)),this._clear()}_clear(e,t){var s,n=this._getContext(e);t?n.clearRect(t.x,t.y,t.width,t.height):(s=n.canvas,n.clearRect(0,0,s.width,s.height))}_drawTiles(t){if(r=t.getTilesToDraw().map(e=>e.tile),!(t.opacity===0||r.length===0&&!t.placeholderFillStyle)){o=r[0],o&&(s=t.opacity<1||t.compositeOperation&&t.compositeOperation!=="source-over"||!t._isBottomItem()&&t.source.hasTransparency(o.context2D,o.getUrl(),o.ajaxHeaders,o.postData));var n,s,o,i,r,c,l,d,u,h,m,f,p,g,v,j=this.viewport.getZoom(!0),b=t.viewportToImageZoom(j);if(r.length>1&&b>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360===0&&(s=!0,n=o.getScaleForEdgeSmoothing(),i=o.getTranslationForEdgeSmoothing(n,this._getCanvasSize(!1),this._getCanvasSize(!0))),s&&(n||(d=this.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox(),d=d.times(e.pixelDensityRatio)),this._clear(!0,d)),n||this._setRotations(t,s),l=!1,t._clip&&(this._saveContext(s),u=t.imageToViewportRectangle(t._clip,!0),u=u.rotate(-t.getRotation(!0),t._getRotationPoint(!0)),c=this.viewportToDrawerRectangle(u),n&&(c=c.times(n)),i&&(c=c.translate(i)),this._setClip(c,s),l=!0),t._croppingPolygons){p=this,l||this._saveContext(s);try{g=t._croppingPolygons.map(function(e){return e.map(function(e){var o=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(-t.getRotation(!0),t._getRotationPoint(!0)),s=p.viewportCoordToDrawerCoord(o);return n&&(s=s.times(n)),i&&(s=s.plus(i)),s})}),this._clipWithPolygons(g,s)}catch(t){e.console.error(t)}l=!0}if(t._hasOpaqueTile=!1,t.placeholderFillStyle&&t._hasOpaqueTile===!1){let e=this.viewportToDrawerRectangle(t.getBoundsNoRotate(!0));n&&(e=e.times(n)),i&&(e=e.translate(i));let o=null;typeof t.placeholderFillStyle=="function"?o=t.placeholderFillStyle(t,this.context):o=t.placeholderFillStyle,this._drawRectangle(e,o,s)}f=a(t.subPixelRoundingForTransparency),h=!1,f===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?h=!0:f===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(v=this.viewer&&this.viewer.isAnimating(),h=!v);for(m=0;m<r.length;m++)o=r[m],this._drawTile(o,t,s,n,i,h,t.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:o});l&&this._restoreContext(s),n||(t.getRotation(!0)%360!==0&&this._restoreRotationChanges(s),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(s)),s&&(n&&this._setRotations(t),this.blendSketch({opacity:t.opacity,scale:n,translate:i,compositeOperation:t.compositeOperation,bounds:d}),n&&(t.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(t,r),this._raiseTiledImageDrawnEvent(t,r)}}_drawDebugInfo(t,n){if(t.debugMode)for(var o,s=n.length-1;s>=0;s--){o=n[s];try{this._drawDebugInfoOnTile(o,n.length,s,t)}catch(t){e.console.error(t)}}}_clipWithPolygons(e,t){var n=this._getContext(t);n.beginPath();for(const t of e)for(const[s,e]of t.entries())n[s===0?"moveTo":"lineTo"](e.x,e.y);n.clip()}_drawTile(t,n,s,o,i,a,r){e.console.assert(t,"[Drawer._drawTile] tile is required"),e.console.assert(n,"[Drawer._drawTile] drawingHandler is required");var c=this._getContext(s);o||=1,this._drawTileToCanvas(t,c,n,o,i,a,r)}_drawTileToCanvas(t,n,s,o,i,a){var d,u,h,c=t.position.times(e.pixelDensityRatio),l=t.size.times(e.pixelDensityRatio);if(!t.context2D&&!t.cacheImageRecord){e.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached",t.toString());return}if(d=t.getCanvasContext(),!t.loaded||!d){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",t.toString());return}n.save(),typeof o=="number"&&o!==1&&(c=c.times(o),l=l.times(o)),i instanceof e.Point&&(c=c.plus(i)),n.globalAlpha===1&&t.hasTransparency&&(a&&(c.x=Math.round(c.x),c.y=Math.round(c.y),l.x=Math.round(l.x),l.y=Math.round(l.y)),n.clearRect(c.x,c.y,l.x,l.y)),this._raiseTileDrawingEvent(s,n,t,d),t.sourceBounds?(u=Math.min(t.sourceBounds.width,d.canvas.width),h=Math.min(t.sourceBounds.height,d.canvas.height)):(u=d.canvas.width,h=d.canvas.height),n.translate(c.x+l.x/2,0),t.flipped&&n.scale(-1,1),n.drawImage(d.canvas,0,0,u,h,-l.x/2,c.y,l.x,l.y),n.restore()}_getContext(e){var t,n,s=this.context;return e&&(this.sketchCanvas===null&&(this.sketchCanvas=document.createElement("canvas"),n=this._calculateSketchCanvasSize(),(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0)&&(t=this,this.viewer.addHandler("rotate",function e(){if(t.viewport.getRotation()!==0){t.viewer.removeHandler("rotate",e);var n=t._calculateSketchCanvasSize();t.sketchCanvas.width=n.x,t.sketchCanvas.height=n.y}})),this._updateImageSmoothingEnabled(this.sketchContext)),s=this.sketchContext),s}_saveContext(e){this._getContext(e).save()}_restoreContext(e){this._getContext(e).restore()}_setClip(e,t){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}_drawRectangle(e,t,n){var s=this._getContext(n);s.save(),s.fillStyle=t,s.fillRect(e.x,e.y,e.width,e.height),s.restore()}blendSketch(t,n,s,o){if(a=t,e.isPlainObject(a)||(a={opacity:t,scale:n,translate:s,compositeOperation:o}),t=a.opacity,o=a.compositeOperation,i=a.bounds,this.context.save(),this.context.globalAlpha=t,o&&(this.context.globalCompositeOperation=o),i)i.x<0&&(i.width+=i.x,i.x=0),i.x+i.width>this.canvas.width&&(i.width=this.canvas.width-i.x),i.y<0&&(i.height+=i.y,i.y=0),i.y+i.height>this.canvas.height&&(i.height=this.canvas.height-i.y),this.context.drawImage(this.sketchCanvas,i.x,i.y,i.width,i.height,i.x,i.y,i.width,i.height);else{n=a.scale||1,s=a.translate;var i,a,d,u,l=s instanceof e.Point?s:new e.Point(0,0),r=0,c=0;s&&(d=this.sketchCanvas.width-this.canvas.width,u=this.sketchCanvas.height-this.canvas.height,r=Math.round(d/2),c=Math.round(u/2)),this.context.drawImage(this.sketchCanvas,l.x-r*n,l.y-c*n,(this.canvas.width+2*r)*n,(this.canvas.height+2*c)*n,-r,-c,this.canvas.width+2*r,this.canvas.height+2*c)}this.context.restore()}_drawDebugInfoOnTile(t,n,s,o){var a,r,c=this.viewer.world.getIndexOfItem(o)%this.debugGridColor.length,i=this.context;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",i.strokeStyle=this.debugGridColor[c],i.fillStyle=this.debugGridColor[c],this._setRotations(o),this._viewportFlipped&&this._flip({point:t.position.plus(t.size.divide(2))}),i.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio),a=(t.position.x+t.size.x/2)*e.pixelDensityRatio,r=(t.position.y+t.size.y/2)*e.pixelDensityRatio,i.translate(a,r);const l=this.viewport.getRotation(!0);i.rotate(Math.PI/180*-l),i.translate(-a,-r),t.x===0&&t.y===0&&(i.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),i.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),i.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),i.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),i.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),i.fillText("Order: "+s+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),i.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),i.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),o.getRotation(!0)%360!==0&&this._restoreRotationChanges(),i.restore()}_updateImageSmoothingEnabled(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(e,t=!1){var n=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:t,saveContext:n}),n=!1),e.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:e.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:t,saveContext:n})}_offsetForRotation(t){var n=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),s=this._getContext(t.useSketch);s.save(),s.translate(n.x,n.y),s.rotate(Math.PI/180*t.degrees),s.translate(-n.x,-n.y)}_flip(t){t||={};var s=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._getContext(t.useSketch);n.translate(s.x,0),n.scale(-1,1),n.translate(-s.x,0)}_restoreRotationChanges(e){var t=this._getContext(e);t.restore()}_calculateCanvasSize(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*t),y:Math.round(n.y*t)}}_calculateSketchCanvasSize(){var t,e=this._calculateCanvasSize();return this.viewport.getRotation()===0?e:(t=Math.ceil((e.x*e.x+e.y*e.y)**.5),{x:t,y:t})}}e.CanvasDrawer=i;var t=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function n(t){return t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function s(e){return n(e)?t:e}function a(o){if(typeof o=="number")return s(o);if(!o||!e.Browser)return t;var i=o[e.Browser.vendor];return n(i)&&(i=o["*"]),s(i)}}(t),function(e){const t=e;t.WebGLDrawer=class extends t.DrawerBase{constructor(e){super(e),this._destroyed=!1,this._TextureMap=new Map,this._TileMap=new Map,this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glFramebufferToCanvasTransform=null,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._imageSmoothingEnabled=!0,this._boundToTileReady=e=>this._tileReadyHandler(e),this._boundToImageUnloaded=e=>this._imageUnloadedHandler(e),this.viewer.addHandler("tile-ready",this._boundToTileReady),this.viewer.addHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this.context=this._outputContext}destroy(){if(this._destroyed)return;let e=this._gl;var n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(let t=0;t<n;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null);e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),this._unloadTextures(),e.deleteBuffer(this._secondPass.bufferOutputPosition),e.deleteFramebuffer(this._glFrameBuffer),this._renderingCanvas.width=this._renderingCanvas.height=1,this._clippingCanvas.width=this._clippingCanvas.height=1,this._outputCanvas.width=this._outputCanvas.height=1,this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null;let t=e.getExtension("WEBGL_lose_context");t&&t.loseContext(),this.viewer.removeHandler("tile-ready",this._boundToTileReady),this.viewer.removeHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.removeHandler("resize",this._resizeHandler),this._gl=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this._destroyed=!0}canRotate(){return!0}static isSupported(){let n=document.createElement("canvas"),t=e.isFunction(n.getContext)&&n.getContext("webgl"),s=t&&t.getExtension("WEBGL_lose_context");return s&&s.loseContext(),!!t}getType(){return"webgl"}minimumOverlapRequired(e){return e.isTainted()}_createDrawingElement(){let t=e.makeNeutralElement("canvas"),n=this._calculateCanvasSize();return t.width=n.x,t.height=n.y,t}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden")),this._backupCanvasDrawer}draw(n){let s=this._gl;const i=this.viewport.getBoundsNoRotateWithMargins(!0);let a={bounds:i,center:new t.Point(i.x+i.width/2,i.y+i.height/2),rotation:this.viewport.getRotation(!0)*Math.PI/180},c=this.viewport.flipped?-1:1,l=e.Mat3.makeTranslation(-a.center.x,-a.center.y),d=e.Mat3.makeScaling(2/a.bounds.width*c,-2/a.bounds.height),u=e.Mat3.makeRotation(-a.rotation),r=d.multiply(u).multiply(l);s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let o=!1;n.forEach((t,n)=>{if(t.isTainted()){o&&(this._outputContext.drawImage(this._renderingCanvas,0,0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT),o=!1);const e=this._getBackupCanvasDrawer();e.draw([t]),this._outputContext.drawImage(e.canvas,0,0)}else{let a=t.getTilesToDraw();if(t.placeholderFillStyle&&t._hasOpaqueTile===!1&&this._drawPlaceholder(t),a.length===0||t.getOpacity()===0)return;let g=a[0],c=t.compositeOperation||this.viewer.compositeOperation||t._clip||t._croppingPolygons||t.debugMode,l=c||t.opacity<1||g.hasTransparency;c&&(o&&this._outputContext.drawImage(this._renderingCanvas,0,0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT)),s.useProgram(this._firstPass.shaderProgram),l?(s.bindFramebuffer(s.FRAMEBUFFER,this._glFrameBuffer),s.clear(s.COLOR_BUFFER_BIT)):s.bindFramebuffer(s.FRAMEBUFFER,null);let d=r,u=t.getRotation(!0);if(u%360!==0){let s=e.Mat3.makeRotation(-u*Math.PI/180),n=t.getBoundsNoRotate(!0).getCenter(),o=e.Mat3.makeTranslation(n.x,n.y),i=e.Mat3.makeTranslation(-n.x,-n.y),a=o.multiply(s).multiply(i);d=r.multiply(a)}let i=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);if(i<=0)throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${i}). This could happen
                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);let h=new Float32Array(i*12),m=new Array(i),f=new Array(i),p=new Array(i);for(let e=0;e<a.length;e++){let r=a[e].tile,l=e%i,c=l+1,n=r.getCanvasContext(),o=n?this._TextureMap.get(n.canvas):null;if(o||(this._tileReadyHandler({tile:r,tiledImage:t}),o=n?this._TextureMap.get(n.canvas):null),o&&this._getTileData(r,t,o,d,l,h,m,f,p),c===i||e===a.length-1){for(let e=0;e<=c;e++)s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_2D,m[e]);s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),s.bufferData(s.ARRAY_BUFFER,h,s.DYNAMIC_DRAW),f.forEach((e,t)=>{s.uniformMatrix3fv(this._firstPass.uTransformMatrices[t],!1,e)}),s.uniform1fv(this._firstPass.uOpacities,new Float32Array(p)),s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),s.vertexAttribPointer(this._firstPass.aOutputPosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),s.vertexAttribPointer(this._firstPass.aTexturePosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferIndex),s.vertexAttribPointer(this._firstPass.aIndex,1,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,6*c)}}l&&(s.useProgram(this._secondPass.shaderProgram),s.bindFramebuffer(s.FRAMEBUFFER,null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this._renderToTexture),this._gl.uniform1f(this._secondPass.uOpacityMultiplier,t.opacity),s.bindBuffer(s.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),s.vertexAttribPointer(this._secondPass.aTexturePosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),s.vertexAttribPointer(this._secondPass.aOutputPosition,2,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,6)),o=!0,c&&(this._applyContext2dPipeline(t,a,n),o=!1,s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT)),n===0&&this._raiseTiledImageDrawnEvent(t,a.map(e=>e.tile))}}),o&&this._outputContext.drawImage(this._renderingCanvas,0,0)}setImageSmoothingEnabled(e){this._imageSmoothingEnabled!==e&&(this._imageSmoothingEnabled=e,this._unloadTextures(),this.viewer.world.draw())}drawDebuggingRect(t){let n=this._outputContext;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}_getTextureDataFromTile(e){return e.getCanvasContext().canvas}_applyContext2dPipeline(e,t,n){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=n===0?null:e.compositeOperation||this.viewer.compositeOperation,e._croppingPolygons||e._clip?(this._renderToClippingCanvas(e),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),e.debugMode){const n=this.viewer.viewport.getFlip();n&&this._flip(),this._drawDebugInfo(t,e,n),n&&this._flip()}}_getTileData(t,n,s,o,i,a,r,c,l){let g=s.texture,_=s.position;a.set(_,i*12);let h=this._calculateOverlapFraction(t,n),m=t.positionedBounds.width*h.x,f=t.positionedBounds.height*h.y,p=t.positionedBounds.x+(t.x===0?0:m),u=t.positionedBounds.y+(t.y===0?0:f),v=t.positionedBounds.x+t.positionedBounds.width-(t.isRightMost?0:m),b=t.positionedBounds.y+t.positionedBounds.height-(t.isBottomMost?0:f),j=v-p,y=b-u,d=new e.Mat3([j,0,0,0,y,0,p,u,1]);if(t.flipped){let t=e.Mat3.makeTranslation(.5,0),n=e.Mat3.makeTranslation(-.5,0),s=t.multiply(e.Mat3.makeScaling(-1,1)).multiply(n);d=d.multiply(s)}let w=o.multiply(d);l[i]=t.opacity,r[i]=g,c[i]=w.values}_textureFilter(){return this._imageSmoothingEnabled?this._gl.LINEAR:this._gl.NEAREST}_setupRenderer(){let t=this._gl;t||e.console.error("_setupCanvases must be called before _setupRenderer"),this._unitQuad=this._makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._renderToTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._renderingCanvas.width,this._renderingCanvas.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this._textureFilter()),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this._glFrameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._glFrameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._renderToTexture,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}_makeFirstPassShaderProgram(){let t=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),o=()=>[...Array(t).keys()].map(e=>`uniform mat3 u_matrix_${e};`).join(`
`),i=()=>[...Array(t).keys()].map(e=>`${e>0?"else ":""}if(int(a_index) == ${e}) { transform_matrix = u_matrix_${e}; }`).join(`
`);const a=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;
            attribute float a_index;

            ${o()} // create a uniform mat3 for each potential tile to draw

            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {

                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()

                ${i()}

                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
                v_image_index = a_index;
            }
            `,r=`
            precision mediump float;

            // our textures
            uniform sampler2D u_images[${t}];
            // our opacities
            uniform float u_opacities[${t}];

            // the varyings passed in from the vertex shader.
            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {
                // can't index directly with a variable, need to use a loop iterator hack
                for(int i = 0; i < ${t}; ++i){
                    if(i == int(v_image_index)){
                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];
                    }
                }
            }
            `;let e=this._gl,n=this.constructor.initShaderProgram(e,a,r);e.useProgram(n),this._firstPass={shaderProgram:n,aOutputPosition:e.getAttribLocation(n,"a_output_position"),aTexturePosition:e.getAttribLocation(n,"a_texture_position"),aIndex:e.getAttribLocation(n,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map(t=>e.getUniformLocation(n,`u_matrix_${t}`)),uImages:e.getUniformLocation(n,"u_images"),uOpacities:e.getUniformLocation(n,"u_opacities"),bufferOutputPosition:e.createBuffer(),bufferTexturePosition:e.createBuffer(),bufferIndex:e.createBuffer()},e.uniform1iv(this._firstPass.uImages,[...Array(t).keys()]);let s=new Float32Array(t*12);for(let e=0;e<t;++e)s.set(Float32Array.from(this._unitQuad),e*12);e.bindBuffer(e.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),e.enableVertexAttribArray(this._firstPass.aOutputPosition),e.bindBuffer(e.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),e.enableVertexAttribArray(this._firstPass.aTexturePosition),e.bindBuffer(e.ARRAY_BUFFER,this._firstPass.bufferIndex);let c=[...Array(this._glNumTextures).keys()].map(e=>Array(6).fill(e)).flat();e.bufferData(e.ARRAY_BUFFER,new Float32Array(c),e.STATIC_DRAW),e.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){const s=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;

            uniform mat3 u_matrix;

            varying vec2 v_texture_position;

            void main() {
                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
            }
            `,o=`
            precision mediump float;

            // our texture
            uniform sampler2D u_image;

            // the texCoords passed in from the vertex shader.
            varying vec2 v_texture_position;

            // the opacity multiplier for the image
            uniform float u_opacity_multiplier;

            void main() {
                gl_FragColor = texture2D(u_image, v_texture_position);
                gl_FragColor *= u_opacity_multiplier;
            }
            `;let t=this._gl,n=this.constructor.initShaderProgram(t,s,o);t.useProgram(n),this._secondPass={shaderProgram:n,aOutputPosition:t.getAttribLocation(n,"a_output_position"),aTexturePosition:t.getAttribLocation(n,"a_texture_position"),uMatrix:t.getUniformLocation(n,"u_matrix"),uImage:t.getUniformLocation(n,"u_image"),uOpacityMultiplier:t.getUniformLocation(n,"u_opacity_multiplier"),bufferOutputPosition:t.createBuffer(),bufferTexturePosition:t.createBuffer()},t.bindBuffer(t.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),t.bufferData(t.ARRAY_BUFFER,this._unitQuad,t.STATIC_DRAW),t.enableVertexAttribArray(this._secondPass.aOutputPosition),t.bindBuffer(t.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),t.bufferData(t.ARRAY_BUFFER,this._unitQuad,t.DYNAMIC_DRAW),t.enableVertexAttribArray(this._secondPass.aTexturePosition);let i=e.Mat3.makeScaling(2,2).multiply(e.Mat3.makeTranslation(-.5,-.5));t.uniformMatrix3fv(this._secondPass.uMatrix,!1,i.values)}_resizeRenderer(){let e=this._gl,t=this._renderingCanvas.width,n=this._renderingCanvas.height;e.viewport(0,0,t,n),e.deleteTexture(this._renderToTexture),this._renderToTexture=e.createTexture(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._renderToTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this._textureFilter()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this._glFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._renderToTexture,0)}_setupCanvases(){let e=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._gl=this._renderingCanvas.getContext("webgl"),this._resizeHandler=function(){e._outputCanvas!==e.viewer.drawer.canvas&&(e._outputCanvas.style.width=e.viewer.drawer.canvas.clientWidth+"px",e._outputCanvas.style.height=e.viewer.drawer.canvas.clientHeight+"px");let t=e._calculateCanvasSize();(e._outputCanvas.width!==t.x||e._outputCanvas.height!==t.y)&&(e._outputCanvas.width=t.x,e._outputCanvas.height=t.y),e._renderingCanvas.style.width=e._outputCanvas.clientWidth+"px",e._renderingCanvas.style.height=e._outputCanvas.clientHeight+"px",e._renderingCanvas.width=e._clippingCanvas.width=e._outputCanvas.width,e._renderingCanvas.height=e._clippingCanvas.height=e._outputCanvas.height,e._resizeRenderer()},this.viewer.addHandler("resize",this._resizeHandler)}_makeQuadVertexBuffer(e,t,n,s){return new Float32Array([e,s,t,s,e,n,e,n,t,s,t,n])}_tileReadyHandler(t){let n=t.tile,o=t.tiledImage;if(o.isTainted())return;let i=n.getCanvasContext(),s=i&&i.canvas;if(!s||e.isCanvasTainted(s)){o.isTainted()||(o.setTainted(!0),e.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(o,"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."));return}if(!this._TextureMap.get(s)){let e=this._gl,c=e.createTexture(),r,l=o.source.tileOverlap,t,a;if(n.sourceBounds?(t=Math.min(n.sourceBounds.width,s.width)/s.width,a=Math.min(n.sourceBounds.height,s.height)/s.height):(t=1,a=1),l>0){let e=this._calculateOverlapFraction(n,o),s=(n.x===0?0:e.x)*t,i=(n.y===0?0:e.y)*a,c=(n.isRightMost?1:1-e.x)*t,l=(n.isBottomMost?1:1-e.y)*a;r=this._makeQuadVertexBuffer(s,c,i,l)}else t===1&&a===1?r=this._unitQuad:r=this._makeQuadVertexBuffer(0,t,0,a);let d={texture:c,position:r};this._TextureMap.set(s,d),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,c),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this._textureFilter()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this._textureFilter()),this._uploadImageData(i)}}_calculateOverlapFraction(e,t){let n=t.source.tileOverlap,s=e.sourceBounds.width,o=e.sourceBounds.height,i=(e.x===0?0:n)+(e.isRightMost?0:n),a=(e.y===0?0:n)+(e.isBottomMost?0:n),r=n/(s+i),c=n/(o+a);return{x:r,y:c}}_unloadTextures(){Array.from(this._TextureMap.keys()).forEach(e=>{this._cleanupImageData(e)})}_uploadImageData(t){let n=this._gl,s=t.canvas;try{if(!s)throw t;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,s)}catch(t){e.console.error("Error uploading image data to WebGL",t)}}_imageUnloadedHandler(e){let t=e.context2D.canvas;this._cleanupImageData(t)}_cleanupImageData(e){let t=this._TextureMap.get(e);this._TextureMap.delete(e),t&&this._gl.deleteTexture(t.texture)}_setClip(){}_renderToClippingCanvas(t){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const t=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(t.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-t.x,0)}if(t._clip){let e=[{x:t._clip.x,y:t._clip.y},{x:t._clip.x+t._clip.width,y:t._clip.y},{x:t._clip.x+t._clip.width,y:t._clip.y+t._clip.height},{x:t._clip.x,y:t._clip.y+t._clip.height}].map(e=>{let n=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(n)});this._clippingContext.beginPath(),e.forEach((e,t)=>{this._clippingContext[t===0?"moveTo":"lineTo"](e.x,e.y)}),this._clippingContext.clip(),this._setClip()}if(t._croppingPolygons){let e=t._croppingPolygons.map(e=>e.map(e=>{let n=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(n)}));this._clippingContext.beginPath(),e.forEach(e=>{e.forEach((e,t)=>{this._clippingContext[t===0?"moveTo":"lineTo"](e.x,e.y)})}),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const t=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(t.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-t.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(e){var t=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:t}),t=!1),e.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:e.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),saveContext:t})}_offsetForRotation(t){var n=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),s=this._outputContext;s.save(),s.translate(n.x,n.y),s.rotate(Math.PI/180*t.degrees),s.translate(-n.x,-n.y)}_flip(t){t||={};var s=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._outputContext;n.translate(s.x,0),n.scale(-1,1),n.translate(-s.x,0)}_drawDebugInfo(t,n,s){for(var i,o=t.length-1;o>=0;o--){i=t[o].tile;try{this._drawDebugInfoOnTile(i,t.length,o,n,s)}catch(t){e.console.error(t)}}}_drawDebugInfoOnTile(t,n,s,o,i){var r,c,l=this.viewer.world.getIndexOfItem(o)%this.debugGridColor.length,a=this.context;a.save(),a.lineWidth=2*e.pixelDensityRatio,a.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",a.strokeStyle=this.debugGridColor[l],a.fillStyle=this.debugGridColor[l],this._setRotations(o),i&&this._flip({point:t.position.plus(t.size.divide(2))}),a.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio),r=(t.position.x+t.size.x/2)*e.pixelDensityRatio,c=(t.position.y+t.size.y/2)*e.pixelDensityRatio,a.translate(r,c);const d=this.viewport.getRotation(!0);a.rotate(Math.PI/180*-d),a.translate(-r,-c),t.x===0&&t.y===0&&(a.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),a.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),a.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),a.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),a.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),a.fillText("Order: "+s+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),a.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),a.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),o.getRotation(!0)%360!==0&&this._restoreRotationChanges(),a.restore()}_drawPlaceholder(e){const o=e.getBounds(!0),t=this.viewportToDrawerRectangle(e.getBounds(!0)),n=this._outputContext;let s;typeof e.placeholderFillStyle=="function"?s=e.placeholderFillStyle(e,n):s=e.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),n.fillStyle=s,n.translate(t.x,t.y),n.rotate(Math.PI/180*o.degrees),n.translate(-t.x,-t.y),n.fillRect(t.x,t.y,t.width,t.height),this._restoreRotationChanges()}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){var e=this._outputContext;e.restore()}static initShaderProgram(t,n,s){function i(t,n,s){const o=t.createShader(n);return t.shaderSource(o,s),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)?o:(e.console.error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(o)}`),t.deleteShader(o),null)}const a=i(t,t.VERTEX_SHADER,n),r=i(t,t.FRAGMENT_SHADER,s),o=t.createProgram();return t.attachShader(o,a),t.attachShader(o,r),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)?o:(e.console.error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`),null)}}}(t),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,t.initialDegrees=t.degrees,delete t.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:t.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(t){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(t)},resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var t,e=this._contentAspectRatio/this.getAspectRatio();return this.homeFillsViewer?t=e>=1?e:1:t=e>=1?1:e,t/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var n=this._contentBounds.getCenter(),t=1/this.getHomeZoom(),s=t/this.getAspectRatio();return new e.Rect(n.x-t/2,n.y-s/2,t,s)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom(),t=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e;return t},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert(e.type(t)==="object","[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation(e))},getBoundsNoRotate:function(t){var s=this.getCenter(t),n=1/this.getZoom(t),o=n/this.getAspectRatio();return new e.Rect(s.x-n/2,s.y-o/2,n,o)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(e),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,o,i,r,c,l,d,u,s=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),a=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?s:this.zoomPoint?(r=this.pixelFromPoint(this.zoomPoint,!0),o=this.getZoom(),n=1/o,i=n/this.getAspectRatio(),c=new e.Rect(s.x-n/2,s.y-i/2,n,i),l=this._pixelFromPoint(this.zoomPoint,c),d=l.minus(r).rotate(-this.getRotation(!0)),u=d.divide(this._containerInnerSize.x*o),a.plus(u)):a},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var s,a,r,c,l,d,u,h,m,f,p,g,t=this.viewportToViewerElementRectangle(e).getBoundingBox(),n=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),o=!1,i=!1;return this.wrapHorizontal||(g=t.x+t.width,p=n.x+n.width,t.width>n.width?r=this.visibilityRatio*n.width:r=this.visibilityRatio*t.width,d=n.x-g+r,l=p-t.x-r,r>n.width?(t.x+=(d+l)/2,o=!0):l<0?(t.x+=l,o=!0):d>0&&(t.x+=d,o=!0)),this.wrapVertical||(m=t.y+t.height,f=n.y+n.height,t.height>n.height?s=this.visibilityRatio*n.height:s=this.visibilityRatio*t.height,c=n.y-m+s,u=f-t.y-s,s>n.height?(t.y+=(c+u)/2,i=!0):u<0?(t.y+=u,i=!0):c>0&&(t.y+=c,i=!0)),h=o||i,a=h?this.viewerElementToViewportRectangle(t):e.clone(),a.xConstrained=o,a.yConstrained=i,a.constraintApplied=h,a},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t,n=this.getZoom(),s=this._applyZoomConstraints(n);return n!==s&&this.zoomTo(s,this.zoomPoint,e),t=this.getConstrainedBounds(!1),t.constraintApplied&&(this.fitBounds(t,e),this._raiseConstraintsEvent(e)),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){n||={};var o,i,l,d,h,m,f,p,u=n.immediately||!1,c=n.constraints||!1,r=this.getAspectRatio(),a=t.getCenter(),s=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();return s.getAspectRatio()>=r?s.height=s.width/r:s.width=s.height*r,s.x=a.x-s.width/2,s.y=a.y-s.height/2,o=1/s.width,u?(this.panTo(a,!0),this.zoomTo(o,null,!0),c&&this.applyConstraints(!0),this):(l=this.getCenter(!0),d=this.getZoom(!0),this.panTo(l,!0),this.zoomTo(d,null,!0),h=this.getBounds(),i=this.getZoom(),i===0||Math.abs(o/i-1)<1e-8?(this.zoomTo(o,null,!0),this.panTo(a,u),c&&this.applyConstraints(!1),this):(c?(this.panTo(a,!1),o=this._applyZoomConstraints(o),this.zoomTo(o,null,!1),m=this.getConstrainedBounds(),this.panTo(l,!0),this.zoomTo(d,null,!0),this.fitBounds(m)):(f=s.rotate(-this.getRotation()),p=f.getTopLeft().times(o).minus(h.getTopLeft().times(i)).divide(o-i),this.zoomTo(o,p,u)),this))},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},getConstrainedBounds:function(e){var t,n;return t=this.getBounds(e),n=this._applyBoundaryConstraints(t),n},panBy:function(t,n){var s=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(s.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,s){var o=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,s?this._adjustCenterSpringsForZoomPoint(function(){o.zoomSpring.resetTo(t)}):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:s}),this},setRotation:function(e,t){return this.rotateTo(e,null,t)},getRotation:function(e){return e?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(e,t,n){return this.rotateTo(e,t,n)},rotateTo:function(t,n,s){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===t&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,s)if(this.rotationPivot){if(i=t-this._oldDegrees,!i)return this.rotationPivot=null,this;this._rotateAboutPivot(t)}else this.degreesSpring.resetTo(t);else{var i,c,a=e.positiveModulo(this.degreesSpring.current.value,360),o=e.positiveModulo(t,360),r=o-a;r>180?o-=360:r<-180&&(o+=360),c=a-o,this.degreesSpring.resetTo(t+c),this.degreesSpring.springTo(t)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t,immediately:!!s,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(e,t,n){return this.rotateTo(this.degreesSpring.target.value+e,t,n)},resize:function(e,t){var o,i,s=this.getBoundsNoRotate(),n=s;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(o=e.x/this.containerSize.x,n.width=s.width*o,n.height=n.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),i=this.fitBounds(n,!0),this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:e,maintain:t}),i},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e,t,n=this;return this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update(),e=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees,this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,t=e||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue(),t},_rotateAboutPivot:function(e){var n,s,o=e===!0,t=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(t.x),this.centerSpringY.shiftBy(t.y),o?this.degreesSpring.update():this.degreesSpring.resetTo(e),s=this.degreesSpring.current.value-this._oldDegrees,n=t.rotate(s*-1).times(-1),this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y)},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){t=this.pixelFromPoint(this.zoomPoint,!0),e();var t,s=this.pixelFromPoint(this.zoomPoint,!0),o=s.minus(t),n=this.deltaPointsFromPixels(o,!0);this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation(t)),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation(t))},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(!0),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var s=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/s.width).plus(s.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(t),this.getCenter(t))},_viewportToImageDelta:function(t,n){var s=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/s,n*this._contentSizeNoRotate.x/s)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var o,s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(s===1)return o=this.viewer.world.getItemAt(0),o.viewportToImageCoordinates(t,n,!0)}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var s=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*s,n/this._contentSizeNoRotate.x*s)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var s,i,o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(o===1)return i=this.viewer.world.getItemAt(0),i.imageToViewportCoordinates(t,n,!0)}return s=this._imageToViewportDelta(t,n),s.x+=this._contentBoundsNoRotate.x,s.y+=this._contentBoundsNoRotate.y,s},imageToViewportRectangle:function(t,n,s,o){if(i=t,i instanceof e.Rect||(i=new e.Rect(t,n,s,o)),this.viewer)if(a=this.viewer.world.getItemCount(),a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(a===1)return r=this.viewer.world.getItemAt(0),r.imageToViewportRectangle(t,n,s,o,!0);var i,a,r,c=this.imageToViewportCoordinates(i.x,i.y),l=this._imageToViewportDelta(i.width,i.height);return new e.Rect(c.x,c.y,l.x,l.y,i.degrees)},viewportToImageRectangle:function(t,n,s,o){if(i=t,i instanceof e.Rect||(i=new e.Rect(t,n,s,o)),this.viewer)if(a=this.viewer.world.getItemCount(),a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(a===1)return r=this.viewer.world.getItemAt(0),r.viewportToImageRectangle(t,n,s,o,!0);var i,a,r,c=this.viewportToImageCoordinates(i.x,i.y),l=this._viewportToImageDelta(i.width,i.height);return new e.Rect(c.x,c.y,l.x,l.y,i.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var n=this.imageToViewerElementCoordinates(t);return n.plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var n=this.viewportToViewerElementCoordinates(t);return n.plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer)if(n=this.viewer.world.getItemCount(),n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(n===1)return s=this.viewer.world.getItemAt(0),s.viewportToImageZoom(t);var n,s,o=this._contentSizeNoRotate.x,i=this._containerInnerSize.x,a=this._contentBoundsNoRotate.width,r=i/o*a;return t*r},imageToViewportZoom:function(t){if(this.viewer)if(n=this.viewer.world.getItemCount(),n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(n===1)return s=this.viewer.world.getItemAt(0),s.imageToViewportZoom(t);var n,s,o=this._contentSizeNoRotate.x,i=this._containerInnerSize.x,a=this._contentBoundsNoRotate.width,r=o/i/a;return t*r},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e?this:(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e}),this)},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(t,n=!0,s=!1){e.console.assert(!isNaN(t),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),!isNaN(t)&&(this.maxZoomPixelRatio=t,n&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(s))}}}(t),function(e){e.TiledImage=function(n){this._initialized=!1,e.console.assert(n.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(n.drawer,"[TiledImage] options.drawer is required"),e.console.assert(n.viewer,"[TiledImage] options.viewer is required"),e.console.assert(n.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(n.source,"[TiledImage] options.source is required"),e.console.assert(!n.clip||n.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=n.tileCache,delete n.tileCache,this._drawer=n.drawer,delete n.drawer,this._imageLoader=n.imageLoader,delete n.imageLoader,n.clip instanceof e.Rect&&(this._clip=n.clip.clone()),delete n.clip;var s,o,i,a,r,c,l=n.x||0;delete n.x,i=n.y||0,delete n.y,this.normHeight=n.source.dimensions.y/n.source.dimensions.x,this.contentAspectX=n.source.dimensions.x/n.source.dimensions.y,s=1,n.width?(s=n.width,delete n.width,n.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete n.height)):n.height&&(s=n.height/this.normHeight,delete n.height),o=n.fitBounds,delete n.fitBounds,a=n.fitBoundsPlacement||t.Placement.CENTER,delete n.fitBoundsPlacement,r=n.degrees||0,delete n.degrees,c=n.ajaxHeaders,delete n.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_tilesToDraw:[],_lastDrawn:[],_isBlending:!1,_wasBlending:!1,_isTainted:!1,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:e.DEFAULT_SETTINGS.maxTilesPerFrame},n),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:l,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),o&&this.fitBounds(o,a,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(c,!1),this._initialized=!0},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(e){let n=this._xSpring.update(),s=this._ySpring.update(),o=this._scaleSpring.update(),i=this._degreesSpring.update(),t=n||s||o||i||this._needsUpdate;if(t||e||!this._fullyLoaded){let e=this._updateLevelsForViewport();this._setFullyLoaded(e)}return this._needsUpdate=!1,!!t&&(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0)},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending,this._needsDraw},setTainted(e){this._isTainted=e},isTainted(){return this._isTainted},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy(this.viewer)},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){if(n=this.getBoundsNoRotate(t),this._clip){var n,o=t?this._worldWidthCurrent:this._worldWidthTarget,i=o/this.source.dimensions.x,s=this._clip.times(i);n=new e.Rect(n.x+s.x,n.y+s.y,s.width,s.height)}return n.rotate(this.getRotation(t),this._getRotationPoint(t))},getTileBounds:function(e,t,n){var s=this.source.getNumTiles(e),i=(s.x+t%s.x)%s.x,a=(s.y+n%s.y)%s.y,o=this.source.getTileBounds(e,i,a);return this.getFlip()&&(o.x=Math.max(0,1-o.x-o.width)),o.x+=(t-i)/s.x,o.y+=this._worldHeightCurrent/this._worldWidthCurrent*((n-a)/s.y),o},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var t=this.imageToWindowCoordinates(new e.Point(0,0)),n=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(n.x-t.x,n.y-t.y)},_viewportToImageDelta:function(t,n,s){var o=s?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/o),n*(this.source.dimensions.y*this.contentAspectX/o))},viewportToImageCoordinates:function(t,n,s){var o;return t instanceof e.Point?(s=n,o=t):o=new e.Point(t,n),o=o.rotate(-this.getRotation(s),this._getRotationPoint(s)),s?this._viewportToImageDelta(o.x-this._xSpring.current.value,o.y-this._ySpring.current.value):this._viewportToImageDelta(o.x-this._xSpring.target.value,o.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,s){var o=s?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*o,n/this.source.dimensions.y/this.contentAspectX*o)},imageToViewportCoordinates:function(t,n,s){t instanceof e.Point&&(s=n,n=t.y,t=t.x);var o=this._imageToViewportDelta(t,n,s);return s?(o.x+=this._xSpring.current.value,o.y+=this._ySpring.current.value):(o.x+=this._xSpring.target.value,o.y+=this._ySpring.target.value),o.rotate(this.getRotation(s),this._getRotationPoint(s))},imageToViewportRectangle:function(t,n,s,o,i){a=t,a instanceof e.Rect?i=n:a=new e.Rect(t,n,s,o);var a,r=this.imageToViewportCoordinates(a.getTopLeft(),i),c=this._imageToViewportDelta(a.width,a.height,i);return new e.Rect(r.x,r.y,c.x,c.y,a.degrees+this.getRotation(i))},viewportToImageRectangle:function(t,n,s,o,i){a=t,t instanceof e.Rect?i=n:a=new e.Rect(t,n,s,o);var a,r=this.viewportToImageCoordinates(a.getTopLeft(),i),c=this._viewportToImageDelta(a.width,a.height,i);return new e.Rect(r.x,r.y,c.x,c.y,a.degrees-this.getRotation(i))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var n=e.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(e){var n=this.imageToViewerElementCoordinates(e);return n.plus(t.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var n=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/n,(t.y-this._ySpring.current.value)/n,t.width/n,t.height/n,t.degrees)},viewportToImageZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return t*e},imageToViewportZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return e/t},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0,this._needsUpdate=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){var n=function(t){return t instanceof e.Point||typeof t.x=="number"&&typeof t.y=="number"},s=function(e){return e.map(function(e){try{if(n(e))return{x:e.x,y:e.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map(function(e){return s(e)}),this._needsDraw=!0}catch(t){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(t),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(t,n,s){n||=e.Placement.CENTER;var c,l,h,m,i=e.Placement.properties[n],o=this.contentAspectX,a=0,r=0,d=1,u=1;this._clip&&(o=this._clip.getAspectRatio(),d=this._clip.width/this.source.dimensions.x,u=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(a=this._clip.x/this._clip.height*t.height,r=this._clip.y/this._clip.height*t.height):(a=this._clip.x/this._clip.width*t.width,r=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o?(h=t.height/u,c=0,i.isHorizontallyCentered?c=(t.width-t.height*o)/2:i.isRight&&(c=t.width-t.height*o),this.setPosition(new e.Point(t.x-a+c,t.y-r),s),this.setHeight(h,s)):(m=t.width/d,l=0,i.isVerticallyCentered?l=(t.height-t.width/o)/2:i.isBottom&&(l=t.height-t.width/o),this.setPosition(new e.Point(t.x-a,t.y-r+l),s),this.setWidth(m,s))},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsUpdate=!0,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(e){this.flipped=e},get flipped(){return this._flipped},set flipped(e){let t=this._flipped!==!!e;this._flipped=!!e,t&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(e){let t=this._wrapHorizontal!==!!e;this._wrapHorizontal=!!e,this._initialized&&t&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(e){let t=this._wrapVertical!==!!e;this._wrapVertical=!!e,this._initialized&&t&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(e){this._debugMode=!!e,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(e){this.opacity=e},get opacity(){return this._opacity},set opacity(e){e!==this.opacity&&(this._opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(this._opacity===0&&!this._preload)return!1;var t,e=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));return!this.wrapHorizontal&&!this.wrapVertical&&(t=this._viewportToTiledImageRectangle(this.getClippedBounds(!0)),e=e.intersection(t)),e},getTilesToDraw:function(){let e=this._tilesToDraw.flat();return this._updateTilesInViewport(e),e=this._tilesToDraw.flat(),e.forEach(e=>{e.tile.beingDrawn=!0}),this._lastDrawn=e,e},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(e){e!==this._compositeOperation&&(this._compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(e){this.compositeOperation=e},setAjaxHeaders:function(t,n){if(t===null&&(t={}),!e.isPlainObject(t)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=t,this._updateAjaxHeaders(n)},_updateAjaxHeaders:function(t){if(t===0[0]&&(t=!0),e.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,t){for(i in this.tilesMatrix){n=this.source.getNumTiles(i);for(r in this.tilesMatrix[i]){c=(n.x+r%n.x)%n.x;for(d in this.tilesMatrix[i][r])if(l=(n.y+d%n.y)%n.y,o=this.tilesMatrix[i][r][d],o.loadWithAjax=this.loadTilesWithAjax,o.loadWithAjax){var n,s,o,i,a,r,c,l,d,u=this.source.getTileAjaxHeaders(i,c,l);o.ajaxHeaders=e.extend({},this.ajaxHeaders,u)}else o.ajaxHeaders=null}}for(a=0;a<this._imageLoader.jobQueue.length;a++)s=this._imageLoader.jobQueue[a],s.loadWithAjax=s.tile.loadWithAjax,s.ajaxHeaders=s.tile.loadWithAjax?s.tile.ajaxHeaders:null}},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var t=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),n=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,e=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(n/this.minPixelRatio)/Math.log(2))));return e=Math.max(e,this.source.minLevel||0),t=Math.min(t,e),{lowestLevel:t,highestLevel:e}},_updateLevelsForViewport:function(){var t,s,o,f,p,l=this._getLevelsInterval(),d=l.lowestLevel,i=l.highestLevel,n=[],c=this.getDrawArea(),a=e.now();if(this._lastDrawn.forEach(e=>{e.tile.beingDrawn=!1}),this._tilesToDraw=[],this._tilesLoading=0,this.loadingCoverage={},!c)return this._needsDraw=!1,this._fullyLoaded;t=new Array(i-d+1);for(let n=0,e=i;e>=d;e--,n++)t[n]=e;for(let e=i+1;e<=this.source.maxLevel;e++)if(s=this.tilesMatrix[e]&&this.tilesMatrix[e][0]&&this.tilesMatrix[e][0][0],s&&s.isBottomMost&&s.isRightMost&&s.loaded){t.push(e);break}let r=!1;for(let s=0;s<t.length;s++){let e=t[s];if(o=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(e),!0).x*this._scaleSpring.current.value,s===t.length-1||o>=this.minPixelRatio)r=!0;else if(!r)continue;var g=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(e),!1).x*this._scaleSpring.current.value,v=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,u=this.immediateRender?1:v,h=Math.min(1,(o-.5)/.5),b=u/Math.abs(u-g),m=this._updateLevel(e,h,b,c,a,n);if(n=m.bestTiles,f=m.updatedTiles.filter(e=>e.loaded),p=function(e,t,n){return function(s){return{tile:s,level:e,levelOpacity:t,currentTime:n}}}(e,h,a),this._tilesToDraw[e]=f.map(p),this._providesCoverage(this.coverage,e))break}return n&&n.length>0?(n.forEach(function(e){e&&!e.context2D&&this._loadTile(e,a)},this),this._needsDraw=!0,!1):this._tilesLoading===0},_updateTilesInViewport:function(t){let o=e.now(),n=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};let i=t.length?t[0].level:0;if(!this.getDrawArea())return;function a(e){let t=e.tile;if(t&&t.loaded){let s=n._blendTile(t,t.x,t.y,e.level,e.levelOpacity,o,i);n._isBlending=n._isBlending||s,n._needsDraw=n._needsDraw||s||n._wasBlending}}let s=0;for(let e=0;e<t.length;e++){let n=t[e];a(n),this._providesCoverage(this.coverage,n.level)&&(s=Math.max(s,n.level))}if(s>0)for(let e in this._tilesToDraw)e<s&&delete this._tilesToDraw[e]},_blendTile:function(e,t,n,s,o,i,a){let c=1e3*this.blendTime,l,r;return e.blendStart||(e.blendStart=i),l=i-e.blendStart,r=c?Math.min(1,l/c):1,s===a&&(r=1,l=c),this.alwaysBlend&&(r*=o),e.opacity=r,r===1&&(this._setCoverage(this.coverage,s,t,n,!0),this._hasOpaqueTile=!0),l<c},_updateLevel:function(e,t,n,s,o,i){p=s.getBoundingBox().getTopLeft(),h=s.getBoundingBox().getBottomRight(),this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:e,opacity:t,visibility:n,drawArea:s,topleft:p,bottomright:h,currenttime:o,best:i}),this._resetCoverage(this.coverage,e),this._resetCoverage(this.loadingCoverage,e);var l,u,h,m,f,p,b=this._getCornerTiles(e,p,h),d=b.topLeft,a=b.bottomRight,r=this.source.getNumTiles(e),y=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(a.x+=1,this.wrapHorizontal||(a.x=Math.min(a.x,r.x-1)));for(var j=Math.max(0,(a.x-d.x)*(a.y-d.y)),v=new Array(j),g=0,c=d.x;c<=a.x;c++)for(l=d.y;l<=a.y;l++)this.getFlip()?(f=(r.x+c%r.x)%r.x,u=c+r.x-f-f-1):u=c,s.intersection(this.getTileBounds(e,u,l))!==null&&(m=this._updateTile(u,l,e,n,y,r,o,i),i=m.bestTiles,v[g]=m.tile,g+=1);return{bestTiles:i,updatedTiles:v}},_positionTile:function(t,n,s,o,i){a=t.bounds.getTopLeft(),a.x*=this._scaleSpring.current.value,a.y*=this._scaleSpring.current.value,a.x+=this._xSpring.current.value,a.y+=this._ySpring.current.value,r=t.bounds.getSize(),r.x*=this._scaleSpring.current.value,r.y*=this._scaleSpring.current.value,t.positionedBounds.x=a.x,t.positionedBounds.y=a.y,t.positionedBounds.width=r.x,t.positionedBounds.height=r.y;var a,r,l=s.pixelFromPointNoRotate(a,!0),d=s.pixelFromPointNoRotate(a,!1),c=s.deltaPixelsFromPointsNoRotate(r,!0),u=s.deltaPixelsFromPointsNoRotate(r,!1),h=d.plus(u.divide(2)),m=o.squaredDistanceTo(h);this.viewer.drawer.minimumOverlapRequired(this)&&(n||(c=c.plus(new e.Point(1,1))),t.isRightMost&&this.wrapHorizontal&&(c.x+=.75),t.isBottomMost&&this.wrapVertical&&(c.y+=.75)),t.position=l,t.size=c,t.squaredDistance=m,t.visibility=i},_updateTile:function(e,t,n,s,o,i,a,r){var l,d,c=this._getTile(e,t,n,a,i);return this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:c}),this._setCoverage(this.coverage,n,e,t,!1),l=c.loaded||c.loading||this._isCovered(this.loadingCoverage,n,e,t),this._setCoverage(this.loadingCoverage,n,e,t,l),c.exists?((c.loaded&&c.opacity===1&&this._setCoverage(this.coverage,n,e,t,!0),this._positionTile(c,this.source.tileOverlap,this.viewport,o,s),!c.loaded)&&(c.context2D?this._setTileLoaded(c):(d=this._tileCache.getImageRecord(c.cacheKey),d&&this._setTileLoaded(c,d.getData()))),c.loading?this._tilesLoading++:l||(r=this._compareTiles(r,c,this.maxTilesPerFrame)),{bestTiles:r,tile:c}):{bestTiles:r,tile:c}},_getCornerTiles:function(t,n,s){this.wrapHorizontal?(a=e.positiveModulo(n.x,1),r=e.positiveModulo(s.x,1)):(a=Math.max(0,n.x),r=Math.min(1,s.x)),o=1/this.source.aspectRatio,this.wrapVertical?(c=e.positiveModulo(n.y,o),l=e.positiveModulo(s.y,o)):(c=Math.max(0,n.y),l=Math.min(o,s.y));var o,a,r,c,l,d=this.source.getTileAtPoint(t,new e.Point(a,c)),u=this.source.getTileAtPoint(t,new e.Point(r,l)),i=this.source.getNumTiles(t);return this.wrapHorizontal&&(d.x+=i.x*Math.floor(n.x),u.x+=i.x*Math.floor(s.x)),this.wrapVertical&&(d.y+=i.y*Math.floor(n.y/o),u.y+=i.y*Math.floor(s.y/o)),{topLeft:d,bottomRight:u}},_getTile:function(t,n,s,o,i){var a,r,c,u,h,m,f,p,g,v,l=this.tilesMatrix,d=this.source;return l[s]||(l[s]={}),l[s][t]||(l[s][t]={}),(!l[s][t][n]||!l[s][t][n].flipped!=!this.flipped)&&(a=(i.x+t%i.x)%i.x,r=(i.y+n%i.y)%i.y,f=this.getTileBounds(s,t,n),p=d.getTileBounds(s,a,r,!0),g=d.tileExists(s,a,r),h=d.getTileUrl(s,a,r),m=d.getTilePostData(s,a,r),this.loadTilesWithAjax?(u=d.getTileAjaxHeaders(s,a,r),e.isPlainObject(this.ajaxHeaders)&&(u=e.extend({},this.ajaxHeaders,u))):u=null,v=d.getContext2D?d.getContext2D(s,a,r):0[0],c=new e.Tile(s,t,n,f,g,h,v,this.loadTilesWithAjax,u,p,m,d.getTileHashKey(s,a,r,h,u,m)),this.getFlip()?a===0&&(c.isRightMost=!0):a===i.x-1&&(c.isRightMost=!0),r===i.y-1&&(c.isBottomMost=!0),c.flipped=this.flipped,l[s][t][n]=c),c=l[s][t][n],c.lastTouchTime=o,c},_loadTile:function(e,t){var n=this;e.loading=!0,this._imageLoader.addJob({src:e.getUrl(),tile:e,source:this.source,postData:e.postData,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(s,o,i){n._onTileLoad(e,t,s,o,i)},abort:function(){e.loading=!1}})},_onTileLoad:function(t,n,s,o,i){if(s)t.exists=!0;else{e.console.error("Tile %s failed to load: %s - error: %s",t,t.getUrl(),o),this.viewer.raiseEvent("tile-load-failed",{tile:t,tiledImage:this,time:n,message:o,tileRequest:i}),t.loading=!1,t.exists=!1;return}if(n<this.lastResetTime){e.console.warn("Ignoring tile %s loaded before reset: %s",t,t.getUrl()),t.loading=!1;return}var a=this,r=function(){var e=a.source,n=e.getClosestLevel();a._setTileLoaded(t,s,n,i)};r()},_setTileLoaded:function(t,n,s,o){var l,a=0,r=!1,i=this;function c(){return r&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),a++,d}function d(){a--,a===0&&(t.loading=!1,t.loaded=!0,t.hasTransparency=i.source.hasTransparency(t.context2D,t.getUrl(),t.ajaxHeaders,t.postData),t.context2D||i._tileCache.cacheTile({data:n,tile:t,cutoff:s,tiledImage:i}),i.viewer.raiseEvent("tile-ready",{tile:t,tiledImage:i,tileRequest:o}),i._needsDraw=!0)}l=c(),this.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:this,tileRequest:o,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),n},data:n,getCompletionCallback:c}),r=!0,l()},_compareTiles:function(e,t,n){return e?(e.push(t),this._sortTiles(e),e.length>n&&e.pop(),e):[t]},_sortTiles:function(e){e.sort(function(e,t){return e===null?1:t===null?-1:e.visibility===t.visibility?e.squaredDistance-t.squaredDistance:t.visibility-e.visibility})},_providesCoverage:function(e,t,n,s){var o,i,a,r;if(!e[t])return!1;if(n===0[0]||s===0[0]){o=e[t];for(a in o)if(Object.prototype.hasOwnProperty.call(o,a)){i=o[a];for(r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&!i[r])return!1}return!0}return e[t][n]===0[0]||e[t][n][s]===0[0]||e[t][n][s]===!0},_isCovered:function(e,t,n,s){return n===0[0]||s===0[0]?this._providesCoverage(e,t+1):this._providesCoverage(e,t+1,2*n,2*s)&&this._providesCoverage(e,t+1,2*n,2*s+1)&&this._providesCoverage(e,t+1,2*n+1,2*s)&&this._providesCoverage(e,t+1,2*n+1,2*s+1)},_setCoverage:function(t,n,s,o,i){if(!t[n]){e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n);return}t[n][s]||(t[n][s]={}),t[n][s][o]=i},_resetCoverage:function(e,t){e[t]={}}})}(t),function(e){var n=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},t=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.data,"[ImageRecord] options.data is required"),this._tiles=[],t.create.apply(null,[this,t.data,t.ownerTile]),this._destroyImplementation=t.destroy.bind(null,this),this.getImage=t.getImage.bind(null,this),this.getData=t.getData.bind(null,this),this.getRenderedContext=t.getRenderedContext.bind(null,this)};t.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t){this._tiles.splice(n,1);return}e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t||={},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(s){e.console.assert(s,"[TileCache.cacheTile] options is required"),e.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(s.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var g=s.cutoff||0,m=this._tilesLoaded.length,r=this._imagesLoaded[s.tile.cacheKey];if(r||(s.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),s.data=s.image),e.console.assert(s.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),r=this._imagesLoaded[s.tile.cacheKey]=new t({data:s.data,ownerTile:s.tile,create:s.tiledImage.source.createTileCache,destroy:s.tiledImage.source.destroyTileCache,getImage:s.tiledImage.source.getTileCacheDataAsImage,getData:s.tiledImage.source.getTileCacheData,getRenderedContext:s.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),r.addTile(s.tile),s.tile.cacheImageRecord=r,this._imagesLoadedCount>this._maxImageCacheCount){for(var o,l,u,h,f,p,i=null,c=-1,d=null,a=this._tilesLoaded.length-1;a>=0;a--)if(l=this._tilesLoaded[a],o=l.tile,!(o.level<=g||o.beingDrawn)){if(!i){i=o,c=a,d=l;continue}h=o.lastTouchTime,u=i.lastTouchTime,p=o.level,f=i.level,(h<u||h===u&&p>f)&&(i=o,c=a,d=l)}i&&c>=0&&(this._unloadTile(d),m=c)}this._tilesLoaded[m]=new n({tile:s.tile,tiledImage:s.tiledImage})},clearTilesFor:function(t){e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var s,n=0;n<this._tilesLoaded.length;++n)s=this._tilesLoaded[n],s.tiledImage===t&&(this._unloadTile(s),this._tilesLoaded.splice(n,1),n--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var s,n=t.tile,i=t.tiledImage;let o=n.getCanvasContext&&n.getCanvasContext();n.unload(),n.cacheImageRecord=null,s=this._imagesLoaded[n.cacheKey],s&&(s.removeTile(n),s.getTileCount()||(s.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--,o&&(o.canvas.width=0,o.canvas.height=0,i.viewer.raiseEvent("image-unloaded",{context2D:o,tile:n}))),i.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:i}))}}}(t),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),n||={},n.index!==0[0]){var s=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(s,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(t!==0[0],"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(n!==0[0],"[World.setItemIndex] index is required");var s=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n===s||s===-1||(this._items.splice(s,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:s,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);n!==-1&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){this.viewer._cancelPendingImages();for(e=0;e<this._items.length;e++)t=this._items[e],t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy();var e,t,n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,e=0;e<n.length;e++)t=n[e],this._raiseRemoveItem(t)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(e){for(var t=!1,n=0;n<this._items.length;n++)t||=this._items[n].update(e);return t},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1,this._items.forEach(e=>{this._needsDraw=e.setDrawn()||this._needsDraw})},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){t||={};var n,s,o,i,r,l,d,m,f,u=t.immediately||!1,p=t.layout||e.DEFAULT_SETTINGS.collectionLayout,v=t.rows||e.DEFAULT_SETTINGS.collectionRows,h=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,g=t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,c=a+g;!t.rows&&h?d=h:d=Math.ceil(this._items.length/v),o=0,r=0,this.setAutoRefigureSizes(!1);for(s=0;s<this._items.length;s++)s&&s%d===0&&(p==="horizontal"?(r+=c,o=0):(o+=c,r=0)),l=this._items[s],n=l.getBounds(),n.width>n.height?i=a:i=a*(n.width/n.height),m=i*(n.height/n.width),f=new e.Point(o+(a-i)/2,r+(a-m)/2),l.setPosition(f,u),l.setWidth(i,u),p==="horizontal"?o+=c:r+=c;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var l=this._homeBounds?this._homeBounds.clone():null,d=this._contentSize?this._contentSize.clone():null,u=this._contentFactor||0;if(this._items.length){n=this._items[0],s=n.getBounds(),this._contentFactor=n.getContentSize().x/s.width;for(var n,s,t=n.getClippedBounds().getBoundingBox(),o=t.x,i=t.y,a=t.x+t.width,r=t.y+t.height,c=1;c<this._items.length;c++)n=this._items[c],s=n.getBounds(),this._contentFactor=Math.max(this._contentFactor,n.getContentSize().x/s.width),t=n.getClippedBounds().getBoundingBox(),o=Math.min(o,t.x),i=Math.min(i,t.y),a=Math.max(a,t.x+t.width),r=Math.max(r,t.y+t.height);this._homeBounds=new e.Rect(o,i,a-o,r-i),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;(this._contentFactor!==u||!this._homeBounds.equals(l)||!this._contentSize.equals(d))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(t)}(Bt)),Bt.exports}W1=I0(),Vt=dr(W1);function K1(e){var t;return(t=e?.split("xywh=")[1])==null?0[0]:t.split(",").map(e=>parseFloat(e))}function ds(){let t,n;const e=new Promise((e,s)=>{t=e,n=s});return e.resolve=t,e.reject=n,e}Kt=.005,us=1.5,X1={data(){return{defaultCanvasCss:"",loadingTimeout:null,avResource:null,overlayElements:[],promise:ds(),tileSources:[],viewer:null,viewerState:{isReset:!0}}},computed:{filtersActive(){return Object.keys(this.$store.options.filters).length>0},paginationButtons(){var e;const t=((e=this.$store.manifest.viewingDirection)==null?0[0]:e.split("-to-"))||["left","right"],n=[{hidden:this.$store.isFirstPage,title:this.$translate("Previous page"),onClick:this.$store.goToPreviousPage,position:t[0]},{hidden:this.$store.isLastPage,title:this.$translate("Next page"),onClick:this.$store.goToNextPage,position:t[1]}];return this.$store.isReversed&&n.reverse(),n.filter(e=>!e.hidden)},multiLayerResources(){return this.$store.options.pages.filter(e=>e>0).map((e,t)=>{var n,s,o,i,a;return{pageIndex:t,items:(a=(i=(o=(s=(n=this.$store.manifest.items[e-1].items)==null?0[0]:n[0])==null?0[0]:s.items)==null?0[0]:o[0])==null?0[0]:i.body)==null?0[0]:a.items}}).filter(e=>{var t;return((t=e.items)==null?0[0]:t.length)>1})}},watch:{"$store.annotations":{handler(){this.updateOverlays()},deep:!0},"$store.options.annotationId":function(e){var s;if(!this.viewer||((s=this.overlayElements.find(e=>e.classList.contains("-current")))==null||s.classList.remove("-current"),!e))return;const o=this.viewer.viewport.getBounds(),n=this.overlayElements.find(t=>t.id===e);if(!n)return;n.classList.add("-current");const t=this.viewer.getOverlayById(n).getBounds(this.viewer.viewport);o.intersection(t)||(t.x-=.03,t.y-=.03,t.width+=.06,t.height+=.06,this.viewer.viewport.fitBoundsWithConstraints(t))},"$store.options.pages":function(e,t){const n=e.length!==t.length;this.loadInfo(n)},"$store.options.view":function(){this.updateOverlays()}},mounted(){this.loadInfo(),this.$store.readyPromises.push(this.promise),this.$store.rootElement.addEventListener("keydown",this.onKeydown),this.$store.rootElement.addEventListener("keypress",this.onKeypress)},beforeUnmount(){this.viewer&&this.viewer.destroy(),this.$store.rootElement.removeEventListener("keydown",this.onKeydown),this.$store.rootElement.removeEventListener("keypress",this.onKeypress)},methods:{initViewer(e){const t=[];let n=0,s=0;const o=this.$store.isReversed?this.$store.options.pages.toReversed():this.$store.options.pages;if(o.filter(e=>e>0).forEach((e,o)=>{this.tileSources.filter(t=>t.$meta.page===e&&t.$meta.layerIndex===(this.$store.options.layers[o]||0)).forEach((o,i)=>{var d;n||=o[this.$store.isVertical?"height":"width"];const a=o[this.$store.isVertical?"height":"width"]/n;this.$store.options.pages[0]===0&&(!this.$store.isReversed&&e===1||this.$store.isReversed&&e===this.$store.pageCount)&&(t.push({opacity:0,tileSource:o,[this.$store.isVertical?"y":"x"]:0,[this.$store.isVertical?"height":"width"]:a}),s+=1+Kt);const r={tileSource:o,[this.$store.isVertical?"y":"x"]:s,[this.$store.isVertical?"height":"width"]:a},{target:c}=((d=this.$store.manifest.items[e-1].items[0])==null?0[0]:d.items[i])||{},l=K1(c?.id||c||"");l?.length===4?[r.x,r.y,r.width]=l.map(e=>e/n):s+=a+Kt,this.$store.options.pages[0]===0&&(!this.$store.isReversed&&e===this.$store.pageCount||this.$store.isReversed&&e===1)&&t.push({opacity:0,tileSource:o,[this.$store.isVertical?"y":"x"]:s,[this.$store.isVertical?"height":"width"]:a}),t.push(r)})}),this.viewer){this.viewer.addOnceHandler("open",()=>{if(this.viewerState.isReset||e)this.resetImage();else{if(this.viewer.viewport.applyConstraints(!0),!this.$store.options.optionsResetOnPageChange)return;this.$store.options.optionsResetOnPageChange.forEach(e=>{if(e==="filters")this.resetFilters();else if(e==="pan"){const e=this.viewer.viewport.getBounds();if(e.x<=0&&e.y<=0)return;const t=o[0]?0:1;this.viewer.viewport.panTo({x:e.x>0?e.width/2+t:this.$store.options.pan.x,y:e.y>0?e.height/2:this.$store.options.pan.y}),this.$store.updateOptions({pan:{}})}else e==="rotation"?(this.viewer.viewport.setRotation(0),this.$store.updateOptions({rotation:null})):e==="zoom"&&(this.viewer.viewport.goHome(),this.$store.updateOptions({zoom:null}))})}}),this.viewer.open(t);return}this.viewer=Vt({animationTime:.4,drawer:"canvas",element:this.$refs.image,immediateRender:this.$store.isContainerWidthAtLeast("small"),placeholderFillStyle:"grey",preserveImageSizeOnResize:!0,preserveViewport:!0,showNavigationControl:!1,showZoomControl:!1,tileSources:t,visibilityRatio:.2,...this.$store.options.viewer}),this.viewer.addHandler("canvas-key",e=>{var t;["f","F","r","R","S","W","+","=","-","_"].includes((t=e.originalEvent)==null?0[0]:t.key)&&(e.preventDefaultAction=!0)}),this.viewer.gestureSettingsMouse.clickToZoom=!1,this.viewer.addHandler("animation-finish",()=>{if(this.viewerState.isReset){this.removeImageOptions();return}const e=this.viewer.viewport.getCenter();this.$store.updateOptions({pan:{x:Math.round(e.x*1e3)/1e3,y:Math.round(e.y*1e3)/1e3},zoom:Math.round(this.viewer.viewport.getZoom()*1e3)/1e3})}),this.viewer.addHandler("open",()=>{this.startLoadingWatch(),this.$store.options.pan.x!==0[0]||this.$store.options.pan.y!==0[0]||this.$store.options.zoom?((this.$store.options.pan.x!==0[0]||this.$store.options.pan.y!==0[0])&&this.viewer.viewport.panTo({x:this.$store.options.pan.x,y:this.$store.options.pan.y},!0),this.$store.options.zoom&&this.viewer.viewport.zoomTo(this.$store.options.zoom,null,!0)):this.viewer.viewport.goHome(),this.$store.options.rotation!==null&&this.viewer.viewport.setRotation(this.$store.options.rotation),this.updateOverlays()}),this.viewer.addHandler("pan",this.updateViewerState),this.viewer.addHandler("resize",()=>{this.viewerState.isReset&&this.$nextTick(()=>this.viewer.viewport.goHome(!0)),this.updateViewerState()}),this.viewer.addHandler("rotate",this.updateViewerState),this.viewer.addHandler("zoom",this.updateViewerState),this.viewer.addHandler("tile-load-failed",e=>{this.$store.addError(`Error loading image: ${e.message}`)}),this.defaultCanvasCss=this.viewer.drawer.canvas.style.cssText,this.updateFilterStyle(),this.$api.expose(this.resetImage),this.$api.expose(this.viewer,"viewer"),this.promise.resolve()},loadInfo(e=!1){this.stopLoadingWatch(),this.avResource=null;let t,n;const s=[];this.$store.options.pages.filter(e=>e>0).forEach((e,o)=>{var r,c,l;const a=this.$store.manifest.items[e-1],i=this.$store.options.layers[o]||0;(l=(c=(r=a.items)==null?0[0]:r[0])==null?0[0]:c.items)==null||l.forEach((o,r)=>{var l,d,u,h,m,f,p,g;const c=((d=(l=o.body)==null?0[0]:l.items)==null?0[0]:d[i])||o.body;if(!c){this.$store.addError(`Resource missing for page ${e}`);return}if(["Sound","Video"].includes(c?.type)){if(this.$store.options.pages[1]>-1){this.$store.updateOptions({pages:[e]});return}this.avResource={},n={format:c.format,type:c.type,url:c.id},this.$nextTick(()=>{this.avResource=n});const o=a.accompanyingCanvas||a.placeholderCanvas,s=(f=(m=(h=(u=o?.items)==null?0[0]:u[0])==null?0[0]:h.items)==null?0[0]:m[0])==null?0[0]:f.body;t=((p=s?.items)==null?0[0]:p[i])||s}else t=c;if(t&&this.tileSources.find(t=>t.$meta.page===e&&t.$meta.itemIndex===r&&t.$meta.layerIndex===i))return;const v=((g=t?.source)==null?0[0]:g.service)||t?.service;if(v){const t=[].concat(v)[0],n=t.id||t["@id"],o=`${n}${n.at(-1)==="/"?"":"/"}info.json`;s.push(this.$store.fetchJson(o).then(t=>({...t,$meta:{page:e,itemIndex:r,layerIndex:i}}),t=>{let n;t.response&&t.response.statusText?n=t.response.statusText:t.message&&(n=t.message),this.$store.addError(`Error loading info file for page ${e}${n?`: ${n}`:""}`)}))}else t!=null&&t.id&&this.tileSources.push({$meta:{page:e,itemIndex:r,layerIndex:i},type:"image",url:t.id,width:t.width,height:t.height})}),!t&&!n&&this.$store.addError(`Image missing for page ${e}`)}),s.length?Promise.all(s).then(t=>{t.filter(Boolean).forEach(e=>{var t,n;if(this.$store.options.preferredImageFormat){const s=e.extraFormats||((n=(t=e.profile)==null?0[0]:t[1])==null?0[0]:n.formats);s!=null&&s.includes(this.$store.options.preferredImageFormat)&&(e.tileFormat=this.$store.options.preferredImageFormat)}this.tileSources.push(e)}),this.$store.options.pages.filter(e=>e>0).every((e,n)=>t[n].$meta.page===e)&&this.initViewer(e)}):t&&this.initViewer(e)},onKeydown(e){e.key==="Escape"&&this.$store.rootElement.focus(),[45,48,96].includes(e.keyCode)&&(e.shiftKey?this.resetImage(e):this.viewer.viewport.goHome())},onKeypress(e){if(!Jn(e))switch(e.key){case"I":this.resetFilters();break;case"r":case"R":this.rotateRight(e);break;case"+":case"=":case"W":this.zoomIn();break;case"-":case"_":case"S":this.zoomOut();break}},removeImageOptions(){this.$store.updateOptions({pan:{},zoom:null})},resetFilters(){this.viewer.drawer.canvas.style.cssText=this.defaultCanvasCss,this.$store.updateOptions({filters:{}})},resetImage(e){e&&(this.viewer.viewport.setRotation(0),this.$store.updateOptions({rotation:null}),this.filtersActive&&this.resetFilters()),this.viewer.viewport.goHome(),this.removeImageOptions()},rotateRight(e){const{viewport:t}=this.viewer,n=e&&e.shiftKey?0:(t.getRotation()+90)%360;t.setRotation(n),this.$store.updateOptions({rotation:n||null})},setFilter(e,t){const n=t.target.valueAsNumber;n===1?delete this.$store.options.filters[e]:this.$store.options.filters[e]=n,this.$store.updateOptions({filters:this.$store.options.filters}),this.updateFilterStyle()},startLoadingWatch(){this.$store.loading=0;for(let e=this.viewer.world.getItemCount()-1;e>=0;e-=1){const t=this.viewer.world.getItemAt(e);if(t&&t._tilesLoading){this.$store.loading=1;break}}this.loadingTimeout=setTimeout(this.startLoadingWatch,200)},stopLoadingWatch(){clearTimeout(this.loadingTimeout)},toggleOverlays(){this.$store.updateOptions({annotationsVisible:this.$store.options.annotationsVisible===!1&&null})},updateFilterStyle(){if(!this.filtersActive)return;const e=[];Object.keys(this.$store.options.filters).forEach(t=>{e.push(`${t}(${this.$store.options.filters[t]})`)});const t=e.join(" ");this.viewer.drawer.canvas.style.cssText=`${this.defaultCanvasCss} filter: ${t}`},updateOverlays(){if(!this.viewer||!this.$store.options.pages.filter(e=>e>0).every(e=>this.tileSources.some(t=>t.$meta.page===e))||(this.viewer.clearOverlays(),this.overlayElements=[],!this.$store.annotationsActive))return;let e,t=0;this.$store.options.pages.filter(e=>e>-1).forEach((n,s)=>{var o,i,a,r;const c=this.tileSources.find(e=>e.$meta.page===(n===0?1:n)&&e.$meta.layerIndex===(this.$store.options.layers[s]||0));if(s===0){if(e=c[this.$store.isVertical?"height":"width"],n===0)return}else{const n=this.$store.options.pages[s-1],i=((o=this.$store.manifest.items[n-1])==null?0[0]:o[this.$store.isVertical?"height":"width"])||e;t+=(Kt+i/e)*(this.$store.isReversed?-1:1)}(a=(i=this.$store.annotations[n])==null?0[0]:i[0])!=null&&a.coords&&((r=this.$store.annotations[n])==null||r.forEach((s,o)=>{const i=document.createElement("button");i.ariaLabel=`${n}/${o}`,i.className=`tify-media-overlay${this.$store.options.annotationId===s.id?" -current":""}`,i.id=s.id,i.type="button",new Vt.MouseTracker({element:i,clickHandler:e=>{e.quick&&setTimeout(()=>this.$store.toggleAnnotationId(s.id),5)},keyDownHandler:e=>e.keyCode===13&&this.$store.toggleAnnotationId(s.id)}),this.viewer.addOverlay({element:i,location:new Vt.Rect(s.coords[0]/e+(this.$store.isVertical?0:t),s.coords[1]/e+(this.$store.isVertical?t:0),s.coords[2]/e,s.coords[3]/e)}),this.overlayElements.push(i)}))})},updateViewerState(){const n=this.viewer.viewport.getZoom();this.viewerState.isMaxZoom=n>=this.viewer.viewport.getMaxZoom(),this.viewerState.isMinZoom=n<=this.viewer.viewport.getMinZoom();const e=this.viewer.viewport.getHomeBounds(),t=this.viewer.viewport.getBounds();this.viewerState.isReset=Math.abs(e.height-t.height)<1e-9&&Math.abs(e.width-t.width)<1e-9&&Math.abs(e.x-t.x)<1e-9&&Math.abs(e.y-t.y)<1e-9},zoomIn(){this.viewer.viewport.zoomBy(us),this.viewer.viewport.applyConstraints()},zoomOut(){this.viewer.viewport.zoomBy(1/us),this.viewer.viewport.applyConstraints()}}},Q1={class:"tify-media","aria-live":"polite"},Z1={class:"tify-sr-only"},J1={key:0,class:"tify-media-buttons -controls"},e4=["disabled","title","aria-label"],t4=["disabled","title","aria-label"],n4=["disabled","title","aria-label"],s4=["title","aria-label"],o4={class:"tify-sr-only"},i4=["disabled"],a4=["title","aria-label"],r4={class:"tify-sr-only"},c4={key:0},l4={class:"tify-button-list"},d4=["aria-pressed","onClick"],u4={class:"tify-media-buttons -pagination"},h4=["title","aria-label","onClick"];function P0(i,l,d,u,h,m){var f;const x=Ut,y=Wt,C=H1,v=N1,_=F1,w=k1,O=l1,p=Ft,b=i1,E=t1,k=Qu,A=je,S=is,M=ns,F=fn,T=gn,D=Hu;return e(),n("section",Q1,[t("h2",Z1,s(i.$translate("Media")),1),t("div",{ref:"image",class:j(["tify-media-image",{"-annotations-hidden":i.$store.options.annotationsVisible===!1}])},null,2),h.viewer?(e(),n("div",J1,[t("button",{type:"button",class:"tify-media-button",disabled:h.viewerState.isMaxZoom,title:i.$translate("Zoom in"),"aria-label":i.$translate("Zoom in"),onClick:l[0]||(l[0]=e=>m.zoomIn())},[a(x)],8,e4),t("button",{type:"button",class:"tify-media-button",disabled:h.viewerState.isMinZoom,title:i.$translate("Zoom out"),"aria-label":i.$translate("Zoom out"),onClick:l[1]||(l[1]=e=>m.zoomOut())},[a(y)],8,t4),t("button",{type:"button",class:"tify-media-button",disabled:h.viewerState.isReset,title:i.$translate("Reset"),"aria-label":i.$translate("Reset"),onClick:l[2]||(l[2]=e=>m.resetImage(!!e.shiftKey))},[a(C)],8,n4),t("button",{type:"button",class:j(["tify-media-button",{"-active":!!i.$store.options.rotation}]),title:i.$translate("Rotate"),"aria-label":i.$translate("Rotate"),onClick:l[3]||(l[3]=e=>m.rotateRight(e))},[a(v)],10,s4),a(p,{class:j(["tify-media-dropdown -filters",{"-active":m.filtersActive}]),alignment:"center",position:"right",label:i.$translate("Toggle image filters"),shortcut:"i"},{button:I(()=>[a(_)]),default:I(()=>[t("h3",o4,s(i.$translate("Image filters")),1),a(w,{onUpdate:l[4]||(l[4]=(e,t)=>m.setFilter(e,t))}),t("p",null,[t("button",{type:"button",class:"tify-media-reset",disabled:!m.filtersActive,onClick:l[5]||(l[5]=fe(e=>m.resetFilters(),["stop"]))},[a(O),z(" "+s(i.$translate("Reset")),1)],8,i4)])]),_:1},8,["class","label"]),i.$store.annotations.length&&(i.$store.options.view==="text"||!i.$store.isContainerWidthAtLeast("medium"))?(e(),n("button",{key:0,type:"button",class:"tify-media-button",title:i.$translate("Toggle annotations"),"aria-label":i.$translate("Toggle annotations"),onClick:l[6]||(l[6]=e=>m.toggleOverlays())},[i.$store.options.annotationsVisible!==!1?(e(),r(b,{key:0})):(e(),r(E,{key:1}))],8,a4)):o("",!0),m.multiLayerResources.length?(e(),r(p,{key:1,class:j(["tify-media-dropdown -layers",{"-active":i.$store.options.layers.some(Boolean)}]),alignment:"center",position:"right",label:i.$translate("Toggle image layer select"),shortcut:"c"},{button:I(()=>[a(k)]),default:I(()=>[t("h3",r4,s(i.$translate("Layer")),1),(e(!0),n(c,null,g(m.multiLayerResources,r=>(e(),n(c,{key:r.pageIndex},[i.$store.options.pages.filter(e=>e>0).length>1?(e(),n("h4",c4,[a(A,{number:i.$store.options.pages[r.pageIndex],wrap:!0},null,8,["number"])])):o("",!0),t("ol",l4,[(e(!0),n(c,null,g(r.items,(o,a)=>(e(),n("li",{key:o.id},[t("button",{type:"button","aria-pressed":a===(i.$store.options.layers[r.pageIndex]||0),onClick:e=>{i.$store.options.layers[r.pageIndex]=a,m.loadInfo()}},s(i.$store.localize(o.label)),9,d4)]))),128))])],64))),128))]),_:1},8,["class","label"])):o("",!0)])):o("",!0),t("div",u4,[(e(!0),n(c,null,g(m.paginationButtons,t=>(e(),n("button",{key:t.position,type:"button",class:j(["tify-media-button",`-${t.position}`]),title:t.title,"aria-label":t.title,onClick:t.onClick},[t.position==="left"?(e(),r(S,{key:0})):t.position==="right"?(e(),r(M,{key:1})):t.position==="top"?(e(),r(F,{key:2})):t.position==="bottom"?(e(),r(T,{key:3})):o("",!0)],10,h4))),128))]),(f=h.avResource)!=null&&f.url?(e(),r(D,{key:1,src:h.avResource.url,format:h.avResource.format,hasImage:!!h.viewer},null,8,["src","format","hasImage"])):o("",!0)])}f4=i(X1,[["render",P0]]),p4={},g4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function R0(s,o){return e(),n("svg",g4,o[0]||(o[0]=[t("path",{d:"M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z"},null,-1)]))}b4=i(p4,[["render",R0]]),j4={},y4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function L0(s,o){return e(),n("svg",y4,o[0]||(o[0]=[t("path",{d:"M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"},null,-1)]))}w4=i(j4,[["render",L0]]),O4={},x4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function N0(s,o){return e(),n("svg",x4,o[0]||(o[0]=[t("path",{d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"},null,-1)]))}E4=i(O4,[["render",N0]]),k4={},A4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function D0(s,o){return e(),n("svg",A4,o[0]||(o[0]=[t("path",{d:"M11 15H17V17H11V15M9 7H7V9H9V7M11 13H17V11H11V13M11 9H17V7H11V9M9 11H7V13H9V11M21 5V19C21 20.1 20.1 21 19 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5M19 5H5V19H19V5M9 15H7V17H9V15Z"},null,-1)]))}M4=i(k4,[["render",D0]]),F4={},T4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function z0(s,o){return e(),n("svg",T4,o[0]||(o[0]=[t("path",{d:"M2 12H4V17H20V12H22V17C22 18.11 21.11 19 20 19H4C2.9 19 2 18.11 2 17V12M12 15L17.55 9.54L16.13 8.13L13 11.25V2H11V11.25L7.88 8.13L6.46 9.55L12 15Z"},null,-1)]))}D4=i(F4,[["render",z0]]),N4={},L4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function F0(s,o){return e(),n("svg",L4,o[0]||(o[0]=[t("path",{d:"M13.5,4A1.5,1.5 0 0,0 12,5.5A1.5,1.5 0 0,0 13.5,7A1.5,1.5 0 0,0 15,5.5A1.5,1.5 0 0,0 13.5,4M13.14,8.77C11.95,8.87 8.7,11.46 8.7,11.46C8.5,11.61 8.56,11.6 8.72,11.88C8.88,12.15 8.86,12.17 9.05,12.04C9.25,11.91 9.58,11.7 10.13,11.36C12.25,10 10.47,13.14 9.56,18.43C9.2,21.05 11.56,19.7 12.17,19.3C12.77,18.91 14.38,17.8 14.54,17.69C14.76,17.54 14.6,17.42 14.43,17.17C14.31,17 14.19,17.12 14.19,17.12C13.54,17.55 12.35,18.45 12.19,17.88C12,17.31 13.22,13.4 13.89,10.71C14,10.07 14.3,8.67 13.14,8.77Z"},null,-1)]))}P4=i(N4,[["render",F0]]),H4={},I4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function M0(s,o){return e(),n("svg",I4,o[0]||(o[0]=[t("path",{d:"M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z"},null,-1)]))}V4=i(H4,[["render",M0]]),$4={},W4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function S0(s,o){return e(),n("svg",W4,o[0]||(o[0]=[t("path",{d:"M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z"},null,-1)]))}K4=i($4,[["render",S0]]),q4={},Y4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function k0(s,o){return e(),n("svg",Y4,o[0]||(o[0]=[t("path",{d:"M20,5A2,2 0 0,1 22,7V17A2,2 0 0,1 20,19H4C2.89,19 2,18.1 2,17V7C2,5.89 2.89,5 4,5H20M5,16H19L14.5,10L11,14.5L8.5,11.5L5,16Z"},null,-1)]))}X4=i(q4,[["render",k0]]),Q4={},Z4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function E0(s,o){return e(),n("svg",Z4,o[0]||(o[0]=[t("path",{d:"M12 16C13.1 16 14 16.9 14 18S13.1 20 12 20 10 19.1 10 18 10.9 16 12 16M12 10C13.1 10 14 10.9 14 12S13.1 14 12 14 10 13.1 10 12 10.9 10 12 10M12 4C13.1 4 14 4.9 14 6S13.1 8 12 8 10 7.1 10 6 10.9 4 12 4M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M6 10C7.1 10 8 10.9 8 12S7.1 14 6 14 4 13.1 4 12 4.9 10 6 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M18 10C19.1 10 20 10.9 20 12S19.1 14 18 14 16 13.1 16 12 16.9 10 18 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)]))}e0=i(Q4,[["render",E0]]),t0={},n0={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function C0(s,o){return e(),n("svg",n0,o[0]||(o[0]=[t("path",{d:"M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z"},null,-1)]))}o0=i(t0,[["render",C0]]),i0={},a0={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function t3(s,o){return e(),n("svg",a0,o[0]||(o[0]=[t("path",{d:"M16,18H18V6H16M6,18L14.5,12L6,6V18Z"},null,-1)]))}c0=i(i0,[["render",t3]]),l0={},d0={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function n3(s,o){return e(),n("svg",d0,o[0]||(o[0]=[t("path",{d:"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z"},null,-1)]))}h0=i(l0,[["render",n3]]),m0={},f0={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function O0(s,o){return e(),n("svg",f0,o[0]||(o[0]=[t("path",{d:"M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z"},null,-1)]))}g0=i(m0,[["render",O0]]),v0={},b0=["disabled","title","aria-label"],j0=["disabled","title","aria-label"],y0=["disabled","title","aria-label"],p0=["disabled","title","aria-label"],u0=["disabled","title","aria-label"],r0=["disabled","title","aria-label"];function x0(s,i){const r=g0,c=h0,l=is,d=ns,u=c0,h=o0;return e(),n("div",{class:j(["tify-header-button-group -pagination",{"-reversed":s.$store.isReversed,"-vertical":s.$store.isVertical}])},[t("button",{type:"button",class:"tify-header-button",disabled:s.$store.isFirstPage,title:s.$translate("First page"),"aria-label":s.$translate("First page"),onClick:i[0]||(i[0]=e=>s.$store.goToFirstPage())},[a(r)],8,b0),s.$store.sections.length>1?(e(),n("button",{key:0,type:"button",class:"tify-header-button",disabled:s.$store.isFirstPage,title:s.$translate("Previous section"),"aria-label":s.$translate("Previous section"),onClick:i[1]||(i[1]=e=>s.$store.goToPreviousSection())},[a(c)],8,j0)):o("",!0),t("button",{type:"button",class:"tify-header-button",disabled:s.$store.isFirstPage,title:s.$translate("Previous page"),"aria-label":s.$translate("Previous page"),onClick:i[2]||(i[2]=e=>s.$store.goToPreviousPage())},[a(l)],8,y0),t("button",{type:"button",class:"tify-header-button",disabled:s.$store.isLastPage,title:s.$translate("Next page"),"aria-label":s.$translate("Next page"),onClick:i[3]||(i[3]=e=>s.$store.goToNextPage())},[a(d)],8,p0),s.$store.sections.length>1?(e(),n("button",{key:1,type:"button",class:"tify-header-button",disabled:s.$store.isLastSection,title:s.$translate("Next section"),"aria-label":s.$translate("Next section"),onClick:i[4]||(i[4]=e=>s.$store.goToNextSection())},[a(u)],8,u0)):o("",!0),t("button",{type:"button",class:"tify-header-button",disabled:s.$store.isLastPage,title:s.$translate("Last page"),"aria-label":s.$translate("Last page"),onClick:i[5]||(i[5]=e=>s.$store.goToLastPage())},[a(h)],8,r0)],2)}s0=i(v0,[["render",x0]]),J4={},G4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function A0(s,o){return e(),n("svg",G4,o[0]||(o[0]=[t("path",{d:"M21,4H3A2,2 0 0,0 1,6V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V6A2,2 0 0,0 21,4M3,19V6H11V19H3M21,19H13V6H21V19Z"},null,-1)]))}U4=i(J4,[["render",A0]]),B4={},R4={class:"tify-icon","aria-hidden":"true",viewBox:"0 0 24 24"};function T0(s,o){return e(),n("svg",R4,o[0]||(o[0]=[t("path",{d:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z"},null,-1)]))}z4=i(B4,[["render",T0]]),S4={data(){return{filter:"",filteredCanvases:[],highlightIndex:0}},watch:{filter(){this.updateFilteredCanvases(),this.$nextTick(()=>this.updateScroll())}},mounted(){this.updateFilteredCanvases()},methods:{onKeyDownArrow(){this.highlightIndex<this.filteredCanvases.length-1&&(this.highlightIndex+=1,this.updateScroll())},onKeyUpArrow(){this.highlightIndex>0&&(this.highlightIndex-=1,this.updateScroll())},onOpen(){this.filter="",this.highlightIndex=this.$store.options.pages.at(-1)-1,this.$nextTick(()=>{window.matchMedia("(pointer: coarse)").matches||this.$refs.search.focus(),this.updateScroll()})},resetFilter(e){this.filter&&(this.filter="",e.stopPropagation())},setPage(e){this.$store.setPage(e),this.$store.isContainerWidthAtLeast("medium")||this.$store.updateOptions({view:null})},updateFilteredCanvases(){const e=[],n=this.filter.toLowerCase();let t=-1;this.$store.manifest.items.forEach((s,o)=>{const i=this.$store.localize(s.label).toLowerCase().includes(n),a=(o+1).toFixed().includes(n);if(i||a){const n=s;n.page=o+1,n.page===this.$store.options.pages[0]&&(t=e.length),e.push(n)}}),this.highlightIndex=t<0?0:t,this.filteredCanvases=e},updateScroll(){const{list:e}=this.$refs,t=e.children[this.highlightIndex];e&&t&&(e.scrollTop=t.offsetTop-e.offsetHeight/2+t.offsetHeight/2)}}},C4={class:"tify-sr-only"},_4={class:"tify-sr-only"},v4={class:"tify-page-select-filter"},m4=["aria-label"],Y1={ref:"list",class:"tify-button-list tify-page-select-list"},$1=["onClick"];function B0(o,i,l,d,u,h){const m=je,f=Ft;return e(),r(f,{class:"tify-page-select",shortcut:"x",onOpen:h.onOpen},{button:I(()=>[t("span",C4,s(`${o.$translate("Current Page")} `),1),a(m,{number:o.$store.options.pages.find(e=>e>0)},null,8,["number"]),t("span",_4," / "+s(o.$translate("Toggle page select")),1)]),default:I(()=>[t("div",v4,[A(t("input",{ref:"search","onUpdate:modelValue":i[0]||(i[0]=e=>u.filter=e),"aria-label":o.$translate("Filter pages"),type:"text",class:"tify-page-select-input",onKeyup:i[1]||(i[1]=de(e=>o.$refs.list.querySelectorAll("a")[u.highlightIndex].click(),["enter"])),onKeydown:[i[2]||(i[2]=de(e=>h.resetFilter(),["esc"])),i[3]||(i[3]=de(fe(e=>h.onKeyUpArrow(),["prevent"]),["up"])),i[4]||(i[4]=de(fe(e=>h.onKeyDownArrow(),["prevent"]),["down"]))]},null,40,m4),[[tt,u.filter]])]),t("ol",Y1,[(e(!0),n(c,null,g(u.filteredCanvases,(s,i)=>(e(),n("li",{key:i},[t("a",{href:"javascript:;",class:j({"-current":o.$store.options.pages.includes(s.page),"-highlighted":u.highlightIndex===i}),onClick:e=>h.setPage(s.page)},[a(m,{number:s.page,wrap:!0},null,8,["number"])],10,$1)]))),128))],512)]),_:1},8,["onOpen"])}P1=i(S4,[["render",B0]]),D1={props:{textEnabled:Boolean,tocEnabled:Boolean},data(){return{controlsVisible:!1,fullscreen:d2(this.$store.rootElement.parentNode)}},computed:{doublePageEnabled(){var e;return!((e=this.$store.manifest.behavior)!=null&&e.some(e=>["continuous","individuals"].includes(e)))&&this.$store.manifest.items.some(e=>{var t,n,s,o,i;return((i=(o=(s=(n=(t=e.items)==null?0[0]:t[0])==null?0[0]:n.items)==null?0[0]:s[0])==null?0[0]:o.body)==null?0[0]:i.type)==="Image"})},title(){return this.$store.localize((this.$store.manifest||this.$store.collection||{}).label).replace(/(\S{1,10})\s+(\S{1,10})$/,"$1\xA0$2")}},created(){this.$api.expose(this.setView),this.$api.expose(this.toggleDoublePage),this.$api.expose(this.fullscreen.toggle)},mounted(){this.$store.rootElement.addEventListener("keydown",this.onKeyDown),Pd(this.$refs.controls,()=>{this.closeControlsPopup()})},beforeUnmount(){this.$store.rootElement.removeEventListener("keydown",this.onKeyDown)},methods:{closeControlsPopup(){this.controlsVisible=!1},onKeyDown(e){if(Jn(e))return;if(e.key==="Escape"){this.controlsVisible=!1;return}switch(e.key){case"Backspace":this.$refs.switchViewSmall.offsetParent&&this.toggleView(null);break;case"1":this.$store.manifest&&this.textEnabled&&this.toggleView("text");break;case"2":this.$store.manifest&&this.toggleView("thumbnails");break;case"3":this.$store.manifest&&this.tocEnabled&&this.toggleView("toc");break;case"4":this.toggleView("info");break;case"5":(this.$store.collection||this.$store.manifest)&&this.toggleView("export");break;case"6":this.$store.collection&&this.toggleView("collection");break;case"7":this.toggleView("help");break;case"b":this.$store.manifest&&this.toggleDoublePage();break;case"f":this.fullscreen.toggle();break}if(!this.$store.manifest)return;const{pages:t}=this.$store.options;switch(e.key){case"q":case",":t[0]>1&&this.$store.goToPreviousPage();break;case"e":case".":this.isLastPage||this.$store.goToNextPage();break;case"Q":t[0]>1&&this.$store.goToFirstPage();break;case"E":this.isLastPage||this.$store.goToLastPage();break}},setView(e){this.$store.updateOptions({view:e})},toggleControlsPopup(){this.controlsVisible=!this.controlsVisible},toggleDoublePage(e){const{pages:t}=this.$store.options;if(!this.doublePageEnabled)return t[0];let n;return t.length>1&&e!==!0||e===!1?n=[t[1]>0?t[1]:t[0]]:n=[t[0],this.$store.getFacingPage(t[0])].sort(),this.$store.updateOptions({pages:n}),n},toggleView(e){this.closeControlsPopup();const t=e===this.$store.options.view&&this.$store.manifest&&this.$store.isContainerWidthAtLeast("medium")?null:e;return this.$store.updateOptions({view:t}),t}}},M1={class:"tify-header"},E1={class:"tify-header-column -title"},y1=["title"],g1={key:0,class:"tify-header-column -pagination"},h1={class:"tify-sr-only"},c1={class:"tify-header-button-group -page-select"},o1=["title","aria-label","aria-pressed"],e1={ref:"controls",class:"tify-header-column -controls"},Xu={class:"tify-sr-only"},Ku={ref:"switchViewSmall",class:"tify-header-button-group -toggle"},$u=["aria-controls","aria-expanded","title","aria-label"],Vu=["id"],Pu={class:"tify-header-button-group -view"},pu=["aria-controls","aria-expanded"],uu=["aria-controls","aria-expanded"],ru=["aria-controls","aria-expanded"],su=["aria-controls","aria-expanded"],Jd=["aria-controls","aria-expanded"],qd=["aria-controls","aria-expanded"],Wd=["aria-controls","aria-expanded"],Vd={class:"tify-header-button-group -view"},Bd=["aria-controls","aria-expanded","title","aria-label"],Id=["title","aria-label"],Hd=["title","aria-label"];function f2(i,c,l,d,u,h){const y=P1,f=z4,g=U4,m=s0,v=e0,b=X4,p=K4,_=V4,w=P4,O=D4,x=M4,C=E4,E=w4,k=b4;return e(),n("header",M1,[t("div",E1,[t("h1",{class:"tify-header-title",title:h.title},s(h.title),9,y1)]),i.$store.pageCount>1?(e(),n("div",g1,[t("h2",h1,s(i.$translate("Page")),1),t("div",c1,[a(y),h.doublePageEnabled?(e(),n("button",{key:0,type:"button",class:j(["tify-header-button",{"-vertical":i.$store.isVertical}]),title:i.$translate("Toggle double-page"),"aria-label":i.$translate("Toggle double-page"),"aria-pressed":i.$store.options.pages.length>1,onClick:c[0]||(c[0]=(...e)=>h.toggleDoublePage&&h.toggleDoublePage(...e))},[i.$store.isCustomPageView?(e(),r(f,{key:0})):(e(),r(g,{key:1}))],10,o1)):o("",!0)]),i.$store.pageCount>1?(e(),r(m,{key:0})):o("",!0)])):o("",!0),t("div",e1,[t("h2",Xu,s(i.$translate("View [noun]")),1),t("div",Ku,[t("button",{type:"button","aria-controls":i.$getId("controls"),"aria-expanded":u.controlsVisible,class:"tify-header-button",title:i.$translate("View [noun]"),"aria-label":i.$translate("View [noun]"),onClick:c[1]||(c[1]=(...e)=>h.toggleControlsPopup&&h.toggleControlsPopup(...e))},[a(v)],8,$u)],512),t("div",{id:i.$getId("controls"),class:j(["tify-dropdown-content -bottom -mobile-only",{"-visible":u.controlsVisible}])},[t("div",Pu,[i.$store.manifest?(e(),n("button",{key:0,type:"button",class:"tify-header-button -media","aria-controls":i.$getId("media"),"aria-expanded":!i.$store.options.view,onClick:c[2]||(c[2]=e=>h.toggleView(null))},[a(b),t("span",null,s(i.$translate("Media")),1)],8,pu)):o("",!0),l.textEnabled?(e(),n("button",{key:1,type:"button",class:"tify-header-button","aria-controls":i.$getId("text"),"aria-expanded":i.$store.options.view==="text",onClick:c[3]||(c[3]=e=>h.toggleView("text"))},[a(p),t("span",null,s(i.$translate("Text")),1)],8,uu)):o("",!0),i.$store.manifest?(e(),n("button",{key:2,type:"button",class:"tify-header-button","aria-controls":i.$getId("thumbnails"),"aria-expanded":i.$store.options.view==="thumbnails",onClick:c[4]||(c[4]=e=>h.toggleView("thumbnails"))},[a(f),t("span",null,s(i.$translate("Pages")),1)],8,ru)):o("",!0),l.tocEnabled?(e(),n("button",{key:3,type:"button",class:"tify-header-button","aria-controls":i.$getId("toc"),"aria-expanded":i.$store.options.view==="toc",onClick:c[5]||(c[5]=e=>h.toggleView("toc"))},[a(_),t("span",null,s(i.$translate("Contents")),1)],8,su)):o("",!0),t("button",{type:"button",class:"tify-header-button","aria-controls":i.$getId("info"),"aria-expanded":i.$store.options.view==="info",onClick:c[6]||(c[6]=e=>h.toggleView("info"))},[a(w),t("span",null,s(i.$translate("Info")),1)],8,Jd),i.$store.collection||i.$store.manifest?(e(),n("button",{key:4,type:"button",class:"tify-header-button","aria-controls":i.$getId("export"),"aria-expanded":i.$store.options.view==="export",onClick:c[7]||(c[7]=e=>h.toggleView("export"))},[a(O),t("span",null,s(i.$translate("Export [noun]")),1)],8,qd)):o("",!0),i.$store.collection?(e(),n("button",{key:5,type:"button",class:"tify-header-button","aria-controls":i.$getId("collection"),"aria-expanded":i.$store.options.view==="collection",onClick:c[8]||(c[8]=e=>h.toggleView("collection"))},[a(x),t("span",null,s(i.$translate("Collection")),1)],8,Wd)):o("",!0)]),t("div",Vd,[t("button",{type:"button",class:"tify-header-button -icon-only","aria-controls":i.$getId("help"),"aria-expanded":i.$store.options.view==="help",title:i.$translate("Help"),"aria-label":i.$translate("Help"),onClick:c[9]||(c[9]=e=>h.toggleView("help"))},[a(C),t("span",null,s(i.$translate("Help")),1)],8,Bd),u.fullscreen.isFullscreen?(e(),n("button",{key:1,type:"button",class:"tify-header-button -icon-only",title:i.$translate("Exit fullscreen"),"aria-label":i.$translate("Exit fullscreen"),onClick:c[11]||(c[11]=e=>u.fullscreen.toggle())},[a(k),t("span",null,s(i.$translate("Exit fullscreen")),1)],8,Hd)):(e(),n("button",{key:0,type:"button",class:"tify-header-button -icon-only",title:i.$translate("Fullscreen"),"aria-label":i.$translate("Fullscreen"),onClick:c[10]||(c[10]=e=>u.fullscreen.toggle())},[a(E),t("span",null,s(i.$translate("Fullscreen")),1)],8,Id))]),i.$store.pageCount>1?(e(),r(m,{key:0})):o("",!0)],10,Vu)],512)])}Rd=i(D1,[["render",f2]]),Td={version:"0.34.5"},Md={props:{readyPromise:{type:Object,default:null,required:!0}},data(){return{readyToRender:!1}},computed:{hasText(){var e,t;return(t=(e=this.$store.manifest)==null?0[0]:e.items)==null?0[0]:t.some(e=>"annotations"in e)},hasToc(){return this.$store.structures.length>0}},watch:{"$store.options.pages":function(e,t){t&&(this.$store.options.layers=[]),this.$store.annotationsActive&&this.$store.loadAnnotations()},"$store.options.view":function(){this.$store.annotationsActive&&this.$store.loadAnnotations()}},created(){this.$api.expose(this.setLanguage),this.$api.expose(this.$store.setPage),this.$api.expose(this.$store.updateOptions)},mounted(){if(this.$store.rootElement=this.$el,!this.$store.options.manifestUrl){if(this.$store.options.contentStateEnabled){const e=new URLSearchParams(window.location.search);this.$store.options.manifestUrl=e.get("iiif-content")||""}if(!this.$store.options.manifestUrl){this.$store.addError("Missing IIIF manifest URL");return}}Promise.all([this.$store.loadManifest(this.$store.options.manifestUrl),this.setLanguage(this.$store.options.language)]).then(()=>{this.readyToRender=!0,this.$nextTick(()=>{Promise.all(this.$store.readyPromises).then(()=>{setTimeout(this.readyPromise.resolve)})})},e=>{this.readyPromise.reject(e)})},beforeUnmount(){clearTimeout(this.$store.urlUpdateTimeout),window.removeEventListener("popstate",this.$store.initOptions)},methods:{setLanguage(e){const t=ds();if(e==="en")return this.$store.options.language="en",this.$translate.setTranslation(null),t.resolve(e),t;if(this.$store.options.translationsDirUrl===null)return t.reject(new Error("Could not determine translationsDirUrl")),t;const n=`${this.$store.options.translationsDirUrl}/${e}.json?${Td.version}`;return this.$store.fetchJson(n).then(n=>{this.$store.options.language=e,this.$translate.setTranslation(n),t.resolve(e)},n=>{const s=n.response?n.response.statusText:n.message;this.$store.addError(`Error loading translation “${e}”: ${s}`),t.resolve(this.$store.options.language)}),t}}},Sd={key:1,class:"tify-main"},Ad={key:2,class:"tify-loading",role:"status"},Ed={class:"tify-sr-only"},Cd={key:3,class:"tify-error"},xd=["aria-label"],wd={class:"tify-error-messages"};function x2(i,l,d,u,h,m){const f=Rd,p=f4,v=Kl,b=Ll,y=wl,_=ml,w=to,O=lr,x=Ha,C=un;return e(),n("article",{class:j(["tify",i.$store.options.colorMode==="auto"?"":`-${i.$store.options.colorMode}`]),tabindex:"-1"},[h.readyToRender&&(i.$store.collection||i.$store.manifest)?(e(),r(f,{key:0,textEnabled:m.hasText,tocEnabled:m.hasToc},null,8,["textEnabled","tocEnabled"])):o("",!0),h.readyToRender?(e(),n("div",Sd,[i.$store.manifest?(e(),n(c,{key:0},[a(p,{id:i.$getId("media")},null,8,["id"]),m.hasText?A((e(),r(v,{key:0,id:i.$getId("text")},null,8,["id"])),[[L,i.$store.options.view==="text"]]):o("",!0),A(a(b,{id:i.$getId("thumbnails")},null,8,["id"]),[[L,i.$store.options.view==="thumbnails"]]),m.hasToc?A((e(),r(y,{key:1,id:i.$getId("toc")},null,8,["id"])),[[L,i.$store.options.view==="toc"]]):o("",!0)],64)):o("",!0),i.$store.collection||i.$store.manifest?A((e(),r(_,{key:1,id:i.$getId("export")},null,8,["id"])),[[L,i.$store.options.view==="export"]]):o("",!0),i.$store.collection||i.$store.manifest?A((e(),r(w,{key:2,id:i.$getId("info")},null,8,["id"])),[[L,i.$store.options.view==="info"]]):o("",!0),i.$store.collection?A((e(),r(O,{key:3,id:i.$getId("collection")},null,8,["id"])),[[L,i.$store.options.view==="collection"]]):o("",!0),A(a(x,{id:i.$getId("help")},null,8,["id"]),[[L,i.$store.options.view==="help"]])])):o("",!0),i.$store.loading?(e(),n("div",Ad,[t("span",Ed,s(i.$translate("Loading")),1)])):o("",!0),i.$store.errors.size?(e(),n("section",Cd,[t("button",{type:"button",class:"tify-error-close","aria-label":i.$translate("Dismiss"),onClick:l[0]||(l[0]=e=>i.$store.clearErrors())},[a(C)],8,xd),t("div",wd,[(e(!0),n(c,null,g(i.$store.errors,t=>(e(),n("p",{key:t},s(t),1))),128))])])):o("",!0)],2)}_d=i(Md,[["render",x2]]),jd={annotationId:null,annotationsVisible:null,childManifestAutoloaded:!0,childManifestUrl:null,colorMode:"auto",container:null,contentStateEnabled:!1,fallbackLanguage:"en",filters:{},language:"en",layers:[],manifestUrl:null,optionsResetOnPageChange:["pan"],pageLabelFormat:"P&nbsp;\xB7 L",pages:null,pan:{},preferredImageFormat:null,rotation:null,translationsDirUrl:null,urlQueryKey:null,urlQueryParams:["annotationId","annotationsVisible","childManifestUrl","layers","filters","pages","pan","rotation","view","zoom"],view:null,viewer:{},zoom:null};function k2(e){return{expose(t,n){e[n||t.name.replace("bound ","")]=t}}}pd={install:(e,t)=>{e.config.globalProperties.$api=new k2(t.instance)}},ud="TIFY is a slim and mobile-friendly IIIF document viewer, released under the <a href='https://www.gnu.org/licenses/agpl-3.0.html.en'>GNU Affero General Public License 3.0</a>.",rd="Copyright &copy; 2017&ndash;2025 <a href='https://www.uni-goettingen.de/en/'>G\xF6ttingen University</a>&nbsp;/ <a href='https://www.sub.uni-goettingen.de/en/'>G\xF6ttingen State and University Library</a>",sd={$info:ud,$copyright:rd,"$n/a":"‒"},Jl={install:e=>{const t=Je(null);e.config.globalProperties.$translate=n=>{var s,o,i;const{language:a}=e.config.globalProperties.$store.options,r=(o=(s=e.config.globalProperties.$store.options.translations)==null?0[0]:s[a])==null?0[0]:o[n];return r||((i=t.value)!=null&&i[n]?t.value[n]:sd[n]||n.replace(/\s*\[.+?\]/g,""))},e.config.globalProperties.$translate.setTranslation=e=>{t.value=e}}},Gl={install:e=>{const t=crypto!=null&&crypto.randomUUID?crypto.randomUUID():Math.random().toString().slice(2);e.config.globalProperties.$getId=e=>`${t}-${e}`}},Ul="http://library.stanford.edu/iiif/image-api/compliance.html#level0",Nl="http://library.stanford.edu/iiif/image-api/compliance.html#level1",hs="http://library.stanford.edu/iiif/image-api/compliance.html#level2",_l="http://library.stanford.edu/iiif/image-api/conformance.html#level0",hl="http://library.stanford.edu/iiif/image-api/conformance.html#level1",fs="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Nc="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",Fc="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",vs="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",_c="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",yc="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",js="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",Hr="http://iiif.io/api/image/1/level0.json",Fr="http://iiif.io/api/image/1/profiles/level0.json",kr="http://iiif.io/api/image/1/level1.json",xr="http://iiif.io/api/image/1/profiles/level1.json",ys="http://iiif.io/api/image/1/level2.json",_s="http://iiif.io/api/image/1/profiles/level2.json",jr="http://iiif.io/api/image/2/level0.json",fr="http://iiif.io/api/image/2/profiles/level0.json",ur="http://iiif.io/api/image/2/level1.json",cr="http://iiif.io/api/image/2/profiles/level1.json",xs="http://iiif.io/api/image/2/level2.json",Fs="http://iiif.io/api/image/2/profiles/level2.json",qa="level0",Ka="level1",Ts="level2",Va="http://iiif.io/api/image/2/level0",Pa="http://iiif.io/api/image/2/level1",Ds="http://iiif.io/api/image/2/level2",xa=[Ds,hs,fs,vs,js,ys,_s,xs,Fs,Ts],_a=[Va,Pa,Ds,Ul,Nl,hs,_l,hl,fs,Nc,Fc,vs,_c,yc,js,Hr,Fr,kr,xr,ys,_s,jr,fr,ur,cr,xs,Fs,qa,Ka,Ts],ya=_a;function Y(e){for(let t in e)(typeof e[t]>"u"||e[t]===null)&&delete e[t];return e}function f3(e){return Array.isArray(e)?e:e?[e]:[]}va=Object.defineProperty,ha=(e,t,n)=>t in e?va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rs=(e,t,n)=>(ha(e,typeof t!="symbol"?t+"":t,n),n),Ps=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function j3(e){if(typeof e>"u"||e===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw new Error("Array is not a valid entity");if(typeof e!="object")throw new Error(`${typeof e} is not a valid entity`);if(typeof e["@type"]=="string"){let t=Ps.indexOf(e["@type"]);if(t!==-1)return Ps[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw new Error("Resource type is not known")}ta=class Mo{constructor(e,t={}){Rs(this,"traversals"),Rs(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...t}}static all(e){return new Mo({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let n=[...(e.manifests||[]).map(e=>typeof e=="string"?{"@id":e,"@type":"sc:Manifest"}:e),...(e.collections||[]).map(e=>typeof e=="string"?{"@id":e,"@type":"sc:Collection"}:e),...e.members||[]],t=[],s=n.filter(e=>!t.includes(e["@id"])&&(t.push(e["@id"]),!0));delete e.collections,delete e.manifests,e.members=s}return e.manifests&&(e.manifests=e.manifests.map(e=>this.traverseManifest(typeof e=="string"?{"@id":e,"@type":"sc:Manifest"}:e))),e.collections&&(e.collections=e.collections.map(e=>this.traverseCollection(typeof e=="string"?{"@id":e,"@type":"sc:Collection"}:e))),e.members&&(e.members=e.members.map(e=>typeof e=="string"?e:e["@type"]==="sc:Collection"?this.traverseCollection(e):e["@type"]==="sc:Manifest"?this.traverseManifest(e):this.traverseUnknown(e))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(e=>this.traverseSequence(e))),e.structures&&(e.structures=e.structures.map(e=>this.traverseRange(e))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(e=>this.traverseCanvas(e))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(e=>this.traverseAnnotation(e))),e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let t=[...(e.ranges||[]).map(e=>typeof e=="string"?{"@id":e,"@type":"sc:Range"}:e),...(e.canvases||[]).map(e=>typeof e=="string"?{"@id":e,"@type":"sc:Canvas"}:e),...e.members||[]];delete e.ranges,delete e.canvases,e.members=t.length?t.map(e=>this.traverseUnknown(e)):0[0]}return e}traverseAnnotationList(e){let t=typeof e=="string"?{"@id":e,"@type":"sc:AnnotationList"}:e;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(t)),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(e=>this.traverseAnnotation(e))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(Array.isArray(e.resource)?e.resource=e.resource.map(e=>this.traverseContentResource(e)):e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&e.default!=="rdf:nil"&&(e.default=this.traverseContentResource(e.default)),e.item&&e.item!=="rdf:nil"&&(e.item=e.item.map(e=>this.traverseContentResource(e))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return e["@type"]==="oa:Choice"?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||typeof e=="string")return e;switch(j3(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"sc:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let n=Array.isArray(e),s=Array.isArray(e)?e:[e],t=[];for(let e of s)typeof e=="string"?t.push(this.traverseContentResource({"@id":e,"@type":"dctypes:Image"})):t.push(this.traverseContentResource(e));return!n&&!this.options.convertPropsToArray?t[0]:t}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let n=Array.isArray(e),s=Array.isArray(e)?e:[e],t=[];for(let e of s)t.push(this.traverseService(e));return!n&&!this.options.convertPropsToArray?t[0]:t}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&(typeof e.within=="string"||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&(typeof e.startCanvas=="string"?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&(typeof e.contentLayer=="string"?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,t){if(!Array.isArray(e))if(this.options.convertPropsToArray)e=[e];else return this.traverseType(e,t);return e.map(e=>this.traverseType(e,t))}traverseType(e,t){return t.reduce((e,t)=>{let n=t(e);return typeof n>"u"&&!this.options.allowUndefinedReturn?e:n},e)}},ea="http://library.stanford.edu/iiif/image-api/compliance.html#level1",Xi="http://library.stanford.edu/iiif/image-api/compliance.html#level2",Yi="http://library.stanford.edu/iiif/image-api/conformance.html#level1",qi="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Ki="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",Ui="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",Vi="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Bi="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",Hi="http://iiif.io/api/image/1/level1.json",Li="http://iiif.io/api/image/1/profiles/level1.json",Si="http://iiif.io/api/image/1/level2.json",Ci="http://iiif.io/api/image/1/profiles/level2.json",_i="http://iiif.io/api/image/2/level1.json",bi="http://iiif.io/api/image/2/profiles/level1.json",gi="http://iiif.io/api/image/2/level2.json",pi="http://iiif.io/api/image/2/profiles/level2.json",mi="level1",li="level2",ci="http://iiif.io/api/image/2/level1",si="http://iiif.io/api/image/2/level2",ni=[ci,si,ea,Xi,Yi,qi,Ki,Ui,Vi,Bi,Hi,Li,Si,Ci,_i,bi,gi,pi,mi,li],qt={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:""};function $3(e){if(typeof e=="string")return[e];if(!e)return[];let n=Array.isArray(e)?e:[e],t=[];for(let e of n){if(typeof e=="string"){t.push(e);continue}t.push({"@language":e["@language"]||e.language,"@value":e["@value"]||e.value})}return t}function xe(e,t="none"){if(!e)return{none:[""]};let s=$3(e),n={};for(let e of s){if(typeof e=="string"){n[t]=n[t]?n[t]:[],n[t].push(e||"");continue}if(!e["@language"]){n[t]=n[t]?n[t]:[],n[t].push(e["@value"]||"");continue}let o=e["@language"];n[o]=n[o]?n[o]:[],n[o].push(e["@value"]||"")}return Object.keys(n).length===0?{none:[""]}:n}function Go(e){if(Array.isArray(e))return Go(e.find(e=>typeof e=="string"));if(xa.indexOf(e)!==-1)return"level2";if(ni.indexOf(e)!==-1)return"level1";if(ya.indexOf(e)!==-1)return"level0";if(typeof e=="string")return e}function K3(e){let t=Array.isArray(e)?e:[e];for(let e of t)switch(e){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function q3(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function Ko(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}Wo=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function Hs(e){let n=e["@id"]||e.id,t=e["@type"]||e.type,s=e.profile||0[0],o=e["@context"]||0[0];if(s){let e=q3(s);if(e)return e}if(o){let e=K3(o);if(e)return e}if(t){if(Array.isArray(t)){if(t.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(t.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";t=t[0]}for(let e of["sc","oa","dcterms","dctypes","iiif"])if(t.startsWith(`${e}:`)){t=t.slice(e.length+1);break}switch(t){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(t&&Wo.indexOf(t)!==-1)return t;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||e.format==="application/pdf")return"Text";if(e.format.startsWith("application/"))return"Dataset"}return n&&(n.endsWith(".jpg")||n.endsWith(".png")||n.endsWith(".jpeg"))?"Image":t||"unknown"}Bo=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function Z3(e){let t=e.match(Bo);return t?t[0]:e}function J3(e,t="Rights/License",n="none"){let s=null,o=[],i=Array.isArray(e)?e:[e];for(let a of i){let e=a?Z3(a):0[0];if(e&&(e.indexOf("creativecommons.org")!==-1||e.indexOf("rightsstatements.org")!==-1)){e.startsWith("https://")?s=`http://${e.slice(8)}`:s=e;continue}e&&o.push({label:{[n]:[t]},value:{[n]:[e]}})}return[s,o]}Ho=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function th(e){if(e){let n=Array.isArray(e)?e:[e],t=[];for(let e of n)e==="http://iiif.io/api/presentation/2/context.json"&&t.push("http://iiif.io/api/presentation/3/context.json"),Ho.indexOf(e)===-1&&t.push(e);if(n.length)return t.length===1?t[0]:t}}function nh(e){return e?e.map(e=>({label:xe(e.label),value:xe(e.value)})):[]}$s=0;function Ro(e,t){let n=encodeURI(e.id||e["@id"]||"").trim();return n&&t?`${n}/${t}`:n||($s++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${$s}`)}function se(e){let t=[...e.behavior||[]];e.viewingHint&&t.push(e.viewingHint);let n;return Array.isArray(e.motivation)?n=e.motivation.map(Ko):e.motivation&&(n=Ko(e.motivation)),{"@context":e["@context"]?th(e["@context"]):0[0],id:(e["@id"]||Ro(e)).trim(),type:Hs(e),behavior:t.length?t:0[0],height:e.height?e.height:0[0],width:e.width?e.width:0[0],motivation:n,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:0[0],duration:0[0],timeMode:0[0]}}function ae(e){let[n,s]=J3(e.license),t=[...e.metadata?nh(e.metadata):[],...s];return{rights:n,metadata:t.length?t:0[0],label:e.label?xe(e.label):0[0],requiredStatement:e.attribution?{label:xe(qt.attributionLabel),value:xe(e.attribution)}:0[0],navDate:e.navDate,summary:e.description?xe(e.description):0[0],thumbnail:rh(e.thumbnail)}}function rh(e){return e&&(Array.isArray(e)?e:[e]).map(e=>typeof e=="string"?{id:e,type:"Image"}:(e.type==="unknown"&&(e.type="Image"),e))}function ch(e){if(!e.within)return;let n=Array.isArray(e.within)?e.within:[e.within],t=[];for(let s of n)if(typeof s=="string"){if(s)switch(e["@type"]){case"sc:Manifest":t.push({id:s,type:"Collection"});break}}else s["@id"]&&t.push({id:s["@id"],type:Hs(s)});return t.length?t:0[0]}function he(e){let t=e.related?Array.isArray(e.related)?e.related:[e.related]:[],n=e.contentLayer;return{provider:e.logo||t.length?[{id:qt.providerId,type:"Agent",homepage:t.length?[t[0]]:0[0],logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:0[0],label:xe(qt.providerName)}]:0[0],partOf:ch(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?f3(e.service):0[0],supplementary:n?[n]:0[0]}}function dh(e){return{chars:e.chars,format:e.format?e.format:0[0],language:e.language}}function Us(e,t){return e?typeof e=="string"?{id:e,type:t}:typeof e?.["@id"]=="string"?{id:e["@id"],type:t}:typeof e.id=="string"?{id:e.id,type:t}:null:null}function hh(e){let t={};if(e.first){let n=Us(e.first,"Collection");n&&(t.first=n)}if((e.total||e.total===0)&&(t.total=e.total),e.prev){let n=Us(e.prev,"Collection");n&&(t.prev=n)}if(e.next){let n=Us(e.next,"Collection");n&&(t.next=n)}return t}function mh(e){let t=[];for(let s of e){let n={...s};n.items&&n.items.length===0&&delete n.items,t.push(n)}return t}function fh(e){return Y({...se(e),...ae(e),...he(e),...hh(e),items:mh(e.members)})}function ph(e){let s=[],t=[],o,i;for(let n of e.sequences||[])n.canvases.length&&s.push(...n.canvases),n.behavior&&t.push(...n.behavior),n.viewingDirection&&(i=n.viewingDirection),n.startCanvas&&(o=n.startCanvas);let n=se(e);return t.length&&(n.behavior?n.behavior.push(...t):n.behavior=t),Y({...n,...ae(e),...he(e),viewingDirection:i,start:o,items:s,structures:gh(e.structures)})}function gh(e){if(!e)return e;let t=new Map;for(let n of e)t.set(n.id,n);let n=[];for(let s of e)if(s.items){let e=s.items.map(e=>typeof e=="string"?(n.push(e),t.get(e)||e):e&&e.id?(n.push(e.id),t.get(e.id)||e):e);s.items=e}return e.filter(e=>n.indexOf(e.id)===-1)}function vh(e){return Y({...se(e),...ae(e),...he(e),annotations:e.otherContent&&e.otherContent.length?e.otherContent:0[0],items:e.images&&e.images.length?[{id:Ro(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:0[0]})}function bh(e){return Y({...se(e),...ae(e),...he(e),items:e.resources&&e.resources.length?e.resources:0[0]})}function jh(e){return!e.canvases||e.canvases.length===0?{canvases:[],behavior:[]}:{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[],viewingDirection:e.viewingDirection,startCanvas:e.startCanvas}}function yh(e){function t(e){if(Array.isArray(e)){if(e.length>1)return{type:"List",items:e.map(t)};e=e[0]}if(typeof e=="string")return encodeURI(e).trim();if("@type"in e){let t;if(typeof e.full=="string")t=e.full;else if(e.full["@type"]==="dctypes:Image")t={id:e.full["@id"],type:"Image"};else if(e.full["@type"]==="sc:Canvas")t={id:e.full["@id"],type:"Canvas"};else throw new Error(`Unsupported source type on annotation: ${e.full["@type"]}`);return{type:"SpecificResource",source:t,selector:Xs(e.selector)}}return encodeURI(e["@id"]).trim()}return Y({...se(e),...ae(e),...he(e),target:t(e.on),body:Array.isArray(e.resource)?e.resource.map(wo):wo(e.resource)})}function wo(e){return e.type==="Choice"?e:yo(e)}function yo(e){let t=e;return Y({...se(t),...ae(t),...he(t),...dh(t)})}function Oh(e){let t=[];return e.default&&e.default!=="rdf:nil"&&t.push(e.default),e.item&&e.item!=="rdf:nil"&&t.push(...e.item),Y({...se(e),...ae(e),items:t})}function xh(e){return Y({...se(e),...ae(e),...he(e),items:e.members})}function Ch(e){let{"@id":s,"@type":a,"@context":n,profile:o,...i}=e,t={};return s&&(t["@id"]=s),t["@type"]=Hs(e),t["@type"]==="unknown"&&(n&&n.length&&(t["@context"]=n),t["@type"]="Service"),o&&(t.profile=Go(o)),Y({...t,...i})}function Eh(e){return Y({...se(e),...ae(e),...he(e)})}jo=new ta({collection:[fh],manifest:[ph],canvas:[vh],annotationList:[bh],sequence:[jh],annotation:[yh],contentResource:[yo],choice:[Oh],range:[xh],service:[Ch],layer:[Eh]});function w0(e){return e&&e["@context"]&&(e["@context"]==="http://iiif.io/api/presentation/2/context.json"||e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||e["@context"]==="http://www.shared-canvas.org/ns/context.json")||e["@context"]==="http://iiif.io/api/image/2/context.json"||e["@id"]&&e["@type"]==="sc:Collection"||e["@id"]&&e["@type"]==="sc:Manifest"?(e["@context"]||(e["@context"]="http://iiif.io/api/presentation/2/context.json"),jo.traverseUnknown(e)):e}function Xs(e){if((Array.isArray(e["@type"])&&e["@type"].includes("oa:SvgSelector")||e["@type"]=="oa:SvgSelector")&&("chars"in e||"value"in e))return{type:"SvgSelector",value:"chars"in e?e.chars:e.value};if(e["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:e.value};if(e["@type"]==="oa:Choice")return[Xs(e.default),...(Array.isArray(e.item)?e.item:[e.item]).map(Xs)];if(e["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in e?e.region:0[0],rotation:"rotation"in e?e.rotation:0[0]};throw new Error(`Unsupported selector type: ${e["@type"]}`)}go=w0;function Qs(e){var n,s,o,i,a;const{related:c}=e,{requiredStatement:r}=e,{viewingDirection:l}=e,t=go(e);return e["@context"]==="http://iiif.io/api/presentation/2/context.json"&&([].concat(c||[]).forEach(e=>{t.homepage=t.homepage||[],t.homepage.push(typeof e=="string"?e:{id:e["@id"],label:e.label,format:e.format})}),(n=t.provider)==null||n.forEach((e,n)=>{e.homepage&&(t.provider[n].homepage=e.homepage.filter(e=>e.id!=="http://example.org/undefined/1"&&!t.homepage.find(t=>t.id===e.id)))}),((a=(i=(o=(s=t.provider)==null?0[0]:s[0])==null?0[0]:o.label)==null?0[0]:i.none)==null?0[0]:a[0])==="Unknown"&&(delete t.provider[0].label,r&&!t.requiredStatement&&(t.requiredStatement=r)),t.viewingDirection=l),t}function Th(e={}){const t=vt({annotations:[],annotationsAvailable:null,collection:null,errors:new Set,loading:0,manifest:e.manifest?Qs(e.manifest):null,options:e.options||{},readyPromises:[],rootElement:e.rootElement||null,urlUpdateTimeout:null,annotationsActive:_(()=>t.options.view==="text"||!t.options.view&&!t.isContainerWidthAtLeast("medium")),currentStructure:_(()=>{if(!(t.manifest.structures instanceof Array))return!1;const s=[];t.options.pages.filter(e=>e>0).forEach(e=>{s.push(t.manifest.items[e-1].id)});const{length:o}=t.manifest.structures;let e,n;for(let i=o-1;i>=0;i-=1){const a=t.manifest.structures[i],{items:r}=a;if(r!=null&&r.some(e=>s.includes(e.id))){const t=a.items.length;if((t<n||!n)&&(e=i,n=t,n===0))break}}return typeof e=="number"&&e>=0&&t.manifest.structures[e]}),isCustomPageView:_(()=>{const{pages:e}=t.options;return e?.length!==1&&(e.length>2||!(e[0]<1||e[1]<1)&&(e[0]%2===1||e[1]%2===0))}),isFirstPage:_(()=>t.options.pages[0]===1||t.options.pages[1]===1),isLastPage:_(()=>t.options.pages.at(-1)===t.pageCount),isLastSection:_(()=>{var s;const{pages:e}=t.options,n=e.length-1;return(e[n]?e[n]:e[n-1])>=((s=t.sections[t.sections.length-1])==null?0[0]:s.firstPage)}),isReversed:_(()=>["right-to-left","bottom-to-top"].includes(t.manifest.viewingDirection)),isVertical:_(()=>["top-to-bottom","bottom-to-top"].includes(t.manifest.viewingDirection)),pageCount:_(()=>{var e,n;return(n=(e=t.manifest)==null?0[0]:e.items)==null?0[0]:n.length}),sections:_(()=>{if(!t.manifest.structures)return[];const e=[];return t.manifest.structures.forEach(n=>{if(!n.items){e.push({firstPage:1,lastPage:t.pageCount});return}const s=n.items[0].id,o=t.manifest.items.findIndex(e=>e.id===s)+1,i=n.items[n.items.length-1].id,a=t.manifest.items.findIndex(e=>e.id===i)+1;e.push({firstPage:o,lastPage:a})}),e}),structures:_(()=>{var o,i;if((o=t.manifest)==null||!o.structures)return[];if(t.manifest.structures.some(e=>e.type==="Range"))return t.manifest.structures.length===1&&(i=t.manifest.structures[0].behavior)!=null&&i.includes("top")?t.manifest.structures[0].items||[]:t.manifest.structures;const e=[],n=t.manifest.items,r=t.manifest.structures.length;for(let o=0;o<r;o+=1){const s={...t.manifest.structures[o]};if(s.items){{const e=s.items[0].id;s.firstPage=n.findIndex(t=>t.id===e)+1;const t=s.items.at(-1).id;if(s.lastPage=n.findIndex(e=>e.id===t)+1,!n[s.firstPage-1])continue}}else n!=null&&n[0]&&(s.firstPage=1,s.lastPage=t.pageCount);s.level=0,s.pageCount=s.lastPage-s.firstPage+1,e.push(s)}let s=0;for(let n=0;n<e.length;n+=1){const t=e[n];for(let i=n+1;i<e.length;i+=1){const o=e[i];o.firstPage>=t.firstPage&&o.lastPage<=t.lastPage&&(t.items=(t.items||[]).filter(e=>e.label),t.items.push(o),o.level+=1,s=Math.max(s,o.level))}}const a=(e,t=0)=>{for(let n=0;n<e.length;n+=1){const s=e[n];s.level>t?e.splice(n,1):s.items&&a(s.items,t+1)}};for(let t=0;t<s;t+=1)a(e);return e}),addError(e){t.errors.add(e),console.warn(e)},clearErrors(){t.errors.clear()},async fetchJson(e){t.loading+=1;const n=await fetch(e).catch(e=>(t.loading=0,Promise.reject(e)));if(!n.ok)return t.loading=0,Promise.reject(new Error(n.status));const s=await n.json().catch(e=>(t.loading=0,Promise.reject(e)));return t.loading>0&&(t.loading-=1),s},async fetchText(e){t.loading+=1;const n=await fetch(e).catch(e=>(t.loading=0,Promise.reject(e)));if(!n.ok)return console.warn("Error loading annotation"),"";const s=await n.text().catch(e=>(t.loading=0,Promise.reject(e)));return t.loading>0&&(t.loading-=1),s},getFacingPage(e){var n,s,o,i,a;return(n=t.manifest.items[e-1].behavior)!=null&&n.includes("non-paged")?-1:e===1?0:e%2===1?(o=(s=t.manifest.items[e-1-1])==null?0[0]:s.behavior)!=null&&o.includes("non-paged")?-1:e-1:(a=(i=t.manifest.items[e+1-1])==null?0[0]:i.behavior)!=null&&a.includes("non-paged")?-1:e<t.pageCount?e+1:0},getPageLabel(e,n){const s=t.localize(n,"");return s?t.options.pageLabelFormat.replace("P",e).replace("L",s):t.options.pageLabelFormat.includes("P")?`${e}`:"—"},getStartPages(){var n;let e=1;if(t.manifest.items&&t.manifest.start){const n=t.manifest.items.findIndex(e=>e.id===t.manifest.start.id);e=n>=0?n+1:1}return t.isContainerWidthAtLeast("medium")&&(n=t.manifest.behavior)!=null&&n.includes("paged")?[e,t.getFacingPage(e)].sort():[e]},getThumbnailUrl(e,n,s=0,o=0){var c,l,d,u,h,m,f;const p=t.manifest.items[e-1],i=(c=p.thumbnail)==null?0[0]:c[0];if(i!=null&&i.id&&i?.width>=n)return i.id;const r=(h=(u=(d=(l=p.items)==null?0[0]:l[0])==null?0[0]:d.items)==null?0[0]:u[s])==null?0[0]:h.body,a=r!=null&&r.items?r.items[o]:r,g=i?.service||((m=a?.source)==null?0[0]:m.service)||a?.service;if(g){const e=[].concat(g)[0],o=["ImageService2","ImageService3"].includes(e.type||e["@type"])?"default":"native",s=e.id||e["@id"];let t=n;i!=null&&i.service&&((f=e.sizes)==null||f.forEach(e=>{e.width>=t&&e.width<=t*2&&(t=e.width)}));const a="jpg",r=s.at(-1)==="/"?"":"/";return`${s}${r}full/${t},/0/${o}.${a}`}return a?.type==="Image"?i?.id||a?.id:""},goToFirstPage(){t.setPage(1)},goToNextPage(){const e=t.options.pages.at(-1);e<t.pageCount&&t.setPage(e+1)},goToNextSection(){const{pages:e}=t.options,s=e.length-1,o=e[s]?e[s]:e[s-1];let n=0;for(;o>=t.sections[n].firstPage||o&&o>=t.sections[n].firstPage;)n+=1;t.setPage(t.sections[n].firstPage)},goToLastPage(){t.setPage(t.pageCount)},goToPreviousPage(){const e=t.options.pages.find(e=>e>0);e>1&&t.setPage(e-1)},goToPreviousSection(){const{pages:n}=t.options,s=n[0]?n[0]:n[1];let e=t.sections.length-1;for(;s<=t.sections[e].firstPage||s&&s<=t.sections[e].firstPage;)e-=1;t.setPage(t.sections[e].firstPage)},isContainerWidthAtLeast(e){return t.rootElement&&window.getComputedStyle(t.rootElement,"::after").content.includes(e)},loadAnnotations(){var e;t.annotationsAvailable=null,(e=t.options.pages)==null||e.filter(e=>e>0).forEach(async e=>{if(t.annotations[e])return;const s=t.manifest.items[e-1];if(!("annotations"in s)){t.annotationsAvailable=!1;return}t.annotations[e]=[];let n=s.annotations[0].items;if(!n){const e=s.annotations[0].id;try{const s=await t.fetchJson(e);n=s.resources||s.items}catch(e){const n=e.response?e.response.statusText:e.message;console.warn(`Could not load annotations: ${n}`),t.annotationsAvailable=!1;return}}n instanceof Array&&n.forEach(async(n,s)=>{var a,r,c,l,d,u,h,m,f,p,g,j;let o;const v=n.id||n["@id"]||((c=n.resource)==null?0[0]:c.id)||((j=n.resource)==null?0[0]:j["@id"]);if((g=n.resource)!=null&&g.chars)o=n.resource.chars;else if((a=(m=n.resource)==null?0[0]:m[0])!=null&&a.chars)o=(d=(l=n.resource)==null?0[0]:l[0])==null?0[0]:d.chars;else if((u=n.resource)!=null&&u.label)o=`<i>${n.resource.label}</i>`;else{const e=[].concat(n.body);o=(await Promise.all(e.map(async e=>{var n,s,o,i;if(e?.type==="Image")return`<img src="${e.id}" alt="">`;if(e!=null&&e.value)return e.value;if((n=e?.body)!=null&&n.value)return e.body.value;const a=((s=e?.items)==null?0[0]:s[0].id)||((o=e?.body)==null?0[0]:o.id)||((i=e?.body)==null?0[0]:i["@id"])||e?.id||v;return vn(a)?t.fetchText(a):""}))).join("<br>")}if(!o)return;(n.format||((h=n.body)==null?0[0]:h.format))==="text/plain"&&(o=o.replace(/\n/g," <br>")),t.annotationsAvailable=!0;const b={id:v,html:Nt(o)},y=((f=(r=n.on)==null?0[0]:r.selector)==null?0[0]:f.value)||(typeof n.on=="string"?n.on:null)||((p=n.target)==null?0[0]:p.id)||n.target||"",i=K1(y);i?.length===4&&(b.coords=i),t.annotations[e][s]=b})})},initOptions(e){let n={};if(t.options.urlQueryKey)try{const e=new URLSearchParams(window.location.search);n=JSON.parse(e.get(t.options.urlQueryKey))||{}}catch{}n.view==="fulltext"?n.view="text":["scan",""].includes(n.view)&&(n.view=null),n.pages&&!Mr(n.pages,t.pageCount)&&(t.addError("Invalid pages, reset to start page"),n.pages=null),t.options.urlQueryParams.forEach(e=>{t.options[e]=n[e]??t.options[e]}),t.options.pages=e&&e.type==="popstate"?n.pages||t.getStartPages():n.pages||t.options.pages||t.getStartPages(),t.options.pan=n.panX||n.panY?{x:n.panX,y:n.panY}:n.pan||t.options.pan,t.options.rotation=parseInt(n.rotation,10)||t.options.rotation,t.options.view=n.view||n.view===""?n.view:t.options.view,t.options.zoom=parseFloat(n.zoom)||t.options.zoom},loadManifest(e,n={}){const s=ds();return t.fetchJson(e).then(async o=>{const i=Qs(o);if(n.expectedType&&i.type!==n.expectedType){const e=`Expected manifest of type ${n.expectedType}, but got ${i.type}`;return t.addError(e),s.reject(e),s}if(t.manifest=null,await ln(),i.type==="Manifest")return t.manifest=i,t.initOptions(),window.addEventListener("popstate",t.initOptions),n.reset&&t.updateOptions({childManifestUrl:e,pages:t.getStartPages(),pan:{},rotation:null,view:t.isContainerWidthAtLeast("medium")?"collection":null,zoom:null}),s.resolve(),s;if(i.type==="Collection"){t.collection=i;const o=new URLSearchParams(window.location.search);let n={};try{n=JSON.parse(o.get(t.options.urlQueryKey))||{}}catch{}let e="";if(t.options.urlQueryParams.includes("childManifestUrl")&&n.childManifestUrl?e=n.childManifestUrl:t.collection.manifests&&t.options.childManifestAutoloaded&&(e=t.collection.manifests[0].id),e)await t.loadManifest(e,{expectedType:"Manifest"}),t.updateOptions({childManifestUrl:e});else{const e=n.view||t.options.view;t.updateOptions({view:["collection","help","info"].includes(e)?e:"collection"})}return s.resolve(),s}const a="Please provide a valid IIIF Presentation API manifest";return t.addError(a),s.reject(a),s},e=>{const n=`Error loading IIIF manifest: ${e.response&&(e.response.statusText||e.response.data)||e.message}`;return t.addError(n),s.reject(n),s})},localize(e){if(!t.options.language)throw new Error("language not set");if(!e)return"";if(typeof e=="string")return e;const n=e[t.options.language]||e[t.options.fallbackLanguage]||Object.values(e)[0]||"";return([].concat(n).join("\xA0\xB7 ")||"").trim()},setPage(e){var s;let n=[].concat(e);if(!Mr(n,t.pageCount))throw new RangeError("Invalid pages");return n.length===1&&((s=t.options.pages)==null?0[0]:s.length)===2&&!this.isCustomPageView&&(n=[n[0],t.getFacingPage(n[0])].sort()),t.updateOptions({pages:n}),n},toggleAnnotationId(e){const n={annotationId:t.options.annotationId===e?null:e,annotationsVisible:t.options.annotationId?null:t.annotationsVisible};n.annotationId&&!t.isContainerWidthAtLeast("medium")&&(n.view=t.options.view?null:"text"),t.updateOptions(n)},updateOptions(e){clearTimeout(t.urlUpdateTimeout),Object.assign(t.options,e),e.pages&&t.clearErrors(),t.options.urlQueryKey&&(t.urlUpdateTimeout=setTimeout(()=>{const n={};t.options.urlQueryParams.forEach(e=>{const s=t.options[e];s===null||e==="layers"&&!s.some(Boolean)||e==="pages"&&s.toString()===t.getStartPages().toString()||typeof s=="object"&&!Object.keys(s).length?delete n[e]:n[e]=t.options[e]});const s=new URL(window.location);Object.keys(n).length?s.searchParams.set(t.options.urlQueryKey,JSON.stringify(n)):s.searchParams.delete(t.options.urlQueryKey),window.history&&(e.pages||e.view?window.history.pushState({},"",s):window.history.replaceState({},"",s))},100))}});return t}ao={convertManifest:Qs,install:(e,t={})=>{e.config.globalProperties.$store=new Th(t)}},window.Tify=function(e={}){if(this.options={...JSON.parse(JSON.stringify(jd)),...e},!this.options.translationsDirUrl)try{const{url:e}=$2;this.options.translationsDirUrl=`${e.slice(0,e.lastIndexOf("/"))}/translations`}catch{}let t=null;this.ready=new Promise((e,n)=>{t={resolve:e,reject:n}});const s=this;this.app=ba({render:()=>D3(_d,{readyPromise:t})}).use(pd,{instance:s}).use(Jl).use(Gl).use(ao,{options:this.options});let n=!1;this.mount=e=>{if(n)throw new Error("TIFY is already mounted");const t=typeof e=="string"?document.querySelector(e):e;if(!t)throw new Error("Container element not found");this.app.mount(t),n=!0},this.destroy=()=>{this.app.unmount()},this.options.container&&this.mount(this.options.container)},Dh=window.Tify;function Nh(e,t,n="en"){document.documentElement.lang!==0[0]&&(n=document.documentElement.lang);const s=new Tify({container:e,manifestUrl:t,language:n,translationsDirUrl:"/tify/translations/"});return s}window.iiifPresentationViewer=Nh})()